{"version":3,"sources":["webpack:///./public/assets/Pearson_ILabs_Loading.gif","webpack:///./src/utils/User/sample-avatar.jpg","webpack:///./src/app/constants.js","webpack:///./src/app/reducer.js","webpack:///./src/app/styles.js","webpack:///./src/utils/theme.js","webpack:///./src/components/Spinner/SpinnerWrapper.js","webpack:///./src/components/Spinner/CircleBackground.js","webpack:///./src/components/Spinner/CirclePath.js","webpack:///./src/components/Spinner/index.js","webpack:///./src/components/Dialog/index.js","webpack:///./src/utils/colors.js","webpack:///./src/components/HistoryNavigation/HistoryNavigation.js","webpack:///./src/components/HistoryNavigation/index.js","webpack:///./src/components/SidebarApp.js","webpack:///./src/components/Icon.js","webpack:///./src/hooks/useId.js","webpack:///./src/utils/transition.js","webpack:///./src/components/Tooltip.js","webpack:///./src/components/AppSidebar.js","webpack:///./src/components/Dropdown.js","webpack:///./src/hooks/usePrevious.js","webpack:///./src/components/Header.js","webpack:///./src/utils/childContainerTransitions.js","webpack:///./src/components/CoursewareChild.js","webpack:///./src/hooks/useCDPScoreAndProgress.js","webpack:///./src/components/Score.js","webpack:///./src/utils/User/index.js","webpack:///./src/components/HeaderPlugin.js","webpack:///./src/hooks/useCDPSelectedChild.js","webpack:///./src/components/Loader.js","webpack:///./src/app/index.js","webpack:///./src/index.js","webpack:///./src/hooks/useWindowSize.js"],"names":["module","exports","__webpack_require__","p","CONTEXT_LEARNER","CONTEXT_HISTORY","BUILTIN_APP","CDP_EVENT_NAMES","SCREEN_SCROLL","LOADER_NONE","LOADER_DEFAULT","initialState","appSidebarOpen","currentApp","configLoaded","user","context","config","title","apps","style","reducer","state","action","type","hasValue","undefined","value","_extends","console","log","SkipToMain","styled","a","attrs","className","_templateObject","props","theme","surfaceColor","textColor","Container","div","_templateObject2","bodyFont","isLoading","ContentViewport","_templateObject3","curveFastoutSlowin","GlobalStyles","createGlobalStyle","_templateObject4","backgroundColor","utils_theme","laptop","tablet","mobile","maxWidth","maxWidthLaptop","appSidebarWidthDesktop","appSidebarWidthLaptop","appSidebarWidthTablet","appSidebarMobileOffset","appTabsSidebarWidth","tooltipColor","SpinnerWrapper","svg","SpinnerWrapper_templateObject","CircleBackground","circle","CircleBackground_templateObject","CirclePath","CirclePath_templateObject","color","xsmall","small","Wrapper","Spinner_templateObject","_ref","react_default","createElement","Spinner_CircleBackground","cx","cy","r","fill","strokeWidth","strokeMiterlimit","Spinner","Spinner_SpinnerWrapper","viewBox","Spinner_ref2","Spinner_CirclePath","Spinner_extends","defaultProps","xmlns","height","width","d","Dialog","description","onClose","_ref$buttons","buttons","children","modalRoot","document","getElementById","ReactDOM","createPortal","DialogContainer","DialogInnerContainer","Header","Title","id","IconContainer","onClick","Dialog_ref2","Text","dangerouslySetInnerHTML","__html","DialogFooter","map","_ref3","label","primary","Button","key","classPrefix","tabindex","role","aria-modal","aria-labelledby","aria-describedby","Dialog_templateObject","Dialog_templateObject2","Dialog_templateObject3","footer","Dialog_templateObject4","_templateObject5","button","_templateObject6","_ref4","clear","secondary","_templateObject7","_ref5","fontWeight","_templateObject8","formatColorArray","colorString","includes","hex","result","exec","parseInt","hexToRgba","replace","split","length","concat","rgba","opacity","colors","setOpacityOfRgba","finalComma","lastIndexOf","slice","defaultAccessibilityProps","tabIndex","fillRule","clipRule","HistoryNavigation","restartEnabled","onClickRestartLesson","onClickNavigateScreen","historyData","isEnabled","isEnterOrSpace","e","which","handleMenuItemClick","screen","HistoryContainer","HistoryNavigation_extends","HistoryHeader","HistoryContentContainer","_ref2","segmentTitle","screens","HistoryContentSection","HistoryContentHeader","isActive","i","HistoryContentItem","aria-label","isCurrent","isFirst","onKeyPress","preventDefault","handleMenuItemKeyPress","HistoryRestartButton","HistoryNavigation_ref3","HistoryNavigation_ref4","aside","HistoryNavigation_templateObject","h2","HistoryNavigation_templateObject2","_ref6","section","HistoryNavigation_templateObject3","HistoryNavigation_templateObject4","h3","HistoryNavigation_templateObject5","_ref7","titleFont","_ref8","HistoryNavigation_templateObject6","_ref9","_ref10","isTitle","_ref11","primaryColor","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","HistoryNavigation_templateObject7","_ref18","_ref19","_ref20","PATHWAY_TYPES","components_Spinner","_ref$historyNavigatio","historyNavigation","cdp","routeSubscriptionRef","useRef","pathwaySubscriptionRef","subPathwaySubscriptionRef","_useState","useState","menuItems","setMenuItems","_useState2","currentRouteId","setCurrentRouteId","_useState3","showRestartDialog","setShowRestartDialog","_useState4","isRestartingLesson","setIsRestartingLesson","_useState5","pathwayType","setPathwayType","useEffect","initNavigation","_asyncToGenerator","regenerator_default","mark","_callee","route","pathways","_routeSubscription","menuItemsFromPathway","routeSubscription","pathwaySubscription","currRoute","wrap","_context","prev","next","get","sent","Promise","all","subscribe","_handleCDPRouteChange","current","getCoursewareData","abrupt","_handlePathwayChange","stop","apply","this","arguments","unsubscribe","_setCurrentMenuItem","items","currRouteId","hasMatchingScreen","find","elementId","updatedMenuItems","menuItem","components_HistoryNavigation_extends","_callee5","pathwayState","resetMenuItems","subActivityId","newMenuItems","history","subHistory","pathwayPromises","historyWithSubPromises","prevMenuItem","historyItem","pathwaysCourseware","_context5","courseware","progress","t0","reverse","_callee3","_context3","push","_callee2","resolve","subActivityHistory","_context2","elementType","_x5","_x4","t1","t2","t3","call","evaluationId","_callee4","pathwayCoursewareState","_context4","_x6","_x","_x2","_x3","_callee7","currentRoute","_context7","findIndex","itemId","_callee6","newRoute","newPathway","_context6","_x8","_x7","_callee9","coursewarePromises","_context9","_callee8","_context8","_x10","_x9","onClickToggleRestartDialog","restartPopupMessage","_callee10","currPathways","_context10","learner","restart","set","warn","_ref21","_callee11","_ref22","_context11","_x11","computedMenuItems","segments","sliceFrom","item","sliceTo","numberOfScreens","err","convertHistoryToSegmentStructure","navTitle","components_Dialog","components_HistoryNavigation_HistoryNavigation","allowRestart","SidebarApp","appContainerRef","useCdpChildContainer","childId","childType","PLUGIN_TYPES","LESSON","transitions","enter","TRANSITION_TYPES","NONE","exit","SidebarAppContainer","ref","SidebarApp_templateObject","Icon","icon","_objectWithoutProperties","Icons","navigator","Icon_extends","Icon_ref2","competency","Icon_ref3","help","Icon_ref4","note","Icon_ref5","bookmark","Icon_ref6","discussion","Icon_ref7","dropdown","Icon_ref8","account","Icon_ref9","menu","Icon_ref10","check","Icon_ref11","chevron-right","Icon_ref12","Icon_ref13","close","Icon_ref14","time","propTypes","PropTypes","string","isRequired","baseId","genId","visibleStatus","isVisible","status","ReflowTransition","onEnter","rest","transition_objectWithoutProperties","Transition","transition_extends","node","offsetHeight","Tooltip","_props$position","position","_props$offset","offset","text","visible","setVisible","rect","setRect","isTouchEvent","setIsTouchEvent","elementRef","tooltipId","setId","useId","getBoundingClientRect","onTouchStart","showTooltip","hideTooltip","Fragment","React","Children","child","cloneElement","onMouseEnter","onMouseLeave","onFocus","onBlur","mountOnEnter","unmountOnExit","in","timeout","TooltipContainer","Tooltip_extends","body","top","bottom","window","innerHeight","left","right","innerWidth","getPosition","Tooltip_templateObject","css","Tooltip_templateObject2","Tooltip_templateObject3","Tooltip_templateObject4","Tooltip_templateObject5","Tooltip_templateObject6","Tooltip_templateObject7","appIcons","name","AppSidebar","setCurrentApp","AppSidebar_objectWithoutProperties","currentTabIndex","app","showHistoryNavigation","showHistoryNav","appButtons","AppSidebar_extends","itemName","AppSidebarContainer","AppSidebarTabs","_ref2$ariaLabel","ariaLabel","AppSidebarTabButton","setApp","data-selected","AppSidebarTabIcon","components_Icon","AppSidebarTabIndicator","AppSidebarContent","components_SidebarApp","components_HistoryNavigation","AppSidebar_templateObject","AppSidebar_templateObject2","AppSidebar_templateObject3","AppSidebar_templateObject4","alignEnd","span","AppSidebar_templateObject5","transform","AppSidebar_templateObject6","tabHeight","Dropdown","selectionIndex","setSelectionIndex","expanded","setExpanded","prevExpanded","usePrevious","dropdownButtonRef","dropdownMenuRef","dropdownItemsRef","setTimeout","focus","prefix","Math","random","toString","substr","focusableChildrenTypes","DropdownMenuItem","isFocusableChildType","getFocusableMenuChildren","filter","DropdownContainer","Dropdown_objectWithoutProperties","buttonRectRef","setPosition","focusableChildren","requestAnimationFrame","windowWidth","windowHeight","buttonRect","handleOuterClick","event","contains","target","addEventListener","removeEventListener","DropdownMenuContainer","Dropdown_extends","onKeyDown","nextIndex","isOutside","relatedTarget","isButton","focusIndex","indexOf","itemRef","createRef","index","selected","DropdownMenuItemElement","Dropdown_templateObject","Dropdown_templateObject2","DropdownButtonElement","aria-haspopup","Dropdown_templateObject3","Dropdown_templateObject4","active","Dropdown_templateObject5","getUserNameInitials","avatarSmall","givenName","familyName","charAt","HeaderContainer","header","Header_templateObject","styles","padding","shadow","headerHidden","HeaderLogo","Header_templateObject2","HeaderLogoImage","img","Header_templateObject3","HeaderAvatarButton","buttonId","aria-expanded","Header_templateObject4","HeaderAvatar","Header_templateObject5","HeaderMenuButton","Header_templateObject6","HeaderMenuButtonIcon","Header_templateObject7","Header_ref3","HeaderTitle","h1","Header_templateObject8","titleSize","Spacer","_templateObject9","Header_ref4","PluginWrapper","_templateObject10","_this","logo","disabledMenu","showTitle","toggleSidebar","hideOnScroll","Header_objectWithoutProperties","previousScrollPositionRef","userNameInitials","setHeaderHidden","handleScroll","headerHeight","screenScrollTop","_event$screenContentT","screenContentTop","scrollDelta","subscription","Header_asyncToGenerator","Header_extends","stopPropagation","src","alt","altText","Header_ref5","Header_ref6","handleChildTransitions","childContainerTransitions_asyncToGenerator","unformattedLessonTransition","lessonTransition","screenTransition","reformatSchemaTransition","then","mergeTransitions","schemaTransition","Object","entries","reduce","accTransition","_extends2","direction","_ref2$","animation","customKeyframes","childContainerTransitions_objectWithoutProperties","childContainerTransitions_extends","MAX_POLLING_ATTEMPTS","POLLING_INTERVAL","CoursewareChild","childContext","isLessonLoaded","CoursewareChild_objectWithoutProperties","useContext","AppContext","localContext","publish","checkLessonReady","attemptsLeft","screenDiv","Array","from","querySelectorAll","iframe","contentDocument","documentElement","scrollHeight","every","ChildContainer","CoursewareChild_extends","CoursewareChild_templateObject","initialProgress","attempt","completion","score","useScoreAndProgress","coursewareId","setProgress","getData","useCDPScoreAndProgress_asyncToGenerator","handleProgressChange","updatedProgress","register","ScoreWrapper","Score_templateObject","User","PluginContainer","HeaderPlugin_templateObject","memo","pluginId","COMPONENT","cdpContext","useSelectedChild","pathToChildren","setState","currentChildren","setCurrentChildren","showingCurrentFeedback","setShowingCurrentFeedback","subscribeToCDP","useCDPSelectedChild_asyncToGenerator","handleChildrenChange","handleShowingCurrentFeedbackChange","handleHistoryChange","handleRouteChange","prevState","useCDPSelectedChild_extends","newShowingCurrentFeedback","historyLists","historyWithSub","subscriptions","subscribeLoaded","newState","JSON","stringify","hasNoChildren","evalId","subTarget","routeMap","routeToMap","historyMap","historyToMap","isCompleted","firstChildInRoute","determineCurrentChild","flat","acc","_route$ancestry$filte","ancestry","_extends3","Loader","LoaderContainer","loaderBackground","fadeIn","fadeOut","LoaderImageContainer","loaderOption","LoaderImageAsset","iLabsLoader","Loader_ref","visibility","transition","Loader_templateObject","Loader_templateObject2","Loader_templateObject3","createContext","href","useCDPScoreAndProgress","render","globalTheme","setGlobalTheme","loggingCDP","setLoggingCDP","_useReducer","useReducer","dispatch","windowSize","isClient","_typeof","getSize","useCallback","setWindowSize","handleResize","useWindowSize","subscriptionRef","themeSubscriptionRef","viewportRef","setIsLoading","checkLoader","isScreenReady","isThemeReady","isTimeOut","childInformation","handleStateChange","app_asyncToGenerator","handleThemeChange","themeObj","getDefaultApp","themeSubscription","timeOut","__CDP","loader","init","getUser","destroy","app_ref6","_ref7$apps","pathway","_ref7$loader","showHeaderTitle","headerPluginId","headerPlugin","sidebarApps","_loader$loaderOption","styled_components_browser_esm","app_extends","appTheme","Provider","Helmet","cssUrl","rel","app_ref8","app_ref9","components_AppSidebar","showHeader","components_Header","components_HeaderPlugin","showScore","app_ref10","components_CoursewareChild","querySelector"],"mappings":"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","file":"app.68599e7d.js","sourcesContent":["module.exports = __webpack_public_path__ + \"Pearson_ILabs_Loading.9eb3be33.gif\";","module.exports = __webpack_public_path__ + \"sample-avatar.9837a8a8.jpg\";","export const CONTEXT_LEARNER = 'LEARNER';\nexport const CONTEXT_HISTORY = 'HISTORY';\nexport const BUILTIN_APP = 'Navigation';\nexport const CDP_EVENT_NAMES = {\n    SCREEN_SCROLL: 'screenScroll'\n};\n\n//Loader constants\nexport const LOADER_NONE = 'none';\nexport const LOADER_DEFAULT = 'default';\nexport const LOADER_ILABS = 'ilabs';","import {CONTEXT_LEARNER} from './constants';\n\nexport const initialState = {\n  appSidebarOpen: false,\n  currentApp: '',\n  configLoaded: false,\n  user: null,\n  context: CONTEXT_LEARNER,\n  config: {\n    title: '',\n    apps: [],\n    style: {},\n  }\n};\n\nexport function reducer(state, action) {\n  switch (action.type) {\n    case 'toggleAppSidebar':\n      const hasValue = action.value !== undefined;\n      return { ...state, appSidebarOpen: hasValue ? action.value : !state.appSidebarOpen };\n    case 'setCurrentApp':\n      return { ...state, currentApp: action.value };\n    case 'setUser':\n      return { ...state, user: action.value };\n    case 'setConfigState':\n      return { ...state, config: action.value };\n    // case 'setChildState':\n    //   return { ...state, ...action.value };\n    case 'setContext':\n      return { ...state, context: action.value };\n    case 'setConfigLoaded':\n      return { ...state, configLoaded: true };\n    default:\n      console.log(`${action.type} not handled by plugin reducer`);\n      return state;\n  }\n}\n","import styled, { createGlobalStyle } from 'styled-components';\n\nexport const SkipToMain = styled.a.attrs({\n  className: 'skip-to-main',\n})`\n  position: absolute;\n  clip: rect(0 0 0 0);\n  top: auto;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  z-index: 4096;\n\n  &:focus {\n    position: absolute;\n    clip: auto;\n    top: 10px;\n    left: 10px;\n    width: auto;\n    height: auto;\n    background: ${props => props.theme.surfaceColor};\n    padding: 8px 12px;\n    border-radius: 4px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: ${props => props.theme.textColor};\n    box-shadow: 0 0 8px 0 rgba(0, 0, 0, 0.2);\n    text-decoration: none;\n    font-size: 14px;\n    font-weight: 500;\n  }\n`;\n\nexport const Container = styled.div.attrs({\n  className: 'app__container',\n})`\n  height: 100%;\n  position: relative;\n  font-family: ${props => props.theme.bodyFont};\n  display: flex;\n  justify-content: flex-start;\n  flex-direction: row;\n  opacity: ${props => props.isLoading ? 0 : 1};\n`;\n\nexport const ContentViewport = styled.div.attrs(props => ({\n  className: `content__viewport content__viewport--${props.appSidebarOpen ? 'open' : 'closed'}`,\n}))`\n  flex: 1;\n  transition: left 0.5s ${props => props.theme.curveFastoutSlowin};\n  overflow-x: hidden;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n  position: relative;\n`;\n\nexport const GlobalStyles = createGlobalStyle`\n  html, body, #app {\n    width: 100%;\n    height: 100%;\n  }\n\n  body {\n    margin: 0;\n    font-family: ${props => props.theme.bodyFont};\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    box-sizing: border-box;\n    background-color: ${props => props.theme.backgroundColor};\n    color: ${props => props.theme.textColor};\n  }\n\n  *,\n  *::before,\n  *::after {\n    box-sizing: inherit;\n  }\n\n  button {\n    font-family: inherit;\n  }\n`;\n","// Non-configurable base theme props\nexport default {\n  laptop: 1400,\n  tablet: 1000,\n  mobile: 760,\n  maxWidth: 1420,\n  maxWidthLaptop: 1100,\n  appSidebarWidthDesktop: 400,\n  appSidebarWidthLaptop: 260,\n  appSidebarWidthTablet: 400,\n  appSidebarMobileOffset: 48,\n  appTabsSidebarWidth: 60,\n  curveFastoutSlowin: 'cubic-bezier(0.4, 0, 0.2, 1)',\n  tooltipColor: 'rgba(40, 40, 54, 1)',\n};\n","import styled from 'styled-components';\n\nconst SpinnerWrapper = styled.svg`\n  animation: spinner--rotate 2s linear infinite;\n  height: 100%;\n  transform-origin: center center;\n  width: 100%;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  \n  @keyframes spinner--rotate {\n    100% {\n        transform: rotate(360deg)\n    }\n  }\n`;\n\nexport default SpinnerWrapper;\n","\nimport styled from 'styled-components';\n\nconst CircleBackground = styled.circle`\n  display: none;\n  stroke: rgba(0,0,0, 0.1);\n\n  @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n    display: block;\n  }\n  @supports (-ms-ime-align: auto) {\n    display: block;\n  }\n`;\n\nexport default CircleBackground;\n","\nimport styled from 'styled-components';\n\nconst CirclePath = styled.circle`\n  stroke-dasharray: 1, 200;\n  stroke-dashoffset: 0;\n  animation: spinner--dash 1.5s ease-in-out infinite;\n  stroke-linecap: round;\n  stroke: ${(props) => props.color || props.theme['color.primary']};\n  stroke-width: ${(props) => props.xsmall || props.small ? 3 : 2};\n\n  @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n    stroke-dasharray: 40, 200;\n    animation: none;\n  }\n  @supports (-ms-ime-align: auto) {\n    stroke-dasharray: 40, 200;\n    animation: none;\n  }\n  @keyframes spinner--dash {\n    0% {\n      stroke-dasharray: 1, 200;\n      stroke-dashoffset: 0;\n    }\n    50% {\n      stroke-dasharray: 89, 200;\n      stroke-dashoffset: -35px;\n    }\n    100% {\n      stroke-dasharray: 89, 200;\n      stroke-dashoffset: -124px;\n    }\n  }\n`;\n\nexport default CirclePath;\n","/**\n*\n* Spinner\n* accepts size as boolean parameter (small/xsmall)\n* default blue (#2196F3) accepts color (color) as string parameter\n*\n*/\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport SpinnerWrapper from './SpinnerWrapper';\nimport CircleBackground from './CircleBackground';\nimport CirclePath from './CirclePath';\n\nconst Wrapper = styled.div`\n  position: relative;\n  margin: 0 auto;\n  width: ${({ xsmall, small }) => {\n    if (xsmall) {\n      return '26px';\n    } else if (small) {\n      return '40px';\n    }\n    return '80px';\n  }};\n\n  &:before {\n    content: '';\n    display: block;\n    padding-top: 100%;\n  }\n\n`;\n\nconst Spinner = (props) => (\n  <Wrapper {...props}>\n    <SpinnerWrapper viewBox=\"25 25 50 50\">\n      <CircleBackground cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" strokeWidth=\"2\" strokeMiterlimit=\"10\"></CircleBackground>\n      <CirclePath cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" strokeWidth=\"2\" strokeMiterlimit=\"10\" {...props}></CirclePath>\n    </SpinnerWrapper>\n  </Wrapper>\n);\n\nSpinner.propTypes = {\n  xsmall: PropTypes.bool,\n  small: PropTypes.bool,\n  color: PropTypes.string,\n};\n\nSpinner.defaultProps = {\n  xsmall: false,\n  small: false,\n  color: null,\n};\n\nexport default Spinner;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nconst Dialog = ({\n  title,\n  description,\n  onClose,\n  buttons = [],\n  children\n}) => {\n  const modalRoot = document.getElementById('modal-root');\n\n  return ReactDOM.createPortal(\n    <DialogContainer>\n      {children || <DialogInnerContainer>\n          <Header>\n            {title && <Title id=\"dialogTitle\">{title}</Title>}\n            <IconContainer onClick={onClose}>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\n                <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n                <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n                <title>Close Dialog</title>\n              </svg>\n            </IconContainer>\n          </Header>\n          {description && <Text id=\"dialogDesc\" dangerouslySetInnerHTML={{ __html: description }} />}\n          <DialogFooter>\n            {buttons.map(({ label, onClick, primary, type }) => <Button key={label} type={type} primary={primary} onClick={onClick}>{label}</Button>)}\n          </DialogFooter>\n      </DialogInnerContainer>\n      }\n    </DialogContainer>,\n    modalRoot\n  );\n};\n\nDialog.propTypes = {\n  description: PropTypes.string,\n  title: PropTypes.string,\n  onClose: PropTypes.func.isRequired,\n  buttons: PropTypes.objectOf({\n    label: PropTypes.string.isRequired,\n    onClick: PropTypes.func.isRequired,\n    primary: PropTypes.bool\n  }),\n  children: PropTypes.node,\n};\n\nDialog.defaultProps = {\n  description: '',\n  title: '',\n  buttons: [],\n  children: undefined,\n};\n\nconst textColor = 'rgb(124, 124, 124)';\nconst classPrefix = 'restart-lesson-popup';\n\nconst DialogContainer = styled.div.attrs(() => ({\n  className: `${classPrefix}-container`,\n  tabindex: '0',\n  role: 'dialog',\n  'aria-modal': 'true',\n  'aria-labelledby': 'dialogTitle',\n  'aria-describedby': 'dialogDesc'\n}))`\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  background: rgba(0, 0, 0, 0.7);\n  z-index: 100000;\n  color: #000000; \n`;\n\nconst Header = styled.div.attrs(() => ({\n  className: `${classPrefix}-header`,\n}))`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  padding-bottom: 22px;\n`;\n\nconst DialogInnerContainer = styled.div.attrs(() => ({\n    className: `${classPrefix}-inner-container`,\n}))`\n  display: flex;\n  width: 512px;\n  flex-direction: column;\n  padding: 34px 42px;\n  justify-content: center;\n  background: rgba(255, 255, 255);\n  justify-self: center;\n  align-self: center;\n  border-radius: 5px;\n`;\n\nconst DialogFooter = styled.footer.attrs(() => ({\n  className: `${classPrefix}-footer`,\n}))`\n  flex-direction: row;\n  justify-content: flex-end;\n  align-items: center;\n  display: flex;\n`;\n\nconst IconContainer = styled.div.attrs(() => ({\n  className: `${classPrefix}-icon-container`\n}))`\n  position: relative;\n  top: 5px;\n  right: 5px; \n  &:hover {\n    cursor: pointer;\n    opacity: 0.5;\n  }\n  svg {\n    color: rgb(152, 152, 152);\n  }\n`;\n\nconst buttonThemeStyleVariants = ({ type }) =>\n  ({\n    primary: `\n      background: rgb(46, 116, 197, 1);\n      color: #ffffff;\n      &:hover {\n        background-color: rgb(6, 97, 201);\n      }\n    `,\n    clear: `\n      background: rgb(255, 255, 255, 0);\n      color: ${textColor};\n      &:hover {\n        background-color: rgb(236, 244, 253, 0.4);\n      }\n    `,\n    secondary: `\n      background: rgb(236, 244, 253);\n      color: rgb(46, 116, 197, 1);\n      &:hover {\n        background-color: rgb(193, 209, 227, 1);\n      }\n    `,\n  }[type || 'primary']);\n\n\nconst Button = styled.button.attrs(() => ({\n  className: `${classPrefix}-button`,\n}))`\n  text-align: center;\n  max-width: 140px;\n  border-radius: 5px;\n  height: 42px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 14px;\n  margin-left: 10px;\n  font-weight: 600;\n  cursor: pointer;\n  border: none;\n  ${buttonThemeStyleVariants}\n`;\n\nconst Text = styled.p.attrs(() => ({\n  className: `${classPrefix}-text`,\n}))`\n  font-size: 18px;\n  padding-bottom: 22px;\n  margin: 0;    \n  line-height: 150%;\n  color: ${textColor};\n  ${({ fontWeight }) => fontWeight && `font-weight: ${fontWeight};`}\n`;\n\nconst Title = styled.div.attrs(() => ({\n  className: `${classPrefix}-title`,\n}))`\n  font-size: 28px;\n  font-weight: 600;\n  color: rgb(78, 78, 78);\n`;\n\nexport default Dialog;\n","export function formatColorArray(colorString) {\n  if (colorString.includes('#')) return hexToRgba(colorString);\n  const result = colorString.replace('rgba(', '').replace('rgb(', '').replace(' ', '').replace(')', '').split(',');\n  if (result.length === 3) return [...result, 1];\n  return result;\n}\n\nexport function hexToRgba(hex) {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result ? [\n    parseInt(result[1], 16),\n    parseInt(result[2], 16),\n    parseInt(result[3], 16),\n    1,\n  ] : null;\n}\n\nexport function rgba(colorString, opacity) {\n  const colors = formatColorArray(colorString);\n  return `rgba(${colors[0]}, ${colors[1]}, ${colors[2]}, ${opacity})`;\n}\n\n/** \n * Replace the current opacity with a new value\n */\nexport const setOpacityOfRgba = (rgba, opacity) => {\n  const finalComma = rgba.lastIndexOf(')');\n  return `${rgba.slice(0, finalComma - 1)} ${opacity})`;\n};\n\n\nexport function shade(colorString, percent) {\n  const colors = formatColorArray(colorString);\n  const t = percent < 0 ? 0 : 255;\n  const p = percent < 0 ? percent * -1 : percent;\n  const R = parseInt(colors[0]);\n  const G = parseInt(colors[1]);\n  const B = parseInt(colors[2]);\n  const A = parseInt(colors[3] || 1);\n  return `rgba(${Math.round((t - R) * p) + R}, ${Math.round((t - G) * p) + G}, ${Math.round((t - B) * p) + B}, ${Math.round(A)})`;\n}\n\nexport function isLight(colorString) {\n  const colors = formatColorArray(colorString);\n  const threshold = 130;\n  const brightness = ((colors[0] * 299) + (colors[1] * 587) + (colors[2] * 114)) / 1000;\n  if (brightness > threshold) return true;\n  return false;\n}\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styled from 'styled-components';\nimport { setOpacityOfRgba, rgba } from '../../utils/colors';\n/** \n * Ensures the elements used can be tabbed into.\n */\nconst defaultAccessibilityProps = {\n  tabIndex: '0',\n};\n\nconst HistoryNavigation = ({\n  title,\n  restartEnabled,\n  onClickRestartLesson,\n  onClickNavigateScreen,\n  historyData,\n  isEnabled,\n}) => {\n  const isEnterOrSpace = (e) => \n      e.key === 'Enter' ||\n      e.key === ' ' ||\n      e.key === 'Spacebar' ||\n      e.which === 13 ||\n      e.which === 32;\n  \n  \n  const handleMenuItemKeyPress = (e, screen) => {\n    if (isEnterOrSpace(e)) {\n      e.preventDefault();\n      handleMenuItemClick(screen);\n    }\n  };\n\n  const handleMenuItemClick = (screen) => {\n    onClickNavigateScreen(screen); \n  };\n\n  const handleRestartKeyPress = (e) => {\n    if (isEnterOrSpace(e)) {\n      e.preventDefault();\n      onClickRestartLesson();\n    }\n  };\n\n  return (\n    <HistoryContainer {...defaultAccessibilityProps} role=\"menu\" isEnabled={isEnabled}>\n      <HistoryHeader dangerouslySetInnerHTML={{ __html: title }} />\n      <HistoryContentContainer>\n        {historyData.map(({ title: segmentTitle, screens }) => (\n            <HistoryContentSection key={segmentTitle}>\n              {segmentTitle && <HistoryContentHeader isActive={screens.length} dangerouslySetInnerHTML={{ __html: segmentTitle }} />}\n              {screens.map((screen, i) => (\n                <HistoryContentItem \n                  {...defaultAccessibilityProps} \n                  role=\"menuitem\" \n                  aria-label={`${screen.title}${screen.isCurrent ? ' selected' : ''}`} \n                  aria-labelledby={screen.title} \n                  aria-describedby={screen.title}  \n                  key={i} \n                  isFirst={i === 0} \n                  isCurrent={screen.isCurrent}\n                  onClick={() => handleMenuItemClick(screen)} \n                  onKeyPress={(e) => handleMenuItemKeyPress(e, screen)}>\n                  <div className=\"item-title\" title={screen.title}>{screen.title}</div>\n                </HistoryContentItem>\n              ))}\n            </HistoryContentSection>\n        ))}\n      </HistoryContentContainer>\n      {restartEnabled && (\n        <HistoryRestartButton \n          {...defaultAccessibilityProps} \n          aria-labelledby=\"restart-button\" \n          role=\"button\" \n          onClick={onClickRestartLesson} \n          onKeyPress={handleRestartKeyPress}> \n          <svg width=\"24\" height=\"25\" viewBox=\"0 0 24 25\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M8 6.5V9.5L13 5.5L8 1.5V4.5H4C2.89543 4.5 2 5.39543 2 6.5V19.5C2 20.6046 2.89543 21.5 4 21.5H20C21.1046 21.5 22 20.6046 22 19.5V6.5C22 5.39543 21.1046 4.5 20 4.5H16V6.5H19C19.5523 6.5 20 6.94772 20 7.5V18.5C20 19.0523 19.5523 19.5 19 19.5H5C4.44772 19.5 4 19.0523 4 18.5V7.5C4 6.94772 4.44772 6.5 5 6.5H8Z\" fill=\"white\"/>\n          </svg>\n          <div id=\"restart-button\" className=\"restart-label\">RESTART LESSON</div>\n        </HistoryRestartButton>\n      )}\n  </HistoryContainer>\n  );\n};\n\nHistoryNavigation.propTypes = {\n  historyData: PropTypes.arrayOf(PropTypes.object).isRequired,\n  isEnabled: PropTypes.bool.isRequired,\n  restartEnabled: PropTypes.bool,\n  title: PropTypes.string,\n};\n\nHistoryNavigation.defaultProps = {\n  restartEnabled: false,\n  title: '',\n};\n\nconst containerPadding = 5;\n\nconst HistoryContainer = styled.aside.attrs(() => ({\n  className: `history-container`,\n}))`\n  display: grid;\n  grid-template-columns: auto;\n  grid-template-rows: 60px auto 45px;\n  height: 100%;\n  ${({ isEnabled }) => !isEnabled && 'display: none;'}\n`;\n\nconst HistoryHeader =  styled.h2.attrs(() => ({\n  className: `history-header`,\n}))`\n  color: ${({ theme }) => setOpacityOfRgba(theme.textColor, 1)}};\n  padding: 6px ${containerPadding}px 6px ${containerPadding}px;\n  margin: 0 20px;\n  font-size: 16px;\n  height: 60px;\n  display: flex;\n  align-items: center;\n\n  p {\n    margin: 0px;\n  }\n`;\n\nconst HistoryContentSection =  styled.section.attrs(() => ({\n  className: `history-content-section`,\n}))`\n  padding-bottom: 10px;\n  padding-left: 6px;\n`;\n\nconst HistoryContentContainer =  styled.div.attrs(() => ({\n  className: `history-content-container`,\n}))`\n  margin: 0px 0px 0px 20px;\n  overflow-y: auto;\n`;\n\nconst HistoryContentHeader = styled.h3.attrs(() => ({\n  className: `history-content-header`,\n}))`\n\n  padding: 10px ${containerPadding}px 10px ${containerPadding}px;\n  font-weight: 600;\n  font-size: 16px;\n  font-family:  ${({ theme }) => theme.titleFont};\n  color: ${({ theme, isActive }) => setOpacityOfRgba(theme.textColor, isActive ? 1 : 0.3)}};\n  margin: 0;\n  p {\n    margin: 0px;\n  }\n`;\n\nconst HistoryContentItem = styled.div.attrs(() => ({\n  className: `history-content-item`,\n}))`\n    position: relative;\n    display: flex;\n    align-items: center;\n    flex-direction: row;\n    justify-content: space-between;\n    padding: 0px 10px;\n    border-radius: 3px;\n    height: 30px;\n    font-size: 14px;\n    font-family:  ${({ theme }) => theme.bodyFont};\n    ${({ isTitle }) => isTitle && 'font-weight: 700;'}\n    color: ${({ theme, isCurrent }) => isCurrent ? theme.primaryColor : setOpacityOfRgba(theme.textColor, 0.7)}};\n    ${({ theme, isCurrent }) => isCurrent && `background-color: ${setOpacityOfRgba(theme.primaryColor, 0.1)};`};\n    transition: 0.4s;\n    animation-duration: 0.5s;\n    animation-name: fadein;\n    @keyframes fadein {\n      from {\n        opacity: 0;\n      }\n\n      to {\n        opacity: 1;\n      }\n    }\n\n\n    .item-title {\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      flex: 4;\n      margin-right: 5px;\n    }\n\n    /**\n    * NO hover state when we're rendering a segment title\n    */\n    ${({ isTitle, theme }) => !isTitle && `\n      &:hover {\n        background-color: ${setOpacityOfRgba(theme.primaryColor, 0.1)};\n        cursor: pointer;\n      }\n    `}\n\n\n    &:before {\n      content: \"\";\n      position: absolute;\n      left: -1px;\n      right: auto;\n      top: 50%;\n      width: 10px;\n      height: 10px;\n      ${({ isTitle }) => isTitle && `\n        width: 15px;\n        height: 15px;\n      `}\n      transform: translate(-50%, -50%);\n      border-radius: 50%;\n      z-index: 2;\n      box-shadow: ${({ theme }) => theme.primaryColor} 0px 0px 0px 2px inset;\n      background-color: ${({ theme, isCurrent }) => isCurrent ? theme.primaryColor : theme.surfaceColor};\n    }\n\n    /** \n    * Do not show the connecting line for the first instance\n    * of each section.\n    */\n    ${({ isFirst, theme, }) => !isFirst && `\n      &:after {\n        content: \"\";\n        position: absolute;\n        left: -2px;\n        right: auto;\n        top: -50%;\n        height: 100%;\n        width: 2px;\n        z-index: 1;\n        background: ${theme.primaryColor};\n      }\n    `}\n`;\n\nconst HistoryRestartButton = styled.div.attrs(() => ({\n  className: `history-restart-button`,\n}))`\n  justify-content: flex-start;\n  align-self: center;\n  display: flex;\n  flex-direction: row;\n  padding: 10px 20px;\n  align-items: center;\n  font-weight: 600;\n  border-top: solid 1px ${props => rgba(props.theme.textColor, 0.1)};\n  bottom: 0px;\n  width: 100%;\n  font-size: 14px;\n  color: ${({ theme }) => setOpacityOfRgba(theme.textColor, 0.5)};\n\n  path {\n    fill: ${({ theme }) => setOpacityOfRgba(theme.textColor, 0.5)};\n  }\n  .restart-label {\n    padding-left: 5px;\n  }\n  &:hover {\n    background-color: ${({ theme }) => setOpacityOfRgba(theme.primaryColor, 0.1)};\n    cursor: pointer;\n  }\n`;\n\nexport default HistoryNavigation;\n","import PropTypes from 'prop-types';\nimport React, { useEffect, useRef, useState } from 'react';\nimport Spinner from '../Spinner';\nimport Dialog from '../Dialog';\nimport HistoryNavigationUi from './HistoryNavigation';\n\nconst PATHWAY_TYPES = {\n  FREE: 'FREE',\n  LINEAR: 'LINEAR',\n  GRAPH: 'GRAPH'\n};\n\n/**\n * The history navigation is created using a combination of history & courseware items.\n * When you navigate to the \"Next\" screen, the pathway subscription will fire & the courseware\n * will be fetched for the pathways returned (when using freeway, an array will be returned and ALL \n * items will be fetched; when using linear as you navigate to the next screen, it'll fetch the new courseware\n * item for the new screen).\n * If you navigate back/fourth to previous screens, the route subscription fires and updates the current route\n * id which is used to determine the active screen in the menu.\n */\nconst HistoryNavigation = ({\n  historyNavigation = {},\n  cdp,\n  isEnabled\n}) => {\n  const routeSubscriptionRef = useRef();\n  const pathwaySubscriptionRef = useRef();\n  const subPathwaySubscriptionRef = useRef();\n  const [menuItems, setMenuItems] = useState([]);\n  const [currentRouteId, setCurrentRouteId] = useState();\n  const [showRestartDialog, setShowRestartDialog] = useState(false);\n  const [isRestartingLesson, setIsRestartingLesson] = useState(false);\n  const [pathwayType, setPathwayType] = useState('');\n\n  useEffect(() => {\n    const initNavigation = async () => {\n      const context = await cdp.context().get();\n      /** \n       * The workspace does not support the pathway subscription which is why we\n       * need this seperate init logic. If the workspace adds support for the pathway\n       * subscription this code can be safely removed.\n       */\n      if (context === 'EDITOR') {\n        const [route, pathways, routeSubscription] = await Promise.all([\n          cdp.route().get(),\n          cdp.state('pathway').get(),\n          cdp.route().subscribe(_handleCDPRouteChange),\n        ]);\n        routeSubscriptionRef.current = routeSubscription;\n        _handleCDPRouteChange(route);\n        const menuItemsFromPathway = await getCoursewareData(pathways);\n        setMenuItems(menuItemsFromPathway);\n        return;\n      }\n\n      /** \n       * Set up susbcriptions for learner mode\n       */\n      const [routeSubscription, pathwaySubscription, currRoute] = await Promise.all([\n        cdp.route().subscribe(_handleCDPRouteChange),\n        cdp.state('pathway').subscribe(_handlePathwayChange),\n        cdp.route().get()\n      ]);\n      _handleCDPRouteChange(currRoute);\n      routeSubscriptionRef.current = routeSubscription;\n      pathwaySubscriptionRef.current = pathwaySubscription;\n    };\n    \n    initNavigation();\n\n    return () => {\n      if (routeSubscriptionRef && routeSubscriptionRef.current) {\n        routeSubscriptionRef.current.unsubscribe();;\n      }\n      if (pathwaySubscriptionRef && pathwaySubscriptionRef.current) {\n        pathwaySubscriptionRef.current.unsubscribe();\n      }\n      if (subPathwaySubscriptionRef && subPathwaySubscriptionRef.current) {\n        subPathwaySubscriptionRef.current.unsubscribe();\n      }\n    };\n  }, []);\n\n  /** \n   * Sets the currently active menu item based on the screenIds\n   * (elementId, currentRouteId)\n   */\n   const _setCurrentMenuItem = (items, currRouteId) => {\n    const hasMatchingScreen = items.find(i => i.elementId === currRouteId);\n    const updatedMenuItems = items.map((menuItem) => {\n\n      return {\n        ...menuItem,\n        isCurrent: menuItem.elementId === currRouteId,\n      };\n    });\n\n    /** \n     * If there is no matching screen, it means we're on the current screen\n     * that does not have a matching elementId (screenId)\n     */\n    if (!hasMatchingScreen && updatedMenuItems.length) {\n      if (pathwayType === PATHWAY_TYPES.FREE) {\n        updatedMenuItems[0].isCurrent = true;\n      } else {\n        updatedMenuItems[updatedMenuItems.length - 1].isCurrent = true;\n      }\n    }\n\n    return updatedMenuItems;\n  };\n\n  const _handlePathwayChange = async (pathwayState, resetMenuItems, subActivityId) => {\n    if (!pathwayState) {\n      return;\n    } \n    if (subActivityId) {\n      const subCompletion = await cdp.courseware(subActivityId).progress('completion').get();\n      if (subCompletion.value === 1)\n        return;\n    }\n\n    /** \n     * Guess what pathway type this lesson is based on\n     * whether an array of pathways is returned (signifies a free path).\n     */\n    if (pathwayState.length > 1) {\n      setPathwayType(PATHWAY_TYPES.FREE);\n    } else {\n      setPathwayType(PATHWAY_TYPES.LINEAR);\n    }\n    \n    let newMenuItems = resetMenuItems ? [] : menuItems.slice() || [];\n    // Set history to empty array if lesson type is Free\n    let [history] = pathwayState.length > 1 ? [] : await cdp.history().get();\n    if (subActivityId && pathwayState.length <= 1) {\n      const [subHistory] = await cdp.courseware(subActivityId).history().get();\n      history = [...subHistory, ...history];\n    }\n    if (history) {\n      history.reverse();\n    }\n\n    /** \n     * Loop over the history and fetch the courseware data for each item in \n     * the history.\n     */\n    const pathwayPromises = [];\n    \n    /** \n     * Loop over the history array and fetch the courseware data for each record.\n     * Fetch the history data IF it has not been fetched yet (on first load)\n     */\n    if (history && newMenuItems.length === 0 && history.length > 0) {\n      // build history array including sub-activity screens\n      const historyWithSubPromises = [];\n      history.map(async (historyItem) => {\n        historyWithSubPromises.push(\n          new Promise(async (resolve) => {\n            const { elementId, elementType } = historyItem;\n            if (elementType === 'ACTIVITY') {\n              const subActivityHistory = await cdp.courseware(elementId).history().get();\n              resolve([].concat(...subActivityHistory).reverse());\n            } else {\n              resolve(historyItem);\n            }\n          })\n        );\n      });\n      const historyWithSub = [].concat(...await Promise.all(historyWithSubPromises));\n\n      historyWithSub.map(({ elementId, evaluationId }) => {\n        pathwayPromises.push(\n          new Promise(async (resolve) => {\n            const pathwayCoursewareState = await cdp.courseware(elementId).state().get();\n            resolve({ ...pathwayCoursewareState, elementId, evaluationId });\n          })\n        );\n      });\n\n      newMenuItems = await Promise.all(pathwayPromises);\n    } else if (history && history.length > 0) {\n      const prevMenuItem = newMenuItems[menuItems.length - 1];\n      const historyItem = history[history.length - 1];\n      \n      /** \n       * If going to the next screen, we must set the previous menuItems evaluatedAt time\n       */\n       newMenuItems[newMenuItems.length - 1] = {\n        ...prevMenuItem,\n        evaluationId: historyItem.evaluationId,\n      };\n    }\n    \n    const pathwaysCourseware = await getCoursewareData(pathwayState);\n\n    setMenuItems([...newMenuItems, ...pathwaysCourseware]);\n  };\n\n  const _handleCDPRouteChange = async (currentRoute) => {\n    if (currentRoute.type && currentRoute.type === 'ACTIVITY') {\n      // check and if the activity id is not the STD lesson itself, subscribe to sub-activity pathway\n      const currentPathway = await cdp.state('pathway').get();\n      const isSubActivity = currentPathway.findIndex(({itemId}) => itemId === currentRoute.id) !== -1;\n      if (isSubActivity) subPathwaySubscriptionRef.current = await cdp.courseware(currentRoute.id).route().subscribe(async newRoute => {\n        const newPathway = await cdp.courseware(currentRoute.id).state('pathway').get();\n        _handlePathwayChange(newPathway, false, currentRoute.id);\n      });\n    }\n    setCurrentRouteId(currentRoute.id);\n  };\n\n  /** Given an array of pathways ([{ itemId }]), fetch the courseware for each of them */\n  const getCoursewareData = async (pathways) => {\n    const coursewarePromises = pathways.map(({ itemId }) => \n      new Promise(async (resolve) => {\n        const pathwayCoursewareState = await cdp.courseware(itemId).state().get();\n        resolve({ ...pathwayCoursewareState, elementId: itemId });\n      }),\n    );\n    \n    const pathwaysCourseware = await Promise.all(coursewarePromises);\n    return pathwaysCourseware;\n  };\n\n  /** \n   * If there is no restart popup message, we will skip the Dialog confirmation\n   * and restart the lesson straight away.\n   */\n  const onClickToggleRestartDialog = () => {\n    if (!historyNavigation.restartPopupMessage) {\n      onClickRestartLesson();\n      return;\n    }\n    \n    setShowRestartDialog(!showRestartDialog); \n  };\n\n  const onClickRestartLesson = async () => {\n    setIsRestartingLesson(true); \n    setMenuItems(menuItems.length > 0 && pathwayType !== PATHWAY_TYPES.FREE ? menuItems.slice(0 , 1) : []);\n\n    try {\n      await cdp.learner().restart();\n      await cdp.courseware('activity').route().set();\n    } catch (err) {\n      console.warn('onClickRestartLesson not supported in workspace.');\n    }\n\n    /** \n     * We have to manually fetch the pathways and re-run the \n     * courseware data fetching method when in a free pathway because\n     * the pathway subscription doesn't fire on restart. It's worth noting the pathway subscription\n     * will fire if you add/remove screens in the workspace and deploy the changes AND then click 'restart'\n     * This is most liekly a platform bug...when fixed the below code can safely be removed.\n     */\n    if (pathwayType === PATHWAY_TYPES.FREE) {\n      try {\n        const currPathways = await cdp.state('pathway').get();\n        const currRoute = await cdp.route().get();\n        await _handleCDPRouteChange(currRoute);\n        await _handlePathwayChange(currPathways, true);\n        await _setCurrentMenuItem(currPathways, currRoute);\n\n      } catch (err) {\n        console.warn('onClickRestartLesson not supported in workspace.');\n      }\n    } \n\n    setIsRestartingLesson(false);\n    setShowRestartDialog(false);\n  };\n\n   /**\n   * Upon click, route to the passed screen\n   * @param {Object} ids\n   */\n  const onClickNavigateScreen = async ({\n    evaluationId,\n    elementId,\n  }) => {\n    await cdp.courseware(elementId).route().set({ evaluationId });\n  };\n\n  const convertHistoryToSegmentStructure = () => {\n    const computedMenuItems = _setCurrentMenuItem(menuItems, currentRouteId);\n    const { segments } = historyNavigation;\n    if (!segments || !segments.length) {\n      return [\n        {\n          title: '',\n          screens: computedMenuItems,\n        }\n      ];\n    }\n    /** \n     * Setup the lesson segments.\n     */\n    let sliceFrom = 0;\n    return segments.map((item) => {\n      let screens = [];\n      const sliceTo = sliceFrom + item.numberOfScreens;\n\n      try {\n        screens = computedMenuItems.slice(sliceFrom, sliceTo);\n      } catch (err) {\n        screens = [];\n        console.warn('Invalid configuration for number of screens and sections');\n      }\n\n      sliceFrom = sliceTo;\n      return {\n        title: item.label,\n        screens,\n      };\n    });\n  };\n\n  const historyData = convertHistoryToSegmentStructure();\n  /**\n   * Include default value for UNSET schema config from upgrade.\n   */\n  const navTitle = historyNavigation.title || 'HISTORY';\n  return [\n    showRestartDialog && <Dialog\n      title=\"Restart lesson\"\n      description={historyNavigation.restartPopupMessage}\n      onClose={onClickToggleRestartDialog}\n      buttons={[\n        {\n          label: 'CANCEL',\n          type: 'clear',\n          onClick: onClickToggleRestartDialog\n        },\n        {\n          label: 'RESTART',\n          primary: true,\n          type: 'primary',\n          onClick: onClickRestartLesson,\n        },\n      ]}\n    >\n    {isRestartingLesson && <Spinner color=\"rgba(33,150,243,1)\" />}\n    </Dialog>,\n    <HistoryNavigationUi \n      key=\"history-ui\"\n      historyData={historyData} \n      title={navTitle}\n      restartEnabled={historyNavigation.allowRestart}\n      onClickRestartLesson={onClickToggleRestartDialog} \n      onClickNavigateScreen={onClickNavigateScreen}\n      isEnabled={isEnabled}\n    />\n  ];\n};\n\nHistoryNavigation.propTypes = {\n  historyNavigation: PropTypes.object.isRequired,\n  cdp: PropTypes.object.isRequired,\n  isEnabled: PropTypes.bool.isRequired,\n};\n\nexport default HistoryNavigation;\n","import {\n  useCdpChildContainer,\n  PLUGIN_TYPES,\n  TRANSITION_TYPES,\n} from '@pearsontechnology/aero-cdp-child-container';\nimport PropTypes from 'prop-types';\nimport React, { useRef } from 'react';\nimport styled from 'styled-components';\n\nfunction SidebarApp({\n  cdp,\n  currentApp,\n}) {\n  const appContainerRef = useRef();\n  \n\n  useCdpChildContainer(appContainerRef, {\n    cdp,\n    childId: currentApp,\n    childType: PLUGIN_TYPES.LESSON,\n    transitions: {\n      enter: { type: TRANSITION_TYPES.NONE },\n      exit: { type: TRANSITION_TYPES.NONE },\n    }\n  });\n\n  return <SidebarAppContainer ref={appContainerRef} />;\n}\n\nSidebarApp.propTypes = {\n  cdp: PropTypes.object.isRequired,\n  currentApp: PropTypes.string,\n};\n\nSidebarApp.defaultProps = {\n  currentApp: '',\n};\n\nconst SidebarAppContainer = styled.div.attrs({\n  className: 'app-sidebar__app',\n})`\n  position: relative;\n  height: 100%;\n  \n  iframe {\n    display: block;\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n`;\n\nexport default SidebarApp;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Icon({ icon, ...props }) {\n  const Icons = {\n    'navigator': () => (\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n        <path d=\"M13 11h7v1.5h-7V11zm0-2.5h7V10h-7V8.5zm0 5h7V15h-7v-1.5zM21 3H3c-1.1 0-2 .9-2 2v13c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 15h-9V5h9v13z\"/>\n      </svg>\n    ),\n    'competency': () => (\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n        <path d=\"M8.65 20.356C7.177 18.73 6.204 16.05 6.029 13H3.055a9.009 9.009 0 0 0 5.595 7.356zM8.033 13c.215 3.286 1.474 5.896 2.967 6.724V13H8.033zm7.317 7.356A9.009 9.009 0 0 0 20.945 13h-2.974c-.175 3.05-1.148 5.73-2.62 7.356zM15.967 13H13v6.724c1.493-.828 2.752-3.438 2.967-6.724zM8.65 3.644A9.009 9.009 0 0 0 3.055 11h2.974c.175-3.05 1.148-5.73 2.62-7.356zM8.033 11H11V4.276C9.507 5.104 8.248 7.714 8.033 11zm7.317-7.356C16.823 5.27 17.796 7.95 17.971 11h2.974a9.009 9.009 0 0 0-5.595-7.356zM15.967 11C15.752 7.714 14.493 5.104 13 4.276V11h2.967zM12 23C5.925 23 1 18.075 1 12S5.925 1 12 1s11 4.925 11 11-4.925 11-11 11z\"/>\n      </svg>\n    ),\n    'help': () => (\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n        <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z\"/>\n      </svg>\n    ),\n    'note': () => (\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n        <path d=\"M3 17.25L14.06 6.19l3.75 3.75L6.75 21H3v-3.75zM20.71 7.04l-1.83 1.83-3.75-3.75 1.83-1.83a.996.996 0 0 1 1.41 0l2.34 2.34c.39.39.39 1.02 0 1.41zM12 19h10v2H10l2-2z\"/>\n      </svg>\n    ),\n    'bookmark': () => (\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n        <path d=\"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z\"/>\n      </svg>\n    ),\n    'discussion': () => (\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n        <path d=\"M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z\"/>\n      </svg>\n    ),\n    'dropdown': () => (\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n        <path d=\"M7 10l5 5 5-5z\"/>\n      </svg>\n    ),\n    'account': () => (\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n        <path d=\"M12 2c2.213 0 4 1.787 4 4s-1.787 4-4 4-4-1.787-4-4 1.787-4 4-4zm0 18.933a9.6 9.6 0 0 1-8-4.293c.04-2.653 5.333-4.107 8-4.107 2.653 0 7.96 1.454 8 4.107a9.6 9.6 0 0 1-8 4.293z\"/>\n      </svg>\n    ),\n    'menu': () => (\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n        <path d=\"M22 5v2h-2V5h2zm-5 0v2H2V5h15zm5 6v2h-2v-2h2zm-5 0v2H2v-2h15zm5 6v2h-2v-2h2zm-5 0v2H2v-2h15z\"/>\n      </svg>\n    ),\n    'check': () => (\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n        <path d=\"M9.237 16.571L20.286 5.3l1.428 1.4L9.237 19.429l-5.951-6.07 1.428-1.4z\"/>\n      </svg>\n    ),\n    'chevron-right': () => (\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n        <path d=\"M8.233 5.268l1.534-1.284 6.841 8.168-6.841 8.168-1.534-1.284L14 12.152z\"/>\n      </svg>\n    ),\n    'circle': () => (\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n        <path d=\"M12 20a8 8 0 1 1 0-16 8 8 0 0 1 0 16zm0-2a6 6 0 1 0 0-12 6 6 0 0 0 0 12z\"/>\n      </svg>\n    ),\n    'close': () => (\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n        <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n      </svg>\n    ),\n    'time': () => (\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" {...props}>\n        <path d=\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z\"/>\n      </svg>\n    ),\n  };\n\n  return Icons[icon] ? Icons[icon]() : Icons.circle();\n}\n\nIcon.propTypes = {\n  icon: PropTypes.string.isRequired,\n};\n\nexport default Icon;\n","import { useState, useEffect } from 'react';\n\n// Unique IDs\nlet baseId = 0;\nconst genId = () => ++baseId;\n\nexport default function useId() {\n  const [id, setId] = useState(null);\n  useEffect(() => setId(genId()), []);\n  return id;\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Transition } from 'react-transition-group';\n\n\nconst visibleStatus = ['entering', 'entered'];\n\n// Helper for making styled components status checks less verbose\nexport function isVisible(status) {\n  return visibleStatus.includes(status);\n}\n\n// Forces reflow on transition using offsetHeight\n// This allows enter transitions on mounting components\nexport function ReflowTransition({ onEnter, ...rest }) {\n  const handleEnter = (node) => {\n    if (onEnter) onEnter();\n    if (node) return node.offsetHeight;\n  };\n\n  return <Transition onEnter={handleEnter} {...rest} />;\n}\n\nReflowTransition.propTypes = {\n  onEnter: PropTypes.func,\n};\n","import React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport styled, { css } from 'styled-components';\nimport useId from '../hooks/useId';\nimport { ReflowTransition, isVisible } from '../utils/transition';\nimport { rgba } from '../utils/colors';\n\nexport default function Tooltip(props) {\n  const { position = 'bottom', offset = 6, text, children } = props;\n  const [visible, setVisible] = useState(false);\n  const [rect, setRect] = useState();\n  const [isTouchEvent, setIsTouchEvent] = useState(false);\n  const elementRef = useRef();\n  const id = useId();\n  const tooltipId = `tooltip-${id}`;\n\n  useEffect(() => {\n    if (elementRef.current && visible) setRect(elementRef.current.getBoundingClientRect());\n  }, [visible]);\n\n  const onTouchStart = () => {\n    setIsTouchEvent(true);\n  };\n\n  const showTooltip = () => {\n    if (isTouchEvent) return setIsTouchEvent(false);\n    setVisible(true);\n  };\n\n  const hideTooltip = () => {\n    if (isTouchEvent) return setIsTouchEvent(false);\n    setVisible(false);\n  };\n\n  return (\n    <React.Fragment>\n      {React.Children.map(children, child => {\n        if (child.ref) elementRef.current = child.ref.current;\n\n        return (\n          React.cloneElement(child, {\n            onTouchStart,\n            ref: !child.ref ? elementRef : child.ref,\n            onMouseEnter: isTouchEvent ? null : showTooltip,\n            onMouseLeave: isTouchEvent ? null : hideTooltip,\n            onFocus: showTooltip,\n            onBlur: hideTooltip,\n            'aria-describedby': tooltipId,\n          })\n        );\n      })}\n      {ReactDOM.createPortal(\n        <ReflowTransition\n          mountOnEnter\n          unmountOnExit\n          in={visible}\n          timeout={300}\n        >\n          {status =>\n            <TooltipContainer\n              id={tooltipId}\n              rect={rect}\n              status={status}\n              position={position}\n              offset={offset}\n              {...props}\n              role=\"tooltip\"\n            >\n              {text}\n            </TooltipContainer>}\n        </ReflowTransition>,\n        document.body\n      )}\n    </React.Fragment>\n  );\n}\n\nTooltip.propTypes = {\n  position: PropTypes.string,\n  offset: PropTypes.number,\n  text: PropTypes.string,\n  children: PropTypes.node,\n};\n\nfunction getPosition({ position, rect, offset }) {\n  if (!rect) return {};\n\n  return {\n    top: {\n      bottom: window.innerHeight - rect.top + offset,\n      left: rect.left + rect.width / 2,\n    },\n    right: {\n      top: rect.top + rect.height / 2,\n      left: rect.right + offset,\n    },\n    bottom: {\n      top: rect.bottom + offset,\n      left: rect.left + rect.width / 2,\n    },\n    left: {\n      top: rect.top + rect.height / 2,\n      right: window.innerWidth - rect.left + offset,\n    },\n  }[position];\n}\n\nconst TooltipContainer = styled.div.attrs(props => ({\n  className: `tooltip tooltip--${props.status}`,\n  style: getPosition(props),\n}))`\n  position: fixed;\n  background: ${props => rgba(props.theme.tooltipColor, 0.98)};\n  box-shadow: 0 0 4px 0 rgba(0, 0, 0, 0.1), 0 2px 8px 0 rgba(0, 0, 0, 0.15), 0 9px 20px 0 rgba(0, 0, 0, 0.2);\n  border-radius: 4px;\n  color: white;\n  padding: 6px 10px;\n  z-index: 5096;\n  pointer-events: none;\n  user-select: none;\n  opacity: ${props => isVisible(props.status) ? 1 : 0};\n  transition-property: transform, opacity;\n  transition-duration: 0.3s;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  font-size: 14px;\n  font-family:  ${({ theme }) => theme.titleFont};\n  line-height: 1;\n  display: flex;\n  align-items: center;\n\n  ${props => props.position === 'top' && css`\n    transform: translate3d(-50%, ${isVisible(props.status) ? 0 : `6px`}, 0);\n  `}\n\n  ${props => props.position === 'right' && css`\n    transform: translate3d(${isVisible(props.status) ? 0 : `-6px`}, -50%, 0);\n  `}\n\n  ${props => props.position === 'bottom' && css`\n    transform: translate3d(-50%, ${isVisible(props.status) ? 0 : `-6px`}, 0);\n  `}\n\n  ${props => props.position === 'left' && css`\n    transform: translate3d(${isVisible(props.status) ? 0 : `6px`}, -50%, 0);\n  `}\n\n  &::before {\n    content: '';\n    width: 0;\n    height: 0;\n    position: absolute;\n\n    ${props => props.position === 'top' && css`\n      border-left: 6px solid transparent;\n      border-right: 6px solid transparent;\n      border-top: 6px solid ${props => rgba(props.theme.tooltipColor, 0.98)};\n      transform: translate3d(-50%, 100%, 0);\n      left: 50%;\n      bottom: 0;\n    `}\n\n    ${props => props.position === 'right' && css`\n      border-top: 6px solid transparent;\n      border-bottom: 6px solid transparent;\n      border-right: 6px solid ${props => rgba(props.theme.tooltipColor, 0.98)};\n      transform: translate3d(-100%, -50%, 0);\n      left: 0;\n      top: 50%;\n    `}\n\n    ${props => props.position === 'bottom' && css`\n      border-left: 6px solid transparent;\n      border-right: 6px solid transparent;\n      border-bottom: 6px solid ${props => rgba(props.theme.tooltipColor, 0.98)};\n      transform: translate3d(-50%, -100%, 0);\n      left: 50%;\n      top: 0;\n    `}\n\n    ${props => props.position === 'left' && css`\n      border-top: 6px solid transparent;\n      border-bottom: 6px solid transparent;\n      border-left: 6px solid ${props => rgba(props.theme.tooltipColor, 0.98)};\n      transform: translate3d(100%, -50%, 0);\n      right: 0;\n      top: 50%;\n    `}\n  }\n`;\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport styled from 'styled-components';\n\nimport HistoryNavigation from './HistoryNavigation';\nimport SidebarApp from './SidebarApp';\nimport Icon from './Icon';\nimport Tooltip from './Tooltip';\nimport { rgba } from '../utils/colors';\nimport { BUILTIN_APP } from '../app/constants';\n\nconst appIcons = [\n  {\n    name: 'History',\n    icon: 'navigator',\n  },\n  {\n    name: 'Notes',\n    icon: 'note',\n  },\n  {\n    name: 'Bookmarks',\n    icon: 'bookmark',\n  },\n  {\n    name: 'Discussions',\n    icon: 'discussion',\n  },\n  {\n    name: 'Competencies',\n    icon: 'competency',\n  },\n];\n\nconst tabHeight = 48;\n\nfunction AppSidebar({\n  apps,\n  cdp,\n  currentApp,\n  setCurrentApp,\n  status,\n  historyNavigation,\n  ...props\n}) {\n  const currentTabIndex = apps.findIndex((app) => app.itemId === currentApp);\n  const showHistoryNavigation = historyNavigation && historyNavigation.showHistoryNav === 'show';\n\n  const setApp = (itemId) => {\n    setCurrentApp(itemId);\n  };  \n\n  const appButtons = apps.map(app => ({\n    ...app,\n    icon: appIcons.find(icon => icon.name === app.itemName),\n  }));\n  \n  return (\n    <AppSidebarContainer status={status} {...props}>\n      <AppSidebarTabs>\n        {appButtons.map(({ itemName, itemId, icon, ariaLabel='' }) => (\n          <Tooltip text={itemName} position=\"right\" key={itemId}>\n            <AppSidebarTabButton\n              onClick={() => setApp(itemId)}\n              data-selected={currentApp === itemId}\n              aria-label={ariaLabel}\n            >\n              <AppSidebarTabIcon>\n                { icon && (\n                  <Icon icon={icon && icon.icon} />\n                )}\n              </AppSidebarTabIcon>\n            </AppSidebarTabButton>\n          </Tooltip>\n        ))}\n\n        {/* <Tooltip text=\"Help\" position=\"right\">\n          <AppSidebarTabButton alignEnd>\n            <AppSidebarTabIcon>\n              <Icon icon=\"help\" />\n            </AppSidebarTabIcon>\n          </AppSidebarTabButton>\n        </Tooltip> */}\n        <AppSidebarTabIndicator currentTabIndex={currentTabIndex} />\n      </AppSidebarTabs>\n      <AppSidebarContent>\n        {currentApp && currentApp !== BUILTIN_APP  && <SidebarApp currentApp={currentApp} cdp={cdp} />}\n        {showHistoryNavigation && <HistoryNavigation historyNavigation={historyNavigation} cdp={cdp} isEnabled={currentApp === BUILTIN_APP} />}\n      </AppSidebarContent>\n    </AppSidebarContainer>\n  );\n}\n\nAppSidebar.propTypes = {\n  status: PropTypes.string,\n  setCurrentApp: PropTypes.func,\n  currentApp: PropTypes.string,\n  apps: PropTypes.array,\n  historyNavigation: PropTypes.object,\n  menuItems: PropTypes.arrayOf(PropTypes.object),\n};\n\nAppSidebar.defaultProps = {\n  apps: [],\n};\n\nconst AppSidebarContainer = styled.div.attrs(props => ({\n  className: `app-sidebar app-sidebar-${props.appSidebarOpen ? 'open' : 'closed'}`,\n}))`\n  width: ${props => props.appSidebarOpen ? `${props.theme.appSidebarWidthDesktop}px` : 0};\n  z-index: 1024;\n  transition: width 0.5s ${props => props.theme.curveFastoutSlowin}, visibility 0.5s;\n  overflow: hidden;\n  background: ${props => props.theme.surfaceColor};\n  border-right: ${props => props.appSidebarOpen ? `solid 1px ${rgba(props.theme.textColor, 0.1)}` : 0};\n  display: flex;\n  ${props => !props.appSidebarOpen && `visibility: hidden`};\n\n  @media (max-width: ${props => props.theme.tablet}px) {\n    width: ${props => props.appSidebarOpen ? `${props.theme.appSidebarWidthTablet}px` : 0};\n  }\n\n  @media (max-width: ${props => props.theme.mobile}px) {\n    width: ${props => props.appSidebarOpen ? `calc(100vw - ${props.theme.appSidebarMobileOffset}px)` : 0};\n  }\n`;\n\nconst AppSidebarContent = styled.div.attrs({\n  className: 'app-sidebar__content',\n})`\n  width: ${props => props.theme.appSidebarWidthDesktop - props.theme.appTabsSidebarWidth}px;\n  height: 100%;\n  position: relative;\n  transition: width 0.5s ${props => props.theme.curveFastoutSlowin};\n\n  @media (max-width: ${props => props.theme.tablet}px) {\n    width: ${props => props.theme.appSidebarWidthTablet - props.theme.appTabsSidebarWidth}px;\n  }\n\n  @media (max-width: ${props => props.theme.mobile}px) {\n    width: calc(100vw - ${props => props.theme.appSidebarMobileOffset}px);\n  }\n`;\n\nconst AppSidebarTabs = styled.div.attrs({\n  className: 'app-sidebar__tabs',\n})`\n  display: flex;\n  flex-direction: column;\n  box-shadow: inset -1px 0 0 0 ${props => rgba(props.theme.textColor, 0.1)};\n  padding: 10px 0;\n  position: relative;\n`;\n\nconst AppSidebarTabButton = styled.button.attrs({\n  className: 'app-sidebar__tab-button',\n})`\n  background: transparent;\n  border: 0;\n  margin: 0;\n  padding: 0;\n  width: ${({ theme }) => theme.appTabsSidebarWidth}px;\n  height: ${tabHeight}px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: ${props => props.alignEnd ? 'auto' : 0};\n\n  &:focus {\n    outline: none;\n  }\n\n  svg {\n    fill: ${props => rgba(props.theme.textColor, 0.6)};\n    transition: fill 0.3s ease;\n    display: block;\n  }\n\n  &[data-selected='true'] svg {\n    fill: ${props => props.theme.primaryColor};\n  }\n`;\n\nconst AppSidebarTabIcon = styled.span.attrs({\n  className: 'app-sidebar__tab-icon',\n})`\n  width: 36px;\n  height: 36px;\n  border-radius: 18px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition-property: box-shadow, background-color;\n  transition-duration: 0.3s;\n  transition-timing-function: ease;\n\n  ${AppSidebarTabButton}:hover &,\n  ${AppSidebarTabButton}:focus & {\n    background-color: ${props => rgba(props.theme.textColor, 0.2)};\n  }\n\n  ${AppSidebarTabButton}[data-selected='true']:hover &,\n  ${AppSidebarTabButton}[data-selected='true']:focus & {\n    background-color: ${props => rgba(props.theme.primaryColor, 0.2)};\n  }\n\n  ${AppSidebarTabButton}:focus & {\n    box-shadow: 0 0 0 3px ${props => rgba(props.theme.textColor, 0.4)};\n  }\n\n  ${AppSidebarTabButton}[data-selected='true']:focus & {\n    box-shadow: 0 0 0 3px ${props => rgba(props.theme.primaryColor, 0.4)};\n  }\n`;\n\nconst AppSidebarTabIndicator = styled.div.attrs(({currentTabIndex}) => ({\n  className: 'app-sidebar__tab-indicator',\n  style: {\n    transform: `translate3d(0, ${18 + (currentTabIndex * tabHeight)}px, 0)`,\n  },\n}))`\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 2px;\n  height: 100%;\n  background-color: ${props => props.theme.primaryColor};\n  height: ${tabHeight - 16}px;\n  transition: transform 0.4s ${props => props.theme.curveFastoutSlowin};\n`;\n\nexport default AppSidebar;\n","import React, { useEffect, useState, useRef } from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport styled, { css } from 'styled-components';\nimport { ReflowTransition, isVisible } from '../utils/transition';\nimport { rgba } from '../utils/colors';\nimport usePrevious from '../hooks/usePrevious';\n\nexport function Dropdown({ children }) {\n  const [selectionIndex, setSelectionIndex] = useState(0);\n  const [expanded, setExpanded] = useState(false);\n  const prevExpanded = usePrevious(expanded);\n  const dropdownButtonRef = useRef();\n  const dropdownMenuRef = useRef();\n  const dropdownItemsRef = useRef([]);\n\n  useEffect(() => {\n    setTimeout(() => {\n      if (expanded) {\n        if (selectionIndex !== -1) {\n          dropdownItemsRef.current[selectionIndex].current.focus();\n        } else {\n          dropdownMenuRef.current.focus();\n        }\n      } else if (!expanded && prevExpanded) {\n        dropdownButtonRef.current.focus();\n      }\n    });\n  }, [expanded, prevExpanded, selectionIndex]);\n\n  return (\n    <React.Fragment>\n      {React.Children.map(children, child =>\n        React.cloneElement(child, {\n          dropdownButtonRef,\n          dropdownMenuRef,\n          dropdownItemsRef,\n          selectionIndex,\n          setSelectionIndex,\n          expanded,\n          setExpanded,\n        })\n      )}\n    </React.Fragment>\n  );\n}\n\nDropdown.propTypes = {\n  children: PropTypes.node,\n};\n\nconst genId = prefix => `${prefix}-${Math.random().toString(32).substr(2, 8)}`;\n\nexport function DropdownButton({ setExpanded, setSelectionIndex, expanded, dropdownButtonRef, ...props }) {\n  const buttonId = useRef(genId('button'));\n\n  const handleClick = () => {\n    if (!expanded) {\n      setSelectionIndex(0);\n      setExpanded(true);\n    } else {\n      setSelectionIndex(-1);\n      setExpanded(false);\n    }\n  };\n\n  const handleKeyDown = event => {\n    if (event.key === 'ArrowDown') {\n      event.preventDefault(); // prevent scroll\n      setExpanded(true);\n      setSelectionIndex(0);\n    } else if (event.key === 'ArrowUp') {\n      event.preventDefault(); // prevent scroll\n      setExpanded(true);\n      setSelectionIndex(0);\n    }\n  };\n\n  return (\n    <DropdownButtonElement\n      id={buttonId.current}\n      ref={dropdownButtonRef}\n      aria-expanded={expanded}\n      onClick={handleClick}\n      onKeyDown={handleKeyDown}\n      {...props}\n    />\n  );\n}\n\nDropdownButton.propTypes = {\n  setExpanded: PropTypes.func,\n  setSelectionIndex: PropTypes.func,\n  expanded: PropTypes.bool,\n  dropdownButtonRef: PropTypes.object,\n};\n\nconst focusableChildrenTypes = [DropdownMenuItem];\nconst isFocusableChildType = child => focusableChildrenTypes.includes(child.type);\nconst getFocusableMenuChildren = children => {\n  if (!children.length && isFocusableChildType(children)) return [children];\n  return children.filter(child => isFocusableChildType(child));\n};\n\nfunction DropdownContainer({\n  status,\n  children,\n  setExpanded,\n  dropdownButtonRef,\n  dropdownMenuRef,\n  dropdownItemsRef,\n  setSelectionIndex,\n  selectionIndex,\n  ...props\n}) {\n  const buttonRectRef = useRef(dropdownButtonRef.current.getBoundingClientRect());\n  const [rect, setRect] = useState();\n  const [position, setPosition] = useState({ top: buttonRectRef.current.bottom + 8, left: buttonRectRef.current.left });\n  const focusableChildren = getFocusableMenuChildren(children);\n\n  useEffect(() => {\n    if (dropdownMenuRef.current) {\n      requestAnimationFrame(() => {\n        setRect(dropdownMenuRef.current.getBoundingClientRect());\n      });\n    }\n  }, [dropdownMenuRef]);\n\n  useEffect(() => {\n    const windowWidth = window.innerWidth;\n    const windowHeight = window.innerHeight;\n    const buttonRect = buttonRectRef.current;\n\n    if (rect) {\n      requestAnimationFrame(() => {\n        const top = rect.bottom >= windowHeight ? null : buttonRect.bottom + 8;\n        const right = rect.right >= windowWidth ? windowWidth - buttonRect.right : null;\n        const bottom = rect.bottom >= windowHeight ? windowHeight - buttonRect.top + 8 : null;\n        const left = rect.right >= windowWidth ? null : buttonRect.left;\n        setPosition({top, right, bottom, left});\n      });\n    }\n  }, [rect]);\n\n  useEffect(() => {\n    const handleOuterClick =event => {\n      if (dropdownButtonRef.current.contains(event.target)) return;\n\n      if (!dropdownMenuRef.current.contains(event.target)) {\n        setExpanded(false);\n        setSelectionIndex(-1);\n      }\n    };\n\n    document.addEventListener('click', handleOuterClick);\n\n    return function cleanup() {\n      document.removeEventListener('click', handleOuterClick);\n    };\n  }, [dropdownButtonRef, dropdownMenuRef, setExpanded, setSelectionIndex]);\n\n\n  const handleKeyDown = event => {\n    if (event.key === 'Escape') {\n      setExpanded(false);\n      setSelectionIndex(-1);\n    } else if (event.key === 'ArrowDown') {\n      event.preventDefault(); // prevent window scroll\n      const nextIndex = selectionIndex + 1;\n      if (nextIndex !== focusableChildren.length) {\n        setSelectionIndex(nextIndex);\n      }\n    } else if (event.key === 'ArrowUp') {\n      event.preventDefault(); // prevent window scroll\n      const nextIndex = selectionIndex - 1;\n      if (nextIndex !== -1) {\n        setSelectionIndex(nextIndex);\n      }\n    } else if (event.key === 'Tab') {\n      event.preventDefault(); // prevent leaving\n    }\n  };\n\n  const handleBlur = event => {\n    const isOutside = !dropdownMenuRef.current.contains(event.relatedTarget);\n    const isButton = event.relatedTarget === dropdownButtonRef.current;\n\n    if (isOutside && !isButton) {\n      setExpanded(false);\n      setSelectionIndex(-1);\n    }\n  };\n\n  return (\n    <DropdownMenuContainer\n      aria-labelledby={dropdownButtonRef.current.id}\n      ref={dropdownMenuRef}\n      status={status}\n      position={position}\n      onKeyDown={handleKeyDown}\n      onBlur={handleBlur}\n      {...props}\n    >\n      {React.Children.map(children, child => {\n        if (isFocusableChildType(child)) {\n          const focusIndex = focusableChildren.indexOf(child);\n          const itemRef = React.createRef();\n          dropdownItemsRef.current[focusIndex] = itemRef;\n\n          return React.cloneElement(child, {\n            setSelectionIndex,\n            selectionIndex,\n            index: focusIndex,\n            itemRef: itemRef,\n          });\n        }\n\n        return child;\n      })}\n    </DropdownMenuContainer>\n  );\n}\n\nDropdownContainer.propTypes = {\n  setExpanded: PropTypes.func.isRequired,\n  children: PropTypes.node,\n  status: PropTypes.string,\n  dropdownMenuRef: PropTypes.object,\n  dropdownButtonRef: PropTypes.object,\n  dropdownItemsRef: PropTypes.object,\n  setSelectionIndex: PropTypes.func,\n  selectionIndex: PropTypes.number,\n};\n\n\nexport function DropdownMenu({ expanded, children, ...props }) {\n  return (\n    <ReflowTransition mountOnEnter unmountOnExit in={expanded} timeout={400}>\n      {status => ReactDOM.createPortal((\n        <DropdownContainer status={status} {...props}>\n          {children}\n        </DropdownContainer>\n      ), document.body)}\n    </ReflowTransition>\n  );\n}\n\nDropdownMenu.propTypes = {\n  expanded: PropTypes.bool,\n  children: PropTypes.node,\n};\n\nexport function DropdownMenuItem({ index, selectionIndex, itemRef, ...props }) {\n  const selected = index === selectionIndex;\n\n  return (\n    <DropdownMenuItemElement ref={itemRef} selected={selected} { ...props } />\n  );\n}\n\nDropdownMenuItem.propTypes = {\n  index: PropTypes.number,\n  selectionIndex: PropTypes.number,\n  itemRef: PropTypes.object,\n};\n\nconst DropdownMenuContainer = styled.div.attrs(props => ({\n  className: `dropdown dropdown--${props.status} header__avatar__dropdown`,\n  role: 'menu',\n  tabIndex: -1,\n  style: props.position,\n}))`\n  position: fixed;\n  transform: translate3d(0, -8px, 0);\n  opacity: 0;\n  transition-property: opacity, transform;\n  transition-duration: 0.3s;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  display: flex;\n  flex-direction: column;\n  background: ${props => props.theme.surfaceColor};\n  padding: 8px;\n  box-shadow: 0 5px 47px 10px rgba(0,0,0,0.15), 0 10px 20px 2px rgba(0,0,0,0.10), 0 7px 8px 0 rgba(0,0,0,0.10);\n  border-radius: 6px;\n  min-width: 140px;\n  z-index: 2048;\n  box-sizing: border-box;\n\n  ${props => isVisible(props.status) && css`\n    transform: translate3d(0, 0, 0);\n    opacity: 1;\n  `}\n`;\n\nconst DropdownButtonElement = styled.button.attrs({\n  className: 'dropdown__button header__avatar__dropdown__button',\n  'aria-haspopup': true,\n})`\n  border: 0;\n  margin: 0;\n  padding: 0;\n  font-family: inherit;\n  background: none;\n  cursor: pointer;\n`;\n\nconst DropdownMenuItemElement = styled.button.attrs({\n  className: 'dropdown__menu-item header__avatar__dropdown__menu-item',\n  role: 'menuitem',\n  tabIndex: -1,\n})`\n  border: 0;\n  margin: 0;\n  padding: 0 6px;\n  height: 32px;\n  background: none;\n  border-radius: 4px;\n  font-family: inherit;\n  font-size: 14px;\n  text-align: left;\n  color: ${props => rgba(props.theme.textColor, 0.7)};\n  transition-property: background, box-shadow;\n  transition-duration: 0.3s;\n  transition-timing-function: ease;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  text-decoration: none;\n\n  &:hover,\n  &:focus {\n    background: ${props => rgba(props.theme.textColor, 0.1)};\n  }\n\n  &:focus {\n    box-shadow: inset 0 0 0 3px ${props => rgba(props.theme.textColor, 0.2)};\n    outline: none;\n  }\n\n  ${props => props.active && css`\n    color: ${props => props.theme.primaryColor};\n    background: ${props => rgba(props.theme.primaryColor, 0.1)};\n\n    &:hover,\n    &:focus {\n      background: ${props => rgba(props.theme.primaryColor, 0.2)};\n    }\n\n    &:focus {\n      box-shadow: inset 0 0 0 3px ${props => rgba(props.theme.primaryColor, 0.2)};\n    }\n  `}\n`;\n","import { useEffect, useRef } from 'react';\n\nexport default function usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n","import React, {useState, useEffect, useRef} from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport cdp from '@pearsontechnology/aero-plugin-api/lib/cdp';\n\nimport { rgba } from '../utils/colors';\nimport { Dropdown, DropdownButton, DropdownMenu, DropdownMenuItem } from './Dropdown';\nimport Icon from './Icon';\nimport {CDP_EVENT_NAMES} from '../app/constants';\n\nconst getUserNameInitials = (user) => {\n  return (\n    !!user &&\n    !user.avatarSmall &&\n    !!user.givenName &&\n    !!user.familyName &&\n    `${user.givenName.charAt(0)}${user.familyName.charAt(0)}`\n  );\n};\n\nfunction Header({\n  title,\n  logo,\n  user,\n  disabledMenu,\n  showTitle,\n  toggleSidebar,\n  appSidebarOpen,\n  children,\n  styles,\n  hideOnScroll,\n  ...props\n}) {\n  const handleLogoClick = () => {\n    if (process.env.NODE_ENV === 'development') {\n      return;\n    } else {\n      cdp.courseware('root').route().set();\n    }\n  };\n\n  const SCROLL_DELTA_THRESHOLD = 170;\n  const previousScrollPositionRef = useRef(0);\n  const userNameInitials = getUserNameInitials(user);\n  const [headerHidden, setHeaderHidden] = useState(false);\n\n  const handleScroll = (event) =>{\n      const { height: headerHeight } = styles;\n      const { screenScrollTop, screenContentTop = SCROLL_DELTA_THRESHOLD } = event;\n      const scrollDelta = screenScrollTop - previousScrollPositionRef.current;\n      const visibleScroll = screenContentTop - headerHeight;\n      const headerHidden = (screenScrollTop < visibleScroll || scrollDelta< 0) ? false : true;\n      previousScrollPositionRef.current = screenScrollTop;\n      setHeaderHidden(headerHidden);\n  };\n\n  useEffect( () => {\n      let subscription;\n      if(hideOnScroll) {\n          const subscribe = async () => {\n              subscription = await cdp.event(CDP_EVENT_NAMES.SCREEN_SCROLL).subscribe(handleScroll);\n          };\n          subscribe();\n      }\n     return () => {\n         if(subscription)\n            subscription.unsubscribe();\n     };\n  }, [hideOnScroll]);\n\n  return (\n    <HeaderContainer headerHidden={headerHidden && hideOnScroll} appSidebarOpen={appSidebarOpen} styles={styles} {...props}>\n\n      {!disabledMenu && (\n        <HeaderMenuButton\n          aria-label=\"Menu\"\n          aria-expanded={appSidebarOpen}\n          onTouchStart={event => event.stopPropagation()}\n          onClick={toggleSidebar}\n          headerHidden={headerHidden && hideOnScroll}\n        >\n          <HeaderMenuButtonIcon icon=\"menu\" />\n        </HeaderMenuButton>\n      )}\n\n      { logo && (\n        <HeaderLogo onClick={handleLogoClick}>\n          <HeaderLogoImage headerHidden={headerHidden && hideOnScroll} src={logo} alt={logo.altText} />\n        </HeaderLogo>\n      )}\n\n      { title && showTitle && (\n        <HeaderTitle headerHidden={headerHidden && hideOnScroll} titleSize={styles.titleSize}>{title}</HeaderTitle>\n      )}\n\n      <Spacer />\n      <PluginWrapper headerHidden={headerHidden && hideOnScroll}>\n        {children}\n      </PluginWrapper>\n      <Dropdown>\n        <HeaderAvatarButton headerHidden={headerHidden && hideOnScroll} aria-label={userNameInitials ? `${userNameInitials}_Profile menu` : 'Profile menu'}>\n          {!!user && !!user.avatarSmall &&\n            <HeaderAvatar src={user.avatarSmall} alt=\"\" />\n          }\n          {userNameInitials}\n          {!user &&\n            <Icon icon=\"account\" />\n          }\n        </HeaderAvatarButton>\n        <DropdownMenu>\n          <DropdownMenuItem>Log out</DropdownMenuItem>\n        </DropdownMenu>\n      </Dropdown>\n    </HeaderContainer>\n  );\n}\n\nHeader.propTypes = {\n  history: PropTypes.object,\n  toggleSidebar: PropTypes.func,\n  appSidebarOpen: PropTypes.bool,\n  user: PropTypes.object,\n  children: PropTypes.node,\n  logo: PropTypes.object,\n  styles: PropTypes.object,\n  disabledMenu: PropTypes.bool,\n  showTitle: PropTypes.bool,\n};\n\nconst HeaderContainer = styled.header.attrs({\n  className: 'header',\n})`\n  position: absolute;\n  top: 0;\n  height: ${props => props.styles.height ? `${props.styles.height}px`: '60px'};\n  padding: ${props => props.styles.padding ? `${props.styles.padding}`: '10px 20px'};\n  ${props => (props.styles.shadow && `box-shadow: 0 1px 1px 0 rgba(0, 0, 0, ${props.headerHidden ? '0':'0.15'} );`)};\n  display: flex;\n  align-items: center;\n  z-index: 2048;\n  transition: width 0.5s ${props => props.theme.curveFastoutSlowin};\n  transition: background-color 0.8s, box-shadow 0.8s;  \n  background-color: ${props => rgba(props.theme.surfaceColor, props.headerHidden ? 0 : 1 )};\n  width: 100%;\n\n  &:hover{\n    background-color: ${props => rgba(props.theme.surfaceColor, 1)};\n    ${props => (props.styles.shadow && `box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.15);`)};\n  }\n`;\n\nexport const HeaderLogo = styled.button.attrs({\n  className: 'header__logo',\n})`\n  height: 100%;\n  display: flex;\n  flex: 0 0 auto;\n  align-items: center;\n  margin: 0 0 0 10px;\n  position: relative;\n  z-index: 2;\n  background-color: transparent;\n  border: 0;\n  padding: 0 10px;\n  cursor: pointer;\n  transition: background-color 0.3s ease, box-shadow 0.3s ease;\n  border-radius: 4px;\n\n  &:hover,\n  &:focus {\n    background-color: ${props => rgba(props.theme.textColor, 0.1)};\n  }\n\n  &:focus {\n    outline: none;\n    box-shadow: 0 0 0 3px ${props => rgba(props.theme.textColor, 0.2)};\n  }\n\n  @media (max-width: ${props => props.theme.mobile}px) {\n    margin-left: 10px;\n    padding: 0;\n  }\n`;\n\nexport const HeaderLogoImage = styled.img.attrs({\n  className: 'header__logo-image',\n})`\n  display: block;\n  width: 96px;\n  opacity: ${props =>props.headerHidden ? 0 : 1 };\n  transition: opacity 0.8s;\n\n  ${HeaderContainer}:hover &{\n    opacity: 1;\n  }\n  \n  @media (max-width: 320px) {\n    width: 68px;\n  }\n`;\n\nconst HeaderAvatarButton = styled(DropdownButton).attrs({\n  className: 'header__avatar-button',\n})`\n  flex: 0 0 auto;\n  padding: 0;\n  margin: 0;\n  border: 0;  \n  cursor: pointer;\n  appearance: none;\n  margin-left: auto;\n  position: relative;\n  z-index: 2;\n  transition: box-shadow 0.3s ease, background-color 0.8s;\n  border-radius: 50%;\n  text-transform: uppercase;\n  background-color: ${props => props.headerHidden? props.theme.surfaceColor : `rgba(${props.theme.textColor}, 0.2)` };\n  color: ${props => props.theme.textColor};\n  font-size: 12px;\n  font-weight: 700;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  ${HeaderContainer}:hover &{\n    background-color: transparent;\n  }\n  \n  &:focus {\n    outline: none;\n    box-shadow: 0 0 0 3px ${props => rgba(props.theme.textColor, 0.4)};\n  }\n\n  &::after {\n    content: '';\n    box-shadow: inset 0 0 0 1px ${props => rgba(props.theme.textColor, 0.2)};\n    border-radius: 16px;\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n\n  svg {\n    display: block;\n    fill: ${props => rgba(props.theme.textColor, 0.8)};\n  }\n`;\n\nconst HeaderAvatar = styled.img.attrs({\n  className: 'header__avatar',\n})`\n  display: block;\n  width: 32px;\n  height: 32px;\n  border-radius: 16px;\n`;\n\nconst HeaderMenuButton = styled.button.attrs({\n  className: 'header__menu-button',\n})`\n  flex: 0 0 auto;\n  padding: 0;\n  margin: 0;\n  border: 0;\n  background-color:  ${props => (props.headerHidden ? props.theme.surfaceColor: 'transparent')};\n  width: 36px;\n  height: 36px;\n  cursor: pointer;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background-color 0.8s;  \n  position: relative;\n  z-index: 2;  \n  ${props => (props.headerHidden && `box-shadow: rgb(0 0 0 / 5%) 0px 0px 4px 0px, rgb(0 0 0 / 8%) 0px 1px 3px 0px, rgb(50 50 93 / 11%) 0px 4px 6px 0px;`)}; \n  \n  ${HeaderContainer}:hover &{\n    box-shadow: 0px 0px;\n    background-color: transparent;\n  }  \n\n  &:hover,\n  &:focus,\n  &[aria-pressed='true'] {\n    background: ${props => rgba(props.theme.textColor, 0.2)};\n  }\n\n  &:focus {\n    box-shadow: 0 0 0 3px ${props => rgba(props.theme.textColor, 0.4)};\n    outline: none;\n  }\n`;\n\nconst HeaderMenuButtonIcon = styled(Icon).attrs({\n  className: 'header__menu-button-icon',\n})`\n  fill: ${props => rgba(props.theme.textColor, 0.8)};\n  display: block;\n`;\n\nconst HeaderTitle = styled.h1.attrs({\n  className: 'header__title',\n})`\n  flex: 0 0 auto;\n  position: relative;\n  margin: 0 15px 0 15px;\n  transition: color 0.8s;\n  color: ${props => rgba(props.theme.textColor, props.headerHidden ? 0 : 1 )};\n  font-family: ${props => props.theme.titleFont};\n  font-weight: 600;\n  font-size: ${props => props.titleSize}px;\n  \n  ${HeaderContainer}:hover &{\n    color: ${props => rgba(props.theme.textColor, 1)};\n  }\n  \n  @media (max-width: ${props => props.theme.mobile}px) {\n    max-width: 50%;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n\n  @media (max-width: 340px) {\n    max-width: 40%;\n  }\n`;\n\nconst Spacer = styled.span`\n  flex: 1 1 auto;\n`;\n\nconst PluginWrapper = styled.div.attrs({\n  className: 'plugin__wrapper',\n})`\n  position: relative;\n  display: flex;\n  height: 100%;\n  margin-right: 10px;\n  opacity: ${props =>props.headerHidden ? 0 : 1 };\n  transition: opacity 0.8s;\n\n  ${HeaderContainer}:hover &{\n    opacity: 1;\n  }\n\n  @media (max-width: ${props => props.theme.mobile}px) {\n    width: auto;\n    flex: 0 0 auto;\n    margin-right: 0;\n  }\n`;\n\n\nexport default Header;","import {\n  mergeTransitions,\n  TRANSITION_TYPES,\n} from '@pearsontechnology/aero-cdp-child-container';\n\nexport const handleChildTransitions = async (cdp, childId, unformattedLessonTransition) => {\n  const lessonTransition = reformatSchemaTransition(unformattedLessonTransition);\n  const screenTransition = await cdp.child(childId).state('transitions').get().then(reformatSchemaTransition);\n\n  return mergeTransitions(lessonTransition, screenTransition);\n};\n\n/**\n * @typedef Direction\n * @type {Object}\n * @property {Object.<string, number|string>} config\n * @property {string} customKeyframes\n * @property {TRANSITION_TYPES|undefined} type\n */\n\n /**\n * @typedef ReformattedTransition\n * @type {Object}\n * @property {Direction} enter\n * @property {Direction} exit\n */\n\n/** Converts transition settings from screen schema into the format used by CdpPlugin\n * @param {Object} schemaTransition\n * @returns {ReformattedTransition}\n */\nexport const reformatSchemaTransition = (schemaTransition = {}) =>\n  Object.entries(schemaTransition).reduce(\n    (accTransition, [direction, { animation, customKeyframes, ...config }]) => ({\n      [direction]: {\n        config,\n        customKeyframes: customKeyframes,\n        type: TRANSITION_TYPES[animation],\n      },\n      ...accTransition,\n    }),\n    {}\n  );\n","import PropTypes from 'prop-types';\nimport React, { useContext, useRef, useEffect } from 'react';\nimport styled from 'styled-components';\n\nimport {\n  useCdpChildContainer,\n  PLUGIN_TYPES,\n} from '@pearsontechnology/aero-cdp-child-container';\n\nimport { AppContext } from '../app';\nimport { handleChildTransitions } from '../utils/childContainerTransitions';\nimport {CDP_EVENT_NAMES} from '../app/constants';\n\nconst MAX_POLLING_ATTEMPTS = 60;\nconst POLLING_INTERVAL = 1000;\n\nfunction CoursewareChild({ cdp, context, childId, childContext, evaluationId, isLessonLoaded, ...props }) {\n  const { config: { transitions: lessonTransition } } = useContext(AppContext);\n\n  const ref = useRef();\n\n  useCdpChildContainer(ref, {\n    cdp,\n    childId,\n    childType: PLUGIN_TYPES.LESSON,\n    localContext: { context: childContext || context, evaluationId },\n    transitions: () => handleChildTransitions(cdp, childId, lessonTransition)\n  });\n  cdp.event(CDP_EVENT_NAMES.SCREEN_SCROLL).publish({screenScrollTop: 0});\n\n  const checkLessonReady = (attemptsLeft, screenDiv) => {\n    if (attemptsLeft < 1) return isLessonLoaded();\n\n    if (\n      Array.from(screenDiv.querySelectorAll('iframe'))\n        .map((iframe) => (iframe && iframe.contentDocument && iframe.contentDocument.documentElement && iframe.contentDocument.documentElement.scrollHeight) || 0)\n        .every((height) => height > 0)\n    ){\n      return isLessonLoaded();\n    }\n\n    setTimeout(checkLessonReady, POLLING_INTERVAL, attemptsLeft - 1, screenDiv);\n  };\n\n  useEffect(()=>{\n    if(ref.current){\n      setTimeout(checkLessonReady, POLLING_INTERVAL, MAX_POLLING_ATTEMPTS, ref.current);\n    }\n\n  }, [ref]);\n\n  return (\n    <ChildContainer ref={ref} {...props} />\n  );\n}\n\nCoursewareChild.propTypes = {\n  cdp: PropTypes.object,\n  childrenKey: PropTypes.string,\n  context: PropTypes.string,\n};\n\nexport default CoursewareChild;\n\nconst ChildContainer = styled.div.attrs({\n  className: 'content__main',\n})`\n  height: 100%;\n`;\n","import { useEffect, useState } from 'react';\nimport cdp from '@pearsontechnology/aero-plugin-api/lib/cdp';\n\nconst initialProgress = {\n  attempt: { value: 0 },\n  completion: { value: 0 },\n  score: { value: 0 },\n};\n\nexport default function useScoreAndProgress(coursewareId) {\n  const [progress, setProgress] = useState(initialProgress);\n\n  useEffect(() => {\n    let unsubscribe;\n\n    const getData = async () => {\n      const handleProgressChange = (updatedProgress) => setProgress(updatedProgress || initialProgress);\n\n      await cdp.register();\n      const target = coursewareId ? cdp.courseware(coursewareId) : cdp;\n      ({ unsubscribe } = await target.progress().subscribe(handleProgressChange));\n    };\n\n    getData();\n\n    return () => unsubscribe && unsubscribe();\n  }, [coursewareId]);\n\n  return progress;\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport useCDPScoreAndProgress from '../hooks/useCDPScoreAndProgress';\n\nexport default function ScoreDisplay() {\n  const progress = useCDPScoreAndProgress();\n  return <ScoreWrapper>Score: {progress.score.value}</ScoreWrapper>;\n}\n\nconst ScoreWrapper = styled.span.attrs({\n  className: 'header__score',\n})`\n  flex: 0 0 auto;\n  margin: 0 15px;\n  font-size: 14px;\n  font-weight: 500;\n  padding: 15px 0;\n`;","import cdp from '@pearsontechnology/aero-plugin-api/lib/cdp';\nimport sampleAvatarPath from './sample-avatar.jpg';\n\n// Return a fake user for dev\nexport default function() {\n  if (process.env.NODE_ENV === 'development') {\n    return new Promise(resolve => {\n      resolve({\n        avatarSmall: sampleAvatarPath,\n        familyName: 'Bowie',\n        givenName: 'David',\n      });\n    });\n  }\n\n  return cdp.user().get();\n};\n","/**\n *  Dynamic plugin component, responsible for rendering the provided plugin `headerPlugin` schema property.\n */\nimport React, { useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  useCdpChildContainer,\n  PLUGIN_TYPES,\n  TRANSITION_TYPES,\n} from '@pearsontechnology/aero-cdp-child-container';\nimport cdp from '@pearsontechnology/aero-plugin-api/lib/cdp';\nimport styled from 'styled-components';\n\nconst HeaderPlugin = ({ pluginId }) => {\n  const ref = useRef();\n\n  useCdpChildContainer(ref, {\n    cdp,\n    childId: pluginId,\n    childType: PLUGIN_TYPES.COMPONENT,\n    transitions: {\n      enter: { type: TRANSITION_TYPES.NONE },\n      exit: { type: TRANSITION_TYPES.NONE },\n    },\n  });\n\n  return <PluginContainer className=\"header-plugin-container\" ref={ref} />;\n};\n\nHeaderPlugin.propTypes = {\n  pluginId: PropTypes.string.isRequired,\n};\n\nconst PluginContainer = styled.div`\n  position: relative;\n  flex: 1 1 auto;\n  width: 100%;\n  height: 100%;\n  margin: 0 5rem;\n\n  @media (max-width: ${props => props.theme.mobile}px) {\n    display: none;\n  }\n`;\n\nexport default React.memo(HeaderPlugin);\n","import { useEffect, useState } from 'react';\nimport cdp from '@pearsontechnology/aero-plugin-api/lib/cdp';\nimport {CONTEXT_LEARNER, CONTEXT_HISTORY} from '../app/constants';\n\nfunction determineCurrentChild({ children, history, route, progress }) {\n  const hasNoChildren = !children || !children.length;\n  const routeIsTargetingHistory = route && route.subTarget && route.subTarget.evaluationId;\n\n  const evalId = (routeIsTargetingHistory) ? route.subTarget.evaluationId : 'NO EVAL ID';  // We don't want this to be null when evaluating it\n  const routeMap = route && routeToMap(route);\n  const historyMap = history && historyToMap(history);\n  const isCompleted = progress && progress.completion && progress.completion.value === 1;\n\n  // route is targeting a valid historic item\n  if (route && route.id && history && historyMap[route.id] && historyMap[route.id].evaluationId === evalId) {\n    return { childId: route.id, childContext: CONTEXT_HISTORY, evaluationId: route.subTarget.evaluationId};\n  }\n  // no children, and not trying to view a historic screen\n  if (hasNoChildren) {\n    // Check first if lesson is completed to view the last screen content\n    // There could be no subTarget on last screen\n    // need to pass the evaluation Id to make the route change affect\n    if (isCompleted && history && route && (!route.subTarget || !route.subTarget.evaluationId)) return {childId: history[0].elementId, childContext: CONTEXT_HISTORY, evaluationId: history[0].evaluationId};\n    return null;\n  }\n  // route is targeting a child, or a child of a child\n  const firstChildInRoute = children && children.find(item => routeMap[item.itemId]);\n  if (children && firstChildInRoute) {\n    return { childId: firstChildInRoute.itemId, childContext: CONTEXT_LEARNER, evaluationId: null};\n  }\n  // in any other case, just provide the first child\n  return { childId: children[0].itemId, childContext: CONTEXT_LEARNER, evaluationId: null};\n}\n\nlet cdpContext;\n/**\n * Subscribes to the CDP to obtain changes in the route, history, or child element.\n * With this information identifies which child element it should show and returns\n * information related to it.\n * Returns false is the information from the CDP is not retrieved yet, otherwise\n * it returns an object with the information of the child component to load.\n * @param pathToChildren\n * @returns {boolean|{evaluationId: null|int, childId: null|int, childContext: string|null}\n */\nexport default function useSelectedChild(pathToChildren) {\n  const [state, setState] = useState({ route: null, children: null, history: null  });\n  // use this to keep pathway unchanged when showing feedback after fist time clicking on next button\n  const [currentChildren, setCurrentChildren] = useState({});\n  // used to determine if fist time clicking on next button and show feedback\n  const [showingCurrentFeedback, setShowingCurrentFeedback] = useState(false);\n\n  useEffect(() => {\n    let subscriptions = [];\n\n    async function subscribeToCDP() {\n      const handleChildrenChange = children => setState((prevState) => ({ ...prevState, children }));\n      // save the showingCurrentFeedback event value to local state\n      const handleShowingCurrentFeedbackChange = newShowingCurrentFeedback => setShowingCurrentFeedback(newShowingCurrentFeedback);\n      const handleHistoryChange = async (historyLists) => {\n        // history is provided by as a list of lists (one for each pathway)\n        const history = [].concat(...historyLists);\n        // build history array including sub-activity screens\n        const historyWithSubPromises = [];\n        history.map(async (historyItem) => {\n          historyWithSubPromises.push(\n            new Promise(async (resolve) => {\n              const { elementId, elementType } = historyItem;\n              if (elementType === 'ACTIVITY') {\n                const subActivityHistory = await cdp.courseware(elementId).history().get();\n                resolve([].concat(...subActivityHistory));\n              } else {\n                resolve(historyItem);\n              }\n            })\n          );\n        });\n        const historyWithSub = [].concat(...await Promise.all(historyWithSubPromises));\n        setState((prevState) => ({ ...prevState,  history: historyWithSub }));\n      };\n      const handleRouteChange = async route => {\n        if (route.type && route.type === 'ACTIVITY') {\n          const history = await cdp.history().get();\n          handleHistoryChange(history);\n        }\n        setState((prevState) => ({ ...prevState, route }));\n      };\n      const handleProgressChange = progress => setState((prevState) => ({ ...prevState, progress }));\n\n      await cdp.register();\n      cdpContext = await cdp.context().get();\n      subscriptions = await Promise.all([\n        cdp.route().subscribe(handleRouteChange),\n        cdp.state(pathToChildren).subscribe(handleChildrenChange),\n        // showingCurrentFeedback event is from footer lib and used to determine if fist time clicking on next button and show feedback\n        cdp.event('showingCurrentFeedback').subscribe(handleShowingCurrentFeedbackChange),\n        cdp.history().subscribe(handleHistoryChange),\n        cdp.progress().subscribe(handleProgressChange)\n      ]);\n    }\n\n    subscribeToCDP();\n\n    return () => subscriptions.map(subscription => subscription && subscription());\n  }, [pathToChildren]);\n\n  const subscribeLoaded = state.route && state.children\n        && ( state.history || (cdpContext && cdpContext ==='EDITOR'));\n\n  let newState = state;\n  if (showingCurrentFeedback && currentChildren) {\n    // keep pathway unchanged if showing feedback when first time clicking next button\n    newState = {...state, children: currentChildren};\n  } else if (JSON.stringify(state.children) !== JSON.stringify(currentChildren)) {\n    // otherwise sync local pathway with CDP\n    setCurrentChildren(state.children);\n  }\n\n  return subscribeLoaded && determineCurrentChild(newState);\n}\n\nconst historyToMap = (history = []) => history\n  .flat()\n  .reduce((acc, item) => ({ ...acc, [item.elementId]: item }), {});\n\nconst routeToMap = (route = {}) => {\n  if (!route.id) { return {}; }\n  if (!route.ancestry) { return { [route.id]: route }; }\n\n  return route.ancestry\n    .filter((item) => item.elementType !== 'PATHWAY')\n    .reduce((acc, item) => ({\n      ...acc,\n      [item.elementId]: route,\n    }), { [route.id]: route });\n};","import React from 'react';\nimport styled from 'styled-components';\nimport Spinner from './Spinner';\nimport iLabsLoader from '../../public/assets/Pearson_ILabs_Loading.gif';\nimport { LOADER_DEFAULT } from '../app/constants';\n\nexport default function Loader(props) {\n  return (\n    <LoaderContainer\n      backgroundColor={props.loaderBackground}\n      style={props.isLoading ? fadeIn : fadeOut}\n    >\n      <LoaderImageContainer style={props.isLoading ? fadeIn : fadeOut}>\n        {props.loaderOption !== LOADER_DEFAULT ?\n          <LoaderImageAsset src={iLabsLoader} alt={props.altText} />\n          :\n          <Spinner color=\"rgba(33,150,243,1)\" />\n        }\n      </LoaderImageContainer>\n    </LoaderContainer>\n  );\n}\n\nconst fadeOut = {\n  visibility: 'hidden',\n  opacity: 0,\n  transition: 'visibility 1s, opacity 1.5s ease-in-out'\n};\n\nconst fadeIn = {\n  visibility: 'visible',\n  opacity: 1\n};\n\nconst LoaderContainer = styled.div.attrs({\n  className: 'loader__container',\n})`\n  position: absolute;\n  margin: 10;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  background: ${props => props.backgroundColor };\n  z-index: 9999;\n  \n  animation-duration: 0.7s;\n  animation-name: fadein;\n  @keyframes fadein {\n    from {\n      opacity: 0;\n    }\n\n    to {\n      opacity: 1;\n    }\n  }\n`;\n\nconst LoaderImageContainer = styled.div.attrs({\n  className: 'loader__image__container',\n})`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 90%;\n  height: 90%;\n`;\n\nconst LoaderImageAsset = styled.img.attrs({\n  className: 'loader__image__asset',\n})`\n  max-height: 100%;\n  max-width: 100%;\n`;\n","import React, { useReducer, createContext, useEffect, useRef, useState } from 'react';\nimport { ThemeProvider } from 'styled-components';\nimport { Helmet } from 'react-helmet';\nimport cdp from '@pearsontechnology/aero-plugin-api/lib/cdp';\nimport { init, destroy } from '@pearsontechnology/bronte-lib-plugin-logging';\n\nimport { initialState, reducer } from './reducer';\nimport { SkipToMain, Container, GlobalStyles, ContentViewport } from './styles';\nimport useWindowSize from '../hooks/useWindowSize';\nimport appTheme from '../utils/theme';\nimport AppSidebar from '../components/AppSidebar';\nimport Header from '../components/Header';\nimport CoursewareChild from '../components/CoursewareChild';\nimport Score from '../components/Score';\nimport getUser from '../utils/User';\nimport { CONTEXT_LEARNER, BUILTIN_APP, LOADER_NONE } from './constants';\nimport HeaderPlugin from '../components/HeaderPlugin';\nimport useSelectedChild from '../hooks/useCDPSelectedChild';\nimport Loader from '../components/Loader';\n\nexport const AppContext = createContext();\n\nexport default function App() {\n  const [globalTheme, setGlobalTheme] = useState({});\n  const [loggingCDP, setLoggingCDP] = useState(cdp);\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const { appSidebarOpen, config, configLoaded, currentApp, user } = state;\n  const windowSize = useWindowSize();\n  const subscriptionRef = useRef();\n  const themeSubscriptionRef = useRef();\n  const viewportRef = useRef();\n  const showHistoryNav = config.header && config.header.historyNavigation && config.header.historyNavigation.showHistoryNav === 'show';\n  const [isLoading, setIsLoading] = useState(false);\n  const checkLoader = useRef({isScreenReady:false, isThemeReady: false, isTimeOut:false});\n  const childInformation = useSelectedChild('pathway');\n\n  const handleViewportTouch = () => {\n    // Allow tapping the viewport to close app sidebar on mobile\n    if (windowSize.width <= appTheme.tablet && appSidebarOpen) {\n      dispatch({ type: 'toggleAppSidebar' });\n    }\n  };\n\n  function isTimedOut() {\n    if (checkLoader.current.isScreenReady && checkLoader.current.isThemeReady) {\n      setIsLoading(false);\n\t\t}\n\t\tcheckLoader.current.isTimeOut = true;\n\t}\n\n\tfunction isLessonLoaded() {\n\t\tif (checkLoader.current.isTimeOut && checkLoader.current.isThemeReady) {\n\t\t\tsetIsLoading(false);\n\t\t}\n\t\tcheckLoader.current.isScreenReady = true;\n\t}\n\n  const isThemeLoaded = () => {\n    checkLoader.current.isThemeReady = true;\n    setIsLoading(!checkLoader.current.isTimeOut && !checkLoader.current.isScreenReady);\n  };\n\n  useEffect(() => {\n    setIsLoading(true);\n    const handleStateChange = async value => {\n      dispatch({ type: 'setConfigState', value });\n    };\n\n    const handleThemeChange = themeObj => {\n      setGlobalTheme(themeObj || {});\n      isThemeLoaded();\n    };\n\n    const getDefaultApp = ({ header, apps }) => {\n      if (header.historyNavigation && header.historyNavigation.showHistoryNav === 'show') {\n        return BUILTIN_APP;\n      } else if (apps && apps.length) {\n        return apps[0].itemId;\n      }\n\n      return '';\n    };\n\n    const subscribe = async () => {\n      await cdp.register();\n\n      // Assisting prod debugging\n      window.__CDP = cdp;\n\n      const [initialState, globalTheme, subscription, themeSubscription] = await Promise.all([\n        cdp.state().get(),\n        cdp.theme().get(),\n        cdp.state().subscribe(handleStateChange),\n        cdp.theme().subscribe(handleThemeChange),\n      ]);\n      handleStateChange(initialState);\n      handleThemeChange(globalTheme);\n\n      dispatch({ type: 'setCurrentApp', value: getDefaultApp(initialState) });\n\n      subscriptionRef.current = subscription;\n      themeSubscriptionRef.current = themeSubscription;\n      dispatch({ type: 'setConfigLoaded' });\n\n      const timeOut = (initialState.loader && initialState.loader.timeOut) || 0;\n\n      setLoggingCDP(await init(cdp));\n\n      setTimeout(() => {\n        isTimedOut();\n      }, timeOut * 1000);\n    };\n\n    subscribe();\n\n    (async function() {\n      const user = await getUser();\n      dispatch({ type: 'setUser', value: user });\n    })();\n\n    return () => {\n      subscriptionRef.current.unsubscribe();\n      themeSubscriptionRef.current.unsubscribe();\n      destroy();\n    };\n  }, []);\n\n  const changeCurrentApp = (value) => {\n    if (value === currentApp) {\n      dispatch({ type: 'toggleAppSidebar' });\n    }\n    dispatch({ type: 'setCurrentApp', value });\n  };\n\n  if (!configLoaded) {\n    return <div />;\n  }\n\n  const { header, title, apps = [], pathway, loader = {} } = config || {};\n  /**\n   * To accommodate for backwards compat, we'll use a default value of 'show' if\n   * the showTitle schema prop doesn't exist.\n   */\n  const showHeaderTitle = header.showTitle ? header.showTitle === 'show' : true;\n  const headerPluginId = header && header.headerPlugin && header.headerPlugin.itemId || '';\n\n  let sidebarApps = apps;\n  if (showHistoryNav) {\n    sidebarApps = [{ itemId: BUILTIN_APP, itemName: 'History', ariaLabel: 'Open history' }, ...sidebarApps];\n  }\n  const {loaderOption = LOADER_NONE} = loader;\n  return (\n    <ThemeProvider theme={{ ...globalTheme, ...appTheme }}>\n      <AppContext.Provider value={{ ...state, dispatch, viewportRef }}>\n        {loaderOption !== LOADER_NONE && (\n          <Loader\n            isLoading={isLoading}\n            {...loader}\n          />)}\n        {checkLoader.current.isThemeReady && (\n        <Container id=\"lesson\" isLoading={loaderOption !==LOADER_NONE ? isLoading : false}>\n          <Helmet>\n            <title>{title}</title>\n            {globalTheme.css && <style>{globalTheme.css}</style>}\n            {globalTheme.cssUrl && <link rel=\"stylesheet\" href={globalTheme.cssUrl} />}\n          </Helmet>\n          <GlobalStyles />\n          <SkipToMain href=\"#mainContent\">Skip to main content</SkipToMain>\n          <AppSidebar\n            historyNavigation={header.historyNavigation}\n            apps={sidebarApps}\n            cdp={loggingCDP}\n            currentApp={currentApp}\n            setCurrentApp={changeCurrentApp}\n            appSidebarOpen={appSidebarOpen}\n          />\n          <ContentViewport\n            appSidebarOpen={appSidebarOpen}\n            onTouchStart={handleViewportTouch}\n            ref={viewportRef}\n          >\n            {header.showHeader && <Header\n              user={user}\n              title={title}\n              styles={header}\n              hideOnScroll={header.hideOnScroll}\n              showTitle={showHeaderTitle}\n              logo={header.logo}\n              disabledMenu={sidebarApps.length === 0}\n              appSidebarOpen={appSidebarOpen}\n              toggleSidebar={() => dispatch({ type: 'toggleAppSidebar' })}\n            >\n              {headerPluginId  && <HeaderPlugin pluginId={headerPluginId}/>}\n              {header && header.showScore && <Score />}\n            </Header>}\n            {pathway && childInformation && (\n              <CoursewareChild\n                cdp={loggingCDP}\n                context={CONTEXT_LEARNER}\n                {...childInformation}\n                id=\"mainContent\"\n                isLessonLoaded={isLessonLoaded}\n              />\n            )}\n          </ContentViewport>\n        </Container>\n        )}\n      </AppContext.Provider>\n    </ThemeProvider>\n  );\n}\n","import React from 'react';\nimport {render} from 'react-dom';\n\nimport App from './app';\n\nrender(<App/>, document.querySelector('#app'));\n","import { useEffect, useCallback, useState } from 'react';\n\nexport default function useWindowSize() {\n  const isClient = typeof window === 'object';\n\n  const getSize = useCallback(() => {\n    return {\n      width: isClient ? window.innerWidth : undefined,\n      height: isClient ? window.innerHeight : undefined\n    };\n  }, [isClient]);\n\n  const [windowSize, setWindowSize] = useState(getSize);\n\n  useEffect(() => {\n    if (!isClient) {\n      return false;\n    }\n\n    function handleResize() {\n      setWindowSize(getSize());\n    }\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, [getSize, isClient]); // Empty array ensures that effect is only run on mount and unmount\n\n  return windowSize;\n}\n"],"sourceRoot":""}