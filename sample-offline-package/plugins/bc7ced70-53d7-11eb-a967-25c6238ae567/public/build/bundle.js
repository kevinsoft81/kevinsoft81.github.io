var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function o(){return Object.create(null)}function i(t){t.forEach(r)}function a(t){return"function"==typeof t}function u(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let c;function s(t,e){return c||(c=document.createElement("a")),c.href=e,t===c.href}function l(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function f(t,e,n){t.$$.on_destroy.push(l(e,n))}function d(t,e,r,o){return t[1]&&o?n(r.ctx.slice(),t[1](o(e))):r.ctx}function p(t){return null==t?"":t}const h="undefined"!=typeof window;let y=h?()=>window.performance.now():()=>Date.now(),m=h?t=>requestAnimationFrame(t):t;const g=new Set;function v(t){g.forEach((e=>{e.c(t)||(g.delete(e),e.f())})),0!==g.size&&m(v)}function w(t,e){t.appendChild(e)}function b(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function E(t){const e=S("style");return function(t,e){w(t.head||t,e),e.sheet}(b(t),e),e.sheet}function _(t,e,n){t.insertBefore(e,n||null)}function O(t){t.parentNode&&t.parentNode.removeChild(t)}function S(t){return document.createElement(t)}function R(t){return document.createTextNode(t)}function T(){return R(" ")}function x(){return R("")}function N(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function A(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function P(t,e,n,r){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function I(t,e,n){t.classList[n?"add":"remove"](e)}class C{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){var r;this.e||(this.is_svg?this.e=(r=e.nodeName,document.createElementNS("http://www.w3.org/2000/svg",r)):this.e=S(e.nodeName),this.t=e,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)_(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(O)}}const L=new Map;let k,D=0;function j(t,e,n,r,o,i,a,u=0){const c=16.666/r;let s="{\n";for(let t=0;t<=1;t+=c){const r=e+(n-e)*i(t);s+=100*t+`%{${a(r,1-r)}}\n`}const l=s+`100% {${a(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(l)}_${u}`,d=b(t),{stylesheet:p,rules:h}=L.get(d)||function(t,e){const n={stylesheet:E(e),rules:{}};return L.set(t,n),n}(d,t);h[f]||(h[f]=!0,p.insertRule(`@keyframes ${f} ${l}`,p.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?`${y}, `:""}${f} ${r}ms linear ${o}ms 1 both`,D+=1,f}function $(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=n.length-r.length;o&&(t.style.animation=r.join(", "),D-=o,D||m((()=>{D||(L.forEach((t=>{const{ownerNode:e}=t.stylesheet;e&&O(e)})),L.clear())})))}function M(t){k=t}function U(){if(!k)throw new Error("Function called outside component initialization");return k}const W=[],B=[],F=[],G=[],H=Promise.resolve();let q=!1;function Y(t){F.push(t)}const z=new Set;let V,J=0;function K(){const t=k;do{for(;J<W.length;){const t=W[J];J++,M(t),X(t.$$)}for(M(null),W.length=0,J=0;B.length;)B.pop()();for(let t=0;t<F.length;t+=1){const e=F[t];z.has(e)||(z.add(e),e())}F.length=0}while(W.length);for(;G.length;)G.pop()();q=!1,z.clear(),M(t)}function X(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Y)}}function Z(t,e,n){t.dispatchEvent(function(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,r,e),o}(`${e?"intro":"outro"}${n}`))}const Q=new Set;let tt;function et(){tt={r:0,c:[],p:tt}}function nt(){tt.r||i(tt.c),tt=tt.p}function rt(t,e){t&&t.i&&(Q.delete(t),t.i(e))}function ot(t,e,n,r){if(t&&t.o){if(Q.has(t))return;Q.add(t),tt.c.push((()=>{Q.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}const it={duration:0};function at(n,r,o,u){let c=r(n,o),s=u?0:1,l=null,f=null,d=null;function p(){d&&$(n,d)}function h(t,e){const n=t.b-s;return e*=Math.abs(n),{a:s,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function w(r){const{delay:o=0,duration:a=300,easing:u=e,tick:w=t,css:b}=c||it,E={start:y()+o,b:r};r||(E.group=tt,tt.r+=1),l||f?f=E:(b&&(p(),d=j(n,s,r,a,o,u,b)),r&&w(0,1),l=h(E,a),Y((()=>Z(n,r,"start"))),function(t){let e;0===g.size&&m(v),new Promise((n=>{g.add(e={c:t,f:n})}))}((t=>{if(f&&t>f.start&&(l=h(f,a),f=null,Z(n,l.b,"start"),b&&(p(),d=j(n,s,l.b,l.duration,0,u,c.css))),l)if(t>=l.end)w(s=l.b,1-s),Z(n,l.b,"end"),f||(l.b?p():--l.group.r||i(l.group.c)),l=null;else if(t>=l.start){const e=t-l.start;s=l.a+l.d*u(e/l.duration),w(s,1-s)}return!(!l&&!f)})))}return{run(t){a(c)?(V||(V=Promise.resolve(),V.then((()=>{V=null}))),V).then((()=>{c=c(),w(t)})):w(t)},end(){p(),l=f=null}}}function ut(t,e){const n=e.token={};function r(t,r,o,i){if(e.token!==n)return;e.resolved=i;let a=e.ctx;void 0!==o&&(a=a.slice(),a[o]=i);const u=t&&(e.current=t)(a);let c=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(et(),ot(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),nt())})):e.block.d(1),u.c(),rt(u,1),u.m(e.mount(),e.anchor),c=!0),e.block=u,e.blocks&&(e.blocks[r]=u),c&&K()}if((o=t)&&"object"==typeof o&&"function"==typeof o.then){const n=U();if(t.then((t=>{M(n),r(e.then,1,e.value,t),M(null)}),(t=>{if(M(n),r(e.catch,2,e.error,t),M(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var o}function ct(t,e){ot(t,1,1,(()=>{e.delete(t.key)}))}function st(t){t&&t.c()}function lt(t,e,n,o){const{fragment:u,after_update:c}=t.$$;u&&u.m(e,n),o||Y((()=>{const e=t.$$.on_mount.map(r).filter(a);t.$$.on_destroy?t.$$.on_destroy.push(...e):i(e),t.$$.on_mount=[]})),c.forEach(Y)}function ft(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function dt(t,e){-1===t.$$.dirty[0]&&(W.push(t),q||(q=!0,H.then(K)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function pt(e,n,r,a,u,c,s,l=[-1]){const f=k;M(e);const d=e.$$={fragment:null,ctx:[],props:c,update:t,not_equal:u,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:o(),dirty:l,skip_bound:!1,root:n.target||f.$$.root};s&&s(d.root);let p=!1;if(d.ctx=r?r(e,n.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&u(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),p&&dt(e,t)),n})):[],d.update(),p=!0,i(d.before_update),d.fragment=!!a&&a(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(O)}else d.fragment&&d.fragment.c();n.intro&&rt(e.$$.fragment),lt(e,n.target,n.anchor,n.customElement),K()}M(f)}class ht{$destroy(){ft(this,1),this.$destroy=t}$on(e,n){if(!a(n))return t;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const yt=[];function mt(t,e){return{subscribe:gt(t,e).subscribe}}function gt(e,n=t){let r;const o=new Set;function i(t){if(u(e,t)&&(e=t,r)){const t=!yt.length;for(const t of o)t[1](),yt.push(t,e);if(t){for(let t=0;t<yt.length;t+=2)yt[t][0](yt[t+1]);yt.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(a,u=t){const c=[a,u];return o.add(c),1===o.size&&(r=n(i)||t),a(e),()=>{o.delete(c),0===o.size&&(r(),r=null)}}}}function vt(e,n,r){const o=!Array.isArray(e),u=o?[e]:e,c=n.length<2;return mt(r,(e=>{let r=!1;const s=[];let f=0,d=t;const p=()=>{if(f)return;d();const r=n(o?s[0]:s,e);c?e(r):d=a(r)?r:t},h=u.map(((t,e)=>l(t,(t=>{s[e]=t,f&=~(1<<e),r&&p()}),(()=>{f|=1<<e}))));return r=!0,p(),function(){i(h),d()}}))}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function wt(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}var bt=wt((function(t,e){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="./src/index.js")}({"./src/index.js":function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r={};function o(t){return"[object RegExp]"===Object.prototype.toString.call(t)}n.d(r,"cleanUpWindow",(function(){return St})),n.d(r,"Promise",(function(){return H})),n.d(r,"bridge",(function(){return Rt})),n.d(r,"init",(function(){return Tt})),n.d(r,"parent",(function(){return Ot})),n.d(r,"send",(function(){return ht})),n.d(r,"request",(function(){return pt})),n.d(r,"sendToParent",(function(){return yt})),n.d(r,"client",(function(){return mt})),n.d(r,"on",(function(){return wt})),n.d(r,"listen",(function(){return vt})),n.d(r,"once",(function(){return bt})),n.d(r,"listener",(function(){return Et})),n.d(r,"CONFIG",(function(){return N})),n.d(r,"CONSTANTS",(function(){return T})),n.d(r,"disable",(function(){return _t}));var i={MOCK:"mock:",FILE:"file:",ABOUT:"about:"},a="*",u="Call was rejected by callee.\r\n";function c(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).location.protocol===i.ABOUT}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;if(t)try{if(t.parent&&t.parent!==t)return t.parent}catch(t){}}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;if(t&&!s(t))try{return t.opener}catch(t){}}function f(t){try{return t&&t.location&&t.location.href,!0}catch(t){}return!1}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,e=t.location;if(!e)throw new Error("Can not read window location");var n=e.protocol;if(!n)throw new Error("Can not read window protocol");if(n===i.FILE)return i.FILE+"//";if(n===i.ABOUT){var r=s(t);return r&&f(r)?d(r):i.ABOUT+"//"}var o=e.host;if(!o)throw new Error("Can not read window host");return n+"//"+o}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,e=d(t);return e&&t.mockDomain&&0===t.mockDomain.indexOf(i.MOCK)?t.mockDomain:e}function h(t){try{if(t===window)return!0}catch(t){}try{var e=Object.getOwnPropertyDescriptor(t,"location");if(e&&!1===e.enumerable)return!1}catch(t){}try{if(c(t)&&f(t))return!0}catch(t){}try{if(d(t)===d(window))return!0}catch(t){}return!1}function y(t,e){if(!t||!e)return!1;var n=s(e);return n?n===t:-1!==function(t){var e=[];try{for(;t.parent!==t;)e.push(t.parent),t=t.parent}catch(t){}return e}(e).indexOf(t)}function m(t){var e=[],n=void 0;try{n=t.frames}catch(e){n=t}var r=void 0;try{r=n.length}catch(t){}if(0===r)return e;if(r){for(var o=0;o<r;o++){var i=void 0;try{i=n[o]}catch(t){continue}e.push(i)}return e}for(var a=0;a<100;a++){var u=void 0;try{u=n[a]}catch(t){return e}if(!u)return e;e.push(u)}return e}var g=[],v=[];function w(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{if(t===window)return!1}catch(t){return!0}try{if(!t)return!0}catch(t){return!0}try{if(t.closed)return!0}catch(t){return!t||t.message!==u}if(e&&function(t){if(!h(t))return!1;try{if(t===window)return!0;if(c(t)&&f(t))return!0;if(p(window)===p(t))return!0}catch(t){}return!1}(t))try{if(t.mockclosed)return!0}catch(t){}try{if(!t.parent||!t.top)return!0}catch(t){}var n=function(t,e){for(var n=0;n<t.length;n++)try{if(t[n]===e)return n}catch(t){}return-1}(g,t);if(-1!==n){var r=v[n];if(r&&function(t){if(!t.contentWindow)return!0;if(!t.parentNode)return!0;var e=t.ownerDocument;return!(!e||!e.documentElement||e.documentElement.contains(t))}(r))return!0}return!1}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return l(t=t||window)||s(t)||void 0}function E(t,e){if("string"==typeof t){if("string"==typeof e)return t===a||e===t;if(o(e))return!1;if(Array.isArray(e))return!1}return o(t)?o(e)?t.toString()===e.toString():!Array.isArray(e)&&Boolean(e.match(t)):!!Array.isArray(t)&&(Array.isArray(e)?JSON.stringify(t)===JSON.stringify(e):!o(e)&&t.some((function(t){return E(t,e)})))}function _(t){try{if(t===window)return!0}catch(t){if(t&&t.message===u)return!0}try{if("[object Window]"===Object.prototype.toString.call(t))return!0}catch(t){if(t&&t.message===u)return!0}try{if(window.Window&&t instanceof window.Window)return!0}catch(t){if(t&&t.message===u)return!0}try{if(t&&t.self===t)return!0}catch(t){if(t&&t.message===u)return!0}try{if(t&&t.parent===t)return!0}catch(t){if(t&&t.message===u)return!0}try{if(t&&t.top===t)return!0}catch(t){if(t&&t.message===u)return!0}try{if(t&&"__unlikely_value__"===t.__cross_domain_utils_window_check__)return!1}catch(t){return!0}return!1}function O(t,e){for(var n=0;n<t.length;n++)try{if(t[n]===e)return n}catch(t){}return-1}var S,R=function(){function t(){if(function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__",function(){if("undefined"==typeof WeakMap)return!1;if(void 0===Object.freeze)return!1;try{var t=new WeakMap,e={};return Object.freeze(e),t.set(e,"__testvalue__"),"__testvalue__"===t.get(e)}catch(t){return!1}}())try{this.weakmap=new WeakMap}catch(t){}this.keys=[],this.values=[]}return t.prototype._cleanupClosedWindows=function(){for(var t=this.weakmap,e=this.keys,n=0;n<e.length;n++){var r=e[n];if(_(r)&&w(r)){if(t)try{t.delete(r)}catch(t){}e.splice(n,1),this.values.splice(n,1),n-=1}}},t.prototype.isSafeToReadWrite=function(t){if(_(t))return!1;try{t&&t.self,t&&t[this.name]}catch(t){return!1}return!0},t.prototype.set=function(t,e){if(!t)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{n.set(t,e)}catch(t){delete this.weakmap}if(this.isSafeToReadWrite(t))try{var r=this.name,o=t[r];return void(o&&o[0]===t?o[1]=e:Object.defineProperty(t,r,{value:[t,e],writable:!0}))}catch(t){}this._cleanupClosedWindows();var i=this.keys,a=this.values,u=O(i,t);-1===u?(i.push(t),a.push(e)):a[u]=e},t.prototype.get=function(t){if(!t)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{if(e.has(t))return e.get(t)}catch(t){delete this.weakmap}if(this.isSafeToReadWrite(t))try{var n=t[this.name];return n&&n[0]===t?n[1]:void 0}catch(t){}this._cleanupClosedWindows();var r=O(this.keys,t);if(-1!==r)return this.values[r]},t.prototype.delete=function(t){if(!t)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{e.delete(t)}catch(t){delete this.weakmap}if(this.isSafeToReadWrite(t))try{var n=t[this.name];n&&n[0]===t&&(n[0]=n[1]=void 0)}catch(t){}this._cleanupClosedWindows();var r=this.keys,o=O(r,t);-1!==o&&(r.splice(o,1),this.values.splice(o,1))},t.prototype.has=function(t){if(!t)throw new Error("WeakMap expected key");var e=this.weakmap;if(e)try{if(e.has(t))return!0}catch(t){delete this.weakmap}if(this.isSafeToReadWrite(t))try{var n=t[this.name];return!(!n||n[0]!==t)}catch(t){}return this._cleanupClosedWindows(),-1!==O(this.keys,t)},t.prototype.getOrSet=function(t,e){if(this.has(t))return this.get(t);var n=e();return this.set(t,n),n},t}(),T={POST_MESSAGE_TYPE:{REQUEST:"postrobot_message_request",RESPONSE:"postrobot_message_response",ACK:"postrobot_message_ack"},POST_MESSAGE_ACK:{SUCCESS:"success",ERROR:"error"},POST_MESSAGE_NAMES:{METHOD:"postrobot_method",HELLO:"postrobot_ready",OPEN_TUNNEL:"postrobot_open_tunnel"},WINDOW_TYPES:{FULLPAGE:"fullpage",POPUP:"popup",IFRAME:"iframe"},WINDOW_PROPS:{POSTROBOT:"__postRobot__"},SERIALIZATION_TYPES:{METHOD:"postrobot_method",ERROR:"postrobot_error",PROMISE:"postrobot_promise",ZALGO_PROMISE:"postrobot_zalgo_promise",REGEX:"regex"},SEND_STRATEGIES:{POST_MESSAGE:"postrobot_post_message",BRIDGE:"postrobot_bridge",GLOBAL:"postrobot_global"},MOCK_PROTOCOL:"mock:",FILE_PROTOCOL:"file:",BRIDGE_NAME_PREFIX:"__postrobot_bridge__",POSTROBOT_PROXY:"__postrobot_proxy__",WILDCARD:"*"},x={METHOD:"postrobot_method",HELLO:"postrobot_hello",OPEN_TUNNEL:"postrobot_open_tunnel"},N=(Object.keys(x).map((function(t){return x[t]})),{ALLOW_POSTMESSAGE_POPUP:!("__ALLOW_POSTMESSAGE_POPUP__"in window)||window.__ALLOW_POSTMESSAGE_POPUP__,BRIDGE_TIMEOUT:5e3,CHILD_WINDOW_TIMEOUT:5e3,ACK_TIMEOUT:-1!==window.navigator.userAgent.match(/MSIE/i)?1e4:2e3,RES_TIMEOUT:-1,ALLOWED_POST_MESSAGE_METHODS:(S={},S[T.SEND_STRATEGIES.POST_MESSAGE]=!0,S[T.SEND_STRATEGIES.BRIDGE]=!0,S[T.SEND_STRATEGIES.GLOBAL]=!0,S),ALLOW_SAME_ORIGIN:!1});0===window.location.href.indexOf(T.FILE_PROTOCOL)&&(N.ALLOW_POSTMESSAGE_POPUP=!0);var A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function P(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e>=3)return"stringifyError stack overflow";try{if(!t)return"<unknown error: "+Object.prototype.toString.call(t)+">";if("string"==typeof t)return t;if(t instanceof Error){var n=t&&t.stack,r=t&&t.message;if(n&&r)return-1!==n.indexOf(r)?n:r+"\n"+n;if(n)return n;if(r)return r}return"function"==typeof t.toString?t.toString():Object.prototype.toString.call(t)}catch(t){return"Error while stringifying error: "+P(t,e+1)}}var I=function(t){if(!t)return t;var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}};function C(){}function L(){var t="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,(function(){return t.charAt(Math.floor(Math.random()*t.length))}))}function k(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(n>=100)throw new Error("Self-referential object passed, or object contained too many layers");var r=void 0;if("object"!==(void 0===t?"undefined":A(t))||null===t||Array.isArray(t)){if(!Array.isArray(t))throw new TypeError("Invalid type: "+(void 0===t?"undefined":A(t)));r=[]}else r={};return function(t,e){Array.isArray(t)?function(t,e){for(var n=0;n<t.length;n++)e(t[n],n)}(t,e):"object"===(void 0===t?"undefined":A(t))&&null!==t&&function(t,e){for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)}(t,e)}(t,(function(t,o){var i=e(t,o);void 0!==i?r[o]=i:"object"===(void 0===t?"undefined":A(t))&&null!==t?r[o]=k(t,e,n+1):r[o]=t})),r}function D(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function j(t){try{if(!t)return!1;if("undefined"!=typeof Promise&&t instanceof Promise)return!0;if("undefined"!=typeof window&&"function"==typeof window.Window&&t instanceof window.Window)return!1;if("undefined"!=typeof window&&"function"==typeof window.constructor&&t instanceof window.constructor)return!1;var e={}.toString;if(e){var n=e.call(t);if("[object Window]"===n||"[object global]"===n||"[object DOMWindow]"===n)return!1}if("function"==typeof t.then)return!0}catch(t){return!1}return!1}var $=[],M=[],U=0,W=void 0;function B(){if(!U&&W){var t=W;W=null,t.resolve()}}function F(){U+=1}function G(){U-=1,B()}var H=function(){function t(e){var n=this;if(function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],e){var r=void 0,o=void 0,i=!1,a=!1,u=!1;F();try{e((function(t){u?n.resolve(t):(i=!0,r=t)}),(function(t){u?n.reject(t):(a=!0,o=t)}))}catch(t){return G(),void this.reject(t)}G(),u=!0,i?this.resolve(r):a&&this.reject(o)}}return t.prototype.resolve=function(t){if(this.resolved||this.rejected)return this;if(j(t))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=t,this.dispatch(),this},t.prototype.reject=function(t){var e=this;if(this.resolved||this.rejected)return this;if(j(t))throw new Error("Can not reject promise with another promise");if(!t){var n=t&&"function"==typeof t.toString?t.toString():Object.prototype.toString.call(t);t=new Error("Expected reject to be called with Error, got "+n)}return this.rejected=!0,this.error=t,this.errorHandled||setTimeout((function(){e.errorHandled||function(t,e){if(-1===$.indexOf(t)){$.push(t),setTimeout((function(){throw t}),1);for(var n=0;n<M.length;n++)M[n](t,e)}}(t,e)}),1),this.dispatch(),this},t.prototype.asyncReject=function(t){return this.errorHandled=!0,this.reject(t),this},t.prototype.dispatch=function(){var e=this.dispatching,n=this.resolved,r=this.rejected,o=this.handlers;if(!e&&(n||r)){this.dispatching=!0,F();for(var i=function(t,e){return t.then((function(t){e.resolve(t)}),(function(t){e.reject(t)}))},a=0;a<o.length;a++){var u=o[a],c=u.onSuccess,s=u.onError,l=u.promise,f=void 0;if(n)try{f=c?c(this.value):this.value}catch(t){l.reject(t);continue}else if(r){if(!s){l.reject(this.error);continue}try{f=s(this.error)}catch(t){l.reject(t);continue}}f instanceof t&&(f.resolved||f.rejected)?(f.resolved?l.resolve(f.value):l.reject(f.error),f.errorHandled=!0):j(f)?f instanceof t&&(f.resolved||f.rejected)?f.resolved?l.resolve(f.value):l.reject(f.error):i(f,l):l.resolve(f)}o.length=0,this.dispatching=!1,G()}},t.prototype.then=function(e,n){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.then expected a function for success handler");if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.then expected a function for error handler");var r=new t;return this.handlers.push({promise:r,onSuccess:e,onError:n}),this.errorHandled=!0,this.dispatch(),r},t.prototype.catch=function(t){return this.then(void 0,t)},t.prototype.finally=function(e){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.finally expected a function");return this.then((function(n){return t.try(e).then((function(){return n}))}),(function(n){return t.try(e).then((function(){throw n}))}))},t.prototype.timeout=function(t,e){var n=this;if(this.resolved||this.rejected)return this;var r=setTimeout((function(){n.resolved||n.rejected||n.reject(e||new Error("Promise timed out after "+t+"ms"))}),t);return this.then((function(t){return clearTimeout(r),t}))},t.prototype.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},t.resolve=function(e){return e instanceof t?e:j(e)?new t((function(t,n){return e.then(t,n)})):(new t).resolve(e)},t.reject=function(e){return(new t).reject(e)},t.asyncReject=function(e){return(new t).asyncReject(e)},t.all=function(e){var n=new t,r=e.length,o=[];if(!r)return n.resolve(o),n;for(var i=function(t,e,i){return e.then((function(e){o[t]=e,0==(r-=1)&&n.resolve(o)}),(function(t){i.reject(t)}))},a=0;a<e.length;a++){var u=e[a];if(u instanceof t){if(u.resolved){o[a]=u.value,r-=1;continue}}else if(!j(u)){o[a]=u,r-=1;continue}i(a,t.resolve(u),n)}return 0===r&&n.resolve(o),n},t.hash=function(e){var n={};return t.all(Object.keys(e).map((function(r){return t.resolve(e[r]).then((function(t){n[r]=t}))}))).then((function(){return n}))},t.map=function(e,n){return t.all(e.map(n))},t.onPossiblyUnhandledException=function(t){return function(t){return M.push(t),{cancel:function(){M.splice(M.indexOf(t),1)}}}(t)},t.try=function(e,n,r){if(e&&"function"!=typeof e&&!e.call)throw new Error("Promise.try expected a function");var o=void 0;F();try{o=e.apply(n,r||[])}catch(e){return G(),t.reject(e)}return G(),t.resolve(o)},t.delay=function(e){return new t((function(t){setTimeout(t,e)}))},t.isPromise=function(e){return!!(e&&e instanceof t)||j(e)},t.flush=function(){return function(e){var n=W=W||new t;return B(),n}()},t}(),q=window[T.WINDOW_PROPS.POSTROBOT]=window[T.WINDOW_PROPS.POSTROBOT]||{};q.registerSelf=function(){};var Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};q.methods=q.methods||new R;var z=I((function(){q.on(T.POST_MESSAGE_NAMES.METHOD,{origin:T.WILDCARD},(function(t){var e=t.source,n=t.origin,r=t.data,o=q.methods.get(e);if(!o)throw new Error("Could not find any methods this window has privileges to call");var i=o[r.id];if(!i)throw new Error("Could not find method with id: "+r.id);if(!E(i.domain,n))throw new Error("Method domain "+i.domain+" does not match origin "+n);return H.try((function(){return i.method.apply({source:e,origin:n,data:r},r.args)})).then((function(t){return{result:t,id:r.id,name:r.name}}))}))}));function V(t,e){return"object"===(void 0===t?"undefined":Y(t))&&null!==t&&t.__type__===e}function J(t,e,n,r){var o=L(),i=q.methods.get(t);return i||(i={},q.methods.set(t,i)),i[o]={domain:e,method:n},{__type__:T.SERIALIZATION_TYPES.METHOD,__id__:o,__name__:r}}function K(t,e,n){function r(){var r=Array.prototype.slice.call(arguments);return q.send(t,T.POST_MESSAGE_NAMES.METHOD,{id:n.__id__,name:n.__name__,args:r},{domain:e,timeout:-1}).then((function(t){return t.data.result}),(function(t){throw t}))}return r.__name__=n.__name__,r.__xdomain__=!0,r.source=t,r.origin=e,r}function X(t,e,n){return new H((function(r,o){return K(t,e,n.__then__)(r,o)}))}function Z(t){return q.send(t,T.POST_MESSAGE_NAMES.HELLO,{},{domain:T.WILDCARD,timeout:-1}).then((function(t){return{origin:t.origin}}))}q.readyPromises=q.readyPromises||new R;var Q={};Q[T.SEND_STRATEGIES.POST_MESSAGE]=function(t,e,n){(Array.isArray(n)?n:"string"==typeof n?[n]:[T.WILDCARD]).map((function(e){if(0===e.indexOf(T.MOCK_PROTOCOL)){if(window.location.protocol===T.FILE_PROTOCOL)return T.WILDCARD;if(!h(t))throw new Error("Attempting to send messsage to mock domain "+e+", but window is actually cross-domain");return d(t)}return 0===e.indexOf(T.FILE_PROTOCOL)?T.WILDCARD:e})).forEach((function(n){return t.postMessage(e,n)}))};var tt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function et(t,e,n){return H.try((function(){var r;if(e=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=L(),o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return Boolean(l(t))}()?T.WINDOW_TYPES.POPUP:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return Boolean(s(t))}()?T.WINDOW_TYPES.IFRAME:T.WINDOW_TYPES.FULLPAGE,i=p(window);return tt({},e,n,{sourceDomain:i,id:e.id||r,windowType:o})}(t,e,{data:function(t,n,r){return k({obj:e.data},(function(e,r){return"function"==typeof e?J(t,n,e,r.toString()):e instanceof Error?(o=e,{__type__:T.SERIALIZATION_TYPES.ERROR,__message__:P(o),__code__:o.code}):window.Promise&&e instanceof window.Promise?function(t,e,n,r){return{__type__:T.SERIALIZATION_TYPES.PROMISE,__then__:J(t,e,(function(t,e){return n.then(t,e)}),r+".then")}}(t,n,e,r.toString()):H.isPromise(e)?function(t,e,n,r){return{__type__:T.SERIALIZATION_TYPES.ZALGO_PROMISE,__then__:J(t,e,(function(t,e){return n.then(t,e)}),r+".then")}}(t,n,e,r.toString()):D(e)?(i=e,{__type__:T.SERIALIZATION_TYPES.REGEX,__source__:i.source}):void 0;var o,i})).obj}(t,n),domain:n}),t===window&&!N.ALLOW_SAME_ORIGIN)throw new Error("Attemping to send message to self");if(w(t))throw new Error("Window is closed");var o=[],i=function(t,e,n){var r=void 0,o=void 0;try{if("{}"!==JSON.stringify({})&&(r=Object.prototype.toJSON,delete Object.prototype.toJSON),"{}"!==JSON.stringify({}))throw new Error("Can not correctly serialize JSON objects");if("[]"!==JSON.stringify([])&&(o=Array.prototype.toJSON,delete Array.prototype.toJSON),"[]"!==JSON.stringify([]))throw new Error("Can not correctly serialize JSON objects")}catch(t){throw new Error("Can not repair JSON.stringify: "+t.message)}var i=JSON.stringify.call(this,t,null,2);try{r&&(Object.prototype.toJSON=r),o&&(Array.prototype.toJSON=o)}catch(t){throw new Error("Can not repair JSON.stringify: "+t.message)}return i}(((r={})[T.WINDOW_PROPS.POSTROBOT]=e,r));return H.map(Object.keys(Q),(function(e){return H.try((function(){if(!N.ALLOWED_POST_MESSAGE_METHODS[e])throw new Error("Strategy disallowed: "+e);return Q[e](t,i,n)})).then((function(){return o.push(e+": success"),!0}),(function(t){return o.push(e+": "+P(t)+"\n"),!1}))})).then((function(t){var n=t.some(Boolean),r=e.type+" "+e.name+" "+(n?"success":"error")+":\n  - "+o.join("\n  - ")+"\n";if(!n)throw new Error(r)}))}))}q.responseListeners=q.responseListeners||{},q.requestListeners=q.requestListeners||{},q.WINDOW_WILDCARD=q.WINDOW_WILDCARD||new function(){},q.erroredResponseListeners=q.erroredResponseListeners||{};var nt,rt="__domain_regex__";function ot(t){return q.responseListeners[t]}function it(t){delete q.responseListeners[t]}function at(t){return Boolean(q.erroredResponseListeners[t])}function ut(t){var e=t.name,n=t.win,r=t.domain;if(n===T.WILDCARD&&(n=null),r===T.WILDCARD&&(r=null),!e)throw new Error("Name required to get request listener");var o=q.requestListeners[e];if(o)for(var i=0,a=[n,q.WINDOW_WILDCARD],u=null==a?0:a.length;i<u;i++){var c=a[i],s=c&&o.get(c);if(s){if(r&&"string"==typeof r){if(s[r])return s[r];if(s[rt])for(var l=0,f=s[rt],d=null==f?0:f.length;l<d;l++){var p=f[l],h=p.regex,y=p.listener;if(E(h,r))return y}}if(s[T.WILDCARD])return s[T.WILDCARD]}}}var ct=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},st=((nt={})[T.POST_MESSAGE_TYPE.ACK]=function(t,e,n){if(!at(n.hash)){var r=ot(n.hash);if(!r)throw new Error("No handler found for post message ack for message: "+n.name+" from "+e+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!E(r.domain,e))throw new Error("Ack origin "+e+" does not match domain "+r.domain.toString());r.ack=!0}},nt[T.POST_MESSAGE_TYPE.REQUEST]=function(t,e,n){var r=ut({name:n.name,win:t,domain:e});function o(r){return n.fireAndForget||w(t)?H.resolve():et(t,ct({target:n.originalSource,hash:n.hash,name:n.name},r),e)}return H.all([o({type:T.POST_MESSAGE_TYPE.ACK}),H.try((function(){if(!r)throw new Error("No handler found for post message: "+n.name+" from "+e+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!E(r.domain,e))throw new Error("Request origin "+e+" does not match domain "+r.domain.toString());var o=n.data;return r.handler({source:t,origin:e,data:o})})).then((function(t){return o({type:T.POST_MESSAGE_TYPE.RESPONSE,ack:T.POST_MESSAGE_ACK.SUCCESS,data:t})}),(function(t){var e=P(t).replace(/^Error: /,""),n=t.code;return o({type:T.POST_MESSAGE_TYPE.RESPONSE,ack:T.POST_MESSAGE_ACK.ERROR,error:e,code:n})}))]).then(C).catch((function(t){if(r&&r.handleError)return r.handleError(t);throw t}))},nt[T.POST_MESSAGE_TYPE.RESPONSE]=function(t,e,n){if(!at(n.hash)){var r,i=ot(n.hash);if(!i)throw new Error("No handler found for post message response for message: "+n.name+" from "+e+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!E(i.domain,e))throw new Error("Response origin "+e+" does not match domain "+(r=i.domain,Array.isArray(r)?"("+r.join(" | ")+")":o(r)?"RegExp("+r.toString():r.toString()));if(it(n.hash),n.ack===T.POST_MESSAGE_ACK.ERROR){var a=new Error(n.error);return n.code&&(a.code=n.code),i.respond(a,null)}if(n.ack===T.POST_MESSAGE_ACK.SUCCESS){var u=n.data||n.response;return i.respond(null,{source:t,origin:e,data:u})}}},nt),lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function ft(t){if(window&&!window.closed){try{if(!t.source)return}catch(t){return}var e=t.source,n=t.origin,r=function(t){var e,n=void 0;try{e=t,n=JSON.parse(e)}catch(t){return}if(n&&"object"===(void 0===n?"undefined":lt(n))&&null!==n&&(n=n[T.WINDOW_PROPS.POSTROBOT])&&"object"===(void 0===n?"undefined":lt(n))&&null!==n&&n.type&&"string"==typeof n.type&&st[n.type])return n}(t.data);if(r){if(!r.sourceDomain||"string"!=typeof r.sourceDomain)throw new Error("Expected message to have sourceDomain");0!==r.sourceDomain.indexOf(T.MOCK_PROTOCOL)&&0!==r.sourceDomain.indexOf(T.FILE_PROTOCOL)||(n=r.sourceDomain),-1===q.receivedMessages.indexOf(r.id)&&(q.receivedMessages.push(r.id),w(e)&&!r.fireAndForget||(r.data&&(r.data=function(t,e,n){return k({obj:r.data},(function(n){if("object"===(void 0===n?"undefined":Y(n))&&null!==n)return V(n,T.SERIALIZATION_TYPES.METHOD)?K(t,e,n):V(n,T.SERIALIZATION_TYPES.ERROR)?function(t,e,n){var r=new Error(n.__message__);return n.__code__&&(r.code=n.__code__),r}(0,0,n):V(n,T.SERIALIZATION_TYPES.PROMISE)?function(t,e,n){return window.Promise?new window.Promise((function(r,o){return K(t,e,n.__then__)(r,o)})):X(t,e,n)}(t,e,n):V(n,T.SERIALIZATION_TYPES.ZALGO_PROMISE)?X(t,e,n):V(n,T.SERIALIZATION_TYPES.REGEX)?function(t,e,n){return new RegExp(n.__source__)}(0,0,n):void 0})).obj}(e,n)),st[r.type](e,n,r)))}}}function dt(t){try{t.source}catch(t){return}ft({source:t.source||t.sourceElement,origin:t.origin||t.originalEvent&&t.originalEvent.origin,data:t.data})}function pt(t){return H.try((function(){if(!t.name)throw new Error("Expected options.name");var e=t.name,n=void 0,r=void 0;if("string"==typeof t.window){var o=document.getElementById(t.window);if(!o)throw new Error("Expected options.window "+Object.prototype.toString.call(t.window)+" to be a valid element id");if("iframe"!==o.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(t.window)+" to be an iframe");if(!o.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");n=o.contentWindow}else if(t.window instanceof HTMLIFrameElement){if("iframe"!==t.window.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(t.window)+" to be an iframe");if(t.window&&!t.window.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");t.window&&t.window.contentWindow&&(n=t.window.contentWindow)}else n=t.window;if(!n)throw new Error("Expected options.window to be a window object, iframe, or iframe element id.");var i=n;r=t.domain||T.WILDCARD;var a=t.name+"_"+L();if(w(i))throw new Error("Target window is closed");var u=!1,c=q.requestPromises.get(i);c||(c=[],q.requestPromises.set(i,c));var l=H.try((function(){if(function(t,e){var n=b(e);if(n)return n===t;if(e===t)return!1;if(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{if(t.top)return t.top}catch(t){}if(s(t)===t)return t;try{if(y(window,t)&&window.top)return window.top}catch(t){}try{if(y(t,window)&&window.top)return window.top}catch(t){}for(var e=0,n=function t(e){for(var n=[],r=0,o=m(e),i=null==o?0:o.length;r<i;r++){var a=o[r];n.push(a);for(var u=0,c=t(a),s=null==c?0:c.length;u<s;u++){var l=c[u];n.push(l)}}return n}(t),r=null==n?0:n.length;e<r;e++){var o=n[e];try{if(o.top)return o.top}catch(t){}if(s(o)===o)return o}}(e)===e)return!1;for(var r=0,o=m(t),i=null==o?0:o.length;r<i;r++)if(o[r]===e)return!0;return!1}(window,i))return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Window",r=q.readyPromises.get(t);return r||(r=new H,q.readyPromises.set(t,r),-1!==e&&setTimeout((function(){return r.reject(new Error(n+" did not load after "+e+"ms"))}),e),r)}(i,t.timeout||N.CHILD_WINDOW_TIMEOUT)})).then((function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).origin;if(D(r)&&!t)return Z(i)})).then((function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).origin;if(D(r)){if(!E(r,n))throw new Error("Remote window domain "+n+" does not match regex: "+r.toString());r=n}if("string"!=typeof r&&!Array.isArray(r))throw new TypeError("Expected domain to be a string or array");var o=r;return new H((function(n,r){var s=void 0;if(t.fireAndForget||function(t,e){q.responseListeners[t]=e}(a,s={name:e,window:i,domain:o,respond:function(t,e){t||(u=!0,c.splice(c.indexOf(l,1))),t?r(t):n(e)}}),et(i,{type:T.POST_MESSAGE_TYPE.REQUEST,hash:a,name:e,data:t.data,fireAndForget:t.fireAndForget},o).catch(r),t.fireAndForget)return n();var f=N.ACK_TIMEOUT,d=t.timeout||N.RES_TIMEOUT,h=100;setTimeout((function n(){if(!u){if(w(i))return s.ack?r(new Error("Window closed for "+e+" before response")):r(new Error("Window closed for "+e+" before ack"));if(f=Math.max(f-h,0),-1!==d&&(d=Math.max(d-h,0)),s.ack){if(-1===d)return;h=Math.min(d,2e3)}else{if(0===f)return r(new Error("No ack for postMessage "+e+" in "+p()+" in "+N.ACK_TIMEOUT+"ms"));if(0===d)return r(new Error("No response for postMessage "+e+" in "+p()+" in "+(t.timeout||N.RES_TIMEOUT)+"ms"))}setTimeout(n,h)}}),h)}))}));return l.catch((function(){!function(t){q.erroredResponseListeners[t]=!0}(a),it(a)})),c.push(l),l}))}function ht(t,e,n,r){return(r=r||{}).window=t,r.name=e,r.data=n,pt(r)}function yt(t,e,n){var r=b();return r?ht(r,t,e,n):new H((function(t,e){return e(new Error("Window does not have a parent"))}))}function mt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.window)throw new Error("Expected options.window");var e=t.window;return{send:function(n,r){return ht(e,n,r,t)}}}q.receivedMessages=q.receivedMessages||[],q.receiveMessage=ft,q.requestPromises=q.requestPromises||new R,q.send=ht;var gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function vt(t){if(!t.name)throw new Error("Expected options.name");if(!t.handler)throw new Error("Expected options.handler");var e,n=t.name,r=t.window,o=t.domain,i={handler:t.handler,handleError:t.errorHandler||function(t){throw t},window:r,domain:o||T.WILDCARD,name:n},a=function t(e,n){var r=e.name,o=e.win,i=e.domain;if(!r||"string"!=typeof r)throw new Error("Name required to add request listener");if(Array.isArray(o)){for(var a=[],u=0,c=o,s=null==c?0:c.length;u<s;u++){var l=c[u];a.push(t({name:r,domain:i,win:l},n))}return{cancel:function(){for(var t=0,e=null==a?0:a.length;t<e;t++)a[t].cancel()}}}if(Array.isArray(i)){for(var f=[],d=0,p=i,h=null==p?0:p.length;d<h;d++){var y=p[d];f.push(t({name:r,win:o,domain:y},n))}return{cancel:function(){for(var t=0,e=null==f?0:f.length;t<e;t++)f[t].cancel()}}}var m=ut({name:r,win:o,domain:i});if(o&&o!==T.WILDCARD||(o=q.WINDOW_WILDCARD),i=i||T.WILDCARD,m)throw o&&i?new Error("Request listener already exists for "+r+" on domain "+i.toString()+" for "+(o===q.WINDOW_WILDCARD?"wildcard":"specified")+" window"):o?new Error("Request listener already exists for "+r+" for "+(o===q.WINDOW_WILDCARD?"wildcard":"specified")+" window"):i?new Error("Request listener already exists for "+r+" on domain "+i.toString()):new Error("Request listener already exists for "+r);var g=q.requestListeners,v=g[r];v||(v=new R,g[r]=v);var w=v.get(o);w||(w={},v.set(o,w));var b=i.toString(),E=w[rt],_=void 0;return D(i)?(E||(E=[],w[rt]=E),_={regex:i,listener:n},E.push(_)):w[b]=n,{cancel:function(){w&&(delete w[b],o&&0===Object.keys(w).length&&v.delete(o),_&&E.splice(E.indexOf(_,1)))}}}({name:n,win:r,domain:o},i);if(t.once){var u=i.handler;i.handler=I((function(){return a.cancel(),u.apply(this,arguments)}))}if(i.window&&t.errorOnClose)var c=(e=void 0,e=setTimeout((function t(){e=setTimeout(t,50),function(){r&&"object"===(void 0===r?"undefined":gt(r))&&w(r)&&(c.cancel(),i.handleError(new Error("Post message target window is closed")))}.call()}),50),{cancel:function(){clearTimeout(e)}});return{cancel:function(){a.cancel()}}}function wt(t,e,n){return"function"==typeof e&&(n=e,e={}),(e=e||{}).name=t,e.handler=n||e.handler,vt(e)}function bt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"function"==typeof e&&(n=e,e={}),e=e||{},n=n||e.handler;var r=e.errorHandler,o=new H((function(o,i){(e=e||{}).name=t,e.once=!0,e.handler=function(t){if(o(t),n)return n(t)},e.errorHandler=function(t){if(i(t),r)return r(t)}})),i=vt(e);return o.cancel=i.cancel,o}function Et(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{on:function(e,n){return wt(e,t,n)}}}function _t(){delete window[T.WINDOW_PROPS.POSTROBOT],window.removeEventListener("message",dt)}q.on=wt;var Ot=b();function St(t){var e=q.requestPromises.get(t);if(e)for(var n=0,r=null==e?0:e.length;n<r;n++)e[n].reject(new Error("No response from window - cleaned up"));q.popupWindowsByWin&&q.popupWindowsByWin.delete(t),q.remoteWindows&&q.remoteWindows.delete(t),q.requestPromises.delete(t),q.methods.delete(t),q.readyPromises.delete(t)}var Rt=null;function Tt(){var t,e;q.initialized||(e=dt,(t=window).addEventListener?t.addEventListener("message",e):t.attachEvent("onmessage",e),function(){t=function(t){var e=t.source,n=t.origin,r=q.readyPromises.get(e)||new H;r.resolve({origin:n}),q.readyPromises.set(e,r)},q.on(T.POST_MESSAGE_NAMES.HELLO,{domain:T.WILDCARD},(function(e){var n=e.source,r=e.origin;return t({source:n,origin:r})}));var t,e=b();e&&Z(e).catch(C)}(),z({on:wt,send:ht})),q.initialized=!0}Tt(),n.d(e,"cleanUpWindow",(function(){return St})),n.d(e,"Promise",(function(){return H})),n.d(e,"bridge",(function(){return Rt})),n.d(e,"init",(function(){return Tt})),n.d(e,"parent",(function(){return Ot})),n.d(e,"send",(function(){return ht})),n.d(e,"request",(function(){return pt})),n.d(e,"sendToParent",(function(){return yt})),n.d(e,"client",(function(){return mt})),n.d(e,"on",(function(){return wt})),n.d(e,"listen",(function(){return vt})),n.d(e,"once",(function(){return bt})),n.d(e,"listener",(function(){return Et})),n.d(e,"CONFIG",(function(){return N})),n.d(e,"CONSTANTS",(function(){return T})),n.d(e,"disable",(function(){return _t})),e.default=r}})})),Et=wt((function(t){t.exports=bt,t.exports.default=t.exports}));!function(t){if(!t.fetch){var e="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,r="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),o="FormData"in t,i="ArrayBuffer"in t;if(i)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=function(t){return t&&DataView.prototype.isPrototypeOf(t)},c=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};h.prototype.append=function(t,e){t=f(t),e=d(e);var n=this.map[t];this.map[t]=n?n+","+e:e},h.prototype.delete=function(t){delete this.map[f(t)]},h.prototype.get=function(t){return t=f(t),this.has(t)?this.map[t]:null},h.prototype.has=function(t){return this.map.hasOwnProperty(f(t))},h.prototype.set=function(t,e){this.map[f(t)]=d(e)},h.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},h.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),p(t)},h.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),p(t)},h.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),p(t)},n&&(h.prototype[Symbol.iterator]=h.prototype.entries);var s=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},w.call(b.prototype),w.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},_.error=function(){var t=new _(null,{status:0,statusText:""});return t.type="error",t};var l=[301,302,303,307,308];_.redirect=function(t,e){if(-1===l.indexOf(e))throw new RangeError("Invalid status code");return new _(null,{status:e,headers:{location:t}})},t.Headers=h,t.Request=b,t.Response=_,t.fetch=function(t,e){return new Promise((function(n,o){var i=new b(t,e),a=new XMLHttpRequest;a.onload=function(){var t,e,r={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new h,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();e.append(r,o)}})),e)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;n(new _(o,r))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&r&&(a.responseType="blob"),i.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),a.send(void 0===i._bodyInit?null:i._bodyInit)}))},t.fetch.polyfill=!0}function f(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function d(t){return"string"!=typeof t&&(t=String(t)),t}function p(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function h(t){this.map={},t instanceof h?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function y(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function m(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function g(t){var e=new FileReader,n=m(e);return e.readAsArrayBuffer(t),n}function v(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(r&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(o&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(i&&r&&u(t))this._bodyArrayBuffer=v(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(t)&&!c(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=v(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var t=y(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t=y(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,n=m(e);return e.readAsText(t),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(E)}),this.json=function(){return this.text().then(JSON.parse)},this}function b(t,e){var n,r,o=(e=e||{}).body;if(t instanceof b){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new h(t.headers)),this.method=t.method,this.mode=t.mode,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new h(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),s.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function E(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(o))}})),e}function _(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new h(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:void 0);var _t={"text/plain":"Text","text/html":"Url",default:"Text"};var Ot=function(t,e){var n,r,o,i,a,u,c=!1;e||(e={}),n=e.debug||!1;try{if(o=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,n=[],r=0;r<t.rangeCount;r++)n.push(t.getRangeAt(r));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null}return t.removeAllRanges(),function(){"Caret"===t.type&&t.removeAllRanges(),t.rangeCount||n.forEach((function(e){t.addRange(e)})),e&&e.focus()}}(),i=document.createRange(),a=document.getSelection(),(u=document.createElement("span")).textContent=t,u.ariaHidden="true",u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",(function(r){if(r.stopPropagation(),e.format)if(r.preventDefault(),void 0===r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var o=_t[e.format]||_t.default;window.clipboardData.setData(o,t)}else r.clipboardData.clearData(),r.clipboardData.setData(e.format,t);e.onCopy&&(r.preventDefault(),e.onCopy(r.clipboardData))})),document.body.appendChild(u),i.selectNodeContents(u),a.addRange(i),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");c=!0}catch(o){n&&console.error("unable to copy using execCommand: ",o),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),c=!0}catch(o){n&&console.error("unable to copy using clipboardData: ",o),n&&console.error("falling back to prompt"),r=function(t){var e=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}("message"in e?e.message:"Copy to clipboard: #{key}, Enter"),window.prompt(r,t)}}finally{a&&("function"==typeof a.removeRange?a.removeRange(i):a.removeAllRanges()),u&&document.body.removeChild(u),o()}return c},St=Object.getOwnPropertySymbols,Rt=Object.prototype.hasOwnProperty,Tt=Object.prototype.propertyIsEnumerable;
/*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    */function xt(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var Nt=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,r,o=xt(t),i=1;i<arguments.length;i++){for(var a in n=Object(arguments[i]))Rt.call(n,a)&&(o[a]=n[a]);if(St){r=St(n);for(var u=0;u<r.length;u++)Tt.call(n,r[u])&&(o[r[u]]=n[r[u]])}}return o};function At(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pt,It={exports:{}};(Pt=It).exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},Pt.exports.default=Pt.exports,Pt.exports.__esModule=!0;var Ct=At(It.exports),Lt={exports:{}};!function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0}(Lt);var kt=At(Lt.exports),Dt={exports:{}};!function(t){function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t},t.exports.default=t.exports,t.exports.__esModule=!0}(Dt);var jt=At(Dt.exports),$t=function(t,e){return t?"".concat(t,".").concat(e):e},Mt="CDP",Ut="PARENT",Wt="ANNOTATIONS_RESOURCE",Bt="ASSET_RESOURCE",Ft="CHILD_RESOURCE",Gt="COMPETENCY_RESOURCE",Ht="DEPRECATED_RESOURCE",qt="DRAG_STATE_RESOURCE",Yt="EDITOR_RESOURCE",zt="FEATURE_FLAG_RESOURCE",Vt="HISTORY_RESOURCE",Jt="LEARNER_RESOURCE",Kt="LOGGER_RESOURCE",Xt="LTI_RESOURCE",Zt="PLUGIN_RESOURCE",Qt="PROGRESS_RESOURCE",te="ROUTE_RESOURCE",ee="SELECTION_RESOURCE",ne="STATE_RESOURCE",re="THEME_RESOURCE",oe="EVENT_RESOURCE",ie="SUBSCRIPTION",ae="SUBSCRIBE",ue="SET",ce="GET",se="REGISTER",le="GET_NONCE",fe="GET_SUBSCRIPTION",de="RESOLVE_ANNOTATION",pe=["LEARNER","EDITOR","HISTORY","PREVIEW","ANALYTICS"],he=function(){function t(){kt(this,t)}return jt(t,[{key:"setContext",value:function(t){if(this.localContext)throw new Error("Cannot override existing localContext");var e=t.context;if(!pe.includes(e))throw new Error("Invalid context type ".concat(e,". expecting one of ").concat(pe.join(", ")));this.localContext=t}},{key:"getContext",value:function(){return this.localContext}}]),t}(),ye=new he;function me(t){var e;if("file:"!==window.location.protocol)try{var n,r,o,i=null===(n=t.frameElement)||void 0===n||null===(r=n.parentElement)||void 0===r||null===(o=r.dataset)||void 0===o?void 0:o.disableCheckForTopLevelPlugin;e=!!t.frameElement,i&&(e=!1)}catch(t){console.error("frameElementIsAccessible error thrown from CDP: ",t),e=!1}else e="#parent"!==window.location.hash;return e}var ge=function(){for(var t=window;me(t)&&t!==window.top;)t=t.parent;return t}(),ve=function(t){var e=t.targetResource,n=t.fnName,r=t.payload,o=t.targetWindow,i=r,a=ye.getContext();return a&&(i=i||{})&&"[object Object]"===i.toString()&&(i.localContext=a),Et.send(function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,n=(t={},Ct(t,Mt,ge.parent),Ct(t,Ut,window.parent),t)[e];if(n===window)throw new Error("can't find target window");return n}(o),$t(e,n),i)},we=function(t){var e=t.resource,n=t.fnName,r=t.callback;return Et.on($t(e,n),r)};var be=function(){function t(e,n){var r=this;kt(this,t),this.queue=[],this.waiting=[],this.unsubscribeFn=n,e({next:function(t){return r.waiting.length>0?r.waiting.shift().resolve({done:!1,value:t}):r.queue.push({type:"next",value:t})},throw:function(t){return r.waiting.length>0?r.waiting.shift().reject(t):r.queue.push({value:t,type:"error"})},return:function(t){return r.waiting.length>0?r.waiting.shift().resolve({done:!0,value:t}):r.queue.push({value:t,type:"return"})}})}return jt(t,[{key:"unsubscribe",value:function(){this.unsubscribeFn()}},{key:"next",value:function(){if(this.queue.length>1){var t=this.queue.shift();return"return"===t.type?Promise.resolve({done:!0,value:t.value}):"error"===t.type?Promise.reject(t.value):Promise.resolve({done:!1,value:t.value})}var e=function(){var t={};return t.promise=new Promise((function(e,n){t.resolve=e,t.reject=n})),t}();return this.waiting.push(e),e.promise}},{key:Symbol.asyncIterator,value:function(){return this}}]),t}();function Ee(){return ve({targetResource:Bt,fnName:"PROVISION_UPLOAD"})}function _e(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ve({targetResource:Bt,fnName:fe}).then((function(n){var r=n.data,o=new FormData;return o.append("file",t),o.append("visibility","GLOBAL"),o.append("subscriptionId",r),o.append("metadata",JSON.stringify(e)),o}))}function Oe(t,e,n,r){return _e(n,r).then((function(n){return fetch("".concat(t),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:n})})).then((function(t){return t.json()}))}function Se(t){return ve({targetResource:Bt,fnName:"INFORM_ASSET_USAGE",payload:t}).then((function(){return t}))}function Re(t,e,n,r){return ve({targetResource:Bt,fnName:"ASSET_CREATE",payload:{type:t,id:n,coursewareType:r,data:e}}).then((function(t){return t.data}))}var Te=Object.freeze({__proto__:null,provisionUpload:Ee,provisionAssetData:_e,uploadResource:Oe,informAssetUsage:Se,resolve:function(t){return ve({targetResource:Bt,fnName:"ASSET_RESOLVE",payload:{urn:t}}).then((function(t){return t.data}))},create:Re,getIconAssetList:function(){return ve({targetResource:Bt,fnName:"ICON_ASSET_LIST"}).then((function(t){return t.data}))}}),xe=function(t,e){return Ee().then((function(t){var n=t.data,r=n.nonce,o=n.uploadURL,i=e.map((function(t){return function(t,e,n,r){return Oe(e,n,r.file,r.metadata).then((function(t){return t.urn})).then((function(t){return Se(t)}))}(0,o,r,t)}));return Promise.all(i)}))},Ne=function(t,e){return{get:function(){return ve({targetResource:ne,fnName:ce,payload:{path:e,targetSelector:t}}).then((function(t){return t.data}))},getRaw:function(){return ve({targetResource:ne,fnName:"GET_RAW",payload:{path:e,targetSelector:t}}).then((function(t){return t.data}))},set:function(n){return ve({targetResource:ne,fnName:ue,payload:{path:e,value:n,targetSelector:t}})},setImage:function(n){return xe(0,[n]).then((function(n){return ve({targetResource:ne,fnName:ue,payload:{path:e,value:n.length?n[0]:void 0,id:t}})}))},setImages:function(n){return xe(0,n).then((function(n){return ve({targetResource:ne,fnName:ue,payload:{path:e,value:n.length?n:void 0,id:t}})}))},subscribe:function(n){return ve({targetResource:ne,fnName:ae,payload:{path:e,optionalCallbackFn:n,targetSelector:t}}).then((function(t){var e=t.data,r=e.subscriptionId,o=e.unsubscribe;return n?{subscriptionId:r,unsubscribe:o}:function(t,e){return new be((function(e){we({resource:ie,fnName:t,callback:function(t){e.next(t.data)}})}),e)}(r,o)}))}}},Ae=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){var r=Ne(t,n),o=r.get,i=r.getRaw,a=r.set,u=r.setImage,c=r.setImages,s=r.subscribe;return e?{get:o,getRaw:i,subscribe:s}:{get:o,getRaw:i,set:a,setImage:u,setImages:c,subscribe:s}}},Pe={exports:{}},Ie={exports:{}};!function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,e(n,r)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0}(Ie);var Ce={exports:{}};!function(t){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.default=t.exports,t.exports.__esModule=!0}(Ce),function(t){var e=Ie.exports,n=Ce.exports;function r(o,i,a){return n()?(t.exports=r=Reflect.construct,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=r=function(t,n,r){var o=[null];o.push.apply(o,n);var i=new(Function.bind.apply(t,o));return r&&e(i,r.prototype),i},t.exports.default=t.exports,t.exports.__esModule=!0),r.apply(null,arguments)}t.exports=r,t.exports.default=t.exports,t.exports.__esModule=!0}(Pe);var Le=At(Pe.exports),ke={exports:{}};!function(t){function e(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}t.exports=function(t){return function(){var n=this,r=arguments;return new Promise((function(o,i){var a=t.apply(n,r);function u(t){e(a,o,i,u,c,"next",t)}function c(t){e(a,o,i,u,c,"throw",t)}u(void 0)}))}},t.exports.default=t.exports,t.exports.__esModule=!0}(ke);var De=At(ke.exports),je={exports:{}};!function(t){var e=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o=e&&e.prototype instanceof m?e:m,i=Object.create(o.prototype),a=new N(r||[]);return i._invoke=function(t,e,n){var r=f;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===o)throw i;return P()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=R(a,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=l(t,e,n);if("normal"===c.type){if(r=n.done?h:d,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f="suspendedStart",d="suspendedYield",p="executing",h="completed",y={};function m(){}function g(){}function v(){}var w={};w[i]=function(){return this};var b=Object.getPrototypeOf,E=b&&b(b(A([])));E&&E!==n&&r.call(E,i)&&(w=E);var _=v.prototype=m.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,i,a,u){var c=l(t[o],t,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function R(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method))return y;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=l(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function A(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:P}}function P(){return{value:e,done:!0}}return g.prototype=_.constructor=v,v.constructor=g,g.displayName=c(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},O(S.prototype),S.prototype[a]=function(){return this},t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new S(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(_),c(_,u,"Generator"),_[i]=function(){return this},_.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=A,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}(je);var $e=je.exports,Me=[],Ue=!1;function We(){if(Ue=!0,Me.length>0){var t=Me.shift(),e=t.func,n=t.resolve,r=t.reject;Promise.resolve(e()).then((function(t){n(t)})).catch((function(t){r(t)})).finally(We)}else Ue=!1}function Be(t){var e=t.id,n=t.func;return new Promise((function(t,r){Me.push({id:e,func:n,resolve:t,reject:r}),Ue||We()}))}var Fe,Ge=(Fe="ACCESS_RESOURCE",function(t){return{get:function(){return ve({targetResource:Fe,fnName:ce,payload:{path:t}}).then((function(t){return t.data}))},subscribe:function(e){return ve({targetResource:Fe,fnName:ae,payload:{path:t,optionalCallbackFn:e}}).then((function(t){var n=t.data;return e?n:function(t){return new be((function(e){we({resource:ie,fnName:t,callback:function(t){e.next(t.data)}})}))}(n)}))}}}),He=function(){return{get:function(){var t=ye.getContext();return t?Promise.resolve(t.context):ve({targetResource:"CONTEXT_RESOURCE",fnName:ce,payload:{}}).then((function(t){return t.data}))}}},qe=function(t){return function(e){return{set:function(n){return ve({targetResource:"AUTH_RESOURCE",fnName:ue,payload:{value:n,path:e,targetSelector:t}}).then((function(t){return t.data}))}}}},Ye=function(t){return function(e){return{get:function(){return ve({targetResource:Qt,fnName:ce,payload:{targetSelector:t,path:e}}).then((function(t){return t.data}))},subscribe:function(n){return ve({targetResource:Qt,fnName:ae,payload:{targetSelector:t,path:e,optionalCallbackFn:n}}).then((function(t){var e=t.data;return n?e:function(t){return new be((function(e){we({resource:ie,fnName:t,callback:function(t){e.next(t.data)}})}))}(e)}))}}}},ze=function(t){return function(e,n){return{get:function(){return ve({targetResource:Gt,fnName:ce,payload:{targetSelector:t,documentId:e,itemId:n}}).then((function(t){return t.data}))},subscribe:function(r){return ve({targetResource:Gt,fnName:ae,payload:{targetSelector:t,documentId:e,itemId:n,optionalCallbackFn:r}}).then((function(t){var e=t.data;return r?e:function(t){return new be((function(e){we({resource:ie,fnName:t,callback:function(t){e.next(t.data)}})}))}(e)}))}}}},Ve=function(t){return function(e){return{get:function(){return ve({targetResource:Wt,fnName:ce,payload:{targetSelector:t,motivation:e}}).then((function(t){return t.data}))},subscribe:function(n){return ve({targetResource:Wt,fnName:ae,payload:{targetSelector:t,motivation:e,optionalCallbackFn:n}}).then((function(t){var e=t.data;return n?e:function(t){return new be((function(e){we({resource:ie,fnName:t,callback:function(t){e.next(t.data)}})}))}(e)}))},create:function(n,r){return ve({targetResource:Wt,fnName:"CREATE_ANNOTATION",payload:{targetSelector:t,motivation:e,body:n,subTarget:r}}).then((function(t){return t.data}))},resolve:function(t){return ve({targetResource:Wt,fnName:de,payload:{annotations:t}}).then((function(t){return t.data}))},read:function(t){return ve({targetResource:Wt,fnName:"READ_ANNOTATION",payload:{annotationIds:t}}).then((function(t){return t.data}))},unread:function(t){return ve({targetResource:Wt,fnName:"UNREAD_ANNOTATION",payload:{annotationIds:t}}).then((function(t){return t.data}))},annotation:function(t){return function(t,e){return{get:function(){return ve({targetResource:Wt,fnName:"GET_ANNOTATION",payload:{motivation:t,annotationId:e}}).then((function(t){return t.data}))},set:function(t){return ve({targetResource:Wt,fnName:"SET_ANNOTATION",payload:{annotationId:e,body:t}}).then((function(t){return t.data}))},delete:function(){return ve({targetResource:Wt,fnName:"DELETE_ANNOTATION",payload:{annotationId:e}}).then((function(t){return t.data}))},resolve:function(t){return ve({targetResource:Wt,fnName:de,payload:{annotationId:e,annotationVersion:t}}).then((function(t){return t.data}))}}}(e,t)}}}},Je=function(t,e,n){return new be((function(e){we({resource:ie,fnName:t,callback:function(t){e.next(t.data),n(t.data)}})}),e)},Ke=function(t){return function(){return{evaluate:function(e){return ve({targetResource:Jt,fnName:"EVALUATE",payload:{id:e,targetSelector:t}}).then((function(t){return t.data}))},restart:function(e){return ve({targetResource:Jt,fnName:"RESTART",payload:{activityId:e,targetSelector:t}}).then((function(t){return t.data}))},result:function(t){return{get:function(){return ve({targetResource:Jt,fnName:"GET_RESULT",payload:{elementId:t}}).then((function(t){return t.data}))},subscribe:function(e){return ve({targetResource:Jt,fnName:"SUBSCRIBE_RESULT",payload:{elementId:t,optionalCallbackFn:e}}).then((function(t){var n=t.data;return e?n:Je(n)}))}}},scope:function(t,e){if(void 0===t||void 0===e)throw Error("sourceId and context are required to subscribe to scope");return{subscribe:function(n){return ve({targetResource:Jt,fnName:"SUBSCRIBE_TO_SCOPE",payload:{sourceId:t,context:e}}).then((function(t){var e=t.data,r=e.subscriptionId,o=e.unsubscribe;return Je(r,o,n)}))}}}}}},Xe=function(t){return function(){return{get:function(){return ve({targetResource:Vt,fnName:ce,payload:{targetSelector:t}}).then((function(t){return t.data}))},subscribe:function(e){return ve({targetResource:Vt,fnName:ae,payload:{targetSelector:t,optionalCallbackFn:e}}).then((function(t){var n=t.data;return e?n:function(t){return new be((function(e){we({resource:ie,fnName:t,callback:function(t){e.next(t.data)}})}))}(n)}))}}}},Ze=function(t,e){return new be((function(e){we({resource:ie,fnName:t,callback:function(t){e.next(t.data)}})}),e)},Qe=function(t){return function(e){return{get:function(){return ve({targetResource:re,fnName:ce,payload:{path:e,targetSelector:t}}).then((function(t){return t.data}))},subscribe:function(n){return ve({targetResource:re,fnName:ae,payload:{path:e,optionalCallbackFn:n,targetSelector:t}}).then((function(t){var e=t.data,r=e.subscriptionId,o=e.unsubscribe;return n?{subscriptionId:r,unsubscribe:o}:Ze(r,o)}))},subscribeToCSS:function(n){return ve({targetResource:re,fnName:"SUBSCRIBE_TO_THEME_CSS",payload:{path:e,targetSelector:t,optionalCallbackFn:n}}).then((function(t){var e=t.data,r=e.subscriptionId,o=e.unsubscribe;return n?{subscriptionId:r,unsubscribe:o}:Ze(r,o)}))}}}},tn=function(t){return function(){return{get:function(){return ve({targetResource:te,fnName:ce,payload:{targetSelector:t}}).then((function(t){return t.data}))},set:function(e){return ve({targetResource:te,fnName:ue,payload:{targetSelector:t,subTarget:e}}).then((function(t){return t.data}))},subscribe:function(e){return ve({targetResource:te,fnName:ae,payload:{targetSelector:t,optionalCallbackFn:e}}).then((function(t){var n=t.data;return e?n:function(t){return new be((function(e){we({resource:ie,fnName:t,callback:function(t){e.next(t.data)}})}))}(n)}))},isCurrent:function(){return ve({targetResource:te,fnName:"IS_CURRENT_ROUTE",payload:{targetSelector:t}}).then((function(t){return t.data}))},isExact:function(){return ve({targetResource:te,fnName:"IS_EXACT_ROUTE",payload:{targetSelector:t}}).then((function(t){return t.data}))}}}},en=function(t){return function(){return{get:function(){return ve({targetResource:ee,fnName:ce,payload:{targetSelector:t}}).then((function(t){return t.data}))},add:function(e){return ve({targetResource:ee,fnName:"ADD",payload:{targetSelector:t,subTarget:e}}).then((function(t){return t.data}))},length:function(){return ve({targetResource:ee,fnName:"LENGTH",payload:{targetSelector:t}}).then((function(t){return t.data}))},clear:function(){return ve({targetResource:ee,fnName:"CLEAR",payload:{targetSelector:t}}).then((function(t){return t.data}))},remove:function(e){return ve({targetResource:ee,fnName:"REMOVE",payload:{targetSelector:t,subTarget:e}}).then((function(t){return t.data}))},set:function(e){return ve({targetResource:ee,fnName:ue,payload:{targetSelector:t,subTarget:e}}).then((function(t){return t.data}))},subscribe:function(t){return ve({targetResource:ee,fnName:ae,payload:{optionalCallbackFn:t}}).then((function(e){var n=e.data;return t?n:function(t){return new be((function(e){we({resource:ie,fnName:t,callback:function(t){e.next(t.data)}})}))}(n)}))},isCurrent:function(){return ve({targetResource:ee,fnName:"IS_CURRENT",payload:{targetSelector:t}}).then((function(t){return t.data}))},isExact:function(){return ve({targetResource:ee,fnName:"IS_EXACT",payload:{targetSelector:t}}).then((function(t){return t.data}))},copy:function(e){return Ot(e),ve({targetResource:ee,fnName:"COPY",payload:{targetSelector:t,value:e}})},paste:function(e){var n,r,o=null===(n=(null==e?void 0:e.clipboardData)||(null===(r=window)||void 0===r?void 0:r.clipboardData))||void 0===n?void 0:n.getData("text");return ve({targetResource:ee,fnName:"PASTE",payload:{targetSelector:t,value:o||e}})},getUrl:function(t){return ve({targetResource:ee,fnName:"GET_URL",payload:{callback:t}})}}}},nn=function(t){return function(){return{moveOn:function(){return ve({targetResource:Ht,fnName:"DEPRECATED_CONTINUE",payload:{}}).then((function(t){return t.data}))},subscribeToMoveOn:function(e){return ve({targetResource:Ht,fnName:"DEPRECATED_SUBSCRIBE_TO_MOVE_ON",payload:{targetId:t,notify:e}})},unsubscribeFromMoveOn:function(){return ve({targetResource:Ht,fnName:"DEPRECATED_UNSUBSCRIBE_FROM_MOVE_ON",payload:{targetId:t}})}}}},rn=function(t){return function(){return{get:function(){return ve({targetResource:Zt,fnName:ce,payload:{targetSelector:t}}).then((function(t){return t.data}))}}}},on=function(t){return function(){return{launch:function(e,n,r,o){return ve({targetResource:Xt,fnName:"LAUNCH",payload:{targetSelector:t,url:e,key:n,params:r,mode:o}}).then((function(t){return t.data}))},embed:function(e,n,r){return ve({targetResource:Xt,fnName:"EMBED",payload:{targetSelector:t,url:e,key:n,params:r}}).then((function(t){return t.data}))}}}},an=function(){return{deselect:function(t){return ve({targetResource:Yt,fnName:"DESELECT",payload:{selection:t}})},select:function(t){return ve({targetResource:Yt,fnName:"SELECT",payload:{selection:t}})},selection:function(t){return{subscribe:function(e){return ve({targetResource:Yt,fnName:"SUBSCRIBE_TO_SELECTION",payload:{selection:t,optionalCallbackFn:e}}).then((function(t){var n=t.data,r=n.subscriptionId,o=n.unsubscribeFn,i=n.initialNotifyAfterReturn;return e?{subscriptionId:r,unsubscribe:o}:(i&&setTimeout((function(){i()})),function(t,e){return new be((function(e){we({resource:ie,fnName:t,callback:function(t){e.next(t.data)}})}),e)}(r,o))}))}}},open:function(t){return ve({targetResource:Yt,fnName:"OPEN",payload:{activityId:t}})},confirmAction:function(t){return ve({targetResource:Yt,fnName:"CONFIRM_ACTION",payload:{actionIdentifier:t}})},recordUndoRedoAction:function(t,e){return ve({targetResource:Yt,fnName:"UNDO_REDO_ACTION",payload:{action:t,stage:e}})}}},un=function(t){return function(e){return{subscribe:function(n){return ve({targetResource:oe,fnName:"SUBSCRIBE_TO_EVENT",payload:{targetSelector:t,event:e}}).then((function(t){var e=t.data;return function(t,e,n){return new be((function(e){we({resource:ie,fnName:t,callback:function(t){e.next(t.data),n(t.data)}})}),e)}(e.subscriptionId,e.unsubscribe,n)}))},publish:function(n){return ve({targetResource:oe,fnName:"PUBLISH_EVENT",payload:{targetSelector:t,event:e,data:n}}).then((function(t){return t.data}))}}}},cn=function(t){return function(){return{get:function(){return ve({targetResource:"CLASS_RESOURCE",fnName:ce,payload:{targetSelector:t}}).then((function(t){return t.data}))}}}},sn=function(t){return function(e){return{debug:function(n){return ve({targetResource:Kt,fnName:"DEBUG",payload:{value:n,path:e,targetSelector:t}}).then((function(t){return t.data}))},error:function(n){return ve({targetResource:Kt,fnName:"ERROR",payload:{value:n,path:e,targetSelector:t}}).then((function(t){return t.data}))},info:function(n){return ve({targetResource:Kt,fnName:"INFO",payload:{value:n,path:e,targetSelector:t}}).then((function(t){return t.data}))},warn:function(n){return ve({targetResource:Kt,fnName:"WARN",payload:{value:n,path:e,targetSelector:t}}).then((function(t){return t.data}))}}}},ln=function(){return{is:function(t){return ve({targetResource:zt,fnName:"IS",payload:t}).then((function(t){return void 0!==t.data&&t.data}))},set:function(t,e){return ve({targetResource:zt,fnName:ue,payload:{name:t,isSet:e}}).then((function(t){return t.data}))},get:function(){return ve({targetResource:zt,fnName:ce,payload:{}}).then((function(t){return t.data}))},subscribe:function(t,e){return ve({targetResource:zt,fnName:ae,payload:{flag:t,optionalCallbackFn:e}}).then((function(t){var n=t.data,r=n.subscriptionId,o=n.unsubscribe;return e?{subscriptionId:r,unsubscribe:o}:function(t){return new be((function(e){we({resource:ie,fnName:t,callback:function(t){e.next(t.data)}})}))}(r)}))}}},fn=function(t,e,n){return function(t){var e=t.fnName,n=t.window,r=t.callback;return Et.once(e,{window:n},r)}({fnName:le,window:t,callback:function(){return{nonce:e,localContext:n}}})},dn={exports:{}},pn={exports:{}};!function(t){t.exports=function(t){if(Array.isArray(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0}(pn);var hn={exports:{}};!function(t){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}},t.exports.default=t.exports,t.exports.__esModule=!0}(hn);var yn={exports:{}},mn={exports:{}};!function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.default=t.exports,t.exports.__esModule=!0}(mn),function(t){var e=mn.exports;t.exports=function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0}(yn);var gn={exports:{}};!function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0}(gn),function(t){var e=pn.exports,n=hn.exports,r=yn.exports,o=gn.exports;t.exports=function(t,i){return e(t)||n(t,i)||r(t,i)||o()},t.exports.default=t.exports,t.exports.__esModule=!0}(dn);var vn=At(dn.exports);function wn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wn(Object(n),!0).forEach((function(e){Ct(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function En(t){var e;return(e={background:"none",border:"none",width:"100%",height:"100%"},function(t){for(var n=0,r=Object.entries(e);n<r.length;n++){var o=vn(r[n],2),i=o[0],a=o[1];t.style[i]=a}return t})(t)}function _n(t){var e=t.name,n=t.title,r=t.pluginName,o=document.createElement("iframe");return o.setAttribute("id",e),o.setAttribute("allow","fullscreen"),o.setAttribute("allowfullscreen",""),n&&o.setAttribute("title",n),r&&o.setAttribute("class","plugin-".concat(r.replace(/\s/g,"-").toLowerCase())),o}function On(t){return{getIframe:function(){return t},getContentWindow:function(){return t.contentWindow}}}function Sn(t){for(;t&&t.firstChild;)t.removeChild(t.firstChild)}function Rn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Tn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Rn(Object(n),!0).forEach((function(e){Ct(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var xn=function(){var t=De($e.mark((function t(e,n,r){var o,i,a,u;return $e.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(o=document.createElement("plugin-element")).setAttribute("data-plugin-child-id",r),n.appendChild(o),i=function(t){throw new URIError("The script ".concat(t.target.src," didn't load correctly."))},(a=document.createElement("script")).onerror=i,a.src=e.data.entryPoint.entryPoint,a.defer=!0,a.type="text/javascript",u={assets:function(){return Tn(Tn({},Te),{},{create:function(t,e){return Re(t,e,r,"COMPONENT")}})},register:function(){return new Promise((function(t){t(!0)}))},state:function(t){return Ae(r)(t)},editor:function(){return an()},learner:function(){return Ke().apply(void 0,arguments)},theme:function(t){return Qe(r)(t)},access:function(t){return Ge(t)},auth:function(t){return qe()(t)},progress:function(t){return Ye()(t)},competency:function(t,e){return ze()(t,e)},annotations:function(){return Ve().apply(void 0,arguments)},history:function(){return Xe().apply(void 0,arguments)},route:function(){return tn().apply(void 0,arguments)},selection:function(){return en(r).apply(void 0,arguments)},__deprecated:function(){return nn()()},plugin:function(){return rn().apply(void 0,arguments)},lti:function(){return on().apply(void 0,arguments)},context:function(){return He()},event:function(){return un().apply(void 0,arguments)},cohort:function(){return cn().apply(void 0,arguments)},child:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Le(Nn,e)},features:function(){return ln()}},window.childCDP=u,n.addEventListener("click",(function(){r&&u.editor().select({path:["STAGE"],data:{selectedPath:[0,0],type:"stage-element-component-plugin",componentId:r}})})),n.CDP=u,n.prepend(a);case 14:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}();var Nn=function(){function t(e){kt(this,t),this.id=e,this.element=void 0}return jt(t,[{key:"init",value:function(t,e){var n=this;return Be({id:this.id,func:function(){return n._init(t,e)}})}},{key:"_init",value:function(t,e){var n=this,r=e||ye.getContext();return this.element=t,function(t,e){return ve({targetResource:Ft,fnName:"INIT_CHILD",payload:{childId:t,localContext:e}})}(this.id,e).then((function(e){var o=e.data,i=o.nonce,a=o.entryPoint,u=o.title,c=o.name;if(function(t){var e=t.contentType,n=t.entryPoint;return"application/javascript"===e&&n&&n.length}(a))xn(e,t,n.id);else{var s=n._createManagedIframe({entryPoint:a,title:u,name:c});t.appendChild(s.getIframe()),s.load(),fn(s.getContentWindow(),i,r)}}))}},{key:"_createManagedIframe",value:function(t){var e,n,r,o=t.entryPoint,i=t.name,a=t.title;return n=(e=o).contentType,r=e.entryPointData,"application/embed"===n&&r&&r.length?function(t){var e=t.name,n=t.title,r=t.pluginName,o=t.htmlDoc,i=En(_n({name:e,title:n,pluginName:r}));return i.setAttribute("sandbox","allow-scripts allow-same-origin"),bn(bn({},On(i)),{},{load:function(){var t=i.contentWindow.document;t.open(),t.write(o),t.close()}})}({name:this.id,title:a,pluginName:i,htmlDoc:o.entryPointData}):function(t){var e=t.name,n=t.src,r=En(_n({name:e,title:t.title,pluginName:t.pluginName}));return bn(bn({},On(r)),{},{load:function(){r.src=n}})}({name:this.id,title:a,pluginName:i,src:o.entryPoint})}},{key:"remove",value:function(){var t=this;return Be({id:this.id,func:function(){return t._remove()}})}},{key:"_remove",value:function(){var t,e=this;return(t=this.id,ve({targetResource:Ft,fnName:"REMOVE_CHILD",payload:{childId:t}})).then((function(){Sn(e.element)}))}},{key:"create",value:function(t){return function(t){return t.then((function(t){var e=t.data;if(e.success)return e.success;throw new Error(e.error)}))}(function(t){return ve({targetResource:Ft,fnName:"CREATE_CHILD",payload:{createOptions:t}})}({name:t.name,plugin:t.plugin}))}},{key:"delete",value:function(){var t,e=this;return(t=this.id,ve({targetResource:Ft,fnName:"DELETE_CHILD",payload:{childId:t}})).then((function(){Sn(e.element)}))}},{key:"state",value:function(){return Ae(this.id).apply(void 0,arguments)}},{key:"access",value:function(){return Ge.apply(void 0,arguments)}},{key:"assets",value:function(){var t=this;return Tn(Tn({},Te),{},{create:function(e,n){return Re(e,n,t.id,"COMPONENT")}})}},{key:"auth",value:function(){return qe(this.id).apply(void 0,arguments)}},{key:"progress",value:function(){return Ye(this.id).apply(void 0,arguments)}},{key:"competency",value:function(){return ze(this.id).apply(void 0,arguments)}},{key:"annotations",value:function(){return Ve(this.id).apply(void 0,arguments)}},{key:"route",value:function(){return tn(this.id).apply(void 0,arguments)}},{key:"selection",value:function(){return en(this.id).apply(void 0,arguments)}},{key:"learner",value:function(){return Ke(this.id).apply(void 0,arguments)}},{key:"history",value:function(){return Xe(this.id).apply(void 0,arguments)}},{key:"theme",value:function(){return Qe(this.id).apply(void 0,arguments)}},{key:"plugin",value:function(){return rn(this.id).apply(void 0,arguments)}},{key:"logger",value:function(){return sn(this.id).apply(void 0,arguments)}},{key:"lti",value:function(){return on(this.id).apply(void 0,arguments)}},{key:"event",value:function(){return un(this.id).apply(void 0,arguments)}},{key:"__deprecated",value:function(){return nn(this.id).apply(void 0,arguments)}}]),t}(),An=function(){if("function"==typeof window.CustomEvent)return window.CustomEvent;function t(t,e){var n=e||{bubbles:!1,cancelable:!1,detail:void 0},r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),r}return t.prototype=window.Event.prototype,t}(),Pn={},In={},Cn=0;function Ln(t){if(t===window)return 0;var e;try{e=window.document.defaultView.getComputedStyle(t).getPropertyValue("z-index")}catch(t){return 0}return isNaN(e)?Ln(t.parentNode):e}function kn(t){for(var e=[],n=Object.keys(Pn[t]),r=0;r<n.length;r++){var o=n[r],i=Pn[t][o].el.getBoundingClientRect(),a={droppableId:o,rect:{x:i.left,y:i.top,w:i.width,h:i.height},zIndex:Ln(Pn[t][o].el)};e.push(a)}return e}function Dn(t,e,n){for(var r=0;r<n.length;r++){var o=n[r],i=Pn[t][o].el,a=new An(e,{detail:In[t]});i.dispatchEvent(a)}}function jn(t,e){return function(t,e){var n=e.dragType,r=e.dragData;In[t]={domainName:t,dragType:n,dragData:r}}(t,e),{hitAreas:kn(t),triggerEventOnDroppables:Dn.bind(null,t)}}function $n(t){!function(t){In[t]=null}(t)}function Mn(t,e){for(var n=Object.keys(Pn[e]),r=0;r<n.length;r++){var o=n[r];if(Pn[e][o].el===t)return o}return null}var Un=function(t){return{addDroppable:function(e){if(Pn[t]&&0!==Object.keys(Pn[t]).length||(Pn[t]={},function(t){ve({targetResource:qt,fnName:"SUBSCRIBE_TO_DRAGGABLES",payload:{domainName:t,callbackDragStarted:jn.bind(null,t),callbackDragStopped:$n.bind(null,t)}})}(t)),null===Mn(e,t)){var n=(++Cn).toString();Pn[t][n]={droppableId:n,el:e}}},removeDroppable:function(e){if(Pn[t]){var n=Mn(e,t);null!==n&&(delete Pn[t][n],0===Object.keys(Pn[t]).length&&function(t){ve({targetResource:qt,fnName:"UNSUBSCRIBE_FROM_DRAGGABLES",payload:{domainName:t}})}(t))}}}};Nt(Un,Object.freeze({__proto__:null,domains:{PATHWAY_BUILDER_TOOLS_LIST:"DOMAIN_PATHWAY_BUILDER_TOOLS_LIST"},dragTypes:{TOOL_NEW:"DRAG_TYPE_TOOL_NEW"},toolTypes:{TEXT:"TOOL_TYPE_TEXT",IMAGE:"TOOL_TYPE_IMAGE",TABLE:"TOOL_TYPE_TABLE",COMPONENT:"TOOL_TYPE_COMPONENT"},events:{DRAGENTER:"CDPDragStateDragEnter",DRAGLEAVE:"CDPDragStateDragLeave",DROP:"CDPDragStateDrop"}}));var Wn;function Bn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Fn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bn(Object(n),!0).forEach((function(e){Ct(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Gn=function(){var t=document.body;!t||t.className.indexOf("plugin")>=0||ve({targetResource:Zt,fnName:ce,payload:{}}).then((function(e){e&&e.data&&e.data.name&&t.classList.add("plugin-".concat(e.data.name.replace(/\s/g,"-")))}))},Hn=function(t){return t&&t.data&&t.data.services,t},qn=new(function(){function t(){kt(this,t),this.childResources={}}return jt(t,[{key:"createChildResource",value:function(t){if(this.childResources[t])return this.childResources[t];var e=new Nn(t);return this.childResources[t]=e,"parent"===e.id&&Gn(),e}}]),t}()),Yn=function(t){return qn.createChildResource(t)},zn={register:me(window)?function(){if(!Wn)try{Wn=ve({fnName:le,targetWindow:Ut,payload:{}}).then((function(t){return t.data.localContext&&ye.setContext(t.data.localContext),ve({targetResource:se,fnName:t.data.nonce,payload:t.data})})).then((function(t){Gn(),Hn(t)}))}catch(t){Wn=new Promise((function(e,n){return setTimeout((function(){return n(t)}),0)}))}return Wn}:function(){if(!Wn)try{Wn=ve({fnName:se,payload:{}}).then((function(t){Hn(t)}))}catch(t){Wn=new Promise((function(e,n){return setTimeout((function(){return n(t)}),0)}))}return Gn(),Wn},state:function(t){return Ae()(t)},child:Yn,courseware:Yn,editor:function(){return an()},learner:function(){return Ke().apply(void 0,arguments)},dragState:Un,theme:function(t){return Qe()(t)},context:function(){return He()},user:function(t){return function(t){return{get:function(){return ve({targetResource:"USER_RESOURCE",fnName:ce,payload:{accountId:t}}).then((function(t){return t.data}))}}}(t)},access:function(t){return Ge(t)},progress:function(t){return Ye()(t)},cohort:function(){return cn().apply(void 0,arguments)},features:function(t){return ln()},__query:function(t){return ve({targetResource:"QUERY_RESOURCE",fnName:"EXECUTE_QUERY",payload:{query:t}})},__deprecated:function(){return nn()()},competency:function(t,e){return ze()(t,e)},annotations:function(){return Ve().apply(void 0,arguments)},history:function(){return Xe().apply(void 0,arguments)},route:function(){return tn().apply(void 0,arguments)},selection:function(){return en().apply(void 0,arguments)},plugin:function(){return rn().apply(void 0,arguments)},lti:function(){return on().apply(void 0,arguments)},assets:function(){return Fn(Fn({},Te),{},{create:function(t,e){return Re(t,e)}})},auth:function(t){return qe()(t)},event:function(t){return un()(t)},logger:function(t){return sn()(t)}};let Vn;const Jn=new Promise((t=>{Vn=t}));const Kn=mt("",(function(t){t(new Promise((e=>{Jn.then((n=>{n.context().get().then((n=>{e(n),t(n)}))}))})))}));const Xn=function(){const{subscribe:t,set:e}=gt({});let n,r,o=!1;const i=new Promise((t=>{Jn.then((i=>{r=i,n=r.state().subscribe((n=>{e(n),o=!0,t(!0)}))}))}));return{subscribe:t,set:t=>{if(!o)throw new Error("can't set cdp state yet, forgot to wait for isReadyPromise?");r.state().get().then((e=>r.state().set({...e,...t})))},isReadyPromise:i,destroy:()=>{n&&n.then((t=>t.unsubscribe()))}}}();function Zn(t){const e=t-1;return e*e*e+1}function Qn(t,{delay:e=0,duration:n=400,easing:r=Zn}={}){const o=getComputedStyle(t),i=+o.opacity,a=parseFloat(o.height),u=parseFloat(o.paddingTop),c=parseFloat(o.paddingBottom),s=parseFloat(o.marginTop),l=parseFloat(o.marginBottom),f=parseFloat(o.borderTopWidth),d=parseFloat(o.borderBottomWidth);return{delay:e,duration:n,easing:r,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*i};height: ${t*a}px;padding-top: ${t*u}px;padding-bottom: ${t*c}px;margin-top: ${t*s}px;margin-bottom: ${t*l}px;border-top-width: ${t*f}px;border-bottom-width: ${t*d}px;`}}function tr(t){let e,n,r;return{c(){e=S("img"),A(e,"class","image-item svelte-qpp00m"),s(e.src,n=t[0]?.source?.original?.url)||A(e,"src",n),A(e,"alt",r=t[0]?.metadata?.altText??""),I(e,"choice-image","choice-image"===t[1]),I(e,"question-image","question-image"===t[1])},m(t,n){_(t,e,n)},p(t,o){1&o&&!s(e.src,n=t[0]?.source?.original?.url)&&A(e,"src",n),1&o&&r!==(r=t[0]?.metadata?.altText??"")&&A(e,"alt",r),2&o&&I(e,"choice-image","choice-image"===t[1]),2&o&&I(e,"question-image","question-image"===t[1])},d(t){t&&O(e)}}}function er(e){let n,r=e[0]&&tr(e);return{c(){r&&r.c(),n=x()},m(t,e){r&&r.m(t,e),_(t,n,e)},p(t,[e]){t[0]?r?r.p(t,e):(r=tr(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&O(n)}}}function nr(t,e,n){let{image:r}=e,{className:o}=e;return t.$$set=t=>{"image"in t&&n(0,r=t.image),"className"in t&&n(1,o=t.className)},[r,o]}class rr extends ht{constructor(t){super(),pt(this,t,nr,er,u,{image:0,className:1})}}function or(t){let e,n,r,o,i,a,u,c;return{c(){e=S("input"),A(e,"id",n=`opt${t[1]}`),A(e,"name","mcq-group"),A(e,"class",r=p("selector "+(t[5]?"locked":""))+" svelte-s2ohe3"),A(e,"type",o=t[10]?"checkbox":"radio"),e.value=t[0],e.disabled=(t[10],i=t[5]),A(e,"role",a=t[10]?"checkbox":"radio"),A(e,"tabindex","0"),I(e,"checkbox",t[10])},m(n,r){_(n,e,r),u||(c=N(e,"input",t[16]),u=!0)},p(t,u){2&u&&n!==(n=`opt${t[1]}`)&&A(e,"id",n),32&u&&r!==(r=p("selector "+(t[5]?"locked":""))+" svelte-s2ohe3")&&A(e,"class",r),1024&u&&o!==(o=t[10]?"checkbox":"radio")&&A(e,"type",o),1&u&&e.value!==t[0]&&(e.value=t[0]),1056&u&&i!==(t[10],i=t[5])&&(e.disabled=i),1024&u&&a!==(a=t[10]?"checkbox":"radio")&&A(e,"role",a),1056&u&&I(e,"checkbox",t[10])},d(t){t&&O(e),u=!1,c()}}}function ir(t){let e,n;return{c(){e=S("div"),A(e,"class",n=p("feedback-icon "+(t[3]?"correct":"incorrect"))+" svelte-s2ohe3")},m(n,r){_(n,e,r),e.innerHTML=t[11]},p(t,r){8&r&&n!==(n=p("feedback-icon "+(t[3]?"correct":"incorrect"))+" svelte-s2ohe3")&&A(e,"class",n)},d(t){t&&O(e)}}}function ar(t){let e,n,r,o,u,c,s,l,f,d,h=t[6]&&ur(t);return u=new rr({props:{image:t[7]}}),{c(){e=S("div"),n=S("span"),r=T(),h&&h.c(),o=T(),st(u.$$.fragment),A(n,"class","response-header svelte-s2ohe3"),A(e,"class",c=p("response "+(t[3]?"correct":"incorrect"))+" svelte-s2ohe3")},m(i,c){_(i,e,c),w(e,n),n.innerHTML=t[12],w(e,r),h&&h.m(e,null),w(e,o),lt(u,e,null),l=!0,f||(d=[N(e,"introend",(function(){a(t[8])&&t[8].apply(this,arguments)})),N(e,"outroend",(function(){a(t[8])&&t[8].apply(this,arguments)}))],f=!0)},p(n,r){(t=n)[6]?h?h.p(t,r):(h=ur(t),h.c(),h.m(e,o)):h&&(h.d(1),h=null);const i={};128&r&&(i.image=t[7]),u.$set(i),(!l||8&r&&c!==(c=p("response "+(t[3]?"correct":"incorrect"))+" svelte-s2ohe3"))&&A(e,"class",c)},i(t){l||(rt(u.$$.fragment,t),Y((()=>{s||(s=at(e,Qn,{},!0)),s.run(1)})),l=!0)},o(t){ot(u.$$.fragment,t),s||(s=at(e,Qn,{},!1)),s.run(0),l=!1},d(t){t&&O(e),h&&h.d(),ft(u),t&&s&&s.end(),f=!1,i(d)}}}function ur(t){let e;return{c(){e=S("p"),A(e,"class","feedback svelte-s2ohe3")},m(n,r){_(n,e,r),e.innerHTML=t[6]},p(t,n){64&n&&(e.innerHTML=t[6])},d(t){t&&O(e)}}}function cr(t){let e,n,r,o,i,a,u,c,s,l,f=t[9]&&t[4].includes(t[0]);function d(t,e){return 529&e&&(n=null),null==n&&(n=!(!t[9]||!t[4].includes(t[0]))),n?ir:or}let h=d(t,-1),y=h(t);c=new rr({props:{className:"choice-image",image:t[2]}});let m=f&&ar(t);return{c(){e=S("div"),y.c(),r=T(),o=S("label"),u=T(),st(c.$$.fragment),s=T(),m&&m.c(),A(o,"for",i=`opt${t[1]}`),A(o,"class",a=p("option "+(t[5]?"locked":""))+" svelte-s2ohe3"),A(e,"class","answer svelte-s2ohe3")},m(n,i){_(n,e,i),y.m(e,null),w(e,r),w(e,o),o.innerHTML=t[0],w(e,u),lt(c,e,null),w(e,s),m&&m.m(e,null),l=!0},p(t,[n]){h===(h=d(t,n))&&y?y.p(t,n):(y.d(1),y=h(t),y&&(y.c(),y.m(e,r))),(!l||1&n)&&(o.innerHTML=t[0]),(!l||2&n&&i!==(i=`opt${t[1]}`))&&A(o,"for",i),(!l||32&n&&a!==(a=p("option "+(t[5]?"locked":""))+" svelte-s2ohe3"))&&A(o,"class",a);const u={};4&n&&(u.image=t[2]),c.$set(u),529&n&&(f=t[9]&&t[4].includes(t[0])),f?m?(m.p(t,n),529&n&&rt(m,1)):(m=ar(t),m.c(),rt(m,1),m.m(e,null)):m&&(et(),ot(m,1,1,(()=>{m=null})),nt())},i(t){l||(rt(c.$$.fragment,t),rt(m),l=!0)},o(t){ot(c.$$.fragment,t),ot(m),l=!1},d(t){t&&O(e),y.d(),ft(c),m&&m.d()}}}function sr(t,e,n){let{choiceLabel:r}=e,{choiceImage:o}=e,{correct:i}=e,{selectedOptValues:a}=e,{isLocked:u}=e,{feedback:c}=e,{feedbackImage:s}=e,{handleOptSelected:l}=e,{position:f}=e,{handleResized:d}=e,{isShowFeedback:p}=e,{allowMultiSelect:h}=e,{setChoiceLabel:y}=e;const m=i?'\n  <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n    <title>Correct Answer Icon</title>\n    <g fill="none" fill-rule="evenodd">\n    <circle cx="50" cy="50" r="50"/>\n    <path d="M82.373 34.837L43.677 75.31c-2.154 2.253-5.602 2.253-7.756 0L16.616 54.943c-2.155-2.253-2.155-5.893 0-8.146 2.154-2.254 5.602-2.254 7.756 0L39.885 63.09l34.818-36.4c2.154-2.253 5.602-2.253 7.756 0 2.069 2.253 2.069 5.893-.086 8.147z" fill="#FFF" fill-rule="nonzero"/>\n    </g>\n  </svg>\n':'\n  <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">\n    <title>Incorrect Answer Icon</title>\n    <g fill="none" fill-rule="evenodd">\n      <circle cx="50" cy="50" r="50"/>\n      <path d="M54.61 50.03l19.402-19.24a3.35 3.35 0 000-4.75 3.418 3.418 0 00-4.79 0L50 45.041 30.778 25.98a3.418 3.418 0 00-4.79 0 3.35 3.35 0 000 4.75l19.401 19.24-19.401 19.3a3.35 3.35 0 000 4.75 3.418 3.418 0 004.79 0L50 54.958 69.222 74.02a3.418 3.418 0 004.79 0 3.35 3.35 0 000-4.75L54.611 50.03z" fill="#FFF" fill-rule="nonzero"/>\n    </g>\n  </svg>\n',g=i?'<p dir="ltr">That\'s correct.</p>':'<p dir="ltr">That\'s incorrect. Try again.</p>';function v(t){t.target.value=r,l(r,t.target.checked)}r=r||`<p dir="auto">Text of choice ${++f}</p>`,y(r);return t.$$set=t=>{"choiceLabel"in t&&n(0,r=t.choiceLabel),"choiceImage"in t&&n(2,o=t.choiceImage),"correct"in t&&n(3,i=t.correct),"selectedOptValues"in t&&n(4,a=t.selectedOptValues),"isLocked"in t&&n(5,u=t.isLocked),"feedback"in t&&n(6,c=t.feedback),"feedbackImage"in t&&n(7,s=t.feedbackImage),"handleOptSelected"in t&&n(14,l=t.handleOptSelected),"position"in t&&n(1,f=t.position),"handleResized"in t&&n(8,d=t.handleResized),"isShowFeedback"in t&&n(9,p=t.isShowFeedback),"allowMultiSelect"in t&&n(10,h=t.allowMultiSelect),"setChoiceLabel"in t&&n(15,y=t.setChoiceLabel)},[r,f,o,i,a,u,c,s,d,p,h,m,g,v,l,y,t=>v(t)]}class lr extends ht{constructor(t){super(),pt(this,t,sr,cr,u,{choiceLabel:0,choiceImage:2,correct:3,selectedOptValues:4,isLocked:5,feedback:6,feedbackImage:7,handleOptSelected:14,position:1,handleResized:8,isShowFeedback:9,allowMultiSelect:10,setChoiceLabel:15})}}let fr;const dr=new Uint8Array(16);function pr(){if(!fr&&(fr="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!fr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fr(dr)}const hr=[];for(let t=0;t<256;++t)hr.push((t+256).toString(16).slice(1));var yr={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function mr(t,e,n){if(yr.randomUUID&&!e&&!t)return yr.randomUUID();const r=(t=t||{}).random||(t.rng||pr)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=r[t];return e}return function(t,e=0){return(hr[t[e+0]]+hr[t[e+1]]+hr[t[e+2]]+hr[t[e+3]]+"-"+hr[t[e+4]]+hr[t[e+5]]+"-"+hr[t[e+6]]+hr[t[e+7]]+"-"+hr[t[e+8]]+hr[t[e+9]]+"-"+hr[t[e+10]]+hr[t[e+11]]+hr[t[e+12]]+hr[t[e+13]]+hr[t[e+14]]+hr[t[e+15]]).toLowerCase()}(r)}function gr(t,e,n){const r=t.slice();return r[17]=e[n],r[18]=e,r[19]=n,r}function vr(t){let e,n,r,o,i=t[4].activityLabel&&wr(t),a=t[4].activityTitle&&br(t),u=t[4].instructions&&Er(t);return{c(){e=S("div"),n=S("h4"),i&&i.c(),r=T(),a&&a.c(),o=T(),u&&u.c(),A(n,"class","component-label svelte-13k3ria"),A(e,"class","component-label-container svelte-13k3ria")},m(t,c){_(t,e,c),w(e,n),i&&i.m(n,null),w(n,r),a&&a.m(n,null),w(e,o),u&&u.m(e,null)},p(t,o){t[4].activityLabel?i?i.p(t,o):(i=wr(t),i.c(),i.m(n,r)):i&&(i.d(1),i=null),t[4].activityTitle?a?a.p(t,o):(a=br(t),a.c(),a.m(n,null)):a&&(a.d(1),a=null),t[4].instructions?u?u.p(t,o):(u=Er(t),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(t){t&&O(e),i&&i.d(),a&&a.d(),u&&u.d()}}}function wr(t){let e,n,r=t[4].activityLabel+"";return{c(){e=new C(!1),n=x(),e.a=n},m(t,o){e.m(r,t,o),_(t,n,o)},p(t,n){16&n&&r!==(r=t[4].activityLabel+"")&&e.p(r)},d(t){t&&O(n),t&&e.d()}}}function br(t){let e,n=t[4].activityTitle+"";return{c(){e=S("span"),A(e,"class","component-title")},m(t,r){_(t,e,r),e.innerHTML=n},p(t,r){16&r&&n!==(n=t[4].activityTitle+"")&&(e.innerHTML=n)},d(t){t&&O(e)}}}function Er(t){let e,n=t[4].instructions+"";return{c(){e=S("div"),A(e,"class","component-instructions")},m(t,r){_(t,e,r),e.innerHTML=n},p(t,r){16&r&&n!==(n=t[4].instructions+"")&&(e.innerHTML=n)},d(t){t&&O(e)}}}function _r(t,e){let r,o,i;function a(...t){return e[11](e[17],e[18],e[19],...t)}const u=[e[17],{handleResized:e[10]},{position:e[19]},{setChoiceLabel:a},{isLocked:e[5]},{selectedOptValues:e[3]},{isShowFeedback:e[0]},{handleOptSelected:e[8]},{allowMultiSelect:e[1]}];let c={};for(let t=0;t<u.length;t+=1)c=n(c,u[t]);return o=new lr({props:c}),{key:t,first:null,c(){r=x(),st(o.$$.fragment),this.first=r},m(t,e){_(t,r,e),lt(o,t,e),i=!0},p(t,n){e=t;const r=1339&n?function(t,e){const n={},r={},o={$$scope:1};let i=t.length;for(;i--;){const a=t[i],u=e[i];if(u){for(const t in a)t in u||(r[t]=1);for(const t in u)o[t]||(n[t]=u[t],o[t]=1);t[i]=u}else for(const t in a)o[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}(u,[16&n&&(i=e[17],"object"==typeof i&&null!==i?i:{}),1024&n&&{handleResized:e[10]},16&n&&{position:e[19]},16&n&&{setChoiceLabel:a},32&n&&{isLocked:e[5]},8&n&&{selectedOptValues:e[3]},1&n&&{isShowFeedback:e[0]},256&n&&{handleOptSelected:e[8]},2&n&&{allowMultiSelect:e[1]}]):{};var i;o.$set(r)},i(t){i||(rt(o.$$.fragment,t),i=!0)},o(t){ot(o.$$.fragment,t),i=!1},d(t){t&&O(r),ft(o,t)}}}function Or(e){let n,r,o;return{c(){n=S("button"),n.textContent="SUBMIT",A(n,"tabindex","0"),A(n,"class","svelte-13k3ria")},m(t,i){_(t,n,i),e[12](n),r||(o=N(n,"click",e[13]),r=!0)},p:t,d(t){t&&O(n),e[12](null),r=!1,o()}}}function Sr(t){let e,n,r,o,i,a,u,c,s,l,f,d,p=t[4].label+"",h=[],y=new Map,m=(t[4].activityTitle||t[4].activityLabel||t[4].instructions)&&vr(t);u=new rr({props:{className:"question-image",image:t[4].questionImage}});let g=t[4].choices;const v=t=>t[19];for(let e=0;e<g.length;e+=1){let n=gr(t,g,e),r=v(n);y.set(r,h[e]=_r(r,n))}let b=!t[5]&&Or(t);return{c(){e=S("main"),n=S("div"),m&&m.c(),r=T(),o=S("div"),i=new C(!1),a=T(),st(u.$$.fragment),c=T(),s=S("div");for(let t=0;t<h.length;t+=1)h[t].c();l=T(),f=S("div"),b&&b.c(),i.a=a,A(o,"id",t[7]),A(o,"class","question-prompt svelte-13k3ria"),A(n,"class","question"),A(s,"class","answer-options"),A(f,"class","button-row svelte-13k3ria"),P(f,"text-align",t[4].buttonPosition),A(e,"role","radiogroup"),A(e,"tabindex","0"),A(e,"aria-labelledby",t[7]),A(e,"class","svelte-13k3ria")},m(y,g){_(y,e,g),w(e,n),m&&m.m(n,null),w(n,r),w(n,o),i.m(p,o),w(o,a),lt(u,o,null),w(e,c),w(e,s);for(let t=0;t<h.length;t+=1)h[t].m(s,null);w(e,l),w(e,f),b&&b.m(f,null),t[14](f),d=!0},p(t,[a]){t[4].activityTitle||t[4].activityLabel||t[4].instructions?m?m.p(t,a):(m=vr(t),m.c(),m.m(n,r)):m&&(m.d(1),m=null),(!d||16&a)&&p!==(p=t[4].label+"")&&i.p(p);const c={};16&a&&(c.image=t[4].questionImage),u.$set(c),(!d||128&a)&&A(o,"id",t[7]),1339&a&&(g=t[4].choices,et(),h=function(t,e,n,r,o,i,a,u,c,s,l,f){let d=t.length,p=i.length,h=d;const y={};for(;h--;)y[t[h].key]=h;const m=[],g=new Map,v=new Map;for(h=p;h--;){const t=f(o,i,h),u=n(t);let c=a.get(u);c?r&&c.p(t,e):(c=s(u,t),c.c()),g.set(u,m[h]=c),u in y&&v.set(u,Math.abs(h-y[u]))}const w=new Set,b=new Set;function E(t){rt(t,1),t.m(u,l),a.set(t.key,t),l=t.first,p--}for(;d&&p;){const e=m[p-1],n=t[d-1],r=e.key,o=n.key;e===n?(l=e.first,d--,p--):g.has(o)?!a.has(r)||w.has(r)?E(e):b.has(o)?d--:v.get(r)>v.get(o)?(b.add(r),E(e)):(w.add(o),d--):(c(n,a),d--)}for(;d--;){const e=t[d];g.has(e.key)||c(e,a)}for(;p;)E(m[p-1]);return m}(h,a,v,1,t,g,y,s,ct,_r,null,gr),nt()),t[5]?b&&(b.d(1),b=null):b?b.p(t,a):(b=Or(t),b.c(),b.m(f,null)),(!d||16&a)&&P(f,"text-align",t[4].buttonPosition),(!d||128&a)&&A(e,"aria-labelledby",t[7])},i(t){if(!d){rt(u.$$.fragment,t);for(let t=0;t<g.length;t+=1)rt(h[t]);d=!0}},o(t){ot(u.$$.fragment,t);for(let t=0;t<h.length;t+=1)ot(h[t]);d=!1},d(n){n&&O(e),m&&m.d(),ft(u);for(let t=0;t<h.length;t+=1)h[t].d();b&&b.d(),t[14](null)}}}function Rr(t,e,n){let r,o,i;f(t,Xn,(t=>n(4,o=t))),f(t,Kn,(t=>n(16,i=t)));let a,u,c,s=!1,l=!1,d=!1,p=!1;var h;function y(t){t.target.innerText="TRY AGAIN",n(0,l=!l),d=!0}function m(){if("LEARNER"!==i)return;if(window.document.body.style.overflowY="hidden",!a)return void console.error("button element missing");const t=a.getBoundingClientRect().bottom+20,e=window.parent.document.getElementById(window?.frameElement?.id)?.parentElement.parentElement;e?e.style.height=`${t}px`:console.error("failed to find mcq container")}h=()=>{window.addEventListener("resize",m),n(7,c=mr()),m()},U().$$.on_mount.push(h),function(t){U().$$.on_destroy.push(t)}((()=>{window.removeEventListener("resize",m)}));return t.$$.update=()=>{if(22&t.$$.dirty&&p!==o.allowMultiSelect&&(u&&n(2,u.innerText="SUBMIT",u),n(5,s=!1),n(1,p=o.allowMultiSelect)),2&t.$$.dirty&&n(3,r=p?[]:""),25&t.$$.dirty){let t=o.choices.filter((t=>r.includes(t.choiceLabel)));(function(t,e){if(t.length>0)return t.every((t=>e.includes(t)))})(o.choices.filter((t=>t?.correct)),t)&&l&&n(5,s=!0)}},[l,p,u,r,o,s,a,c,function(t,e){n(2,u.innerText="SUBMIT",u),n(0,l=!1),p?(n(3,r=d?[]:[...r]),n(3,r=e?[...r,t]:r.filter((e=>e!==t)))):n(3,r=t),d=!1},y,m,(t,e,n,r)=>{return i=Xn,a=e[n].choiceLabel=r,u=o,i.set(u),a;var i,a,u},function(t){B[t?"unshift":"push"]((()=>{u=t,n(2,u),n(1,p),n(4,o)}))},t=>y(t),function(t){B[t?"unshift":"push"]((()=>{a=t,n(6,a)}))}]}class Tr extends ht{constructor(t){super(),pt(this,t,Rr,Sr,u,{})}}const xr=mt(void 0,(function(t){let e;return t(new Promise((n=>{Jn.then((r=>{e=r.theme().subscribe((e=>{t(e||{}),n(!0)}))}))}))),function(){e&&"function"==typeof e.unsubscribe&&e.unsubscribe()}})),Nr=vt(xr,(({cssUrl:t,css:e}={})=>`\n            <style>\n                ${t?`@import url("${t}");`:""} \n                ${e}\n            </style>\n        `)),Ar=vt(Xn,(({style:t})=>{if(!t)return"";const{cssUrl:e,customCss:n}=t;return`\n            <style>\n                ${e?`@import url("${e}");`:""} \n                ${n}\n            </style>\n        `}));function Pr(t,e){if(!t)return t;const n=/,\s*(\d*\.?\d*)\s*\)$/g,r=parseFloat(n.exec(t)[1]);return t.replace(n,`, ${r*e})`)}function Ir(t){let e,n,r,o,i,a,u;const c=t[7].default,s=function(t,e,n,r){if(t){const o=d(t,e,n,r);return t[0](o)}}(c,t,t[6],null);return{c(){e=S("div"),n=new C(!1),r=T(),o=S("div"),i=new C(!1),a=T(),s&&s.c(),n.a=r,i.a=a,A(o,"class","cdp-styles-wrapper svelte-1gx7lbh"),A(o,"style",t[1]),A(e,"class","theme-styles-wrapper svelte-1gx7lbh"),A(e,"style",t[0])},m(c,l){_(c,e,l),n.m(t[2],e),w(e,r),w(e,o),i.m(t[3],o),w(o,a),s&&s.m(o,null),u=!0},p(t,[r]){(!u||4&r)&&n.p(t[2]),(!u||8&r)&&i.p(t[3]),s&&s.p&&(!u||64&r)&&function(t,e,n,r,o,i){if(o){const a=d(e,n,r,i);t.p(a,o)}}(s,c,t,t[6],u?function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(c,t[6],r,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[6]),null),(!u||2&r)&&A(o,"style",t[1]),(!u||1&r)&&A(e,"style",t[0])},i(t){u||(rt(s,t),u=!0)},o(t){ot(s,t),u=!1},d(t){t&&O(e),s&&s.d(t)}}}function Cr(t,e){return""+(t?`--${e}:${t};`:"")}function Lr(t,e,n){let r,o,i,a;f(t,Xn,(t=>n(4,r=t))),f(t,xr,(t=>n(5,o=t))),f(t,Nr,(t=>n(2,i=t))),f(t,Ar,(t=>n(3,a=t)));let u,c,{$$slots:s={},$$scope:l}=e;return t.$$set=t=>{"$$scope"in t&&n(6,l=t.$$scope)},t.$$.update=()=>{32&t.$$.dirty&&n(0,u=o?`\n        ${Cr(o.bodyFont,"body-font")}\n        ${Cr(o.titleFont,"title-font")}\n        ${Cr(o.primaryColor,"primary-color")}\n        ${Cr(Pr(o.primaryColor,.4),"primary-color-40")}\n        ${Cr(Pr(o.primaryColor,.7),"primary-color-70")}\n        ${Cr(o.textColor,"text-color")}\n        ${Cr(o.successColor,"success-color")}\n        ${Cr(Pr(o.successColor,.1),"success-color-10")}\n        ${Cr(o.errorColor,"error-color")}\n        ${Cr(Pr(o.errorColor,.1),"error-color-10")}\n        ${Cr(o.surfaceColor,"surface-color")}\n        ${Cr(o.backgroundColor,"background-color")}\n    `:""),16&t.$$.dirty&&n(1,c=!r.style||r.style.textColor?"":`\n         ${Cr(r.style.textColor,"text-color")}\n    `)},[u,c,i,a,r,o,l,s]}class kr extends ht{constructor(t){super(),pt(this,t,Lr,Ir,u,{})}}function Dr(e){return{c:t,m:t,i:t,o:t,d:t}}function jr(t){let e,n;return e=new kr({props:{$$slots:{default:[$r]},$$scope:{ctx:t}}}),{c(){st(e.$$.fragment)},m(t,r){lt(e,t,r),n=!0},i(t){n||(rt(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function $r(t){let e,n;return e=new Tr({}),{c(){st(e.$$.fragment)},m(t,r){lt(e,t,r),n=!0},i(t){n||(rt(e.$$.fragment,t),n=!0)},o(t){ot(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function Mr(e){let n;return{c(){n=S("h3"),n.textContent="Loading..."},m(t,e){_(t,n,e)},i:t,o:t,d(t){t&&O(n)}}}function Ur(t){let e,n,r,o={ctx:t,current:null,token:null,hasCatch:!1,pending:Mr,then:jr,catch:Dr,value:2,blocks:[,,,]};return ut(n=Promise.all([Xn.isReadyPromise,t[0],t[1]]),o),{c(){e=x(),o.block.c()},m(t,n){_(t,e,n),o.block.m(t,o.anchor=n),o.mount=()=>e.parentNode,o.anchor=e,r=!0},p(e,[r]){t=e,o.ctx=t,3&r&&n!==(n=Promise.all([Xn.isReadyPromise,t[0],t[1]]))&&ut(n,o)},i(t){r||(rt(o.block),r=!0)},o(t){for(let t=0;t<3;t+=1){ot(o.blocks[t])}r=!1},d(t){t&&O(e),o.block.d(t),o.token=null,o=null}}}function Wr(t,e,n){let r,o;return f(t,Kn,(t=>n(0,r=t))),f(t,xr,(t=>n(1,o=t))),[r,o]}let Br;Br=document.createElement("div"),Br.id="aria-alerts-container",Br.style.position="fixed",Br.style.bottom="0",Br.style.left="0",Br.style.zIndex="-5",Br.style.opacity="0",Br.style.height="0",Br.style.width="0",Br.setAttribute("role","alert"),document.body.prepend(Br),function(t=zn){t.register().then((()=>{window.__CDP=t,Vn(t)}))}();return new class extends ht{constructor(t){super(),pt(this,t,Wr,Ur,u,{})}}({target:document.body})}();
