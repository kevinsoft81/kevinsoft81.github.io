!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("CDP",[],t):"object"==typeof exports?exports.CDP=t():e.CDP=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=16)}([function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"F",function(){return o}),n.d(t,"R",function(){return i}),n.d(t,"e",function(){return a}),n.d(t,"p",function(){return u}),n.d(t,"q",function(){return s}),n.d(t,"D",function(){return c}),n.d(t,"X",function(){return f}),n.d(t,"G",function(){return l}),n.d(t,"a",function(){return d}),n.d(t,"f",function(){return p}),n.d(t,"Z",function(){return h}),n.d(t,"h",function(){return b}),n.d(t,"t",function(){return y}),n.d(t,"c",function(){return m}),n.d(t,"m",function(){return v}),n.d(t,"g",function(){return g}),n.d(t,"I",function(){return O}),n.d(t,"b",function(){return w}),n.d(t,"x",function(){return _}),n.d(t,"M",function(){return E}),n.d(t,"O",function(){return S}),n.d(t,"s",function(){return j}),n.d(t,"W",function(){return T}),n.d(t,"S",function(){return A}),n.d(t,"P",function(){return P}),n.d(t,"u",function(){return R}),n.d(t,"J",function(){return N}),n.d(t,"A",function(){return C}),n.d(t,"z",function(){return I}),n.d(t,"v",function(){return x}),n.d(t,"K",function(){return k}),n.d(t,"j",function(){return M}),n.d(t,"k",function(){return L}),n.d(t,"T",function(){return D}),n.d(t,"Y",function(){return W}),n.d(t,"N",function(){return G}),n.d(t,"U",function(){return U}),n.d(t,"E",function(){return B}),n.d(t,"r",function(){return F}),n.d(t,"L",function(){return H}),n.d(t,"V",function(){return q}),n.d(t,"H",function(){return z}),n.d(t,"w",function(){return Y}),n.d(t,"y",function(){return Z}),n.d(t,"l",function(){return J}),n.d(t,"n",function(){return K}),n.d(t,"o",function(){return V}),n.d(t,"Q",function(){return X}),n.d(t,"i",function(){return Q}),n.d(t,"C",function(){return $}),n.d(t,"B",function(){return ee});var r="CDP",o="PARENT",i="STATE_RESOURCE",a="CHILD_RESOURCE",u="DRAG_STATE_RESOURCE",s="EDITOR_RESOURCE",c="LEARNER_RESOURCE",f="THEME_RESOURCE",l="PROGRESS_RESOURCE",d="ACCESS_RESOURCE",p="CLASS_RESOURCE",h="USER_RESOURCE",b="CONTEXT_RESOURCE",y="FEATURE_TOGGLE_RESOURCE",m="ASSET_RESOURCE",v="DEPRECATED_RESOURCE",g="COMPETENCY_RESOURCE",O="QUERY_RESOURCE",w="ANNOTATIONS_RESOURCE",_="HISTORY_RESOURCE",E="ROUTE_RESOURCE",S="SELECTION_RESOURCE",j="EXECUTE_QUERY",T="SUBSCRIPTION",A="SUBSCRIBE",P="SET",R="GET",N="REGISTER",C="IS",I="INIT_CHILD",x="GET_NONCE",k="REMOVE_CHILD",M="CREATE_CHILD",L="DELETE_CHILD",D="SUBSCRIBE_TO_DRAGGABLES",W="UNSUBSCRIBE_FROM_DRAGGABLES",G="SELECT",U="SUBSCRIBE_TO_SELECTION",B="OPEN",F="EVALUATE",H="RESTART",q="SUBSCRIBE_TO_THEME_CSS",z="PROVISION_UPLOAD",Y="GET_SUBSCRIPTION",Z="INFORM_ASSET_USAGE",J="DEPRECATED_CONTINUE",K="DEPRECATED_SUBSCRIBE_TO_MOVE_ON",V="DEPRECATED_UNSUBSCRIBE_FROM_MOVE_ON",X="SET_ANNOTATION",Q="CREATE_ANNOTATION",$="IS_EXACT_ROUTE",ee="IS_CURRENT_ROUTE"},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){var t;try{t=!!e.frameElement}catch(e){t=!1}return t}t.b=o,n.d(t,"d",function(){return d}),n.d(t,"a",function(){return p}),n.d(t,"c",function(){return h});var i=n(18),a=n.n(i),u=n(20),s=n(0),c=n(3),f=function(){for(var e=window;o(e)&&e!==window.top;)e=e.parent;return e}(),l=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.d,n=(e={},r(e,s.d,f.parent),r(e,s.F,window.parent),e)[t];if(n===window)throw new Error("can't find target window");return n},d=function(e){var t=e.targetResource,n=e.fnName,r=e.payload,o=e.targetWindow,i=r,s=c.a.getContext();return s&&(i=i||{},i.localContext=s),a.a.send(l(o),Object(u.a)(t,n),i)},p=function(e){var t=e.resource,n=e.fnName,r=e.callback;return a.a.on(Object(u.a)(t,n),r)},h=function(e){var t=e.fnName,n=e.window,r=e.callback;return a.a.once(t,{window:n},r)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e}var u=function(){function e(t,n){var o=this;r(this,e),this.queue=[],this.waiting=[],this.unsubscribeFn=n,t({next:function(e){if(o.waiting.length>0){return o.waiting.shift().resolve({done:!1,value:e})}return o.queue.push({type:"next",value:e})},throw:function(e){if(o.waiting.length>0){return o.waiting.shift().reject(e)}return o.queue.push({value:e,type:"error"})},return:function(e){if(o.waiting.length>0){return o.waiting.shift().resolve({done:!0,value:e})}return o.queue.push({value:e,type:"return"})}})}return i(e,[{key:"unsubscribe",value:function(){this.unsubscribeFn()}},{key:"next",value:function(){if(this.queue.length>1){var e=this.queue.shift();return"return"===e.type?Promise.resolve({done:!0,value:e.value}):"error"===e.type?Promise.reject(e.value):Promise.resolve({done:!1,value:e.value})}var t=a();return this.waiting.push(t),t.promise}},{key:Symbol.asyncIterator,value:function(){return this}}]),e}();t.a=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var a=n(21),u=function(){function e(){r(this,e)}return i(e,[{key:"setContext",value:function(e){if(this.localContext)throw new Error("Cannot override existing localContext");var t=e.context;if(!a.a.includes(t))throw new Error("Invalid context type ".concat(t,". expecting one of ").concat(a.a.join(", ")));this.localContext=e}},{key:"getContext",value:function(){return this.localContext}}]),e}();t.a=new u},function(e,t,n){"use strict";var r=n(1),o=n(0),i=n(2),a=n(5),u=function(e,t,n,r){var o=r.file,i=r.metadata;return Object(a.uploadResource)(t,n,o,i).then(function(e){return e.urn}).then(function(e){return Object(a.informAssetUsage)(e)})},s=function(e,t){return Object(a.provisionUpload)().then(function(e){var n=e.data,r=n.nonce,o=n.uploadURL,i=t.map(function(e){return u(0,o,r,e)});return Promise.all(i)})},c=function(e,t){return new i.a(function(t){Object(r.a)({resource:o.W,fnName:e,callback:function(e){t.next(e.data)}})},t)},f=function(e,t){return{get:function(){return Object(r.d)({targetResource:o.R,fnName:o.u,payload:{path:t,targetSelector:e}}).then(function(e){return e.data})},set:function(n){return Object(r.d)({targetResource:o.R,fnName:o.P,payload:{path:t,value:n,targetSelector:e}})},setImage:function(n){return s(0,[n]).then(function(n){return Object(r.d)({targetResource:o.R,fnName:o.P,payload:{path:t,value:n.length?n[0]:void 0,id:e}})})},setImages:function(n){return s(0,n).then(function(n){return Object(r.d)({targetResource:o.R,fnName:o.P,payload:{path:t,value:n.length?n:void 0,id:e}})})},subscribe:function(n){return Object(r.d)({targetResource:o.R,fnName:o.S,payload:{path:t,optionalCallbackFn:n,targetSelector:e}}).then(function(e){var t=e.data,r=t.subscriptionId,o=t.unsubscribe;return n?{subscriptionId:r,unsubscribe:o}:c(r,o)})}}},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){var r=f(e,n),o=r.get,i=r.set,a=r.setImage,u=r.setImages,s=r.subscribe;return t?{get:o,subscribe:s}:{get:o,set:i,setImage:a,setImages:u,subscribe:s}}};t.a=l},function(e,t,n){"use strict";function r(){}function o(){return Object(f.d)({targetResource:l.c,fnName:l.H})}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(f.d)({targetResource:l.c,fnName:l.w}).then(function(n){var r=n.data,o=new FormData;return o.append("file",e),o.append("visibility","GLOBAL"),o.append("subscriptionId",r),o.append("metadata",JSON.stringify(t)),o})}function a(e,t,n,r){return i(n,r).then(function(n){return fetch("".concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:n})}).then(function(e){return e.json()})}function u(e){return Object(f.d)({targetResource:l.c,fnName:l.y,payload:e}).then(function(){return e})}function s(){r()}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"provisionUpload",function(){return o}),n.d(t,"provisionAssetData",function(){return i}),n.d(t,"uploadResource",function(){return a}),n.d(t,"informAssetUsage",function(){return u}),n.d(t,"resolveAsset",function(){return s});var c=n(22),f=(n.n(c),n(1)),l=n(0)},function(e,t,n){"use strict";var r=n(0),o=n(7);t.a=Object(o.a)(r.a)},function(e,t,n){"use strict";var r=n(1),o=n(2),i=n(0),a=function(e){return new o.a(function(t){Object(r.a)({resource:i.W,fnName:e,callback:function(e){t.next(e.data)}})})},u=function(e){return function(t){return{get:function(){return Object(r.d)({targetResource:e,fnName:i.u,payload:{path:t}}).then(function(e){return e.data})},subscribe:function(n){return Object(r.d)({targetResource:e,fnName:i.S,payload:{path:t,optionalCallbackFn:n}}).then(function(e){var t=e.data;return n?t:a(t)})}}}};t.a=u},function(e,t,n){"use strict";var r=n(1),o=n(2),i=n(0),a=function(e){return new o.a(function(t){Object(r.a)({resource:i.W,fnName:e,callback:function(e){t.next(e.data)}})})},u=function(e){return function(t){return{get:function(){return Object(r.d)({targetResource:i.G,fnName:i.u,payload:{targetSelector:e,path:t}}).then(function(e){return e.data})},subscribe:function(n){return Object(r.d)({targetResource:i.G,fnName:i.S,payload:{targetSelector:e,path:t,optionalCallbackFn:n}}).then(function(e){var t=e.data;return n?t:a(t)})}}}};t.a=u},function(e,t,n){"use strict";var r=n(1),o=n(2),i=n(0),a=function(e){return new o.a(function(t){Object(r.a)({resource:i.W,fnName:e,callback:function(e){t.next(e.data)}})})},u=function(e){return function(t,n){return{get:function(){return Object(r.d)({targetResource:i.g,fnName:i.u,payload:{targetSelector:e,documentId:t,itemId:n}}).then(function(e){return e.data})},subscribe:function(o){return Object(r.d)({targetResource:i.g,fnName:i.S,payload:{targetSelector:e,documentId:t,itemId:n,optionalCallbackFn:o}}).then(function(e){var t=e.data;return o?t:a(t)})}}}};t.a=u},function(e,t,n){"use strict";var r=n(1),o=n(2),i=n(0),a=function(e){return new o.a(function(t){Object(r.a)({resource:i.W,fnName:e,callback:function(e){t.next(e.data)}})})},u=function(e){return{set:function(t){return Object(r.d)({targetResource:i.b,fnName:i.Q,payload:{annotationId:e,body:t}}).then(function(e){return e.data})}}},s=function(e){return function(t){return{get:function(){return Object(r.d)({targetResource:i.b,fnName:i.u,payload:{targetSelector:e,motivation:t}}).then(function(e){return e.data})},subscribe:function(n){return Object(r.d)({targetResource:i.b,fnName:i.S,payload:{targetSelector:e,motivation:t,optionalCallbackFn:n}}).then(function(e){var t=e.data;return n?t:a(t)})},create:function(n,o){return Object(r.d)({targetResource:i.b,fnName:i.i,payload:{targetSelector:e,motivation:t,body:n,subTarget:o}}).then(function(e){return e.data})},annotation:u}}};t.a=s},function(e,t,n){"use strict";var r=n(0),o=n(1),i=function(e){return function(){return{evaluate:function(t){return Object(o.d)({targetResource:r.D,fnName:r.r,payload:{id:e||t}}).then(function(e){return e.data})},restart:function(t){return Object(o.d)({targetResource:r.D,fnName:r.L,payload:{activityId:e||t}}).then(function(e){return e.data})}}}};t.a=i},function(e,t,n){"use strict";var r=n(1),o=n(2),i=n(0),a=function(e){return new o.a(function(t){Object(r.a)({resource:i.W,fnName:e,callback:function(e){t.next(e.data)}})})},u=function(e){return function(){return{get:function(){return Object(r.d)({targetResource:i.x,fnName:i.u,payload:{targetSelector:e}}).then(function(e){return e.data})},subscribe:function(t){return Object(r.d)({targetResource:i.x,fnName:i.S,payload:{targetSelector:e,optionalCallbackFn:t}}).then(function(e){var n=e.data;return t?n:a(n)})}}}};t.a=u},function(e,t,n){"use strict";var r=n(1),o=n(2),i=n(0),a=function(e,t){return new o.a(function(t){Object(r.a)({resource:i.W,fnName:e,callback:function(e){t.next(e.data)}})},t)},u=function(e){return function(t){return{get:function(){return Object(r.d)({targetResource:i.X,fnName:i.u,payload:{path:t,targetSelector:e}}).then(function(e){return e.data})},subscribe:function(n){return Object(r.d)({targetResource:i.X,fnName:i.S,payload:{path:t,optionalCallbackFn:n,targetSelector:e}}).then(function(e){var t=e.data,r=t.subscriptionId,o=t.unsubscribe;return n?{subscriptionId:r,unsubscribe:o}:a(r,o)})},subscribeToCSS:function(n){return Object(r.d)({targetResource:i.X,fnName:i.V,payload:{path:t,targetSelector:e,optionalCallbackFn:n}}).then(function(e){var t=e.data,r=t.subscriptionId,o=t.unsubscribe;return n?{subscriptionId:r,unsubscribe:o}:a(r,o)})}}}};t.a=u},function(e,t,n){"use strict";var r=n(1),o=n(2),i=n(0),a=function(e){return new o.a(function(t){Object(r.a)({resource:i.W,fnName:e,callback:function(e){t.next(e.data)}})})},u=function(e){return function(){return{get:function(){return Object(r.d)({targetResource:i.M,fnName:i.u,payload:{targetSelector:e}}).then(function(e){return e.data})},set:function(t){return Object(r.d)({targetResource:i.M,fnName:i.P,payload:{targetSelector:e,subTarget:t}}).then(function(e){return e.data})},subscribe:function(t){return Object(r.d)({targetResource:i.M,fnName:i.S,payload:{targetSelector:e,optionalCallbackFn:t}}).then(function(e){var n=e.data;return t?n:a(n)})},isCurrent:function(){return Object(r.d)({targetResource:i.M,fnName:i.B,payload:{targetSelector:e}}).then(function(e){return e.data})},isExact:function(){return Object(r.d)({targetResource:i.M,fnName:i.C,payload:{targetSelector:e}}).then(function(e){return e.data})}}}};t.a=u},function(e,t,n){"use strict";var r=n(0),o=n(1);t.a=function(e){return function(){return{moveOn:function(){return Object(o.d)({targetResource:r.m,fnName:r.l,payload:{}}).then(function(e){return e.data})},subscribeToMoveOn:function(t){return Object(o.d)({targetResource:r.m,fnName:r.n,payload:{targetId:e,notify:t}})},unsubscribeFromMoveOn:function(){return Object(o.d)({targetResource:r.m,fnName:r.o,payload:{targetId:e}})}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),o={register:r.o,state:r.r,child:r.d,courseware:r.d,editor:r.i,learner:r.l,dragState:r.h,theme:r.s,context:r.g,user:r.t,access:r.b,progress:r.m,cohort:r.e,features:r.j,__query:r.n,__deprecated:r.a,competency:r.f,annotations:r.c,history:r.k,route:r.p,selection:r.q};t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}n.d(t,"o",function(){return k}),n.d(t,"r",function(){return M}),n.d(t,"i",function(){return L}),n.d(t,"l",function(){return D}),n.d(t,"s",function(){return W}),n.d(t,"d",function(){return G}),n.d(t,"h",function(){return U}),n.d(t,"t",function(){return B}),n.d(t,"b",function(){return F}),n.d(t,"m",function(){return H}),n.d(t,"e",function(){return q}),n.d(t,"g",function(){return z}),n.d(t,"j",function(){return Y}),n.d(t,"f",function(){return Z}),n.d(t,"n",function(){return J}),n.d(t,"c",function(){return K}),n.d(t,"k",function(){return V}),n.d(t,"p",function(){return X}),n.d(t,"q",function(){return Q}),n.d(t,"a",function(){return $});var a,u=n(4),s=n(23),c=n(24),f=n(11),l=n(25),d=n(13),p=n(1),h=n(0),b=n(29),y=n(30),m=n(6),v=n(8),g=n(31),O=n(32),w=(n(5),n(33)),_=n(15),E=n(9),S=n(10),j=n(12),T=n(14),A=n(34),P=n(3),R=function(e){return e&&e.data&&e.data.services,e},N=function(){if(!a)try{a=Object(p.d)({fnName:h.v,targetWindow:h.F,payload:{}}).then(function(e){e.data.localContext&&P.a.setContext(e.data.localContext),Object(p.d)({targetResource:h.J,fnName:e.data.nonce,payload:e.data})}).then(function(e){return R(e)})}catch(e){a=new Promise(function(t,n){return setTimeout(function(){return n(e)},0)})}return a},C=function(){if(!a)try{a=Object(p.d)({fnName:h.J,payload:{}}).then(function(e){return R(e)})}catch(e){a=new Promise(function(t,n){return setTimeout(function(){return n(e)},0)})}return a},I=function(){function e(){r(this,e),this.childResources={}}return i(e,[{key:"createChildResource",value:function(e){if(this.childResources[e])return this.childResources[e];var t=new s.a(e);return this.childResources[e]=t,t}}]),e}(),x=new I,k=Object(p.b)(window)?N:C,M=function(e){return Object(u.a)()(e)},L=function(){return Object(c.a)()},D=function(){return Object(f.a)()()},W=function(e){return Object(d.a)()(e)},G=function(e){return x.createChildResource(e)},U=l.a,B=function(e){return Object(b.a)(e)},F=function(e){return Object(m.a)(e)},H=function(e){return Object(v.a)()(e)},q=function(e){return Object(y.a)(e)},z=function(){return Object(g.a)()},Y=function(e){return Object(O.a)(e)},Z=function(e,t){return Object(E.a)()(e,t)},J=w.a,K=function(){return Object(S.a)().apply(void 0,arguments)},V=function(){return Object(j.a)().apply(void 0,arguments)},X=function(){return Object(T.a)().apply(void 0,arguments)},Q=function(){return Object(A.a)().apply(void 0,arguments)},$=function(){return Object(_.a)()()}},function(e,t,n){e.exports=n(19),e.exports.default=e.exports},function(e,t,n){!function(t,n){e.exports=n()}("undefined"!=typeof self&&self,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s="./src/index.js")}({"./node_modules/cross-domain-safe-weakmap/src/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/cross-domain-safe-weakmap/src/interface.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r);t.default=o},"./node_modules/cross-domain-safe-weakmap/src/interface.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/cross-domain-safe-weakmap/src/weakmap.js");Object.defineProperty(t,"WeakMap",{enumerable:!0,get:function(){return r.CrossDomainSafeWeakMap}})},"./node_modules/cross-domain-safe-weakmap/src/native.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasNativeWeakMap=function(){if(!window.WeakMap)return!1;if(!window.Object.freeze)return!1;try{var e=new window.WeakMap,t={};return window.Object.freeze(t),e.set(t,"__testvalue__"),"__testvalue__"===e.get(t)}catch(e){return!1}}},"./node_modules/cross-domain-safe-weakmap/src/util.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeIndexOf=function(e,t){for(var n=0;n<e.length;n++)try{if(e[n]===t)return n}catch(e){}return-1},t.noop=function(){}},"./node_modules/cross-domain-safe-weakmap/src/weakmap.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CrossDomainSafeWeakMap=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n("./node_modules/cross-domain-utils/src/index.js"),i=n("./node_modules/cross-domain-safe-weakmap/src/native.js"),a=n("./node_modules/cross-domain-safe-weakmap/src/util.js"),u=Object.defineProperty,s=Date.now()%1e9;t.CrossDomainSafeWeakMap=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s+=1,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__"+s,(0,i.hasNativeWeakMap)())try{this.weakmap=new window.WeakMap}catch(e){}this.keys=[],this.values=[]}return r(e,[{key:"_cleanupClosedWindows",value:function(){for(var e=this.weakmap,t=this.keys,n=0;n<t.length;n++){var r=t[n];if((0,o.isWindow)(r)&&(0,o.isWindowClosed)(r)){if(e)try{e.delete(r)}catch(e){}t.splice(n,1),this.values.splice(n,1),n-=1}}}},{key:"isSafeToReadWrite",value:function(e){if((0,o.isWindow)(e))return!1;try{(0,a.noop)(e&&e.self),(0,a.noop)(e&&e[this.name])}catch(e){return!1}return!0}},{key:"set",value:function(e,t){if(!e)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{n.set(e,t)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var r=this.name,o=e[r];o&&o[0]===e?o[1]=t:u(e,r,{value:[e,t],writable:!0})}else{this._cleanupClosedWindows();var i=this.keys,s=this.values,c=(0,a.safeIndexOf)(i,e);-1===c?(i.push(e),s.push(t)):s[c]=t}}},{key:"get",value:function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{if(t.has(e))return t.get(e)}catch(e){delete this.weakmap}if(!this.isSafeToReadWrite(e)){this._cleanupClosedWindows();var n=this.keys,r=(0,a.safeIndexOf)(n,e);if(-1===r)return;return this.values[r]}var o=e[this.name];if(o&&o[0]===e)return o[1]}},{key:"delete",value:function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{t.delete(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var n=e[this.name];n&&n[0]===e&&(n[0]=n[1]=void 0)}else{this._cleanupClosedWindows();var r=this.keys,o=(0,a.safeIndexOf)(r,e);-1!==o&&(r.splice(o,1),this.values.splice(o,1))}}},{key:"has",value:function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{return t.has(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var n=e[this.name];return!(!n||n[0]!==e)}return this._cleanupClosedWindows(),-1!==(0,a.safeIndexOf)(this.keys,e)}}]),e}()},"./node_modules/cross-domain-utils/src/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/cross-domain-utils/src/utils.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=n("./node_modules/cross-domain-utils/src/types.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})})},"./node_modules/cross-domain-utils/src/types.js":function(e,t,n){"use strict"},"./node_modules/cross-domain-utils/src/util.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isRegex=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.noop=function(){}},"./node_modules/cross-domain-utils/src/utils.js":function(e,t,n){"use strict";function r(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).location.protocol===P.ABOUT_PROTOCOL}function o(e){if(e)try{if(e.parent&&e.parent!==e)return e.parent}catch(e){}}function i(e){if(e&&!o(e))try{return e.opener}catch(e){}}function a(e){try{return(0,A.noop)(e&&e.location&&e.location.href),!0}catch(e){}return!1}function u(e){var t=e.location;if(!t)throw new Error("Can not read window location");var n=t.protocol;if(!n)throw new Error("Can not read window protocol");if(n===P.FILE_PROTOCOL)return P.FILE_PROTOCOL+"//";if(n===P.ABOUT_PROTOCOL){var r=o(e);return r&&a(e)?u(r):P.ABOUT_PROTOCOL+"//"}var i=t.host;if(!i)throw new Error("Can not read window host");return n+"//"+i}function s(e){var t=u(e=e||window);return t&&e.mockDomain&&0===e.mockDomain.indexOf(P.MOCK_PROTOCOL)?e.mockDomain:t}function c(e){try{if(e===window)return!0}catch(e){}try{var t=Object.getOwnPropertyDescriptor(e,"location");if(t&&!1===t.enumerable)return!1}catch(e){}try{if(r(e)&&a(e))return!0}catch(e){}try{if(u(e)===u(window))return!0}catch(e){}return!1}function f(e){if(!c(e))return!1;try{if(e===window)return!0;if(r(e)&&a(e))return!0;if(s(window)===s(e))return!0}catch(e){}return!1}function l(e){var t=[];try{for(;e.parent!==e;)t.push(e.parent),e=e.parent}catch(e){}return t}function d(e,t){if(!e||!t)return!1;var n=o(t);return n?n===e:-1!==l(t).indexOf(e)}function p(e){var t=[],n=void 0;try{n=e.frames}catch(t){n=e}var r=void 0;try{r=n.length}catch(e){}if(0===r)return t;if(r){for(var o=0;o<r;o++){var i=void 0;try{i=n[o]}catch(e){continue}t.push(i)}return t}for(var a=0;a<100;a++){var u=void 0;try{u=n[a]}catch(e){return t}if(!u)return t;t.push(u)}return t}function h(e){var t=[],n=p(e),r=Array.isArray(n),o=0;for(n=r?n:n[Symbol.iterator]();;){var i;if(r){if(o>=n.length)break;i=n[o++]}else{if((o=n.next()).done)break;i=o.value}var a=i;t.push(a);var u=h(a),s=Array.isArray(u),c=0;for(u=s?u:u[Symbol.iterator]();;){var f;if(s){if(c>=u.length)break;f=u[c++]}else{if((c=u.next()).done)break;f=c.value}var l=f;t.push(l)}}return t}function b(e){if(e){try{if(e.top)return e.top}catch(e){}if(o(e)===e)return e;try{if(d(window,e)&&window.top)return window.top}catch(e){}try{if(d(e,window)&&window.top)return window.top}catch(e){}var t=h(e),n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var i;if(n){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}var a=i;try{if(a.top)return a.top}catch(e){}if(o(a)===a)return a}}}function y(e){var t=b(e);return h(t).concat(t)}function m(e){if(!e.contentWindow)return!0;if(!e.parentNode)return!0;var t=e.ownerDocument;return!(!t||!t.body||t.body.contains(e))}function v(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{if(e===window)return!1}catch(e){return!0}try{if(!e)return!0}catch(e){return!0}try{if(e.closed)return!0}catch(e){return!e||e.message!==R}if(t&&f(e))try{if(e.mockclosed)return!0}catch(e){}try{if(!e.parent||!e.top)return!0}catch(e){}try{(0,A.noop)(e==e)}catch(e){return!0}var n=function(e,t){for(var n=0;n<e.length;n++)try{if(e[n]===t)return n}catch(e){}return-1}(N,e);if(-1!==n){var r=C[n];if(r&&m(r))return!0}return!1}function g(e,t){var n=p(e),r=n,o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var a;if(o){if(i>=r.length)break;a=r[i++]}else{if((i=r.next()).done)break;a=i.value}var u=a;try{if(f(u)&&u.name===t&&-1!==n.indexOf(u))return u}catch(e){}}try{if(-1!==n.indexOf(e.frames[t]))return e.frames[t]}catch(e){}try{if(-1!==n.indexOf(e[t]))return e[t]}catch(e){}}function O(e,t){var n=g(e,t);if(n)return n;var r=p(e),o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var a;if(o){if(i>=r.length)break;a=r[i++]}else{if((i=r.next()).done)break;a=i.value}var u=O(a,t);if(u)return u}}function w(e){var t=i(e=e||window);return t||(o(e)||void 0)}function _(){return Boolean(i(window))}function E(){return Boolean(o(window))}function S(e,t){var n=e,r=Array.isArray(n),o=0;for(n=r?n:n[Symbol.iterator]();;){var i;if(r){if(o>=n.length)break;i=n[o++]}else{if((o=n.next()).done)break;i=o.value}var a=i,u=t,s=Array.isArray(u),c=0;for(u=s?u:u[Symbol.iterator]();;){var f;if(s){if(c>=u.length)break;f=u[c++]}else{if((c=u.next()).done)break;f=c.value}if(a===f)return!0}}return!1}function j(){for(var e=0,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;t;)(t=o(t))&&(e+=1);return e}function T(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e,r=0;r<t;r++){if(!n)return;n=o(n)}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.isFileProtocol=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).location.protocol===P.FILE_PROTOCOL},t.isAboutProtocol=r,t.getParent=o,t.getOpener=i,t.canReadFromWindow=a,t.getActualDomain=u,t.getDomain=s,t.isBlankDomain=function(e){try{if(!e.location.href)return!0;if("about:blank"===e.location.href)return!0}catch(e){}return!1},t.isActuallySameDomain=c,t.isSameDomain=f,t.getParents=l,t.isAncestorParent=d,t.getFrames=p,t.getAllChildFrames=h,t.getTop=b,t.getAllFramesInWindow=y,t.isTop=function(e){return e===b(e)},t.isFrameWindowClosed=m,t.isWindowClosed=v,t.linkFrameWindow=function(e){if(function(){for(var e=0;e<C.length;e++)m(C[e])&&(C.splice(e,1),N.splice(e,1));for(var t=0;t<N.length;t++)v(N[t])&&(C.splice(t,1),N.splice(t,1))}(),e&&e.contentWindow)try{N.push(e.contentWindow),C.push(e)}catch(e){}},t.getUserAgent=function(e){return(e=e||window).navigator.mockUserAgent||e.navigator.userAgent},t.getFrameByName=g,t.findChildFrameByName=O,t.findFrameByName=function(e,t){var n=void 0;return(n=g(e,t))?n:O(b(e)||e,t)},t.isParent=function(e,t){var n=o(t);if(n)return n===e;for(var r=p(e),i=Array.isArray(r),a=0,r=i?r:r[Symbol.iterator]();;){var u;if(i){if(a>=r.length)break;u=r[a++]}else{if((a=r.next()).done)break;u=a.value}if(u===t)return!0}return!1},t.isOpener=function(e,t){return e===i(t)},t.getAncestor=w,t.getAncestors=function(e){for(var t=[],n=e;n;)(n=w(n))&&t.push(n);return t},t.isAncestor=function(e,t){var n=w(t);if(n)return n===e;if(t===e)return!1;if(b(t)===t)return!1;for(var r=p(e),o=Array.isArray(r),i=0,r=o?r:r[Symbol.iterator]();;){var a;if(o){if(i>=r.length)break;a=r[i++]}else{if((i=r.next()).done)break;a=i.value}if(a===t)return!0}return!1},t.isPopup=_,t.isIframe=E,t.isFullpage=function(){return Boolean(!E()&&!_())},t.getDistanceFromTop=j,t.getNthParent=T,t.getNthParentFromTop=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return T(e,j(e)-t)},t.isSameTopWindow=function(e,t){var n=b(e)||e,r=b(t)||t;try{if(n&&r)return n===r}catch(e){}var o=y(e),a=y(t);if(S(o,a))return!0;var u=i(n),s=i(r);return(!u||!S(y(u),a))&&(s&&S(y(s),o),!1)},t.matchDomain=function e(t,n){if("string"==typeof t){if("string"==typeof n)return t===P.WILDCARD||n===t;if((0,A.isRegex)(n))return!1;if(Array.isArray(n))return!1}return(0,A.isRegex)(t)?(0,A.isRegex)(n)?t.toString()===n.toString():!Array.isArray(n)&&Boolean(n.match(t)):!!Array.isArray(t)&&(Array.isArray(n)?JSON.stringify(t)===JSON.stringify(n):!(0,A.isRegex)(n)&&t.some(function(t){return e(t,n)}))},t.stringifyDomainPattern=function(e){return Array.isArray(e)?"("+e.join(" | ")+")":(0,A.isRegex)(e)?"RegExp("+e.toString():e.toString()},t.getDomainFromUrl=function(e){var t=void 0;return e.match(/^(https?|mock|file):\/\//)?(t=e,t=t.split("/").slice(0,3).join("/")):s()},t.onCloseWindow=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,o=void 0;return function i(){if(v(e))return o&&clearTimeout(o),t();r<=0?clearTimeout(o):(r-=n,o=setTimeout(i,n))}(),{cancel:function(){o&&clearTimeout(o)}}},t.isWindow=function(e){try{if(e===window)return!0}catch(e){if(e&&e.message===R)return!0}try{if("[object Window]"===Object.prototype.toString.call(e))return!0}catch(e){if(e&&e.message===R)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(e){if(e&&e.message===R)return!0}try{if(e&&e.self===e)return!0}catch(e){if(e&&e.message===R)return!0}try{if(e&&e.parent===e)return!0}catch(e){if(e&&e.message===R)return!0}try{if(e&&e.top===e)return!0}catch(e){if(e&&e.message===R)return!0}try{(0,A.noop)(e==e)}catch(e){return!0}try{(0,A.noop)(e&&e.__cross_domain_utils_window_check__)}catch(e){return!0}return!1};var A=n("./node_modules/cross-domain-utils/src/util.js"),P={MOCK_PROTOCOL:"mock:",FILE_PROTOCOL:"file:",ABOUT_PROTOCOL:"about:",WILDCARD:"*"},R="Call was rejected by callee.\r\n",N=[],C=[]},"./node_modules/webpack/buildin/global.js":function(e,t,n){"use strict";var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":o(window))&&(r=window)}e.exports=r},"./node_modules/zalgo-promise/src/exceptions.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispatchPossiblyUnhandledError=function(e){if(-1===(0,r.getGlobal)().dispatchedErrors.indexOf(e)){(0,r.getGlobal)().dispatchedErrors.push(e),setTimeout(function(){throw e},1);for(var t=0;t<(0,r.getGlobal)().possiblyUnhandledPromiseHandlers.length;t++)(0,r.getGlobal)().possiblyUnhandledPromiseHandlers[t](e)}},t.onPossiblyUnhandledException=function(e){return(0,r.getGlobal)().possiblyUnhandledPromiseHandlers.push(e),{cancel:function(){(0,r.getGlobal)().possiblyUnhandledPromiseHandlers.splice((0,r.getGlobal)().possiblyUnhandledPromiseHandlers.indexOf(e),1)}}};var r=n("./node_modules/zalgo-promise/src/global.js")},"./node_modules/zalgo-promise/src/global.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobal=function(){var t=void 0;if("undefined"!=typeof window)t=window;else{if(void 0===e)throw new TypeError("Can not find global");t=e}var n=t.__zalgopromise__=t.__zalgopromise__||{};return n.flushPromises=n.flushPromises||[],n.activeCount=n.activeCount||0,n.possiblyUnhandledPromiseHandlers=n.possiblyUnhandledPromiseHandlers||[],n.dispatchedErrors=n.dispatchedErrors||[],n}}).call(t,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/zalgo-promise/src/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/zalgo-promise/src/promise.js");Object.defineProperty(t,"ZalgoPromise",{enumerable:!0,get:function(){return r.ZalgoPromise}})},"./node_modules/zalgo-promise/src/promise.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZalgoPromise=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n("./node_modules/zalgo-promise/src/utils.js"),i=n("./node_modules/zalgo-promise/src/exceptions.js"),a=n("./node_modules/zalgo-promise/src/global.js"),u=function(){function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],t){var r=void 0,o=void 0,i=!1,a=!1,u=!1;try{t(function(e){u?n.resolve(e):(i=!0,r=e)},function(e){u?n.reject(e):(a=!0,o=e)})}catch(e){return void this.reject(e)}u=!0,i?this.resolve(r):a&&this.reject(o)}}return r(e,[{key:"resolve",value:function(e){if(this.resolved||this.rejected)return this;if((0,o.isPromise)(e))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=e,this.dispatch(),this}},{key:"reject",value:function(e){var t=this;if(this.resolved||this.rejected)return this;if((0,o.isPromise)(e))throw new Error("Can not reject promise with another promise");if(!e){var n=e&&"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e);e=new Error("Expected reject to be called with Error, got "+n)}return this.rejected=!0,this.error=e,this.errorHandled||setTimeout(function(){t.errorHandled||(0,i.dispatchPossiblyUnhandledError)(e)},1),this.dispatch(),this}},{key:"asyncReject",value:function(e){this.errorHandled=!0,this.reject(e)}},{key:"dispatch",value:function(){var t=this,n=this.dispatching,r=this.resolved,i=this.rejected,u=this.handlers;if(!n&&(r||i)){this.dispatching=!0,(0,a.getGlobal)().activeCount+=1;for(var s=0;s<u.length;s++)!function(n){var a=u[n],s=a.onSuccess,c=a.onError,f=a.promise,l=void 0;if(r)try{l=s?s(t.value):t.value}catch(e){return f.reject(e),"continue"}else if(i){if(!c)return f.reject(t.error),"continue";try{l=c(t.error)}catch(e){return f.reject(e),"continue"}}l instanceof e&&(l.resolved||l.rejected)?(l.resolved?f.resolve(l.value):f.reject(l.error),l.errorHandled=!0):(0,o.isPromise)(l)?l instanceof e&&(l.resolved||l.rejected)?l.resolved?f.resolve(l.value):f.reject(l.error):l.then(function(e){f.resolve(e)},function(e){f.reject(e)}):f.resolve(l)}(s);u.length=0,this.dispatching=!1,(0,a.getGlobal)().activeCount-=1,0===(0,a.getGlobal)().activeCount&&e.flushQueue()}}},{key:"then",value:function(t,n){if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.then expected a function for success handler");if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.then expected a function for error handler");var r=new e;return this.handlers.push({promise:r,onSuccess:t,onError:n}),this.errorHandled=!0,this.dispatch(),r}},{key:"catch",value:function(e){return this.then(void 0,e)}},{key:"finally",value:function(t){return this.then(function(n){return e.try(t).then(function(){return n})},function(n){return e.try(t).then(function(){throw n})})}},{key:"timeout",value:function(e,t){var n=this;if(this.resolved||this.rejected)return this;var r=setTimeout(function(){n.resolved||n.rejected||n.reject(t||new Error("Promise timed out after "+e+"ms"))},e);return this.then(function(e){return clearTimeout(r),e})}},{key:"toPromise",value:function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)}}],[{key:"resolve",value:function(t){return t instanceof e?t:(0,o.isPromise)(t)?new e(function(e,n){return t.then(e,n)}):(new e).resolve(t)}},{key:"reject",value:function(t){return(new e).reject(t)}},{key:"all",value:function(t){var n=new e,r=t.length,i=[];if(!r)return n.resolve(i),n;for(var a=0;a<t.length;a++)!function(a){var u=t[a];if(u instanceof e){if(u.resolved)return i[a]=u.value,r-=1,"continue"}else if(!(0,o.isPromise)(u))return i[a]=u,r-=1,"continue";e.resolve(u).then(function(e){i[a]=e,0==(r-=1)&&n.resolve(i)},function(e){n.reject(e)})}(a);return 0===r&&n.resolve(i),n}},{key:"hash",value:function(t){var n={};return e.all(Object.keys(t).map(function(r){return e.resolve(t[r]).then(function(e){n[r]=e})})).then(function(){return n})}},{key:"map",value:function(t,n){return e.all(t.map(n))}},{key:"onPossiblyUnhandledException",value:function(e){return(0,i.onPossiblyUnhandledException)(e)}},{key:"try",value:function(t,n,r){var o=void 0;try{o=t.apply(n,r||[])}catch(t){return e.reject(t)}return e.resolve(o)}},{key:"delay",value:function(t){return new e(function(e){setTimeout(e,t)})}},{key:"isPromise",value:function(t){return!!(t&&t instanceof e)||(0,o.isPromise)(t)}},{key:"flush",value:function(){var t=new e;return(0,a.getGlobal)().flushPromises.push(t),0===(0,a.getGlobal)().activeCount&&e.flushQueue(),t}},{key:"flushQueue",value:function(){var e=(0,a.getGlobal)().flushPromises;(0,a.getGlobal)().flushPromises=[];var t=e,n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var o;if(n){if(r>=t.length)break;o=t[r++]}else{if((r=t.next()).done)break;o=r.value}o.resolve()}}}]),e}();t.ZalgoPromise=u},"./node_modules/zalgo-promise/src/utils.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPromise=function(e){try{if(!e)return!1;if("undefined"!=typeof Promise&&e instanceof Promise)return!0;if("undefined"!=typeof window&&window.Window&&e instanceof window.Window)return!1;if("undefined"!=typeof window&&window.constructor&&e instanceof window.constructor)return!1;var t={}.toString;if(t){var n=t.call(e);if("[object Window]"===n||"[object global]"===n||"[object DOMWindow]"===n)return!1}if("function"==typeof e.then)return!0}catch(e){return!1}return!1}},"./src/clean.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cleanUpWindow=function(e){var t=r.global.requestPromises.get(e);if(t)for(var n=t,o=Array.isArray(n),i=0,n=o?n:n[Symbol.iterator]();;){var a;if(o){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}var u=a;u.reject(new Error("No response from window - cleaned up"))}r.global.popupWindowsByWin&&r.global.popupWindowsByWin.delete(e),r.global.remoteWindows&&r.global.remoteWindows.delete(e),r.global.requestPromises.delete(e),r.global.methods.delete(e),r.global.readyPromises.delete(e)},n("./node_modules/cross-domain-utils/src/index.js");var r=n("./src/global.js")},"./src/conf/config.js":function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.CONFIG=void 0;var o,i=n("./src/conf/constants.js"),a=t.CONFIG={ALLOW_POSTMESSAGE_POPUP:!("__ALLOW_POSTMESSAGE_POPUP__"in window)||window.__ALLOW_POSTMESSAGE_POPUP__,LOG_LEVEL:"info",BRIDGE_TIMEOUT:5e3,CHILD_WINDOW_TIMEOUT:5e3,ACK_TIMEOUT:-1!==window.navigator.userAgent.match(/MSIE/i)?2e3:1e3,RES_TIMEOUT:-1,LOG_TO_PAGE:!1,ALLOWED_POST_MESSAGE_METHODS:(o={},r(o,i.CONSTANTS.SEND_STRATEGIES.POST_MESSAGE,!0),r(o,i.CONSTANTS.SEND_STRATEGIES.BRIDGE,!0),r(o,i.CONSTANTS.SEND_STRATEGIES.GLOBAL,!0),o),ALLOW_SAME_ORIGIN:!1};0===window.location.href.indexOf(i.CONSTANTS.FILE_PROTOCOL)&&(a.ALLOW_POSTMESSAGE_POPUP=!0)},"./src/conf/constants.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONSTANTS={POST_MESSAGE_TYPE:{REQUEST:"postrobot_message_request",RESPONSE:"postrobot_message_response",ACK:"postrobot_message_ack"},POST_MESSAGE_ACK:{SUCCESS:"success",ERROR:"error"},POST_MESSAGE_NAMES:{METHOD:"postrobot_method",HELLO:"postrobot_ready",OPEN_TUNNEL:"postrobot_open_tunnel"},WINDOW_TYPES:{FULLPAGE:"fullpage",POPUP:"popup",IFRAME:"iframe"},WINDOW_PROPS:{POSTROBOT:"__postRobot__"},SERIALIZATION_TYPES:{METHOD:"postrobot_method",ERROR:"postrobot_error",PROMISE:"postrobot_promise",ZALGO_PROMISE:"postrobot_zalgo_promise",REGEX:"regex"},SEND_STRATEGIES:{POST_MESSAGE:"postrobot_post_message",BRIDGE:"postrobot_bridge",GLOBAL:"postrobot_global"},MOCK_PROTOCOL:"mock:",FILE_PROTOCOL:"file:",BRIDGE_NAME_PREFIX:"__postrobot_bridge__",POSTROBOT_PROXY:"__postrobot_proxy__",WILDCARD:"*"};var r=t.POST_MESSAGE_NAMES={METHOD:"postrobot_method",HELLO:"postrobot_hello",OPEN_TUNNEL:"postrobot_open_tunnel"};t.POST_MESSAGE_NAMES_LIST=Object.keys(r).map(function(e){return r[e]})},"./src/conf/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/conf/config.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=n("./src/conf/constants.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})})},"./src/drivers/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/drivers/receive/index.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=n("./src/drivers/send/index.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=n("./src/drivers/listeners.js");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})})},"./src/drivers/listeners.js":function(e,t,n){"use strict";function r(e){var t=e.name,n=e.win,r=e.domain;if(n===s.CONSTANTS.WILDCARD&&(n=null),r===s.CONSTANTS.WILDCARD&&(r=null),!t)throw new Error("Name required to get request listener");var o=a.global.requestListeners[t];if(o)for(var u=[n,a.global.WINDOW_WILDCARD],f=0;f<u.length;f++){var l=u[f],d=l&&o.get(l);if(d){if(r&&"string"==typeof r){if(d[r])return d[r];if(d[c]){var p=d[c],h=Array.isArray(p),b=0;for(p=h?p:p[Symbol.iterator]();;){var y;if(h){if(b>=p.length)break;y=p[b++]}else{if((b=p.next()).done)break;y=b.value}var m=y,v=m.regex,g=m.listener;if((0,i.matchDomain)(v,r))return g}}}if(d[s.CONSTANTS.WILDCARD])return d[s.CONSTANTS.WILDCARD]}}}Object.defineProperty(t,"__esModule",{value:!0}),t.resetListeners=function(){a.global.responseListeners={},a.global.requestListeners={}},t.addResponseListener=function(e,t){a.global.responseListeners[e]=t},t.getResponseListener=function(e){return a.global.responseListeners[e]},t.deleteResponseListener=function(e){delete a.global.responseListeners[e]},t.markResponseListenerErrored=function(e){a.global.erroredResponseListeners[e]=!0},t.isResponseListenerErrored=function(e){return Boolean(a.global.erroredResponseListeners[e])},t.getRequestListener=r,t.addRequestListener=function e(t,n){var i=t.name,f=t.win,l=t.domain;if(!i||"string"!=typeof i)throw new Error("Name required to add request listener");if(Array.isArray(f)){for(var d=[],p=f,h=Array.isArray(p),b=0,p=h?p:p[Symbol.iterator]();;){var y;if(h){if(b>=p.length)break;y=p[b++]}else{if((b=p.next()).done)break;y=b.value}var m=y;d.push(e({name:i,domain:l,win:m},n))}return{cancel:function(){for(var e=d,t=Array.isArray(e),n=0,e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if((n=e.next()).done)break;r=n.value}r.cancel()}}}}if(Array.isArray(l)){for(var v=[],g=l,O=Array.isArray(g),w=0,g=O?g:g[Symbol.iterator]();;){var _;if(O){if(w>=g.length)break;_=g[w++]}else{if((w=g.next()).done)break;_=w.value}var E=_;v.push(e({name:i,win:f,domain:E},n))}return{cancel:function(){for(var e=v,t=Array.isArray(e),n=0,e=t?e:e[Symbol.iterator]();;){var r;if(t){if(n>=e.length)break;r=e[n++]}else{if((n=e.next()).done)break;r=n.value}r.cancel()}}}}var S=r({name:i,win:f,domain:l});if(f&&f!==s.CONSTANTS.WILDCARD||(f=a.global.WINDOW_WILDCARD),l=l||s.CONSTANTS.WILDCARD,S)throw f&&l?new Error("Request listener already exists for "+i+" on domain "+l.toString()+" for "+(f===a.global.WINDOW_WILDCARD?"wildcard":"specified")+" window"):f?new Error("Request listener already exists for "+i+" for "+(f===a.global.WINDOW_WILDCARD?"wildcard":"specified")+" window"):l?new Error("Request listener already exists for "+i+" on domain "+l.toString()):new Error("Request listener already exists for "+i);var j=a.global.requestListeners,T=j[i];T||(T=new o.WeakMap,j[i]=T);var A=T.get(f);A||(A={},T.set(f,A));var P=l.toString(),R=A[c],N=void 0;return(0,u.isRegex)(l)?(R||(R=[],A[c]=R),N={regex:l,listener:n},R.push(N)):A[P]=n,{cancel:function(){A&&(delete A[P],f&&0===Object.keys(A).length&&T.delete(f),N&&R.splice(R.indexOf(N,1)))}}},n("./node_modules/zalgo-promise/src/index.js");var o=n("./node_modules/cross-domain-safe-weakmap/src/index.js"),i=n("./node_modules/cross-domain-utils/src/index.js"),a=n("./src/global.js"),u=n("./src/lib/index.js"),s=n("./src/conf/index.js");a.global.responseListeners=a.global.responseListeners||{},a.global.requestListeners=a.global.requestListeners||{},a.global.WINDOW_WILDCARD=a.global.WINDOW_WILDCARD||new function(){},a.global.erroredResponseListeners=a.global.erroredResponseListeners||{};var c="__domain_regex__"},"./src/drivers/receive/index.js":function(e,t,n){"use strict";function r(e){if(!window||window.closed)throw new Error("Message recieved in closed window");try{if(!e.source)return}catch(e){return}var t=e.source,n=e.origin,r=function(e){var t=void 0;try{t=(0,s.jsonParse)(e)}catch(e){return}if(t&&"object"===(void 0===t?"undefined":i(t))&&null!==t&&(t=t[u.CONSTANTS.WINDOW_PROPS.POSTROBOT])&&"object"===(void 0===t?"undefined":i(t))&&null!==t&&t.type&&"string"==typeof t.type&&f.RECEIVE_MESSAGE_TYPES[t.type])return t}(e.data);if(r){if(!r.sourceDomain||"string"!=typeof r.sourceDomain)throw new Error("Expected message to have sourceDomain");if(0!==r.sourceDomain.indexOf(u.CONSTANTS.MOCK_PROTOCOL)&&0!==r.sourceDomain.indexOf(u.CONSTANTS.FILE_PROTOCOL)||(n=r.sourceDomain),-1===c.global.receivedMessages.indexOf(r.id)){c.global.receivedMessages.push(r.id);var o=void 0;o=-1!==u.POST_MESSAGE_NAMES_LIST.indexOf(r.name)||r.type===u.CONSTANTS.POST_MESSAGE_TYPE.ACK?"debug":"error"===r.ack?"error":"info",s.log.logLevel(o,["\n\n\t","#receive",r.type.replace(/^postrobot_message_/,""),"::",r.name,"::",n,"\n\n",r]),!(0,a.isWindowClosed)(t)||r.fireAndForget?(r.data&&(r.data=(0,s.deserializeMethods)(t,n,r.data)),f.RECEIVE_MESSAGE_TYPES[r.type](t,n,r)):s.log.debug("Source window is closed - can not send "+r.type+" "+r.name)}}}function o(e){try{(0,s.noop)(e.source)}catch(e){return}r({source:e.source||e.sourceElement,origin:e.origin||e.originalEvent&&e.originalEvent.origin,data:e.data})}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.receiveMessage=r,t.messageListener=o,t.listenForMessages=function(){(0,s.addEventListener)(window,"message",o)};var a=n("./node_modules/cross-domain-utils/src/index.js"),u=n("./src/conf/index.js"),s=n("./src/lib/index.js"),c=n("./src/global.js"),f=n("./src/drivers/receive/types.js");c.global.receivedMessages=c.global.receivedMessages||[],c.global.receiveMessage=r},"./src/drivers/receive/types.js":function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.RECEIVE_MESSAGE_TYPES=void 0;var o,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n("./node_modules/zalgo-promise/src/index.js"),u=n("./node_modules/cross-domain-utils/src/index.js"),s=n("./src/conf/index.js"),c=n("./src/lib/index.js"),f=n("./src/drivers/send/index.js"),l=n("./src/drivers/listeners.js");t.RECEIVE_MESSAGE_TYPES=(r(o={},s.CONSTANTS.POST_MESSAGE_TYPE.ACK,function(e,t,n){if(!(0,l.isResponseListenerErrored)(n.hash)){var r=(0,l.getResponseListener)(n.hash);if(!r)throw new Error("No handler found for post message ack for message: "+n.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!(0,u.matchDomain)(r.domain,t))throw new Error("Ack origin "+t+" does not match domain "+r.domain.toString());r.ack=!0}}),r(o,s.CONSTANTS.POST_MESSAGE_TYPE.REQUEST,function(e,t,n){function r(r){return n.fireAndForget||(0,u.isWindowClosed)(e)?a.ZalgoPromise.resolve():(0,f.sendMessage)(e,i({target:n.originalSource,hash:n.hash,name:n.name},r),t)}var o=(0,l.getRequestListener)({name:n.name,win:e,domain:t});return a.ZalgoPromise.all([r({type:s.CONSTANTS.POST_MESSAGE_TYPE.ACK}),a.ZalgoPromise.try(function(){if(!o)throw new Error("No handler found for post message: "+n.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!(0,u.matchDomain)(o.domain,t))throw new Error("Request origin "+t+" does not match domain "+o.domain.toString());var r=n.data;return o.handler({source:e,origin:t,data:r})}).then(function(e){return r({type:s.CONSTANTS.POST_MESSAGE_TYPE.RESPONSE,ack:s.CONSTANTS.POST_MESSAGE_ACK.SUCCESS,data:e})},function(e){var t=(0,c.stringifyError)(e).replace(/^Error: /,""),n=e.code;return r({type:s.CONSTANTS.POST_MESSAGE_TYPE.RESPONSE,ack:s.CONSTANTS.POST_MESSAGE_ACK.ERROR,error:t,code:n})})]).then(c.noop).catch(function(e){if(o&&o.handleError)return o.handleError(e);c.log.error((0,c.stringifyError)(e))})}),r(o,s.CONSTANTS.POST_MESSAGE_TYPE.RESPONSE,function(e,t,n){if(!(0,l.isResponseListenerErrored)(n.hash)){var r=(0,l.getResponseListener)(n.hash);if(!r)throw new Error("No handler found for post message response for message: "+n.name+" from "+t+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!(0,u.matchDomain)(r.domain,t))throw new Error("Response origin "+t+" does not match domain "+(0,u.stringifyDomainPattern)(r.domain));if((0,l.deleteResponseListener)(n.hash),n.ack===s.CONSTANTS.POST_MESSAGE_ACK.ERROR){var o=new Error(n.error);return n.code&&(o.code=n.code),r.respond(o,null)}if(n.ack===s.CONSTANTS.POST_MESSAGE_ACK.SUCCESS){var i=n.data||n.response;return r.respond(null,{source:e,origin:t,data:i})}}}),o)},"./src/drivers/send/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.sendMessage=function(e,t,n){return i.ZalgoPromise.try(function(){t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(0,u.uniqueID)(),a=(0,u.getWindowType)(),s=(0,o.getDomain)(window);return r({},t,n,{sourceDomain:s,id:t.id||i,windowType:a})}(e,t,{data:(0,u.serializeMethods)(e,n,t.data),domain:n});var c=void 0;if(c=-1!==a.POST_MESSAGE_NAMES_LIST.indexOf(t.name)||t.type===a.CONSTANTS.POST_MESSAGE_TYPE.ACK?"debug":"error"===t.ack?"error":"info",u.log.logLevel(c,["\n\n\t","#send",t.type.replace(/^postrobot_message_/,""),"::",t.name,"::",n||a.CONSTANTS.WILDCARD,"\n\n",t]),e===window&&!a.CONFIG.ALLOW_SAME_ORIGIN)throw new Error("Attemping to send message to self");if((0,o.isWindowClosed)(e))throw new Error("Window is closed");u.log.debug("Running send message strategies",t);var f=[],l=(0,u.jsonStringify)(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},a.CONSTANTS.WINDOW_PROPS.POSTROBOT,t),null,2);return i.ZalgoPromise.map(Object.keys(s.SEND_MESSAGE_STRATEGIES),function(t){return i.ZalgoPromise.try(function(){if(!a.CONFIG.ALLOWED_POST_MESSAGE_METHODS[t])throw new Error("Strategy disallowed: "+t);return s.SEND_MESSAGE_STRATEGIES[t](e,l,n)}).then(function(){return f.push(t+": success"),!0},function(e){return f.push(t+": "+(0,u.stringifyError)(e)+"\n"),!1})}).then(function(e){var n=e.some(Boolean),r=t.type+" "+t.name+" "+(n?"success":"error")+":\n  - "+f.join("\n  - ")+"\n";if(u.log.debug(r),!n)throw new Error(r)})})};var o=n("./node_modules/cross-domain-utils/src/index.js"),i=n("./node_modules/zalgo-promise/src/index.js"),a=n("./src/conf/index.js"),u=n("./src/lib/index.js"),s=n("./src/drivers/send/strategies.js")},"./src/drivers/send/strategies.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SEND_MESSAGE_STRATEGIES=void 0;var r=n("./node_modules/cross-domain-utils/src/index.js"),o=n("./src/conf/index.js");(t.SEND_MESSAGE_STRATEGIES={})[o.CONSTANTS.SEND_STRATEGIES.POST_MESSAGE]=function(e,t,n){(Array.isArray(n)?n:"string"==typeof n?[n]:[o.CONSTANTS.WILDCARD]).map(function(t){if(0===t.indexOf(o.CONSTANTS.MOCK_PROTOCOL)){if(window.location.protocol===o.CONSTANTS.FILE_PROTOCOL)return o.CONSTANTS.WILDCARD;if(!(0,r.isActuallySameDomain)(e))throw new Error("Attempting to send messsage to mock domain "+t+", but window is actually cross-domain");return(0,r.getActualDomain)(e)}return 0===t.indexOf(o.CONSTANTS.FILE_PROTOCOL)?o.CONSTANTS.WILDCARD:t}).forEach(function(n){return e.postMessage(t,n)})}},"./src/global.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.global=void 0;var r=n("./src/conf/index.js");(t.global=window[r.CONSTANTS.WINDOW_PROPS.POSTROBOT]=window[r.CONSTANTS.WINDOW_PROPS.POSTROBOT]||{}).registerSelf=function(){}},"./src/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/interface.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r);t.default=o},"./src/interface.js":function(e,t,n){"use strict";function r(){c.global.initialized||((0,s.listenForMessages)(),(0,u.initOnReady)(),(0,u.listenForMethods)({on:o.on,send:o.send})),c.global.initialized=!0}Object.defineProperty(t,"__esModule",{value:!0}),t.bridge=t.Promise=t.cleanUpWindow=void 0;var o=n("./src/public/index.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=n("./src/clean.js");Object.defineProperty(t,"cleanUpWindow",{enumerable:!0,get:function(){return i.cleanUpWindow}});var a=n("./node_modules/zalgo-promise/src/index.js");Object.defineProperty(t,"Promise",{enumerable:!0,get:function(){return a.ZalgoPromise}}),t.init=r;var u=n("./src/lib/index.js"),s=n("./src/drivers/index.js"),c=n("./src/global.js");t.bridge=null,r()},"./src/lib/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/lib/util.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=n("./src/lib/log.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=n("./src/lib/serialize.js");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var a=n("./src/lib/ready.js");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})})},"./src/lib/log.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n("./src/conf/index.js"),i=n("./src/lib/util.js"),a=["debug","info","warn","error"];Function.prototype.bind&&window.console&&"object"===r(console.log)&&["log","info","warn","error"].forEach(function(e){console[e]=this.bind(console[e],console)},Function.prototype.call);var u=t.log={clearLogs:function(){if(window.console&&window.console.clear&&window.console.clear(),o.CONFIG.LOG_TO_PAGE){var e=document.getElementById("postRobotLogs");e&&e.parentNode&&e.parentNode.removeChild(e)}},writeToPage:function(e,t){setTimeout(function(){var n=document.getElementById("postRobotLogs");n||((n=document.createElement("div")).id="postRobotLogs",n.style.cssText="width: 800px; font-family: monospace; white-space: pre-wrap;",document.body&&document.body.appendChild(n));var r=document.createElement("div"),o=(new Date).toString().split(" ")[4],a=Array.prototype.slice.call(t).map(function(e){if("string"==typeof e)return e;if(!e)return Object.prototype.toString.call(e);var t=void 0;try{t=(0,i.jsonStringify)(e,null,2)}catch(e){t="[object]"}return"\n\n"+t+"\n\n"}).join(" "),u=o+" "+e+" "+a;r.innerHTML=u;var s={log:"#ddd",warn:"orange",error:"red",info:"blue",debug:"#aaa"}[e];r.style.cssText="margin-top: 10px; color: "+s+";",n.childNodes.length?n.insertBefore(r,n.childNodes[0]):n.appendChild(r)})},logLevel:function(e,t){setTimeout(function(){try{var n=window.LOG_LEVEL||o.CONFIG.LOG_LEVEL;if("disabled"===n||a.indexOf(e)<a.indexOf(n))return;if((t=Array.prototype.slice.call(t)).unshift(""+window.location.host+window.location.pathname),t.unshift("::"),t.unshift(""+(0,i.getWindowType)().toLowerCase()),t.unshift("[post-robot]"),o.CONFIG.LOG_TO_PAGE&&u.writeToPage(e,t),!window.console)return;if(window.console[e]||(e="log"),!window.console[e])return;window.console[e].apply(window.console,t)}catch(e){}},1)},debug:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];u.logLevel("debug",t)},info:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];u.logLevel("info",t)},warn:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];u.logLevel("warn",t)},error:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];u.logLevel("error",t)}}},"./src/lib/ready.js":function(e,t,n){"use strict";function r(e){c.global.on(s.CONSTANTS.POST_MESSAGE_NAMES.HELLO,{domain:s.CONSTANTS.WILDCARD},function(t){var n=t.source,r=t.origin;return e({source:n,origin:r})})}function o(e){return c.global.send(e,s.CONSTANTS.POST_MESSAGE_NAMES.HELLO,{},{domain:s.CONSTANTS.WILDCARD,timeout:-1}).then(function(e){return{origin:e.origin}})}Object.defineProperty(t,"__esModule",{value:!0}),t.onHello=r,t.sayHello=o,t.initOnReady=function(){r(function(e){var t=e.source,n=e.origin,r=c.global.readyPromises.get(t)||new u.ZalgoPromise;r.resolve({origin:n}),c.global.readyPromises.set(t,r)});var e=(0,a.getAncestor)();e&&o(e).catch(function(e){f.log.debug((0,l.stringifyError)(e))})},t.onChildWindowReady=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Window",r=c.global.readyPromises.get(e);return r||(r=new u.ZalgoPromise,c.global.readyPromises.set(e,r),-1!==t&&setTimeout(function(){return r.reject(new Error(n+" did not load after "+t+"ms"))},t),r)};var i=n("./node_modules/cross-domain-safe-weakmap/src/index.js"),a=n("./node_modules/cross-domain-utils/src/index.js"),u=n("./node_modules/zalgo-promise/src/index.js"),s=n("./src/conf/index.js"),c=n("./src/global.js"),f=n("./src/lib/log.js"),l=n("./src/lib/util.js");c.global.readyPromises=c.global.readyPromises||new i.WeakMap},"./src/lib/serialize.js":function(e,t,n){"use strict";function r(e,t){return"object"===(void 0===e?"undefined":f(e))&&null!==e&&e.__type__===t}function o(e,t,n,r){var o=(0,y.uniqueID)(),i=b.global.methods.get(e);return i||(i={},b.global.methods.set(e,i)),i[o]={domain:t,method:n},{__type__:h.CONSTANTS.SERIALIZATION_TYPES.METHOD,__id__:o,__name__:r}}function i(e,t,n){function r(){var r=Array.prototype.slice.call(arguments);return m.log.debug("Call foreign method",n.__name__,r),b.global.send(e,h.CONSTANTS.POST_MESSAGE_NAMES.METHOD,{id:n.__id__,name:n.__name__,args:r},{domain:t,timeout:-1}).then(function(e){var t=e.data;return m.log.debug("Got foreign method result",n.__name__,t.result),t.result},function(e){throw m.log.debug("Got foreign method error",(0,y.stringifyError)(e)),e})}return r.__name__=n.__name__,r.__xdomain__=!0,r.source=e,r.origin=t,r}function a(e,t,n){var r=new Error(n.__message__);return n.__code__&&(r.code=n.__code__),r}function u(e,t,n){return new p.ZalgoPromise(function(r,o){return i(e,t,n.__then__)(r,o)})}function s(e,t,n){return window.Promise?new window.Promise(function(r,o){return i(e,t,n.__then__)(r,o)}):u(e,t,n)}function c(e,t,n){return new RegExp(n.__source__)}Object.defineProperty(t,"__esModule",{value:!0}),t.listenForMethods=void 0;var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.serializeMethod=o,t.serializeMethods=function(e,t,n){return(0,y.replaceObject)({obj:n},function(n,r){return"function"==typeof n?o(e,t,n,r.toString()):n instanceof Error?(i=n,{__type__:h.CONSTANTS.SERIALIZATION_TYPES.ERROR,__message__:(0,y.stringifyError)(i),__code__:i.code}):window.Promise&&n instanceof window.Promise?function(e,t,n,r){return{__type__:h.CONSTANTS.SERIALIZATION_TYPES.PROMISE,__then__:o(e,t,function(e,t){return n.then(e,t)},r+".then")}}(e,t,n,r.toString()):p.ZalgoPromise.isPromise(n)?function(e,t,n,r){return{__type__:h.CONSTANTS.SERIALIZATION_TYPES.ZALGO_PROMISE,__then__:o(e,t,function(e,t){return n.then(e,t)},r+".then")}}(e,t,n,r.toString()):(0,y.isRegex)(n)?(a=n,{__type__:h.CONSTANTS.SERIALIZATION_TYPES.REGEX,__source__:a.source}):void 0;var i,a}).obj},t.deserializeMethod=i,t.deserializeError=a,t.deserializeZalgoPromise=u,t.deserializePromise=s,t.deserializeRegex=c,t.deserializeMethods=function(e,t,n){return(0,y.replaceObject)({obj:n},function(n){if("object"===(void 0===n?"undefined":f(n))&&null!==n)return r(n,h.CONSTANTS.SERIALIZATION_TYPES.METHOD)?i(e,t,n):r(n,h.CONSTANTS.SERIALIZATION_TYPES.ERROR)?a(e,t,n):r(n,h.CONSTANTS.SERIALIZATION_TYPES.PROMISE)?s(e,t,n):r(n,h.CONSTANTS.SERIALIZATION_TYPES.ZALGO_PROMISE)?u(e,t,n):r(n,h.CONSTANTS.SERIALIZATION_TYPES.REGEX)?c(e,t,n):void 0}).obj};var l=n("./node_modules/cross-domain-safe-weakmap/src/index.js"),d=n("./node_modules/cross-domain-utils/src/index.js"),p=n("./node_modules/zalgo-promise/src/index.js"),h=n("./src/conf/index.js"),b=n("./src/global.js"),y=n("./src/lib/util.js"),m=n("./src/lib/log.js");b.global.methods=b.global.methods||new l.WeakMap,t.listenForMethods=(0,y.once)(function(){b.global.on(h.CONSTANTS.POST_MESSAGE_NAMES.METHOD,{origin:h.CONSTANTS.WILDCARD},function(e){var t=e.source,n=e.origin,r=e.data,o=b.global.methods.get(t);if(!o)throw new Error("Could not find any methods this window has privileges to call");var i=o[r.id];if(!i)throw new Error("Could not find method with id: "+r.id);if(!(0,d.matchDomain)(i.domain,n))throw new Error("Method domain "+i.domain+" does not match origin "+n);return m.log.debug("Call local method",r.name,r.args),p.ZalgoPromise.try(function(){return i.method.apply({source:t,origin:n,data:r},r.args)}).then(function(e){return{result:e,id:r.id,name:r.name}})})})},"./src/lib/util.js":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<e.length;n++)t(e[n],n)}function o(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function i(e,t){Array.isArray(e)?r(e,t):"object"===(void 0===e?"undefined":a(e))&&null!==e&&o(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.weakMapMemoize=t.once=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.stringifyError=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(n>=3)return"stringifyError stack overflow";try{if(!t)return"<unknown error: "+Object.prototype.toString.call(t)+">";if("string"==typeof t)return t;if(t instanceof Error){var r=t&&t.stack,o=t&&t.message;if(r&&o)return-1!==r.indexOf(o)?r:o+"\n"+r;if(r)return r;if(o)return o}return"function"==typeof t.toString?t.toString():Object.prototype.toString.call(t)}catch(t){return"Error while stringifying error: "+e(t,n+1)}},t.noop=function(){},t.addEventListener=function(e,t,n){return e.addEventListener?e.addEventListener(t,n):e.attachEvent("on"+t,n),{cancel:function(){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent("on"+t,n)}}},t.uniqueID=function(){var e="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})},t.eachArray=r,t.eachObject=o,t.each=i,t.replaceObject=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(r>=100)throw new Error("Self-referential object passed, or object contained too many layers");var o=void 0;if("object"!==(void 0===t?"undefined":a(t))||null===t||Array.isArray(t)){if(!Array.isArray(t))throw new TypeError("Invalid type: "+(void 0===t?"undefined":a(t)));o=[]}else o={};return i(t,function(t,i){var u=n(t,i);void 0!==u?o[i]=u:"object"===(void 0===t?"undefined":a(t))&&null!==t?o[i]=e(t,n,r+1):o[i]=t}),o},t.safeInterval=function(e,t){var n=void 0;return n=setTimeout(function r(){n=setTimeout(r,t),e.call()},t),{cancel:function(){clearTimeout(n)}}},t.isRegex=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.getWindowType=function(){return(0,s.isPopup)()?c.CONSTANTS.WINDOW_TYPES.POPUP:(0,s.isIframe)()?c.CONSTANTS.WINDOW_TYPES.IFRAME:c.CONSTANTS.WINDOW_TYPES.FULLPAGE},t.jsonStringify=function(e,t,n){var r=void 0,o=void 0;try{if("{}"!==JSON.stringify({})&&(r=Object.prototype.toJSON,delete Object.prototype.toJSON),"{}"!==JSON.stringify({}))throw new Error("Can not correctly serialize JSON objects");if("[]"!==JSON.stringify([])&&(o=Array.prototype.toJSON,delete Array.prototype.toJSON),"[]"!==JSON.stringify([]))throw new Error("Can not correctly serialize JSON objects")}catch(e){throw new Error("Can not repair JSON.stringify: "+e.message)}var i=JSON.stringify.call(this,e,t,n);try{r&&(Object.prototype.toJSON=r),o&&(Array.prototype.toJSON=o)}catch(e){throw new Error("Can not repair JSON.stringify: "+e.message)}return i},t.jsonParse=function(e){return JSON.parse(e)};var u=n("./node_modules/cross-domain-safe-weakmap/src/index.js"),s=n("./node_modules/cross-domain-utils/src/index.js"),c=n("./src/conf/index.js");t.once=function(e){if(!e)return e;var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}},t.weakMapMemoize=function(e){var t=new u.WeakMap;return function(n){var r=t.get(n);return void 0!==r?r:(void 0!==(r=e.call(this,n))&&t.set(n,r),r)}}},"./src/public/client.js":function(e,t,n){"use strict";function r(e){return a.ZalgoPromise.try(function(){if(!e.name)throw new Error("Expected options.name");var t=e.name,n=void 0,r=void 0;if("string"==typeof e.window){var o=document.getElementById(e.window);if(!o)throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be a valid element id");if("iframe"!==o.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be an iframe");if(!o.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");n=o.contentWindow}else if(e.window instanceof HTMLIFrameElement){if("iframe"!==e.window.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be an iframe");if(e.window&&!e.window.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");e.window&&e.window.contentWindow&&(n=e.window.contentWindow)}else n=e.window;if(!n)throw new Error("Expected options.window to be a window object, iframe, or iframe element id.");var i=n;r=e.domain||s.CONSTANTS.WILDCARD;var d=e.name+"_"+(0,f.uniqueID)();if((0,u.isWindowClosed)(i))throw new Error("Target window is closed");var p=!1,h=l.global.requestPromises.get(i);h||(h=[],l.global.requestPromises.set(i,h));var b=a.ZalgoPromise.try(function(){if((0,u.isAncestor)(window,i))return(0,f.onChildWindowReady)(i,e.timeout||s.CONFIG.CHILD_WINDOW_TIMEOUT)}).then(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).origin;if((0,f.isRegex)(r)&&!e)return(0,f.sayHello)(i)}).then(function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).origin;if((0,f.isRegex)(r)){if(!(0,u.matchDomain)(r,n))throw new Error("Remote window domain "+n+" does not match regex: "+r.toString());r=n}if("string"!=typeof r&&!Array.isArray(r))throw new TypeError("Expected domain to be a string or array");var o=r;return new a.ZalgoPromise(function(n,r){var a=void 0;if(e.fireAndForget||(a={name:t,window:i,domain:o,respond:function(e,t){e||(p=!0,h.splice(h.indexOf(b,1))),e?r(e):n(t)}},(0,c.addResponseListener)(d,a)),(0,c.sendMessage)(i,{type:s.CONSTANTS.POST_MESSAGE_TYPE.REQUEST,hash:d,name:t,data:e.data,fireAndForget:e.fireAndForget},o).catch(r),e.fireAndForget)return n();var f=s.CONFIG.ACK_TIMEOUT,l=e.timeout||s.CONFIG.RES_TIMEOUT,y=100;setTimeout(function n(){if(!p){if((0,u.isWindowClosed)(i))return r(a.ack?new Error("Window closed for "+t+" before response"):new Error("Window closed for "+t+" before ack"));if(f=Math.max(f-y,0),-1!==l&&(l=Math.max(l-y,0)),a.ack){if(-1===l)return;y=Math.min(l,2e3)}else{if(0===f)return r(new Error("No ack for postMessage "+t+" in "+(0,u.getDomain)()+" in "+s.CONFIG.ACK_TIMEOUT+"ms"));if(0===l)return r(new Error("No response for postMessage "+t+" in "+(0,u.getDomain)()+" in "+(e.timeout||s.CONFIG.RES_TIMEOUT)+"ms"))}setTimeout(n,y)}},y)})});return b.catch(function(){(0,c.markResponseListenerErrored)(d),(0,c.deleteResponseListener)(d)}),h.push(b),b})}function o(e,t,n,o){return(o=o||{}).window=e,o.name=t,o.data=n,r(o)}Object.defineProperty(t,"__esModule",{value:!0}),t.send=void 0,t.request=r,t.sendToParent=function(e,t,n){var r=(0,u.getAncestor)();return r?o(r,e,t,n):new a.ZalgoPromise(function(e,t){return t(new Error("Window does not have a parent"))})},t.client=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.window)throw new Error("Expected options.window");var t=e.window;return{send:function(n,r){return o(t,n,r,e)}}};var i=n("./node_modules/cross-domain-safe-weakmap/src/index.js"),a=n("./node_modules/zalgo-promise/src/index.js"),u=n("./node_modules/cross-domain-utils/src/index.js"),s=n("./src/conf/index.js"),c=n("./src/drivers/index.js"),f=n("./src/lib/index.js"),l=n("./src/global.js");l.global.requestPromises=l.global.requestPromises||new i.WeakMap,t.send=o,l.global.send=o},"./src/public/config.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONSTANTS=t.CONFIG=void 0;var r=n("./src/conf/index.js");Object.defineProperty(t,"CONFIG",{enumerable:!0,get:function(){return r.CONFIG}}),Object.defineProperty(t,"CONSTANTS",{enumerable:!0,get:function(){return r.CONSTANTS}}),t.disable=function(){delete window[r.CONSTANTS.WINDOW_PROPS.POSTROBOT],window.removeEventListener("message",o.messageListener)};var o=n("./src/drivers/index.js")},"./src/public/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parent=void 0;var r=n("./src/public/client.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var o=n("./src/public/server.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=n("./src/public/config.js");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var a=n("./node_modules/cross-domain-utils/src/index.js");t.parent=(0,a.getAncestor)()},"./src/public/server.js":function(e,t,n){"use strict";function r(e){if(!e.name)throw new Error("Expected options.name");if(!e.handler)throw new Error("Expected options.handler");var t=e.name,n=e.window,r=e.domain,o={handler:e.handler,handleError:e.errorHandler||function(e){throw e},window:n,domain:r||f.CONSTANTS.WILDCARD,name:t},u=(0,c.addRequestListener)({name:t,win:n,domain:r},o);if(e.once){var l=o.handler;o.handler=(0,s.once)(function(){return u.cancel(),l.apply(this,arguments)})}if(o.window&&e.errorOnClose)var d=(0,s.safeInterval)(function(){n&&"object"===(void 0===n?"undefined":i(n))&&(0,a.isWindowClosed)(n)&&(d.cancel(),o.handleError(new Error("Post message target window is closed")))},50);return{cancel:function(){u.cancel()}}}function o(e,t,n){return"function"==typeof t&&(n=t,t={}),(t=t||{}).name=e,t.handler=n||t.handler,r(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.on=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.listen=r,t.once=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"function"==typeof t&&(n=t,t={}),t=t||{},n=n||t.handler;var o=t.errorHandler,i=new u.ZalgoPromise(function(r,i){(t=t||{}).name=e,t.once=!0,t.handler=function(e){if(r(e),n)return n(e)},t.errorHandler=function(e){if(i(e),o)return o(e)}}),a=r(t);return i.cancel=a.cancel,i},t.listener=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{on:function(t,n){return o(t,e,n)}}};var a=n("./node_modules/cross-domain-utils/src/index.js"),u=n("./node_modules/zalgo-promise/src/index.js"),s=n("./src/lib/index.js"),c=n("./src/drivers/index.js"),f=n("./src/conf/index.js"),l=n("./src/global.js");t.on=o,l.global.on=o}})})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e,t){return e?"".concat(e,".").concat(t):t}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=["LEARNER","EDITOR","HISTORY","PREVIEW","ANALYTICS"]},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return m.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function u(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function s(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(m.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(m.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(m.arrayBuffer&&m.blob&&g(e))this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!O(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=f(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob&&(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(e){var t=e.toUpperCase();return w.indexOf(t)>-1?t:e}function p(e,t){t=t||{};var n=t.body;if(e instanceof p){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=d(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function b(e){var t=new o;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}}),t}function y(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var m={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(m.arrayBuffer)var v=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=function(e){return e&&DataView.prototype.isPrototypeOf(e)},O=ArrayBuffer.isView||function(e){return e&&v.indexOf(Object.prototype.toString.call(e))>-1};o.prototype.append=function(e,r){e=t(e),r=n(r);var o=this.map[e];this.map[e]=o?o+","+r:r},o.prototype.delete=function(e){delete this.map[t(e)]},o.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,r){this.map[t(e)]=n(r)},o.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},m.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},l.call(p.prototype),l.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var _=[301,302,303,307,308];y.redirect=function(e,t){if(-1===_.indexOf(t))throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=p,e.Response=y,e.fetch=function(e,t){return new Promise(function(n,r){var o=new p(e,t),i=new XMLHttpRequest;i.onload=function(){var e={status:i.status,statusText:i.statusText,headers:b(i.getAllResponseHeaders()||"")};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var t="response"in i?i.response:i.responseText;n(new y(t,e))},i.onerror=function(){r(new TypeError("Network request failed"))},i.ontimeout=function(){r(new TypeError("Network request failed"))},i.open(o.method,o.url,!0),"include"===o.credentials?i.withCredentials=!0:"omit"===o.credentials&&(i.withCredentials=!1),"responseType"in i&&m.blob&&(i.responseType="blob"),o.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e){return e.style.background="none",e.style.border="none",e.style.width="100%",e.style.height="100%",e}var u=n(0),s=n(1),c=n(3),f=n(6),l=n(8),d=n(9),p=n(4),h=n(10),b=n(11),y=n(12),m=n(13),v=n(14),g=n(15),O=function(e,t,n){var r=document.createElement("iframe");return r.setAttribute("id",t),a(r),e.appendChild(r),{getIframe:function(){return r},load:function(){r.src=n},getContentWindow:function(){return r.contentWindow}}},w=function(e,t,n){var r=document.createElement("iframe");return r.setAttribute("id",t),r.setAttribute("sandbox","allow-scripts allow-same-origin"),a(r),e.appendChild(r),{getIframe:function(){return r},load:function(){var e=r.contentWindow.document;e.open(),e.write(n),e.close()},getContentWindow:function(){return r.contentWindow}}},_=function(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)},E=function(e){return Object(s.d)({targetResource:u.e,fnName:u.z,payload:{childId:e}})},S=function(e){return Object(s.d)({targetResource:u.e,fnName:u.K,payload:{childId:e}})},j=function(e){return Object(s.d)({targetResource:u.e,fnName:u.j,payload:{createOptions:e}})},T=function(e){return Object(s.d)({targetResource:u.e,fnName:u.k,payload:{childId:e}})},A=function(e,t,n){Object(s.c)({fnName:u.v,window:e,callback:function(){return{nonce:t,localContext:n}}})},P=function(e){var t=e.contentType,n=e.entryPointData;return"application/embed"===t&&n&&n.length},R=function(){function e(t){r(this,e),this.id=t,this.element=void 0}return i(e,[{key:"init",value:function(e,t){var n=this,r=t||c.a.getContext();return this.element=e,E(this.id).then(function(t){var o=t.data,i=o.nonce,a=o.entryPoint,u=P(a)?w(e,n.id,a.entryPointData):O(e,n.id,a.entryPoint);A(u.getContentWindow(),i,r),u.load()})}},{key:"remove",value:function(){var e=this;return S(this.id).then(function(){_(e.element)})}},{key:"create",value:function(e){var t=e.name,n=e.plugin;return j({name:t,plugin:n}).then(function(e){if(e.data.success)return e.data.success;throw new Error(e.data.error)})}},{key:"delete",value:function(){var e=this;return T(this.id).then(function(){_(e.element)})}},{key:"state",value:function(){return Object(p.a)(this.id,!0).apply(void 0,arguments)}},{key:"access",value:function(){return f.a.apply(void 0,arguments)}},{key:"progress",value:function(){return Object(l.a)(this.id).apply(void 0,arguments)}},{key:"competency",value:function(){return Object(d.a)(this.id).apply(void 0,arguments)}},{key:"annotations",value:function(){return Object(h.a)(this.id).apply(void 0,arguments)}},{key:"route",value:function(){return Object(v.a)(this.id).apply(void 0,arguments)}},{key:"learner",value:function(){return Object(b.a)(this.id).apply(void 0,arguments)}},{key:"history",value:function(){return Object(y.a)(this.id).apply(void 0,arguments)}},{key:"theme",value:function(){return Object(m.a)(this.id).apply(void 0,arguments)}},{key:"__deprecated",value:function(){return Object(g.a)(this.id).apply(void 0,arguments)}}]),e}();t.a=R},function(e,t,n){"use strict";var r=n(1),o=n(0),i=n(2),a=function(e,t){return new i.a(function(t){Object(r.a)({resource:o.W,fnName:e,callback:function(e){t.next(e.data)}})},t)},u=function(){return{select:function(e){return Object(r.d)({targetResource:o.q,fnName:o.N,payload:{selection:e}})},selection:function(e){return{subscribe:function(t){return Object(r.d)({targetResource:o.q,fnName:o.U,payload:{selection:e,optionalCallbackFn:t}}).then(function(e){var n=e.data,r=n.subscriptionId,o=n.unsubscribeFn,i=n.initialNotifyAfterReturn;return t?{subscriptionId:r,unsubscribe:o}:(i&&setTimeout(function(){i()}),a(r,o))})}}},open:function(e){return Object(r.d)({targetResource:o.q,fnName:o.E,payload:{activityId:e}})}}};t.a=u},function(e,t,n){"use strict";function r(){return w++,w.toString()}function o(e,t){var n=t.dragType,r=t.dragData;O[e]={domainName:e,dragType:n,dragData:r}}function i(e){O[e]=null}function a(e){for(var t=[],n=Object.keys(g[e]),r=0;r<n.length;r++){var o=n[r],i=g[e][o].el.getBoundingClientRect(),a={droppableId:o,rect:{x:i.left,y:i.top,w:i.width,h:i.height}};t.push(a)}return t}function u(e,t,n){for(var r=0;r<n.length;r++){var o=n[r],i=g[e][o].el,a=new m.a(t,{detail:O[e]});i.dispatchEvent(a)}}function s(e,t){return o(e,t),{hitAreas:a(e),triggerEventOnDroppables:u.bind(null,e)}}function c(e){i(e)}function f(e){return Object(b.d)({targetResource:y.p,fnName:y.T,payload:{domainName:e,callbackDragStarted:s.bind(null,e),callbackDragStopped:c.bind(null,e)}})}function l(e){return Object(b.d)({targetResource:y.p,fnName:y.Y,payload:{domainName:e}})}function d(e,t){for(var n=Object.keys(g[t]),r=0;r<n.length;r++){var o=n[r];if(g[t][o].el===e)return o}return null}var p=n(26),h=n.n(p),b=n(1),y=n(0),m=n(27),v=n(28),g={},O={},w=0,_=function(e){return{addDroppable:function(t){if(g[e]&&0!==Object.keys(g[e]).length||(g[e]={},f(e)),null===d(t,e)){var n=r();g[e][n]={droppableId:n,el:t}}},removeDroppable:function(t){if(g[e]){var n=d(t,e);null!==n&&(delete g[e][n],0===Object.keys(g[e]).length&&l(e))}}}};h()(_,v),t.a=_},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,u,s=r(e),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var f in n)i.call(n,f)&&(s[f]=n[f]);if(o){u=o(n);for(var l=0;l<u.length;l++)a.call(n,u[l])&&(s[u[l]]=n[u[l]])}}return s}},function(e,t,n){"use strict";var r=function(){function e(e,t){var n=t||{bubbles:!1,cancelable:!1,detail:void 0},r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),r}return"function"==typeof window.CustomEvent?window.CustomEvent:(e.prototype=window.Event.prototype,e)}();t.a=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"domains",function(){return r}),n.d(t,"dragTypes",function(){return o}),n.d(t,"toolTypes",function(){return i}),n.d(t,"events",function(){return a});var r={PATHWAY_BUILDER_TOOLS_LIST:"DOMAIN_PATHWAY_BUILDER_TOOLS_LIST"},o={TOOL_NEW:"DRAG_TYPE_TOOL_NEW"},i={TEXT:"TOOL_TYPE_TEXT",IMAGE:"TOOL_TYPE_IMAGE",TABLE:"TOOL_TYPE_TABLE",COMPONENT:"TOOL_TYPE_COMPONENT"},a={DRAGENTER:"CDPDragStateDragEnter",DRAGLEAVE:"CDPDragStateDragLeave",DROP:"CDPDragStateDrop"}},function(e,t,n){"use strict";var r=n(0),o=n(1),i=function(e){return{get:function(){return Object(o.d)({targetResource:r.Z,fnName:r.u,payload:{accountId:e}}).then(function(e){return e.data})}}};t.a=i},function(e,t,n){"use strict";var r=n(0),o=n(7);t.a=Object(o.a)(r.f)},function(e,t,n){"use strict";var r=n(0),o=n(1),i=n(3);t.a=function(){return{get:function(){var e=i.a.getContext();return e?Promise.resolve(e.context):Object(o.d)({targetResource:r.h,fnName:r.u,payload:{}}).then(function(e){return e.data})}}}},function(e,t,n){"use strict";var r=n(0),o=n(1);t.a=function(e){var t=function(e){return Object(o.d)({targetResource:r.t,fnName:r.A,payload:e}).then(function(e){return e.data})},n=function(){return Object(o.d)({targetResource:r.t,fnName:r.u,payload:{}}).then(function(e){return e.data})},i=function(e){return t(e).then(function(e){return e.enabled})},a=function(e){return t(e).then(function(e){return e.disabled})},u=function(e){return t(e).then(function(e){return e.unknown})};return e?{isEnabled:function(){return i(e)},isDisabled:function(){return a(e)},isUnknown:function(){return u(e)}}:{is:t,get:n}}},function(e,t,n){"use strict";var r=n(1),o=n(0);t.a=function(e){return Object(r.d)({targetResource:o.I,fnName:o.s,payload:{query:e}})}},function(e,t,n){"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(1),u=n(2),s=n(0),c=function(e){return new u.a(function(t){Object(a.a)({resource:s.W,fnName:e,callback:function(e){t.next(e.data)}})})},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=o({allowMultipleSelection:!1},t),r={targetSelector:e,configuration:n};return{get:function(){return Object(a.d)({targetResource:s.O,fnName:s.u,payload:r}).then(function(e){return e.data})},subscribe:function(e){return Object(a.d)({targetResource:s.O,fnName:s.S,payload:{optionalCallbackFn:e}}).then(function(t){var n=t.data;return e?n:c(n)})}}}};t.a=f}])});