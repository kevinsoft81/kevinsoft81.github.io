<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="./favicon.17e50649.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dev Shell for Bronte Viewer</title>
  <script id="sessionJSScript"></script>
  <script>
          // adding dummy pisession to test
          window.piSession = {}
        
          function route(elementId) {
            __viewerApi.route(elementId);
          }
  </script>
  <script type="module" crossorigin>
var __defProp = Object.defineProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __publicField = (obj, key, value) => {
  __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
  return value;
};
var __accessCheck = (obj, member, msg) => {
  if (!member.has(obj))
    throw TypeError("Cannot " + msg);
};
var __privateGet = (obj, member, getter) => {
  __accessCheck(obj, member, "read from private field");
  return getter ? getter.call(obj) : member.get(obj);
};
var __privateAdd = (obj, member, value) => {
  if (member.has(obj))
    throw TypeError("Cannot add the same private member more than once");
  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);
};
(function(factory) {
  typeof define === "function" && define.amd ? define(factory) : factory();
})(function() {
  var _assets, _stateMap, _subscriptions, _bindings, _subscriptions2, _subscriptions3;
  "use strict";
  const p$2 = function polyfill() {
    const relList = document.createElement("link").relList;
    if (relList && relList.supports && relList.supports("modulepreload")) {
      return;
    }
    for (const link of document.querySelectorAll('link[rel="modulepreload"]')) {
      processPreload(link);
    }
    new MutationObserver((mutations) => {
      for (const mutation of mutations) {
        if (mutation.type !== "childList") {
          continue;
        }
        for (const node of mutation.addedNodes) {
          if (node.tagName === "LINK" && node.rel === "modulepreload")
            processPreload(node);
        }
      }
    }).observe(document, { childList: true, subtree: true });
    function getFetchOpts(script) {
      const fetchOpts = {};
      if (script.integrity)
        fetchOpts.integrity = script.integrity;
      if (script.referrerpolicy)
        fetchOpts.referrerPolicy = script.referrerpolicy;
      if (script.crossorigin === "use-credentials")
        fetchOpts.credentials = "include";
      else if (script.crossorigin === "anonymous")
        fetchOpts.credentials = "omit";
      else
        fetchOpts.credentials = "same-origin";
      return fetchOpts;
    }
    function processPreload(link) {
      if (link.ep)
        return;
      link.ep = true;
      const fetchOpts = getFetchOpts(link);
      fetch(link.href, fetchOpts);
    }
  };
  var commonjsGlobal = typeof globalThis !== "undefined" ? globalThis : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : {};
  var react = { exports: {} };
  var react_production_min = {};
  /*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  */
  var getOwnPropertySymbols = Object.getOwnPropertySymbols;
  var hasOwnProperty$5 = Object.prototype.hasOwnProperty;
  var propIsEnumerable = Object.prototype.propertyIsEnumerable;
  function toObject(val) {
    if (val === null || val === void 0) {
      throw new TypeError("Object.assign cannot be called with null or undefined");
    }
    return Object(val);
  }
  function shouldUseNative() {
    try {
      if (!Object.assign) {
        return false;
      }
      var test1 = new String("abc");
      test1[5] = "de";
      if (Object.getOwnPropertyNames(test1)[0] === "5") {
        return false;
      }
      var test2 = {};
      for (var i2 = 0; i2 < 10; i2++) {
        test2["_" + String.fromCharCode(i2)] = i2;
      }
      var order2 = Object.getOwnPropertyNames(test2).map(function(n2) {
        return test2[n2];
      });
      if (order2.join("") !== "0123456789") {
        return false;
      }
      var test3 = {};
      "abcdefghijklmnopqrst".split("").forEach(function(letter) {
        test3[letter] = letter;
      });
      if (Object.keys(Object.assign({}, test3)).join("") !== "abcdefghijklmnopqrst") {
        return false;
      }
      return true;
    } catch (err) {
      return false;
    }
  }
  var objectAssign = shouldUseNative() ? Object.assign : function(target, source) {
    var from;
    var to = toObject(target);
    var symbols;
    for (var s = 1; s < arguments.length; s++) {
      from = Object(arguments[s]);
      for (var key in from) {
        if (hasOwnProperty$5.call(from, key)) {
          to[key] = from[key];
        }
      }
      if (getOwnPropertySymbols) {
        symbols = getOwnPropertySymbols(from);
        for (var i2 = 0; i2 < symbols.length; i2++) {
          if (propIsEnumerable.call(from, symbols[i2])) {
            to[symbols[i2]] = from[symbols[i2]];
          }
        }
      }
    }
    return to;
  };
  /** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   */
  var l = objectAssign, n$1 = 60103, p$1 = 60106;
  react_production_min.Fragment = 60107;
  react_production_min.StrictMode = 60108;
  react_production_min.Profiler = 60114;
  var q$1 = 60109, r$1 = 60110, t = 60112;
  react_production_min.Suspense = 60113;
  var u = 60115, v = 60116;
  if ("function" === typeof Symbol && Symbol.for) {
    var w = Symbol.for;
    n$1 = w("react.element");
    p$1 = w("react.portal");
    react_production_min.Fragment = w("react.fragment");
    react_production_min.StrictMode = w("react.strict_mode");
    react_production_min.Profiler = w("react.profiler");
    q$1 = w("react.provider");
    r$1 = w("react.context");
    t = w("react.forward_ref");
    react_production_min.Suspense = w("react.suspense");
    u = w("react.memo");
    v = w("react.lazy");
  }
  var x = "function" === typeof Symbol && Symbol.iterator;
  function y$1(a) {
    if (null === a || "object" !== typeof a)
      return null;
    a = x && a[x] || a["@@iterator"];
    return "function" === typeof a ? a : null;
  }
  function z(a) {
    for (var b = "https://reactjs.org/docs/error-decoder.html?invariant=" + a, c = 1; c < arguments.length; c++)
      b += "&args[]=" + encodeURIComponent(arguments[c]);
    return "Minified React error #" + a + "; visit " + b + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
  }
  var A = { isMounted: function() {
    return false;
  }, enqueueForceUpdate: function() {
  }, enqueueReplaceState: function() {
  }, enqueueSetState: function() {
  } }, B$1 = {};
  function C(a, b, c) {
    this.props = a;
    this.context = b;
    this.refs = B$1;
    this.updater = c || A;
  }
  C.prototype.isReactComponent = {};
  C.prototype.setState = function(a, b) {
    if ("object" !== typeof a && "function" !== typeof a && null != a)
      throw Error(z(85));
    this.updater.enqueueSetState(this, a, b, "setState");
  };
  C.prototype.forceUpdate = function(a) {
    this.updater.enqueueForceUpdate(this, a, "forceUpdate");
  };
  function D$1() {
  }
  D$1.prototype = C.prototype;
  function E$1(a, b, c) {
    this.props = a;
    this.context = b;
    this.refs = B$1;
    this.updater = c || A;
  }
  var F$1 = E$1.prototype = new D$1();
  F$1.constructor = E$1;
  l(F$1, C.prototype);
  F$1.isPureReactComponent = true;
  var G$1 = { current: null }, H$1 = Object.prototype.hasOwnProperty, I$1 = { key: true, ref: true, __self: true, __source: true };
  function J(a, b, c) {
    var e, d = {}, k = null, h2 = null;
    if (null != b)
      for (e in void 0 !== b.ref && (h2 = b.ref), void 0 !== b.key && (k = "" + b.key), b)
        H$1.call(b, e) && !I$1.hasOwnProperty(e) && (d[e] = b[e]);
    var g2 = arguments.length - 2;
    if (1 === g2)
      d.children = c;
    else if (1 < g2) {
      for (var f2 = Array(g2), m2 = 0; m2 < g2; m2++)
        f2[m2] = arguments[m2 + 2];
      d.children = f2;
    }
    if (a && a.defaultProps)
      for (e in g2 = a.defaultProps, g2)
        void 0 === d[e] && (d[e] = g2[e]);
    return { $$typeof: n$1, type: a, key: k, ref: h2, props: d, _owner: G$1.current };
  }
  function K(a, b) {
    return { $$typeof: n$1, type: a.type, key: b, ref: a.ref, props: a.props, _owner: a._owner };
  }
  function L(a) {
    return "object" === typeof a && null !== a && a.$$typeof === n$1;
  }
  function escape(a) {
    var b = { "=": "=0", ":": "=2" };
    return "$" + a.replace(/[=:]/g, function(a2) {
      return b[a2];
    });
  }
  var M$1 = /\/+/g;
  function N$1(a, b) {
    return "object" === typeof a && null !== a && null != a.key ? escape("" + a.key) : b.toString(36);
  }
  function O$1(a, b, c, e, d) {
    var k = typeof a;
    if ("undefined" === k || "boolean" === k)
      a = null;
    var h2 = false;
    if (null === a)
      h2 = true;
    else
      switch (k) {
        case "string":
        case "number":
          h2 = true;
          break;
        case "object":
          switch (a.$$typeof) {
            case n$1:
            case p$1:
              h2 = true;
          }
      }
    if (h2)
      return h2 = a, d = d(h2), a = "" === e ? "." + N$1(h2, 0) : e, Array.isArray(d) ? (c = "", null != a && (c = a.replace(M$1, "$&/") + "/"), O$1(d, b, c, "", function(a2) {
        return a2;
      })) : null != d && (L(d) && (d = K(d, c + (!d.key || h2 && h2.key === d.key ? "" : ("" + d.key).replace(M$1, "$&/") + "/") + a)), b.push(d)), 1;
    h2 = 0;
    e = "" === e ? "." : e + ":";
    if (Array.isArray(a))
      for (var g2 = 0; g2 < a.length; g2++) {
        k = a[g2];
        var f2 = e + N$1(k, g2);
        h2 += O$1(k, b, c, f2, d);
      }
    else if (f2 = y$1(a), "function" === typeof f2)
      for (a = f2.call(a), g2 = 0; !(k = a.next()).done; )
        k = k.value, f2 = e + N$1(k, g2++), h2 += O$1(k, b, c, f2, d);
    else if ("object" === k)
      throw b = "" + a, Error(z(31, "[object Object]" === b ? "object with keys {" + Object.keys(a).join(", ") + "}" : b));
    return h2;
  }
  function P$1(a, b, c) {
    if (null == a)
      return a;
    var e = [], d = 0;
    O$1(a, e, "", "", function(a2) {
      return b.call(c, a2, d++);
    });
    return e;
  }
  function Q(a) {
    if (-1 === a._status) {
      var b = a._result;
      b = b();
      a._status = 0;
      a._result = b;
      b.then(function(b2) {
        0 === a._status && (b2 = b2.default, a._status = 1, a._result = b2);
      }, function(b2) {
        0 === a._status && (a._status = 2, a._result = b2);
      });
    }
    if (1 === a._status)
      return a._result;
    throw a._result;
  }
  var R$1 = { current: null };
  function S$1() {
    var a = R$1.current;
    if (null === a)
      throw Error(z(321));
    return a;
  }
  var T$1 = { ReactCurrentDispatcher: R$1, ReactCurrentBatchConfig: { transition: 0 }, ReactCurrentOwner: G$1, IsSomeRendererActing: { current: false }, assign: l };
  react_production_min.Children = { map: P$1, forEach: function(a, b, c) {
    P$1(a, function() {
      b.apply(this, arguments);
    }, c);
  }, count: function(a) {
    var b = 0;
    P$1(a, function() {
      b++;
    });
    return b;
  }, toArray: function(a) {
    return P$1(a, function(a2) {
      return a2;
    }) || [];
  }, only: function(a) {
    if (!L(a))
      throw Error(z(143));
    return a;
  } };
  react_production_min.Component = C;
  react_production_min.PureComponent = E$1;
  react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = T$1;
  react_production_min.cloneElement = function(a, b, c) {
    if (null === a || void 0 === a)
      throw Error(z(267, a));
    var e = l({}, a.props), d = a.key, k = a.ref, h2 = a._owner;
    if (null != b) {
      void 0 !== b.ref && (k = b.ref, h2 = G$1.current);
      void 0 !== b.key && (d = "" + b.key);
      if (a.type && a.type.defaultProps)
        var g2 = a.type.defaultProps;
      for (f2 in b)
        H$1.call(b, f2) && !I$1.hasOwnProperty(f2) && (e[f2] = void 0 === b[f2] && void 0 !== g2 ? g2[f2] : b[f2]);
    }
    var f2 = arguments.length - 2;
    if (1 === f2)
      e.children = c;
    else if (1 < f2) {
      g2 = Array(f2);
      for (var m2 = 0; m2 < f2; m2++)
        g2[m2] = arguments[m2 + 2];
      e.children = g2;
    }
    return {
      $$typeof: n$1,
      type: a.type,
      key: d,
      ref: k,
      props: e,
      _owner: h2
    };
  };
  react_production_min.createContext = function(a, b) {
    void 0 === b && (b = null);
    a = { $$typeof: r$1, _calculateChangedBits: b, _currentValue: a, _currentValue2: a, _threadCount: 0, Provider: null, Consumer: null };
    a.Provider = { $$typeof: q$1, _context: a };
    return a.Consumer = a;
  };
  react_production_min.createElement = J;
  react_production_min.createFactory = function(a) {
    var b = J.bind(null, a);
    b.type = a;
    return b;
  };
  react_production_min.createRef = function() {
    return { current: null };
  };
  react_production_min.forwardRef = function(a) {
    return { $$typeof: t, render: a };
  };
  react_production_min.isValidElement = L;
  react_production_min.lazy = function(a) {
    return { $$typeof: v, _payload: { _status: -1, _result: a }, _init: Q };
  };
  react_production_min.memo = function(a, b) {
    return { $$typeof: u, type: a, compare: void 0 === b ? null : b };
  };
  react_production_min.useCallback = function(a, b) {
    return S$1().useCallback(a, b);
  };
  react_production_min.useContext = function(a, b) {
    return S$1().useContext(a, b);
  };
  react_production_min.useDebugValue = function() {
  };
  react_production_min.useEffect = function(a, b) {
    return S$1().useEffect(a, b);
  };
  react_production_min.useImperativeHandle = function(a, b, c) {
    return S$1().useImperativeHandle(a, b, c);
  };
  react_production_min.useLayoutEffect = function(a, b) {
    return S$1().useLayoutEffect(a, b);
  };
  react_production_min.useMemo = function(a, b) {
    return S$1().useMemo(a, b);
  };
  react_production_min.useReducer = function(a, b, c) {
    return S$1().useReducer(a, b, c);
  };
  react_production_min.useRef = function(a) {
    return S$1().useRef(a);
  };
  react_production_min.useState = function(a) {
    return S$1().useState(a);
  };
  react_production_min.version = "17.0.2";
  {
    react.exports = react_production_min;
  }
  var React = react.exports;
  var reactDom = { exports: {} };
  var reactDom_production_min = {};
  var scheduler = { exports: {} };
  var scheduler_production_min = {};
  /** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   */
  (function(exports) {
    var f2, g2, h2, k;
    if ("object" === typeof performance && "function" === typeof performance.now) {
      var l2 = performance;
      exports.unstable_now = function() {
        return l2.now();
      };
    } else {
      var p2 = Date, q2 = p2.now();
      exports.unstable_now = function() {
        return p2.now() - q2;
      };
    }
    if ("undefined" === typeof window || "function" !== typeof MessageChannel) {
      var t2 = null, u2 = null, w2 = function() {
        if (null !== t2)
          try {
            var a = exports.unstable_now();
            t2(true, a);
            t2 = null;
          } catch (b) {
            throw setTimeout(w2, 0), b;
          }
      };
      f2 = function(a) {
        null !== t2 ? setTimeout(f2, 0, a) : (t2 = a, setTimeout(w2, 0));
      };
      g2 = function(a, b) {
        u2 = setTimeout(a, b);
      };
      h2 = function() {
        clearTimeout(u2);
      };
      exports.unstable_shouldYield = function() {
        return false;
      };
      k = exports.unstable_forceFrameRate = function() {
      };
    } else {
      var x2 = window.setTimeout, y2 = window.clearTimeout;
      if ("undefined" !== typeof console) {
        var z2 = window.cancelAnimationFrame;
        "function" !== typeof window.requestAnimationFrame && console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills");
        "function" !== typeof z2 && console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills");
      }
      var A2 = false, B2 = null, C2 = -1, D2 = 5, E2 = 0;
      exports.unstable_shouldYield = function() {
        return exports.unstable_now() >= E2;
      };
      k = function() {
      };
      exports.unstable_forceFrameRate = function(a) {
        0 > a || 125 < a ? console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported") : D2 = 0 < a ? Math.floor(1e3 / a) : 5;
      };
      var F2 = new MessageChannel(), G2 = F2.port2;
      F2.port1.onmessage = function() {
        if (null !== B2) {
          var a = exports.unstable_now();
          E2 = a + D2;
          try {
            B2(true, a) ? G2.postMessage(null) : (A2 = false, B2 = null);
          } catch (b) {
            throw G2.postMessage(null), b;
          }
        } else
          A2 = false;
      };
      f2 = function(a) {
        B2 = a;
        A2 || (A2 = true, G2.postMessage(null));
      };
      g2 = function(a, b) {
        C2 = x2(function() {
          a(exports.unstable_now());
        }, b);
      };
      h2 = function() {
        y2(C2);
        C2 = -1;
      };
    }
    function H2(a, b) {
      var c = a.length;
      a.push(b);
      a:
        for (; ; ) {
          var d = c - 1 >>> 1, e = a[d];
          if (void 0 !== e && 0 < I2(e, b))
            a[d] = b, a[c] = e, c = d;
          else
            break a;
        }
    }
    function J2(a) {
      a = a[0];
      return void 0 === a ? null : a;
    }
    function K2(a) {
      var b = a[0];
      if (void 0 !== b) {
        var c = a.pop();
        if (c !== b) {
          a[0] = c;
          a:
            for (var d = 0, e = a.length; d < e; ) {
              var m2 = 2 * (d + 1) - 1, n2 = a[m2], v2 = m2 + 1, r2 = a[v2];
              if (void 0 !== n2 && 0 > I2(n2, c))
                void 0 !== r2 && 0 > I2(r2, n2) ? (a[d] = r2, a[v2] = c, d = v2) : (a[d] = n2, a[m2] = c, d = m2);
              else if (void 0 !== r2 && 0 > I2(r2, c))
                a[d] = r2, a[v2] = c, d = v2;
              else
                break a;
            }
        }
        return b;
      }
      return null;
    }
    function I2(a, b) {
      var c = a.sortIndex - b.sortIndex;
      return 0 !== c ? c : a.id - b.id;
    }
    var L2 = [], M2 = [], N2 = 1, O2 = null, P2 = 3, Q2 = false, R2 = false, S2 = false;
    function T2(a) {
      for (var b = J2(M2); null !== b; ) {
        if (null === b.callback)
          K2(M2);
        else if (b.startTime <= a)
          K2(M2), b.sortIndex = b.expirationTime, H2(L2, b);
        else
          break;
        b = J2(M2);
      }
    }
    function U2(a) {
      S2 = false;
      T2(a);
      if (!R2)
        if (null !== J2(L2))
          R2 = true, f2(V2);
        else {
          var b = J2(M2);
          null !== b && g2(U2, b.startTime - a);
        }
    }
    function V2(a, b) {
      R2 = false;
      S2 && (S2 = false, h2());
      Q2 = true;
      var c = P2;
      try {
        T2(b);
        for (O2 = J2(L2); null !== O2 && (!(O2.expirationTime > b) || a && !exports.unstable_shouldYield()); ) {
          var d = O2.callback;
          if ("function" === typeof d) {
            O2.callback = null;
            P2 = O2.priorityLevel;
            var e = d(O2.expirationTime <= b);
            b = exports.unstable_now();
            "function" === typeof e ? O2.callback = e : O2 === J2(L2) && K2(L2);
            T2(b);
          } else
            K2(L2);
          O2 = J2(L2);
        }
        if (null !== O2)
          var m2 = true;
        else {
          var n2 = J2(M2);
          null !== n2 && g2(U2, n2.startTime - b);
          m2 = false;
        }
        return m2;
      } finally {
        O2 = null, P2 = c, Q2 = false;
      }
    }
    var W2 = k;
    exports.unstable_IdlePriority = 5;
    exports.unstable_ImmediatePriority = 1;
    exports.unstable_LowPriority = 4;
    exports.unstable_NormalPriority = 3;
    exports.unstable_Profiling = null;
    exports.unstable_UserBlockingPriority = 2;
    exports.unstable_cancelCallback = function(a) {
      a.callback = null;
    };
    exports.unstable_continueExecution = function() {
      R2 || Q2 || (R2 = true, f2(V2));
    };
    exports.unstable_getCurrentPriorityLevel = function() {
      return P2;
    };
    exports.unstable_getFirstCallbackNode = function() {
      return J2(L2);
    };
    exports.unstable_next = function(a) {
      switch (P2) {
        case 1:
        case 2:
        case 3:
          var b = 3;
          break;
        default:
          b = P2;
      }
      var c = P2;
      P2 = b;
      try {
        return a();
      } finally {
        P2 = c;
      }
    };
    exports.unstable_pauseExecution = function() {
    };
    exports.unstable_requestPaint = W2;
    exports.unstable_runWithPriority = function(a, b) {
      switch (a) {
        case 1:
        case 2:
        case 3:
        case 4:
        case 5:
          break;
        default:
          a = 3;
      }
      var c = P2;
      P2 = a;
      try {
        return b();
      } finally {
        P2 = c;
      }
    };
    exports.unstable_scheduleCallback = function(a, b, c) {
      var d = exports.unstable_now();
      "object" === typeof c && null !== c ? (c = c.delay, c = "number" === typeof c && 0 < c ? d + c : d) : c = d;
      switch (a) {
        case 1:
          var e = -1;
          break;
        case 2:
          e = 250;
          break;
        case 5:
          e = 1073741823;
          break;
        case 4:
          e = 1e4;
          break;
        default:
          e = 5e3;
      }
      e = c + e;
      a = { id: N2++, callback: b, priorityLevel: a, startTime: c, expirationTime: e, sortIndex: -1 };
      c > d ? (a.sortIndex = c, H2(M2, a), null === J2(L2) && a === J2(M2) && (S2 ? h2() : S2 = true, g2(U2, c - d))) : (a.sortIndex = e, H2(L2, a), R2 || Q2 || (R2 = true, f2(V2)));
      return a;
    };
    exports.unstable_wrapCallback = function(a) {
      var b = P2;
      return function() {
        var c = P2;
        P2 = b;
        try {
          return a.apply(this, arguments);
        } finally {
          P2 = c;
        }
      };
    };
  })(scheduler_production_min);
  {
    scheduler.exports = scheduler_production_min;
  }
  /** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   */
  var aa = react.exports, m$1 = objectAssign, r = scheduler.exports;
  function y(a) {
    for (var b = "https://reactjs.org/docs/error-decoder.html?invariant=" + a, c = 1; c < arguments.length; c++)
      b += "&args[]=" + encodeURIComponent(arguments[c]);
    return "Minified React error #" + a + "; visit " + b + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
  }
  if (!aa)
    throw Error(y(227));
  var ba = /* @__PURE__ */ new Set(), ca = {};
  function da(a, b) {
    ea(a, b);
    ea(a + "Capture", b);
  }
  function ea(a, b) {
    ca[a] = b;
    for (a = 0; a < b.length; a++)
      ba.add(b[a]);
  }
  var fa = !("undefined" === typeof window || "undefined" === typeof window.document || "undefined" === typeof window.document.createElement), ha = /^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/, ia = Object.prototype.hasOwnProperty, ja = {}, ka = {};
  function la(a) {
    if (ia.call(ka, a))
      return true;
    if (ia.call(ja, a))
      return false;
    if (ha.test(a))
      return ka[a] = true;
    ja[a] = true;
    return false;
  }
  function ma(a, b, c, d) {
    if (null !== c && 0 === c.type)
      return false;
    switch (typeof b) {
      case "function":
      case "symbol":
        return true;
      case "boolean":
        if (d)
          return false;
        if (null !== c)
          return !c.acceptsBooleans;
        a = a.toLowerCase().slice(0, 5);
        return "data-" !== a && "aria-" !== a;
      default:
        return false;
    }
  }
  function na(a, b, c, d) {
    if (null === b || "undefined" === typeof b || ma(a, b, c, d))
      return true;
    if (d)
      return false;
    if (null !== c)
      switch (c.type) {
        case 3:
          return !b;
        case 4:
          return false === b;
        case 5:
          return isNaN(b);
        case 6:
          return isNaN(b) || 1 > b;
      }
    return false;
  }
  function B(a, b, c, d, e, f2, g2) {
    this.acceptsBooleans = 2 === b || 3 === b || 4 === b;
    this.attributeName = d;
    this.attributeNamespace = e;
    this.mustUseProperty = c;
    this.propertyName = a;
    this.type = b;
    this.sanitizeURL = f2;
    this.removeEmptyString = g2;
  }
  var D = {};
  "children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a) {
    D[a] = new B(a, 0, false, a, null, false, false);
  });
  [["acceptCharset", "accept-charset"], ["className", "class"], ["htmlFor", "for"], ["httpEquiv", "http-equiv"]].forEach(function(a) {
    var b = a[0];
    D[b] = new B(b, 1, false, a[1], null, false, false);
  });
  ["contentEditable", "draggable", "spellCheck", "value"].forEach(function(a) {
    D[a] = new B(a, 2, false, a.toLowerCase(), null, false, false);
  });
  ["autoReverse", "externalResourcesRequired", "focusable", "preserveAlpha"].forEach(function(a) {
    D[a] = new B(a, 2, false, a, null, false, false);
  });
  "allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a) {
    D[a] = new B(a, 3, false, a.toLowerCase(), null, false, false);
  });
  ["checked", "multiple", "muted", "selected"].forEach(function(a) {
    D[a] = new B(a, 3, true, a, null, false, false);
  });
  ["capture", "download"].forEach(function(a) {
    D[a] = new B(a, 4, false, a, null, false, false);
  });
  ["cols", "rows", "size", "span"].forEach(function(a) {
    D[a] = new B(a, 6, false, a, null, false, false);
  });
  ["rowSpan", "start"].forEach(function(a) {
    D[a] = new B(a, 5, false, a.toLowerCase(), null, false, false);
  });
  var oa = /[\-:]([a-z])/g;
  function pa(a) {
    return a[1].toUpperCase();
  }
  "accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a) {
    var b = a.replace(
      oa,
      pa
    );
    D[b] = new B(b, 1, false, a, null, false, false);
  });
  "xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a) {
    var b = a.replace(oa, pa);
    D[b] = new B(b, 1, false, a, "http://www.w3.org/1999/xlink", false, false);
  });
  ["xml:base", "xml:lang", "xml:space"].forEach(function(a) {
    var b = a.replace(oa, pa);
    D[b] = new B(b, 1, false, a, "http://www.w3.org/XML/1998/namespace", false, false);
  });
  ["tabIndex", "crossOrigin"].forEach(function(a) {
    D[a] = new B(a, 1, false, a.toLowerCase(), null, false, false);
  });
  D.xlinkHref = new B("xlinkHref", 1, false, "xlink:href", "http://www.w3.org/1999/xlink", true, false);
  ["src", "href", "action", "formAction"].forEach(function(a) {
    D[a] = new B(a, 1, false, a.toLowerCase(), null, true, true);
  });
  function qa(a, b, c, d) {
    var e = D.hasOwnProperty(b) ? D[b] : null;
    var f2 = null !== e ? 0 === e.type : d ? false : !(2 < b.length) || "o" !== b[0] && "O" !== b[0] || "n" !== b[1] && "N" !== b[1] ? false : true;
    f2 || (na(b, c, e, d) && (c = null), d || null === e ? la(b) && (null === c ? a.removeAttribute(b) : a.setAttribute(b, "" + c)) : e.mustUseProperty ? a[e.propertyName] = null === c ? 3 === e.type ? false : "" : c : (b = e.attributeName, d = e.attributeNamespace, null === c ? a.removeAttribute(b) : (e = e.type, c = 3 === e || 4 === e && true === c ? "" : "" + c, d ? a.setAttributeNS(d, b, c) : a.setAttribute(b, c))));
  }
  var ra = aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED, sa = 60103, ta = 60106, ua = 60107, wa = 60108, xa = 60114, ya = 60109, za = 60110, Aa = 60112, Ba = 60113, Ca = 60120, Da = 60115, Ea = 60116, Fa = 60121, Ga = 60128, Ha = 60129, Ia = 60130, Ja = 60131;
  if ("function" === typeof Symbol && Symbol.for) {
    var E = Symbol.for;
    sa = E("react.element");
    ta = E("react.portal");
    ua = E("react.fragment");
    wa = E("react.strict_mode");
    xa = E("react.profiler");
    ya = E("react.provider");
    za = E("react.context");
    Aa = E("react.forward_ref");
    Ba = E("react.suspense");
    Ca = E("react.suspense_list");
    Da = E("react.memo");
    Ea = E("react.lazy");
    Fa = E("react.block");
    E("react.scope");
    Ga = E("react.opaque.id");
    Ha = E("react.debug_trace_mode");
    Ia = E("react.offscreen");
    Ja = E("react.legacy_hidden");
  }
  var Ka = "function" === typeof Symbol && Symbol.iterator;
  function La(a) {
    if (null === a || "object" !== typeof a)
      return null;
    a = Ka && a[Ka] || a["@@iterator"];
    return "function" === typeof a ? a : null;
  }
  var Ma;
  function Na(a) {
    if (void 0 === Ma)
      try {
        throw Error();
      } catch (c) {
        var b = c.stack.trim().match(/\n( *(at )?)/);
        Ma = b && b[1] || "";
      }
    return "\n" + Ma + a;
  }
  var Oa = false;
  function Pa(a, b) {
    if (!a || Oa)
      return "";
    Oa = true;
    var c = Error.prepareStackTrace;
    Error.prepareStackTrace = void 0;
    try {
      if (b)
        if (b = function() {
          throw Error();
        }, Object.defineProperty(b.prototype, "props", { set: function() {
          throw Error();
        } }), "object" === typeof Reflect && Reflect.construct) {
          try {
            Reflect.construct(b, []);
          } catch (k) {
            var d = k;
          }
          Reflect.construct(a, [], b);
        } else {
          try {
            b.call();
          } catch (k) {
            d = k;
          }
          a.call(b.prototype);
        }
      else {
        try {
          throw Error();
        } catch (k) {
          d = k;
        }
        a();
      }
    } catch (k) {
      if (k && d && "string" === typeof k.stack) {
        for (var e = k.stack.split("\n"), f2 = d.stack.split("\n"), g2 = e.length - 1, h2 = f2.length - 1; 1 <= g2 && 0 <= h2 && e[g2] !== f2[h2]; )
          h2--;
        for (; 1 <= g2 && 0 <= h2; g2--, h2--)
          if (e[g2] !== f2[h2]) {
            if (1 !== g2 || 1 !== h2) {
              do
                if (g2--, h2--, 0 > h2 || e[g2] !== f2[h2])
                  return "\n" + e[g2].replace(" at new ", " at ");
              while (1 <= g2 && 0 <= h2);
            }
            break;
          }
      }
    } finally {
      Oa = false, Error.prepareStackTrace = c;
    }
    return (a = a ? a.displayName || a.name : "") ? Na(a) : "";
  }
  function Qa(a) {
    switch (a.tag) {
      case 5:
        return Na(a.type);
      case 16:
        return Na("Lazy");
      case 13:
        return Na("Suspense");
      case 19:
        return Na("SuspenseList");
      case 0:
      case 2:
      case 15:
        return a = Pa(a.type, false), a;
      case 11:
        return a = Pa(a.type.render, false), a;
      case 22:
        return a = Pa(a.type._render, false), a;
      case 1:
        return a = Pa(a.type, true), a;
      default:
        return "";
    }
  }
  function Ra(a) {
    if (null == a)
      return null;
    if ("function" === typeof a)
      return a.displayName || a.name || null;
    if ("string" === typeof a)
      return a;
    switch (a) {
      case ua:
        return "Fragment";
      case ta:
        return "Portal";
      case xa:
        return "Profiler";
      case wa:
        return "StrictMode";
      case Ba:
        return "Suspense";
      case Ca:
        return "SuspenseList";
    }
    if ("object" === typeof a)
      switch (a.$$typeof) {
        case za:
          return (a.displayName || "Context") + ".Consumer";
        case ya:
          return (a._context.displayName || "Context") + ".Provider";
        case Aa:
          var b = a.render;
          b = b.displayName || b.name || "";
          return a.displayName || ("" !== b ? "ForwardRef(" + b + ")" : "ForwardRef");
        case Da:
          return Ra(a.type);
        case Fa:
          return Ra(a._render);
        case Ea:
          b = a._payload;
          a = a._init;
          try {
            return Ra(a(b));
          } catch (c) {
          }
      }
    return null;
  }
  function Sa(a) {
    switch (typeof a) {
      case "boolean":
      case "number":
      case "object":
      case "string":
      case "undefined":
        return a;
      default:
        return "";
    }
  }
  function Ta(a) {
    var b = a.type;
    return (a = a.nodeName) && "input" === a.toLowerCase() && ("checkbox" === b || "radio" === b);
  }
  function Ua(a) {
    var b = Ta(a) ? "checked" : "value", c = Object.getOwnPropertyDescriptor(a.constructor.prototype, b), d = "" + a[b];
    if (!a.hasOwnProperty(b) && "undefined" !== typeof c && "function" === typeof c.get && "function" === typeof c.set) {
      var e = c.get, f2 = c.set;
      Object.defineProperty(a, b, { configurable: true, get: function() {
        return e.call(this);
      }, set: function(a2) {
        d = "" + a2;
        f2.call(this, a2);
      } });
      Object.defineProperty(a, b, { enumerable: c.enumerable });
      return { getValue: function() {
        return d;
      }, setValue: function(a2) {
        d = "" + a2;
      }, stopTracking: function() {
        a._valueTracker = null;
        delete a[b];
      } };
    }
  }
  function Va(a) {
    a._valueTracker || (a._valueTracker = Ua(a));
  }
  function Wa(a) {
    if (!a)
      return false;
    var b = a._valueTracker;
    if (!b)
      return true;
    var c = b.getValue();
    var d = "";
    a && (d = Ta(a) ? a.checked ? "true" : "false" : a.value);
    a = d;
    return a !== c ? (b.setValue(a), true) : false;
  }
  function Xa(a) {
    a = a || ("undefined" !== typeof document ? document : void 0);
    if ("undefined" === typeof a)
      return null;
    try {
      return a.activeElement || a.body;
    } catch (b) {
      return a.body;
    }
  }
  function Ya(a, b) {
    var c = b.checked;
    return m$1({}, b, { defaultChecked: void 0, defaultValue: void 0, value: void 0, checked: null != c ? c : a._wrapperState.initialChecked });
  }
  function Za(a, b) {
    var c = null == b.defaultValue ? "" : b.defaultValue, d = null != b.checked ? b.checked : b.defaultChecked;
    c = Sa(null != b.value ? b.value : c);
    a._wrapperState = { initialChecked: d, initialValue: c, controlled: "checkbox" === b.type || "radio" === b.type ? null != b.checked : null != b.value };
  }
  function $a(a, b) {
    b = b.checked;
    null != b && qa(a, "checked", b, false);
  }
  function ab(a, b) {
    $a(a, b);
    var c = Sa(b.value), d = b.type;
    if (null != c)
      if ("number" === d) {
        if (0 === c && "" === a.value || a.value != c)
          a.value = "" + c;
      } else
        a.value !== "" + c && (a.value = "" + c);
    else if ("submit" === d || "reset" === d) {
      a.removeAttribute("value");
      return;
    }
    b.hasOwnProperty("value") ? bb(a, b.type, c) : b.hasOwnProperty("defaultValue") && bb(a, b.type, Sa(b.defaultValue));
    null == b.checked && null != b.defaultChecked && (a.defaultChecked = !!b.defaultChecked);
  }
  function cb(a, b, c) {
    if (b.hasOwnProperty("value") || b.hasOwnProperty("defaultValue")) {
      var d = b.type;
      if (!("submit" !== d && "reset" !== d || void 0 !== b.value && null !== b.value))
        return;
      b = "" + a._wrapperState.initialValue;
      c || b === a.value || (a.value = b);
      a.defaultValue = b;
    }
    c = a.name;
    "" !== c && (a.name = "");
    a.defaultChecked = !!a._wrapperState.initialChecked;
    "" !== c && (a.name = c);
  }
  function bb(a, b, c) {
    if ("number" !== b || Xa(a.ownerDocument) !== a)
      null == c ? a.defaultValue = "" + a._wrapperState.initialValue : a.defaultValue !== "" + c && (a.defaultValue = "" + c);
  }
  function db(a) {
    var b = "";
    aa.Children.forEach(a, function(a2) {
      null != a2 && (b += a2);
    });
    return b;
  }
  function eb(a, b) {
    a = m$1({ children: void 0 }, b);
    if (b = db(b.children))
      a.children = b;
    return a;
  }
  function fb(a, b, c, d) {
    a = a.options;
    if (b) {
      b = {};
      for (var e = 0; e < c.length; e++)
        b["$" + c[e]] = true;
      for (c = 0; c < a.length; c++)
        e = b.hasOwnProperty("$" + a[c].value), a[c].selected !== e && (a[c].selected = e), e && d && (a[c].defaultSelected = true);
    } else {
      c = "" + Sa(c);
      b = null;
      for (e = 0; e < a.length; e++) {
        if (a[e].value === c) {
          a[e].selected = true;
          d && (a[e].defaultSelected = true);
          return;
        }
        null !== b || a[e].disabled || (b = a[e]);
      }
      null !== b && (b.selected = true);
    }
  }
  function gb(a, b) {
    if (null != b.dangerouslySetInnerHTML)
      throw Error(y(91));
    return m$1({}, b, { value: void 0, defaultValue: void 0, children: "" + a._wrapperState.initialValue });
  }
  function hb(a, b) {
    var c = b.value;
    if (null == c) {
      c = b.children;
      b = b.defaultValue;
      if (null != c) {
        if (null != b)
          throw Error(y(92));
        if (Array.isArray(c)) {
          if (!(1 >= c.length))
            throw Error(y(93));
          c = c[0];
        }
        b = c;
      }
      null == b && (b = "");
      c = b;
    }
    a._wrapperState = { initialValue: Sa(c) };
  }
  function ib(a, b) {
    var c = Sa(b.value), d = Sa(b.defaultValue);
    null != c && (c = "" + c, c !== a.value && (a.value = c), null == b.defaultValue && a.defaultValue !== c && (a.defaultValue = c));
    null != d && (a.defaultValue = "" + d);
  }
  function jb(a) {
    var b = a.textContent;
    b === a._wrapperState.initialValue && "" !== b && null !== b && (a.value = b);
  }
  var kb = { html: "http://www.w3.org/1999/xhtml", mathml: "http://www.w3.org/1998/Math/MathML", svg: "http://www.w3.org/2000/svg" };
  function lb(a) {
    switch (a) {
      case "svg":
        return "http://www.w3.org/2000/svg";
      case "math":
        return "http://www.w3.org/1998/Math/MathML";
      default:
        return "http://www.w3.org/1999/xhtml";
    }
  }
  function mb(a, b) {
    return null == a || "http://www.w3.org/1999/xhtml" === a ? lb(b) : "http://www.w3.org/2000/svg" === a && "foreignObject" === b ? "http://www.w3.org/1999/xhtml" : a;
  }
  var nb, ob = function(a) {
    return "undefined" !== typeof MSApp && MSApp.execUnsafeLocalFunction ? function(b, c, d, e) {
      MSApp.execUnsafeLocalFunction(function() {
        return a(b, c, d, e);
      });
    } : a;
  }(function(a, b) {
    if (a.namespaceURI !== kb.svg || "innerHTML" in a)
      a.innerHTML = b;
    else {
      nb = nb || document.createElement("div");
      nb.innerHTML = "<svg>" + b.valueOf().toString() + "</svg>";
      for (b = nb.firstChild; a.firstChild; )
        a.removeChild(a.firstChild);
      for (; b.firstChild; )
        a.appendChild(b.firstChild);
    }
  });
  function pb(a, b) {
    if (b) {
      var c = a.firstChild;
      if (c && c === a.lastChild && 3 === c.nodeType) {
        c.nodeValue = b;
        return;
      }
    }
    a.textContent = b;
  }
  var qb = {
    animationIterationCount: true,
    borderImageOutset: true,
    borderImageSlice: true,
    borderImageWidth: true,
    boxFlex: true,
    boxFlexGroup: true,
    boxOrdinalGroup: true,
    columnCount: true,
    columns: true,
    flex: true,
    flexGrow: true,
    flexPositive: true,
    flexShrink: true,
    flexNegative: true,
    flexOrder: true,
    gridArea: true,
    gridRow: true,
    gridRowEnd: true,
    gridRowSpan: true,
    gridRowStart: true,
    gridColumn: true,
    gridColumnEnd: true,
    gridColumnSpan: true,
    gridColumnStart: true,
    fontWeight: true,
    lineClamp: true,
    lineHeight: true,
    opacity: true,
    order: true,
    orphans: true,
    tabSize: true,
    widows: true,
    zIndex: true,
    zoom: true,
    fillOpacity: true,
    floodOpacity: true,
    stopOpacity: true,
    strokeDasharray: true,
    strokeDashoffset: true,
    strokeMiterlimit: true,
    strokeOpacity: true,
    strokeWidth: true
  }, rb = ["Webkit", "ms", "Moz", "O"];
  Object.keys(qb).forEach(function(a) {
    rb.forEach(function(b) {
      b = b + a.charAt(0).toUpperCase() + a.substring(1);
      qb[b] = qb[a];
    });
  });
  function sb(a, b, c) {
    return null == b || "boolean" === typeof b || "" === b ? "" : c || "number" !== typeof b || 0 === b || qb.hasOwnProperty(a) && qb[a] ? ("" + b).trim() : b + "px";
  }
  function tb(a, b) {
    a = a.style;
    for (var c in b)
      if (b.hasOwnProperty(c)) {
        var d = 0 === c.indexOf("--"), e = sb(c, b[c], d);
        "float" === c && (c = "cssFloat");
        d ? a.setProperty(c, e) : a[c] = e;
      }
  }
  var ub = m$1({ menuitem: true }, { area: true, base: true, br: true, col: true, embed: true, hr: true, img: true, input: true, keygen: true, link: true, meta: true, param: true, source: true, track: true, wbr: true });
  function vb(a, b) {
    if (b) {
      if (ub[a] && (null != b.children || null != b.dangerouslySetInnerHTML))
        throw Error(y(137, a));
      if (null != b.dangerouslySetInnerHTML) {
        if (null != b.children)
          throw Error(y(60));
        if (!("object" === typeof b.dangerouslySetInnerHTML && "__html" in b.dangerouslySetInnerHTML))
          throw Error(y(61));
      }
      if (null != b.style && "object" !== typeof b.style)
        throw Error(y(62));
    }
  }
  function wb(a, b) {
    if (-1 === a.indexOf("-"))
      return "string" === typeof b.is;
    switch (a) {
      case "annotation-xml":
      case "color-profile":
      case "font-face":
      case "font-face-src":
      case "font-face-uri":
      case "font-face-format":
      case "font-face-name":
      case "missing-glyph":
        return false;
      default:
        return true;
    }
  }
  function xb(a) {
    a = a.target || a.srcElement || window;
    a.correspondingUseElement && (a = a.correspondingUseElement);
    return 3 === a.nodeType ? a.parentNode : a;
  }
  var yb = null, zb = null, Ab = null;
  function Bb(a) {
    if (a = Cb(a)) {
      if ("function" !== typeof yb)
        throw Error(y(280));
      var b = a.stateNode;
      b && (b = Db(b), yb(a.stateNode, a.type, b));
    }
  }
  function Eb(a) {
    zb ? Ab ? Ab.push(a) : Ab = [a] : zb = a;
  }
  function Fb() {
    if (zb) {
      var a = zb, b = Ab;
      Ab = zb = null;
      Bb(a);
      if (b)
        for (a = 0; a < b.length; a++)
          Bb(b[a]);
    }
  }
  function Gb(a, b) {
    return a(b);
  }
  function Hb(a, b, c, d, e) {
    return a(b, c, d, e);
  }
  function Ib() {
  }
  var Jb = Gb, Kb = false, Lb = false;
  function Mb() {
    if (null !== zb || null !== Ab)
      Ib(), Fb();
  }
  function Nb(a, b, c) {
    if (Lb)
      return a(b, c);
    Lb = true;
    try {
      return Jb(a, b, c);
    } finally {
      Lb = false, Mb();
    }
  }
  function Ob(a, b) {
    var c = a.stateNode;
    if (null === c)
      return null;
    var d = Db(c);
    if (null === d)
      return null;
    c = d[b];
    a:
      switch (b) {
        case "onClick":
        case "onClickCapture":
        case "onDoubleClick":
        case "onDoubleClickCapture":
        case "onMouseDown":
        case "onMouseDownCapture":
        case "onMouseMove":
        case "onMouseMoveCapture":
        case "onMouseUp":
        case "onMouseUpCapture":
        case "onMouseEnter":
          (d = !d.disabled) || (a = a.type, d = !("button" === a || "input" === a || "select" === a || "textarea" === a));
          a = !d;
          break a;
        default:
          a = false;
      }
    if (a)
      return null;
    if (c && "function" !== typeof c)
      throw Error(y(231, b, typeof c));
    return c;
  }
  var Pb = false;
  if (fa)
    try {
      var Qb = {};
      Object.defineProperty(Qb, "passive", { get: function() {
        Pb = true;
      } });
      window.addEventListener("test", Qb, Qb);
      window.removeEventListener("test", Qb, Qb);
    } catch (a) {
      Pb = false;
    }
  function Rb(a, b, c, d, e, f2, g2, h2, k) {
    var l2 = Array.prototype.slice.call(arguments, 3);
    try {
      b.apply(c, l2);
    } catch (n2) {
      this.onError(n2);
    }
  }
  var Sb = false, Tb = null, Ub = false, Vb = null, Wb = { onError: function(a) {
    Sb = true;
    Tb = a;
  } };
  function Xb(a, b, c, d, e, f2, g2, h2, k) {
    Sb = false;
    Tb = null;
    Rb.apply(Wb, arguments);
  }
  function Yb(a, b, c, d, e, f2, g2, h2, k) {
    Xb.apply(this, arguments);
    if (Sb) {
      if (Sb) {
        var l2 = Tb;
        Sb = false;
        Tb = null;
      } else
        throw Error(y(198));
      Ub || (Ub = true, Vb = l2);
    }
  }
  function Zb(a) {
    var b = a, c = a;
    if (a.alternate)
      for (; b.return; )
        b = b.return;
    else {
      a = b;
      do
        b = a, 0 !== (b.flags & 1026) && (c = b.return), a = b.return;
      while (a);
    }
    return 3 === b.tag ? c : null;
  }
  function $b(a) {
    if (13 === a.tag) {
      var b = a.memoizedState;
      null === b && (a = a.alternate, null !== a && (b = a.memoizedState));
      if (null !== b)
        return b.dehydrated;
    }
    return null;
  }
  function ac(a) {
    if (Zb(a) !== a)
      throw Error(y(188));
  }
  function bc(a) {
    var b = a.alternate;
    if (!b) {
      b = Zb(a);
      if (null === b)
        throw Error(y(188));
      return b !== a ? null : a;
    }
    for (var c = a, d = b; ; ) {
      var e = c.return;
      if (null === e)
        break;
      var f2 = e.alternate;
      if (null === f2) {
        d = e.return;
        if (null !== d) {
          c = d;
          continue;
        }
        break;
      }
      if (e.child === f2.child) {
        for (f2 = e.child; f2; ) {
          if (f2 === c)
            return ac(e), a;
          if (f2 === d)
            return ac(e), b;
          f2 = f2.sibling;
        }
        throw Error(y(188));
      }
      if (c.return !== d.return)
        c = e, d = f2;
      else {
        for (var g2 = false, h2 = e.child; h2; ) {
          if (h2 === c) {
            g2 = true;
            c = e;
            d = f2;
            break;
          }
          if (h2 === d) {
            g2 = true;
            d = e;
            c = f2;
            break;
          }
          h2 = h2.sibling;
        }
        if (!g2) {
          for (h2 = f2.child; h2; ) {
            if (h2 === c) {
              g2 = true;
              c = f2;
              d = e;
              break;
            }
            if (h2 === d) {
              g2 = true;
              d = f2;
              c = e;
              break;
            }
            h2 = h2.sibling;
          }
          if (!g2)
            throw Error(y(189));
        }
      }
      if (c.alternate !== d)
        throw Error(y(190));
    }
    if (3 !== c.tag)
      throw Error(y(188));
    return c.stateNode.current === c ? a : b;
  }
  function cc(a) {
    a = bc(a);
    if (!a)
      return null;
    for (var b = a; ; ) {
      if (5 === b.tag || 6 === b.tag)
        return b;
      if (b.child)
        b.child.return = b, b = b.child;
      else {
        if (b === a)
          break;
        for (; !b.sibling; ) {
          if (!b.return || b.return === a)
            return null;
          b = b.return;
        }
        b.sibling.return = b.return;
        b = b.sibling;
      }
    }
    return null;
  }
  function dc(a, b) {
    for (var c = a.alternate; null !== b; ) {
      if (b === a || b === c)
        return true;
      b = b.return;
    }
    return false;
  }
  var ec, fc, gc, hc, ic = false, jc = [], kc = null, lc = null, mc = null, nc = /* @__PURE__ */ new Map(), oc = /* @__PURE__ */ new Map(), pc = [], qc = "mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");
  function rc(a, b, c, d, e) {
    return { blockedOn: a, domEventName: b, eventSystemFlags: c | 16, nativeEvent: e, targetContainers: [d] };
  }
  function sc(a, b) {
    switch (a) {
      case "focusin":
      case "focusout":
        kc = null;
        break;
      case "dragenter":
      case "dragleave":
        lc = null;
        break;
      case "mouseover":
      case "mouseout":
        mc = null;
        break;
      case "pointerover":
      case "pointerout":
        nc.delete(b.pointerId);
        break;
      case "gotpointercapture":
      case "lostpointercapture":
        oc.delete(b.pointerId);
    }
  }
  function tc(a, b, c, d, e, f2) {
    if (null === a || a.nativeEvent !== f2)
      return a = rc(b, c, d, e, f2), null !== b && (b = Cb(b), null !== b && fc(b)), a;
    a.eventSystemFlags |= d;
    b = a.targetContainers;
    null !== e && -1 === b.indexOf(e) && b.push(e);
    return a;
  }
  function uc(a, b, c, d, e) {
    switch (b) {
      case "focusin":
        return kc = tc(kc, a, b, c, d, e), true;
      case "dragenter":
        return lc = tc(lc, a, b, c, d, e), true;
      case "mouseover":
        return mc = tc(mc, a, b, c, d, e), true;
      case "pointerover":
        var f2 = e.pointerId;
        nc.set(f2, tc(nc.get(f2) || null, a, b, c, d, e));
        return true;
      case "gotpointercapture":
        return f2 = e.pointerId, oc.set(f2, tc(oc.get(f2) || null, a, b, c, d, e)), true;
    }
    return false;
  }
  function vc(a) {
    var b = wc(a.target);
    if (null !== b) {
      var c = Zb(b);
      if (null !== c) {
        if (b = c.tag, 13 === b) {
          if (b = $b(c), null !== b) {
            a.blockedOn = b;
            hc(a.lanePriority, function() {
              r.unstable_runWithPriority(a.priority, function() {
                gc(c);
              });
            });
            return;
          }
        } else if (3 === b && c.stateNode.hydrate) {
          a.blockedOn = 3 === c.tag ? c.stateNode.containerInfo : null;
          return;
        }
      }
    }
    a.blockedOn = null;
  }
  function xc(a) {
    if (null !== a.blockedOn)
      return false;
    for (var b = a.targetContainers; 0 < b.length; ) {
      var c = yc(a.domEventName, a.eventSystemFlags, b[0], a.nativeEvent);
      if (null !== c)
        return b = Cb(c), null !== b && fc(b), a.blockedOn = c, false;
      b.shift();
    }
    return true;
  }
  function zc(a, b, c) {
    xc(a) && c.delete(b);
  }
  function Ac() {
    for (ic = false; 0 < jc.length; ) {
      var a = jc[0];
      if (null !== a.blockedOn) {
        a = Cb(a.blockedOn);
        null !== a && ec(a);
        break;
      }
      for (var b = a.targetContainers; 0 < b.length; ) {
        var c = yc(a.domEventName, a.eventSystemFlags, b[0], a.nativeEvent);
        if (null !== c) {
          a.blockedOn = c;
          break;
        }
        b.shift();
      }
      null === a.blockedOn && jc.shift();
    }
    null !== kc && xc(kc) && (kc = null);
    null !== lc && xc(lc) && (lc = null);
    null !== mc && xc(mc) && (mc = null);
    nc.forEach(zc);
    oc.forEach(zc);
  }
  function Bc(a, b) {
    a.blockedOn === b && (a.blockedOn = null, ic || (ic = true, r.unstable_scheduleCallback(r.unstable_NormalPriority, Ac)));
  }
  function Cc(a) {
    function b(b2) {
      return Bc(b2, a);
    }
    if (0 < jc.length) {
      Bc(jc[0], a);
      for (var c = 1; c < jc.length; c++) {
        var d = jc[c];
        d.blockedOn === a && (d.blockedOn = null);
      }
    }
    null !== kc && Bc(kc, a);
    null !== lc && Bc(lc, a);
    null !== mc && Bc(mc, a);
    nc.forEach(b);
    oc.forEach(b);
    for (c = 0; c < pc.length; c++)
      d = pc[c], d.blockedOn === a && (d.blockedOn = null);
    for (; 0 < pc.length && (c = pc[0], null === c.blockedOn); )
      vc(c), null === c.blockedOn && pc.shift();
  }
  function Dc(a, b) {
    var c = {};
    c[a.toLowerCase()] = b.toLowerCase();
    c["Webkit" + a] = "webkit" + b;
    c["Moz" + a] = "moz" + b;
    return c;
  }
  var Ec = { animationend: Dc("Animation", "AnimationEnd"), animationiteration: Dc("Animation", "AnimationIteration"), animationstart: Dc("Animation", "AnimationStart"), transitionend: Dc("Transition", "TransitionEnd") }, Fc = {}, Gc = {};
  fa && (Gc = document.createElement("div").style, "AnimationEvent" in window || (delete Ec.animationend.animation, delete Ec.animationiteration.animation, delete Ec.animationstart.animation), "TransitionEvent" in window || delete Ec.transitionend.transition);
  function Hc(a) {
    if (Fc[a])
      return Fc[a];
    if (!Ec[a])
      return a;
    var b = Ec[a], c;
    for (c in b)
      if (b.hasOwnProperty(c) && c in Gc)
        return Fc[a] = b[c];
    return a;
  }
  var Ic = Hc("animationend"), Jc = Hc("animationiteration"), Kc = Hc("animationstart"), Lc = Hc("transitionend"), Mc = /* @__PURE__ */ new Map(), Nc = /* @__PURE__ */ new Map(), Oc = [
    "abort",
    "abort",
    Ic,
    "animationEnd",
    Jc,
    "animationIteration",
    Kc,
    "animationStart",
    "canplay",
    "canPlay",
    "canplaythrough",
    "canPlayThrough",
    "durationchange",
    "durationChange",
    "emptied",
    "emptied",
    "encrypted",
    "encrypted",
    "ended",
    "ended",
    "error",
    "error",
    "gotpointercapture",
    "gotPointerCapture",
    "load",
    "load",
    "loadeddata",
    "loadedData",
    "loadedmetadata",
    "loadedMetadata",
    "loadstart",
    "loadStart",
    "lostpointercapture",
    "lostPointerCapture",
    "playing",
    "playing",
    "progress",
    "progress",
    "seeking",
    "seeking",
    "stalled",
    "stalled",
    "suspend",
    "suspend",
    "timeupdate",
    "timeUpdate",
    Lc,
    "transitionEnd",
    "waiting",
    "waiting"
  ];
  function Pc(a, b) {
    for (var c = 0; c < a.length; c += 2) {
      var d = a[c], e = a[c + 1];
      e = "on" + (e[0].toUpperCase() + e.slice(1));
      Nc.set(d, b);
      Mc.set(d, e);
      da(e, [d]);
    }
  }
  var Qc = r.unstable_now;
  Qc();
  var F = 8;
  function Rc(a) {
    if (0 !== (1 & a))
      return F = 15, 1;
    if (0 !== (2 & a))
      return F = 14, 2;
    if (0 !== (4 & a))
      return F = 13, 4;
    var b = 24 & a;
    if (0 !== b)
      return F = 12, b;
    if (0 !== (a & 32))
      return F = 11, 32;
    b = 192 & a;
    if (0 !== b)
      return F = 10, b;
    if (0 !== (a & 256))
      return F = 9, 256;
    b = 3584 & a;
    if (0 !== b)
      return F = 8, b;
    if (0 !== (a & 4096))
      return F = 7, 4096;
    b = 4186112 & a;
    if (0 !== b)
      return F = 6, b;
    b = 62914560 & a;
    if (0 !== b)
      return F = 5, b;
    if (a & 67108864)
      return F = 4, 67108864;
    if (0 !== (a & 134217728))
      return F = 3, 134217728;
    b = 805306368 & a;
    if (0 !== b)
      return F = 2, b;
    if (0 !== (1073741824 & a))
      return F = 1, 1073741824;
    F = 8;
    return a;
  }
  function Sc(a) {
    switch (a) {
      case 99:
        return 15;
      case 98:
        return 10;
      case 97:
      case 96:
        return 8;
      case 95:
        return 2;
      default:
        return 0;
    }
  }
  function Tc(a) {
    switch (a) {
      case 15:
      case 14:
        return 99;
      case 13:
      case 12:
      case 11:
      case 10:
        return 98;
      case 9:
      case 8:
      case 7:
      case 6:
      case 4:
      case 5:
        return 97;
      case 3:
      case 2:
      case 1:
        return 95;
      case 0:
        return 90;
      default:
        throw Error(y(358, a));
    }
  }
  function Uc(a, b) {
    var c = a.pendingLanes;
    if (0 === c)
      return F = 0;
    var d = 0, e = 0, f2 = a.expiredLanes, g2 = a.suspendedLanes, h2 = a.pingedLanes;
    if (0 !== f2)
      d = f2, e = F = 15;
    else if (f2 = c & 134217727, 0 !== f2) {
      var k = f2 & ~g2;
      0 !== k ? (d = Rc(k), e = F) : (h2 &= f2, 0 !== h2 && (d = Rc(h2), e = F));
    } else
      f2 = c & ~g2, 0 !== f2 ? (d = Rc(f2), e = F) : 0 !== h2 && (d = Rc(h2), e = F);
    if (0 === d)
      return 0;
    d = 31 - Vc(d);
    d = c & ((0 > d ? 0 : 1 << d) << 1) - 1;
    if (0 !== b && b !== d && 0 === (b & g2)) {
      Rc(b);
      if (e <= F)
        return b;
      F = e;
    }
    b = a.entangledLanes;
    if (0 !== b)
      for (a = a.entanglements, b &= d; 0 < b; )
        c = 31 - Vc(b), e = 1 << c, d |= a[c], b &= ~e;
    return d;
  }
  function Wc(a) {
    a = a.pendingLanes & -1073741825;
    return 0 !== a ? a : a & 1073741824 ? 1073741824 : 0;
  }
  function Xc(a, b) {
    switch (a) {
      case 15:
        return 1;
      case 14:
        return 2;
      case 12:
        return a = Yc(24 & ~b), 0 === a ? Xc(10, b) : a;
      case 10:
        return a = Yc(192 & ~b), 0 === a ? Xc(8, b) : a;
      case 8:
        return a = Yc(3584 & ~b), 0 === a && (a = Yc(4186112 & ~b), 0 === a && (a = 512)), a;
      case 2:
        return b = Yc(805306368 & ~b), 0 === b && (b = 268435456), b;
    }
    throw Error(y(358, a));
  }
  function Yc(a) {
    return a & -a;
  }
  function Zc(a) {
    for (var b = [], c = 0; 31 > c; c++)
      b.push(a);
    return b;
  }
  function $c(a, b, c) {
    a.pendingLanes |= b;
    var d = b - 1;
    a.suspendedLanes &= d;
    a.pingedLanes &= d;
    a = a.eventTimes;
    b = 31 - Vc(b);
    a[b] = c;
  }
  var Vc = Math.clz32 ? Math.clz32 : ad, bd = Math.log, cd = Math.LN2;
  function ad(a) {
    return 0 === a ? 32 : 31 - (bd(a) / cd | 0) | 0;
  }
  var dd = r.unstable_UserBlockingPriority, ed = r.unstable_runWithPriority, fd = true;
  function gd(a, b, c, d) {
    Kb || Ib();
    var e = hd, f2 = Kb;
    Kb = true;
    try {
      Hb(e, a, b, c, d);
    } finally {
      (Kb = f2) || Mb();
    }
  }
  function id(a, b, c, d) {
    ed(dd, hd.bind(null, a, b, c, d));
  }
  function hd(a, b, c, d) {
    if (fd) {
      var e;
      if ((e = 0 === (b & 4)) && 0 < jc.length && -1 < qc.indexOf(a))
        a = rc(null, a, b, c, d), jc.push(a);
      else {
        var f2 = yc(a, b, c, d);
        if (null === f2)
          e && sc(a, d);
        else {
          if (e) {
            if (-1 < qc.indexOf(a)) {
              a = rc(f2, a, b, c, d);
              jc.push(a);
              return;
            }
            if (uc(f2, a, b, c, d))
              return;
            sc(a, d);
          }
          jd(a, b, d, null, c);
        }
      }
    }
  }
  function yc(a, b, c, d) {
    var e = xb(d);
    e = wc(e);
    if (null !== e) {
      var f2 = Zb(e);
      if (null === f2)
        e = null;
      else {
        var g2 = f2.tag;
        if (13 === g2) {
          e = $b(f2);
          if (null !== e)
            return e;
          e = null;
        } else if (3 === g2) {
          if (f2.stateNode.hydrate)
            return 3 === f2.tag ? f2.stateNode.containerInfo : null;
          e = null;
        } else
          f2 !== e && (e = null);
      }
    }
    jd(a, b, d, e, c);
    return null;
  }
  var kd = null, ld = null, md = null;
  function nd() {
    if (md)
      return md;
    var a, b = ld, c = b.length, d, e = "value" in kd ? kd.value : kd.textContent, f2 = e.length;
    for (a = 0; a < c && b[a] === e[a]; a++)
      ;
    var g2 = c - a;
    for (d = 1; d <= g2 && b[c - d] === e[f2 - d]; d++)
      ;
    return md = e.slice(a, 1 < d ? 1 - d : void 0);
  }
  function od(a) {
    var b = a.keyCode;
    "charCode" in a ? (a = a.charCode, 0 === a && 13 === b && (a = 13)) : a = b;
    10 === a && (a = 13);
    return 32 <= a || 13 === a ? a : 0;
  }
  function pd() {
    return true;
  }
  function qd() {
    return false;
  }
  function rd(a) {
    function b(b2, d, e, f2, g2) {
      this._reactName = b2;
      this._targetInst = e;
      this.type = d;
      this.nativeEvent = f2;
      this.target = g2;
      this.currentTarget = null;
      for (var c in a)
        a.hasOwnProperty(c) && (b2 = a[c], this[c] = b2 ? b2(f2) : f2[c]);
      this.isDefaultPrevented = (null != f2.defaultPrevented ? f2.defaultPrevented : false === f2.returnValue) ? pd : qd;
      this.isPropagationStopped = qd;
      return this;
    }
    m$1(b.prototype, { preventDefault: function() {
      this.defaultPrevented = true;
      var a2 = this.nativeEvent;
      a2 && (a2.preventDefault ? a2.preventDefault() : "unknown" !== typeof a2.returnValue && (a2.returnValue = false), this.isDefaultPrevented = pd);
    }, stopPropagation: function() {
      var a2 = this.nativeEvent;
      a2 && (a2.stopPropagation ? a2.stopPropagation() : "unknown" !== typeof a2.cancelBubble && (a2.cancelBubble = true), this.isPropagationStopped = pd);
    }, persist: function() {
    }, isPersistent: pd });
    return b;
  }
  var sd = { eventPhase: 0, bubbles: 0, cancelable: 0, timeStamp: function(a) {
    return a.timeStamp || Date.now();
  }, defaultPrevented: 0, isTrusted: 0 }, td = rd(sd), ud = m$1({}, sd, { view: 0, detail: 0 }), vd = rd(ud), wd, xd, yd, Ad = m$1({}, ud, { screenX: 0, screenY: 0, clientX: 0, clientY: 0, pageX: 0, pageY: 0, ctrlKey: 0, shiftKey: 0, altKey: 0, metaKey: 0, getModifierState: zd, button: 0, buttons: 0, relatedTarget: function(a) {
    return void 0 === a.relatedTarget ? a.fromElement === a.srcElement ? a.toElement : a.fromElement : a.relatedTarget;
  }, movementX: function(a) {
    if ("movementX" in a)
      return a.movementX;
    a !== yd && (yd && "mousemove" === a.type ? (wd = a.screenX - yd.screenX, xd = a.screenY - yd.screenY) : xd = wd = 0, yd = a);
    return wd;
  }, movementY: function(a) {
    return "movementY" in a ? a.movementY : xd;
  } }), Bd = rd(Ad), Cd = m$1({}, Ad, { dataTransfer: 0 }), Dd = rd(Cd), Ed = m$1({}, ud, { relatedTarget: 0 }), Fd = rd(Ed), Gd = m$1({}, sd, { animationName: 0, elapsedTime: 0, pseudoElement: 0 }), Hd = rd(Gd), Id = m$1({}, sd, { clipboardData: function(a) {
    return "clipboardData" in a ? a.clipboardData : window.clipboardData;
  } }), Jd = rd(Id), Kd = m$1({}, sd, { data: 0 }), Ld = rd(Kd), Md = {
    Esc: "Escape",
    Spacebar: " ",
    Left: "ArrowLeft",
    Up: "ArrowUp",
    Right: "ArrowRight",
    Down: "ArrowDown",
    Del: "Delete",
    Win: "OS",
    Menu: "ContextMenu",
    Apps: "ContextMenu",
    Scroll: "ScrollLock",
    MozPrintableKey: "Unidentified"
  }, Nd = {
    8: "Backspace",
    9: "Tab",
    12: "Clear",
    13: "Enter",
    16: "Shift",
    17: "Control",
    18: "Alt",
    19: "Pause",
    20: "CapsLock",
    27: "Escape",
    32: " ",
    33: "PageUp",
    34: "PageDown",
    35: "End",
    36: "Home",
    37: "ArrowLeft",
    38: "ArrowUp",
    39: "ArrowRight",
    40: "ArrowDown",
    45: "Insert",
    46: "Delete",
    112: "F1",
    113: "F2",
    114: "F3",
    115: "F4",
    116: "F5",
    117: "F6",
    118: "F7",
    119: "F8",
    120: "F9",
    121: "F10",
    122: "F11",
    123: "F12",
    144: "NumLock",
    145: "ScrollLock",
    224: "Meta"
  }, Od = { Alt: "altKey", Control: "ctrlKey", Meta: "metaKey", Shift: "shiftKey" };
  function Pd(a) {
    var b = this.nativeEvent;
    return b.getModifierState ? b.getModifierState(a) : (a = Od[a]) ? !!b[a] : false;
  }
  function zd() {
    return Pd;
  }
  var Qd = m$1({}, ud, { key: function(a) {
    if (a.key) {
      var b = Md[a.key] || a.key;
      if ("Unidentified" !== b)
        return b;
    }
    return "keypress" === a.type ? (a = od(a), 13 === a ? "Enter" : String.fromCharCode(a)) : "keydown" === a.type || "keyup" === a.type ? Nd[a.keyCode] || "Unidentified" : "";
  }, code: 0, location: 0, ctrlKey: 0, shiftKey: 0, altKey: 0, metaKey: 0, repeat: 0, locale: 0, getModifierState: zd, charCode: function(a) {
    return "keypress" === a.type ? od(a) : 0;
  }, keyCode: function(a) {
    return "keydown" === a.type || "keyup" === a.type ? a.keyCode : 0;
  }, which: function(a) {
    return "keypress" === a.type ? od(a) : "keydown" === a.type || "keyup" === a.type ? a.keyCode : 0;
  } }), Rd = rd(Qd), Sd = m$1({}, Ad, { pointerId: 0, width: 0, height: 0, pressure: 0, tangentialPressure: 0, tiltX: 0, tiltY: 0, twist: 0, pointerType: 0, isPrimary: 0 }), Td = rd(Sd), Ud = m$1({}, ud, { touches: 0, targetTouches: 0, changedTouches: 0, altKey: 0, metaKey: 0, ctrlKey: 0, shiftKey: 0, getModifierState: zd }), Vd = rd(Ud), Wd = m$1({}, sd, { propertyName: 0, elapsedTime: 0, pseudoElement: 0 }), Xd = rd(Wd), Yd = m$1({}, Ad, {
    deltaX: function(a) {
      return "deltaX" in a ? a.deltaX : "wheelDeltaX" in a ? -a.wheelDeltaX : 0;
    },
    deltaY: function(a) {
      return "deltaY" in a ? a.deltaY : "wheelDeltaY" in a ? -a.wheelDeltaY : "wheelDelta" in a ? -a.wheelDelta : 0;
    },
    deltaZ: 0,
    deltaMode: 0
  }), Zd = rd(Yd), $d = [9, 13, 27, 32], ae = fa && "CompositionEvent" in window, be = null;
  fa && "documentMode" in document && (be = document.documentMode);
  var ce = fa && "TextEvent" in window && !be, de = fa && (!ae || be && 8 < be && 11 >= be), ee = String.fromCharCode(32), fe = false;
  function ge(a, b) {
    switch (a) {
      case "keyup":
        return -1 !== $d.indexOf(b.keyCode);
      case "keydown":
        return 229 !== b.keyCode;
      case "keypress":
      case "mousedown":
      case "focusout":
        return true;
      default:
        return false;
    }
  }
  function he(a) {
    a = a.detail;
    return "object" === typeof a && "data" in a ? a.data : null;
  }
  var ie = false;
  function je(a, b) {
    switch (a) {
      case "compositionend":
        return he(b);
      case "keypress":
        if (32 !== b.which)
          return null;
        fe = true;
        return ee;
      case "textInput":
        return a = b.data, a === ee && fe ? null : a;
      default:
        return null;
    }
  }
  function ke(a, b) {
    if (ie)
      return "compositionend" === a || !ae && ge(a, b) ? (a = nd(), md = ld = kd = null, ie = false, a) : null;
    switch (a) {
      case "paste":
        return null;
      case "keypress":
        if (!(b.ctrlKey || b.altKey || b.metaKey) || b.ctrlKey && b.altKey) {
          if (b.char && 1 < b.char.length)
            return b.char;
          if (b.which)
            return String.fromCharCode(b.which);
        }
        return null;
      case "compositionend":
        return de && "ko" !== b.locale ? null : b.data;
      default:
        return null;
    }
  }
  var le = { color: true, date: true, datetime: true, "datetime-local": true, email: true, month: true, number: true, password: true, range: true, search: true, tel: true, text: true, time: true, url: true, week: true };
  function me(a) {
    var b = a && a.nodeName && a.nodeName.toLowerCase();
    return "input" === b ? !!le[a.type] : "textarea" === b ? true : false;
  }
  function ne(a, b, c, d) {
    Eb(d);
    b = oe(b, "onChange");
    0 < b.length && (c = new td("onChange", "change", null, c, d), a.push({ event: c, listeners: b }));
  }
  var pe = null, qe = null;
  function re(a) {
    se(a, 0);
  }
  function te(a) {
    var b = ue(a);
    if (Wa(b))
      return a;
  }
  function ve(a, b) {
    if ("change" === a)
      return b;
  }
  var we = false;
  if (fa) {
    var xe;
    if (fa) {
      var ye = "oninput" in document;
      if (!ye) {
        var ze = document.createElement("div");
        ze.setAttribute("oninput", "return;");
        ye = "function" === typeof ze.oninput;
      }
      xe = ye;
    } else
      xe = false;
    we = xe && (!document.documentMode || 9 < document.documentMode);
  }
  function Ae() {
    pe && (pe.detachEvent("onpropertychange", Be), qe = pe = null);
  }
  function Be(a) {
    if ("value" === a.propertyName && te(qe)) {
      var b = [];
      ne(b, qe, a, xb(a));
      a = re;
      if (Kb)
        a(b);
      else {
        Kb = true;
        try {
          Gb(a, b);
        } finally {
          Kb = false, Mb();
        }
      }
    }
  }
  function Ce(a, b, c) {
    "focusin" === a ? (Ae(), pe = b, qe = c, pe.attachEvent("onpropertychange", Be)) : "focusout" === a && Ae();
  }
  function De(a) {
    if ("selectionchange" === a || "keyup" === a || "keydown" === a)
      return te(qe);
  }
  function Ee(a, b) {
    if ("click" === a)
      return te(b);
  }
  function Fe(a, b) {
    if ("input" === a || "change" === a)
      return te(b);
  }
  function Ge(a, b) {
    return a === b && (0 !== a || 1 / a === 1 / b) || a !== a && b !== b;
  }
  var He = "function" === typeof Object.is ? Object.is : Ge, Ie = Object.prototype.hasOwnProperty;
  function Je(a, b) {
    if (He(a, b))
      return true;
    if ("object" !== typeof a || null === a || "object" !== typeof b || null === b)
      return false;
    var c = Object.keys(a), d = Object.keys(b);
    if (c.length !== d.length)
      return false;
    for (d = 0; d < c.length; d++)
      if (!Ie.call(b, c[d]) || !He(a[c[d]], b[c[d]]))
        return false;
    return true;
  }
  function Ke(a) {
    for (; a && a.firstChild; )
      a = a.firstChild;
    return a;
  }
  function Le(a, b) {
    var c = Ke(a);
    a = 0;
    for (var d; c; ) {
      if (3 === c.nodeType) {
        d = a + c.textContent.length;
        if (a <= b && d >= b)
          return { node: c, offset: b - a };
        a = d;
      }
      a: {
        for (; c; ) {
          if (c.nextSibling) {
            c = c.nextSibling;
            break a;
          }
          c = c.parentNode;
        }
        c = void 0;
      }
      c = Ke(c);
    }
  }
  function Me(a, b) {
    return a && b ? a === b ? true : a && 3 === a.nodeType ? false : b && 3 === b.nodeType ? Me(a, b.parentNode) : "contains" in a ? a.contains(b) : a.compareDocumentPosition ? !!(a.compareDocumentPosition(b) & 16) : false : false;
  }
  function Ne() {
    for (var a = window, b = Xa(); b instanceof a.HTMLIFrameElement; ) {
      try {
        var c = "string" === typeof b.contentWindow.location.href;
      } catch (d) {
        c = false;
      }
      if (c)
        a = b.contentWindow;
      else
        break;
      b = Xa(a.document);
    }
    return b;
  }
  function Oe(a) {
    var b = a && a.nodeName && a.nodeName.toLowerCase();
    return b && ("input" === b && ("text" === a.type || "search" === a.type || "tel" === a.type || "url" === a.type || "password" === a.type) || "textarea" === b || "true" === a.contentEditable);
  }
  var Pe = fa && "documentMode" in document && 11 >= document.documentMode, Qe = null, Re = null, Se = null, Te = false;
  function Ue(a, b, c) {
    var d = c.window === c ? c.document : 9 === c.nodeType ? c : c.ownerDocument;
    Te || null == Qe || Qe !== Xa(d) || (d = Qe, "selectionStart" in d && Oe(d) ? d = { start: d.selectionStart, end: d.selectionEnd } : (d = (d.ownerDocument && d.ownerDocument.defaultView || window).getSelection(), d = { anchorNode: d.anchorNode, anchorOffset: d.anchorOffset, focusNode: d.focusNode, focusOffset: d.focusOffset }), Se && Je(Se, d) || (Se = d, d = oe(Re, "onSelect"), 0 < d.length && (b = new td("onSelect", "select", null, b, c), a.push({ event: b, listeners: d }), b.target = Qe)));
  }
  Pc(
    "cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),
    0
  );
  Pc("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "), 1);
  Pc(Oc, 2);
  for (var Ve = "change selectionchange textInput compositionstart compositionend compositionupdate".split(" "), We = 0; We < Ve.length; We++)
    Nc.set(Ve[We], 0);
  ea("onMouseEnter", ["mouseout", "mouseover"]);
  ea("onMouseLeave", ["mouseout", "mouseover"]);
  ea("onPointerEnter", ["pointerout", "pointerover"]);
  ea("onPointerLeave", ["pointerout", "pointerover"]);
  da("onChange", "change click focusin focusout input keydown keyup selectionchange".split(" "));
  da("onSelect", "focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));
  da("onBeforeInput", ["compositionend", "keypress", "textInput", "paste"]);
  da("onCompositionEnd", "compositionend focusout keydown keypress keyup mousedown".split(" "));
  da("onCompositionStart", "compositionstart focusout keydown keypress keyup mousedown".split(" "));
  da("onCompositionUpdate", "compositionupdate focusout keydown keypress keyup mousedown".split(" "));
  var Xe = "abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "), Ye = new Set("cancel close invalid load scroll toggle".split(" ").concat(Xe));
  function Ze(a, b, c) {
    var d = a.type || "unknown-event";
    a.currentTarget = c;
    Yb(d, b, void 0, a);
    a.currentTarget = null;
  }
  function se(a, b) {
    b = 0 !== (b & 4);
    for (var c = 0; c < a.length; c++) {
      var d = a[c], e = d.event;
      d = d.listeners;
      a: {
        var f2 = void 0;
        if (b)
          for (var g2 = d.length - 1; 0 <= g2; g2--) {
            var h2 = d[g2], k = h2.instance, l2 = h2.currentTarget;
            h2 = h2.listener;
            if (k !== f2 && e.isPropagationStopped())
              break a;
            Ze(e, h2, l2);
            f2 = k;
          }
        else
          for (g2 = 0; g2 < d.length; g2++) {
            h2 = d[g2];
            k = h2.instance;
            l2 = h2.currentTarget;
            h2 = h2.listener;
            if (k !== f2 && e.isPropagationStopped())
              break a;
            Ze(e, h2, l2);
            f2 = k;
          }
      }
    }
    if (Ub)
      throw a = Vb, Ub = false, Vb = null, a;
  }
  function G(a, b) {
    var c = $e(b), d = a + "__bubble";
    c.has(d) || (af(b, a, 2, false), c.add(d));
  }
  var bf = "_reactListening" + Math.random().toString(36).slice(2);
  function cf(a) {
    a[bf] || (a[bf] = true, ba.forEach(function(b) {
      Ye.has(b) || df(b, false, a, null);
      df(b, true, a, null);
    }));
  }
  function df(a, b, c, d) {
    var e = 4 < arguments.length && void 0 !== arguments[4] ? arguments[4] : 0, f2 = c;
    "selectionchange" === a && 9 !== c.nodeType && (f2 = c.ownerDocument);
    if (null !== d && !b && Ye.has(a)) {
      if ("scroll" !== a)
        return;
      e |= 2;
      f2 = d;
    }
    var g2 = $e(f2), h2 = a + "__" + (b ? "capture" : "bubble");
    g2.has(h2) || (b && (e |= 4), af(f2, a, e, b), g2.add(h2));
  }
  function af(a, b, c, d) {
    var e = Nc.get(b);
    switch (void 0 === e ? 2 : e) {
      case 0:
        e = gd;
        break;
      case 1:
        e = id;
        break;
      default:
        e = hd;
    }
    c = e.bind(null, b, c, a);
    e = void 0;
    !Pb || "touchstart" !== b && "touchmove" !== b && "wheel" !== b || (e = true);
    d ? void 0 !== e ? a.addEventListener(b, c, { capture: true, passive: e }) : a.addEventListener(b, c, true) : void 0 !== e ? a.addEventListener(b, c, { passive: e }) : a.addEventListener(b, c, false);
  }
  function jd(a, b, c, d, e) {
    var f2 = d;
    if (0 === (b & 1) && 0 === (b & 2) && null !== d)
      a:
        for (; ; ) {
          if (null === d)
            return;
          var g2 = d.tag;
          if (3 === g2 || 4 === g2) {
            var h2 = d.stateNode.containerInfo;
            if (h2 === e || 8 === h2.nodeType && h2.parentNode === e)
              break;
            if (4 === g2)
              for (g2 = d.return; null !== g2; ) {
                var k = g2.tag;
                if (3 === k || 4 === k) {
                  if (k = g2.stateNode.containerInfo, k === e || 8 === k.nodeType && k.parentNode === e)
                    return;
                }
                g2 = g2.return;
              }
            for (; null !== h2; ) {
              g2 = wc(h2);
              if (null === g2)
                return;
              k = g2.tag;
              if (5 === k || 6 === k) {
                d = f2 = g2;
                continue a;
              }
              h2 = h2.parentNode;
            }
          }
          d = d.return;
        }
    Nb(function() {
      var d2 = f2, e2 = xb(c), g3 = [];
      a: {
        var h3 = Mc.get(a);
        if (void 0 !== h3) {
          var k2 = td, x2 = a;
          switch (a) {
            case "keypress":
              if (0 === od(c))
                break a;
            case "keydown":
            case "keyup":
              k2 = Rd;
              break;
            case "focusin":
              x2 = "focus";
              k2 = Fd;
              break;
            case "focusout":
              x2 = "blur";
              k2 = Fd;
              break;
            case "beforeblur":
            case "afterblur":
              k2 = Fd;
              break;
            case "click":
              if (2 === c.button)
                break a;
            case "auxclick":
            case "dblclick":
            case "mousedown":
            case "mousemove":
            case "mouseup":
            case "mouseout":
            case "mouseover":
            case "contextmenu":
              k2 = Bd;
              break;
            case "drag":
            case "dragend":
            case "dragenter":
            case "dragexit":
            case "dragleave":
            case "dragover":
            case "dragstart":
            case "drop":
              k2 = Dd;
              break;
            case "touchcancel":
            case "touchend":
            case "touchmove":
            case "touchstart":
              k2 = Vd;
              break;
            case Ic:
            case Jc:
            case Kc:
              k2 = Hd;
              break;
            case Lc:
              k2 = Xd;
              break;
            case "scroll":
              k2 = vd;
              break;
            case "wheel":
              k2 = Zd;
              break;
            case "copy":
            case "cut":
            case "paste":
              k2 = Jd;
              break;
            case "gotpointercapture":
            case "lostpointercapture":
            case "pointercancel":
            case "pointerdown":
            case "pointermove":
            case "pointerout":
            case "pointerover":
            case "pointerup":
              k2 = Td;
          }
          var w2 = 0 !== (b & 4), z2 = !w2 && "scroll" === a, u2 = w2 ? null !== h3 ? h3 + "Capture" : null : h3;
          w2 = [];
          for (var t2 = d2, q2; null !== t2; ) {
            q2 = t2;
            var v2 = q2.stateNode;
            5 === q2.tag && null !== v2 && (q2 = v2, null !== u2 && (v2 = Ob(t2, u2), null != v2 && w2.push(ef(t2, v2, q2))));
            if (z2)
              break;
            t2 = t2.return;
          }
          0 < w2.length && (h3 = new k2(h3, x2, null, c, e2), g3.push({ event: h3, listeners: w2 }));
        }
      }
      if (0 === (b & 7)) {
        a: {
          h3 = "mouseover" === a || "pointerover" === a;
          k2 = "mouseout" === a || "pointerout" === a;
          if (h3 && 0 === (b & 16) && (x2 = c.relatedTarget || c.fromElement) && (wc(x2) || x2[ff]))
            break a;
          if (k2 || h3) {
            h3 = e2.window === e2 ? e2 : (h3 = e2.ownerDocument) ? h3.defaultView || h3.parentWindow : window;
            if (k2) {
              if (x2 = c.relatedTarget || c.toElement, k2 = d2, x2 = x2 ? wc(x2) : null, null !== x2 && (z2 = Zb(x2), x2 !== z2 || 5 !== x2.tag && 6 !== x2.tag))
                x2 = null;
            } else
              k2 = null, x2 = d2;
            if (k2 !== x2) {
              w2 = Bd;
              v2 = "onMouseLeave";
              u2 = "onMouseEnter";
              t2 = "mouse";
              if ("pointerout" === a || "pointerover" === a)
                w2 = Td, v2 = "onPointerLeave", u2 = "onPointerEnter", t2 = "pointer";
              z2 = null == k2 ? h3 : ue(k2);
              q2 = null == x2 ? h3 : ue(x2);
              h3 = new w2(v2, t2 + "leave", k2, c, e2);
              h3.target = z2;
              h3.relatedTarget = q2;
              v2 = null;
              wc(e2) === d2 && (w2 = new w2(u2, t2 + "enter", x2, c, e2), w2.target = q2, w2.relatedTarget = z2, v2 = w2);
              z2 = v2;
              if (k2 && x2)
                b: {
                  w2 = k2;
                  u2 = x2;
                  t2 = 0;
                  for (q2 = w2; q2; q2 = gf(q2))
                    t2++;
                  q2 = 0;
                  for (v2 = u2; v2; v2 = gf(v2))
                    q2++;
                  for (; 0 < t2 - q2; )
                    w2 = gf(w2), t2--;
                  for (; 0 < q2 - t2; )
                    u2 = gf(u2), q2--;
                  for (; t2--; ) {
                    if (w2 === u2 || null !== u2 && w2 === u2.alternate)
                      break b;
                    w2 = gf(w2);
                    u2 = gf(u2);
                  }
                  w2 = null;
                }
              else
                w2 = null;
              null !== k2 && hf(g3, h3, k2, w2, false);
              null !== x2 && null !== z2 && hf(g3, z2, x2, w2, true);
            }
          }
        }
        a: {
          h3 = d2 ? ue(d2) : window;
          k2 = h3.nodeName && h3.nodeName.toLowerCase();
          if ("select" === k2 || "input" === k2 && "file" === h3.type)
            var J2 = ve;
          else if (me(h3))
            if (we)
              J2 = Fe;
            else {
              J2 = De;
              var K2 = Ce;
            }
          else
            (k2 = h3.nodeName) && "input" === k2.toLowerCase() && ("checkbox" === h3.type || "radio" === h3.type) && (J2 = Ee);
          if (J2 && (J2 = J2(a, d2))) {
            ne(g3, J2, c, e2);
            break a;
          }
          K2 && K2(a, h3, d2);
          "focusout" === a && (K2 = h3._wrapperState) && K2.controlled && "number" === h3.type && bb(h3, "number", h3.value);
        }
        K2 = d2 ? ue(d2) : window;
        switch (a) {
          case "focusin":
            if (me(K2) || "true" === K2.contentEditable)
              Qe = K2, Re = d2, Se = null;
            break;
          case "focusout":
            Se = Re = Qe = null;
            break;
          case "mousedown":
            Te = true;
            break;
          case "contextmenu":
          case "mouseup":
          case "dragend":
            Te = false;
            Ue(g3, c, e2);
            break;
          case "selectionchange":
            if (Pe)
              break;
          case "keydown":
          case "keyup":
            Ue(g3, c, e2);
        }
        var Q2;
        if (ae)
          b: {
            switch (a) {
              case "compositionstart":
                var L2 = "onCompositionStart";
                break b;
              case "compositionend":
                L2 = "onCompositionEnd";
                break b;
              case "compositionupdate":
                L2 = "onCompositionUpdate";
                break b;
            }
            L2 = void 0;
          }
        else
          ie ? ge(a, c) && (L2 = "onCompositionEnd") : "keydown" === a && 229 === c.keyCode && (L2 = "onCompositionStart");
        L2 && (de && "ko" !== c.locale && (ie || "onCompositionStart" !== L2 ? "onCompositionEnd" === L2 && ie && (Q2 = nd()) : (kd = e2, ld = "value" in kd ? kd.value : kd.textContent, ie = true)), K2 = oe(d2, L2), 0 < K2.length && (L2 = new Ld(L2, a, null, c, e2), g3.push({ event: L2, listeners: K2 }), Q2 ? L2.data = Q2 : (Q2 = he(c), null !== Q2 && (L2.data = Q2))));
        if (Q2 = ce ? je(a, c) : ke(a, c))
          d2 = oe(d2, "onBeforeInput"), 0 < d2.length && (e2 = new Ld(
            "onBeforeInput",
            "beforeinput",
            null,
            c,
            e2
          ), g3.push({ event: e2, listeners: d2 }), e2.data = Q2);
      }
      se(g3, b);
    });
  }
  function ef(a, b, c) {
    return { instance: a, listener: b, currentTarget: c };
  }
  function oe(a, b) {
    for (var c = b + "Capture", d = []; null !== a; ) {
      var e = a, f2 = e.stateNode;
      5 === e.tag && null !== f2 && (e = f2, f2 = Ob(a, c), null != f2 && d.unshift(ef(a, f2, e)), f2 = Ob(a, b), null != f2 && d.push(ef(a, f2, e)));
      a = a.return;
    }
    return d;
  }
  function gf(a) {
    if (null === a)
      return null;
    do
      a = a.return;
    while (a && 5 !== a.tag);
    return a ? a : null;
  }
  function hf(a, b, c, d, e) {
    for (var f2 = b._reactName, g2 = []; null !== c && c !== d; ) {
      var h2 = c, k = h2.alternate, l2 = h2.stateNode;
      if (null !== k && k === d)
        break;
      5 === h2.tag && null !== l2 && (h2 = l2, e ? (k = Ob(c, f2), null != k && g2.unshift(ef(c, k, h2))) : e || (k = Ob(c, f2), null != k && g2.push(ef(c, k, h2))));
      c = c.return;
    }
    0 !== g2.length && a.push({ event: b, listeners: g2 });
  }
  function jf() {
  }
  var kf = null, lf = null;
  function mf(a, b) {
    switch (a) {
      case "button":
      case "input":
      case "select":
      case "textarea":
        return !!b.autoFocus;
    }
    return false;
  }
  function nf(a, b) {
    return "textarea" === a || "option" === a || "noscript" === a || "string" === typeof b.children || "number" === typeof b.children || "object" === typeof b.dangerouslySetInnerHTML && null !== b.dangerouslySetInnerHTML && null != b.dangerouslySetInnerHTML.__html;
  }
  var of = "function" === typeof setTimeout ? setTimeout : void 0, pf = "function" === typeof clearTimeout ? clearTimeout : void 0;
  function qf(a) {
    1 === a.nodeType ? a.textContent = "" : 9 === a.nodeType && (a = a.body, null != a && (a.textContent = ""));
  }
  function rf(a) {
    for (; null != a; a = a.nextSibling) {
      var b = a.nodeType;
      if (1 === b || 3 === b)
        break;
    }
    return a;
  }
  function sf(a) {
    a = a.previousSibling;
    for (var b = 0; a; ) {
      if (8 === a.nodeType) {
        var c = a.data;
        if ("$" === c || "$!" === c || "$?" === c) {
          if (0 === b)
            return a;
          b--;
        } else
          "/$" === c && b++;
      }
      a = a.previousSibling;
    }
    return null;
  }
  var tf = 0;
  function uf(a) {
    return { $$typeof: Ga, toString: a, valueOf: a };
  }
  var vf = Math.random().toString(36).slice(2), wf = "__reactFiber$" + vf, xf = "__reactProps$" + vf, ff = "__reactContainer$" + vf, yf = "__reactEvents$" + vf;
  function wc(a) {
    var b = a[wf];
    if (b)
      return b;
    for (var c = a.parentNode; c; ) {
      if (b = c[ff] || c[wf]) {
        c = b.alternate;
        if (null !== b.child || null !== c && null !== c.child)
          for (a = sf(a); null !== a; ) {
            if (c = a[wf])
              return c;
            a = sf(a);
          }
        return b;
      }
      a = c;
      c = a.parentNode;
    }
    return null;
  }
  function Cb(a) {
    a = a[wf] || a[ff];
    return !a || 5 !== a.tag && 6 !== a.tag && 13 !== a.tag && 3 !== a.tag ? null : a;
  }
  function ue(a) {
    if (5 === a.tag || 6 === a.tag)
      return a.stateNode;
    throw Error(y(33));
  }
  function Db(a) {
    return a[xf] || null;
  }
  function $e(a) {
    var b = a[yf];
    void 0 === b && (b = a[yf] = /* @__PURE__ */ new Set());
    return b;
  }
  var zf = [], Af = -1;
  function Bf(a) {
    return { current: a };
  }
  function H(a) {
    0 > Af || (a.current = zf[Af], zf[Af] = null, Af--);
  }
  function I(a, b) {
    Af++;
    zf[Af] = a.current;
    a.current = b;
  }
  var Cf = {}, M = Bf(Cf), N = Bf(false), Df = Cf;
  function Ef(a, b) {
    var c = a.type.contextTypes;
    if (!c)
      return Cf;
    var d = a.stateNode;
    if (d && d.__reactInternalMemoizedUnmaskedChildContext === b)
      return d.__reactInternalMemoizedMaskedChildContext;
    var e = {}, f2;
    for (f2 in c)
      e[f2] = b[f2];
    d && (a = a.stateNode, a.__reactInternalMemoizedUnmaskedChildContext = b, a.__reactInternalMemoizedMaskedChildContext = e);
    return e;
  }
  function Ff(a) {
    a = a.childContextTypes;
    return null !== a && void 0 !== a;
  }
  function Gf() {
    H(N);
    H(M);
  }
  function Hf(a, b, c) {
    if (M.current !== Cf)
      throw Error(y(168));
    I(M, b);
    I(N, c);
  }
  function If(a, b, c) {
    var d = a.stateNode;
    a = b.childContextTypes;
    if ("function" !== typeof d.getChildContext)
      return c;
    d = d.getChildContext();
    for (var e in d)
      if (!(e in a))
        throw Error(y(108, Ra(b) || "Unknown", e));
    return m$1({}, c, d);
  }
  function Jf(a) {
    a = (a = a.stateNode) && a.__reactInternalMemoizedMergedChildContext || Cf;
    Df = M.current;
    I(M, a);
    I(N, N.current);
    return true;
  }
  function Kf(a, b, c) {
    var d = a.stateNode;
    if (!d)
      throw Error(y(169));
    c ? (a = If(a, b, Df), d.__reactInternalMemoizedMergedChildContext = a, H(N), H(M), I(M, a)) : H(N);
    I(N, c);
  }
  var Lf = null, Mf = null, Nf = r.unstable_runWithPriority, Of = r.unstable_scheduleCallback, Pf = r.unstable_cancelCallback, Qf = r.unstable_shouldYield, Rf = r.unstable_requestPaint, Sf = r.unstable_now, Tf = r.unstable_getCurrentPriorityLevel, Uf = r.unstable_ImmediatePriority, Vf = r.unstable_UserBlockingPriority, Wf = r.unstable_NormalPriority, Xf = r.unstable_LowPriority, Yf = r.unstable_IdlePriority, Zf = {}, $f = void 0 !== Rf ? Rf : function() {
  }, ag = null, bg = null, cg = false, dg = Sf(), O = 1e4 > dg ? Sf : function() {
    return Sf() - dg;
  };
  function eg() {
    switch (Tf()) {
      case Uf:
        return 99;
      case Vf:
        return 98;
      case Wf:
        return 97;
      case Xf:
        return 96;
      case Yf:
        return 95;
      default:
        throw Error(y(332));
    }
  }
  function fg(a) {
    switch (a) {
      case 99:
        return Uf;
      case 98:
        return Vf;
      case 97:
        return Wf;
      case 96:
        return Xf;
      case 95:
        return Yf;
      default:
        throw Error(y(332));
    }
  }
  function gg(a, b) {
    a = fg(a);
    return Nf(a, b);
  }
  function hg(a, b, c) {
    a = fg(a);
    return Of(a, b, c);
  }
  function ig() {
    if (null !== bg) {
      var a = bg;
      bg = null;
      Pf(a);
    }
    jg();
  }
  function jg() {
    if (!cg && null !== ag) {
      cg = true;
      var a = 0;
      try {
        var b = ag;
        gg(99, function() {
          for (; a < b.length; a++) {
            var c = b[a];
            do
              c = c(true);
            while (null !== c);
          }
        });
        ag = null;
      } catch (c) {
        throw null !== ag && (ag = ag.slice(a + 1)), Of(Uf, ig), c;
      } finally {
        cg = false;
      }
    }
  }
  var kg = ra.ReactCurrentBatchConfig;
  function lg(a, b) {
    if (a && a.defaultProps) {
      b = m$1({}, b);
      a = a.defaultProps;
      for (var c in a)
        void 0 === b[c] && (b[c] = a[c]);
      return b;
    }
    return b;
  }
  var mg = Bf(null), ng = null, og = null, pg = null;
  function qg() {
    pg = og = ng = null;
  }
  function rg(a) {
    var b = mg.current;
    H(mg);
    a.type._context._currentValue = b;
  }
  function sg(a, b) {
    for (; null !== a; ) {
      var c = a.alternate;
      if ((a.childLanes & b) === b)
        if (null === c || (c.childLanes & b) === b)
          break;
        else
          c.childLanes |= b;
      else
        a.childLanes |= b, null !== c && (c.childLanes |= b);
      a = a.return;
    }
  }
  function tg(a, b) {
    ng = a;
    pg = og = null;
    a = a.dependencies;
    null !== a && null !== a.firstContext && (0 !== (a.lanes & b) && (ug = true), a.firstContext = null);
  }
  function vg(a, b) {
    if (pg !== a && false !== b && 0 !== b) {
      if ("number" !== typeof b || 1073741823 === b)
        pg = a, b = 1073741823;
      b = { context: a, observedBits: b, next: null };
      if (null === og) {
        if (null === ng)
          throw Error(y(308));
        og = b;
        ng.dependencies = { lanes: 0, firstContext: b, responders: null };
      } else
        og = og.next = b;
    }
    return a._currentValue;
  }
  var wg = false;
  function xg(a) {
    a.updateQueue = { baseState: a.memoizedState, firstBaseUpdate: null, lastBaseUpdate: null, shared: { pending: null }, effects: null };
  }
  function yg(a, b) {
    a = a.updateQueue;
    b.updateQueue === a && (b.updateQueue = { baseState: a.baseState, firstBaseUpdate: a.firstBaseUpdate, lastBaseUpdate: a.lastBaseUpdate, shared: a.shared, effects: a.effects });
  }
  function zg(a, b) {
    return { eventTime: a, lane: b, tag: 0, payload: null, callback: null, next: null };
  }
  function Ag(a, b) {
    a = a.updateQueue;
    if (null !== a) {
      a = a.shared;
      var c = a.pending;
      null === c ? b.next = b : (b.next = c.next, c.next = b);
      a.pending = b;
    }
  }
  function Bg(a, b) {
    var c = a.updateQueue, d = a.alternate;
    if (null !== d && (d = d.updateQueue, c === d)) {
      var e = null, f2 = null;
      c = c.firstBaseUpdate;
      if (null !== c) {
        do {
          var g2 = { eventTime: c.eventTime, lane: c.lane, tag: c.tag, payload: c.payload, callback: c.callback, next: null };
          null === f2 ? e = f2 = g2 : f2 = f2.next = g2;
          c = c.next;
        } while (null !== c);
        null === f2 ? e = f2 = b : f2 = f2.next = b;
      } else
        e = f2 = b;
      c = { baseState: d.baseState, firstBaseUpdate: e, lastBaseUpdate: f2, shared: d.shared, effects: d.effects };
      a.updateQueue = c;
      return;
    }
    a = c.lastBaseUpdate;
    null === a ? c.firstBaseUpdate = b : a.next = b;
    c.lastBaseUpdate = b;
  }
  function Cg(a, b, c, d) {
    var e = a.updateQueue;
    wg = false;
    var f2 = e.firstBaseUpdate, g2 = e.lastBaseUpdate, h2 = e.shared.pending;
    if (null !== h2) {
      e.shared.pending = null;
      var k = h2, l2 = k.next;
      k.next = null;
      null === g2 ? f2 = l2 : g2.next = l2;
      g2 = k;
      var n2 = a.alternate;
      if (null !== n2) {
        n2 = n2.updateQueue;
        var A2 = n2.lastBaseUpdate;
        A2 !== g2 && (null === A2 ? n2.firstBaseUpdate = l2 : A2.next = l2, n2.lastBaseUpdate = k);
      }
    }
    if (null !== f2) {
      A2 = e.baseState;
      g2 = 0;
      n2 = l2 = k = null;
      do {
        h2 = f2.lane;
        var p2 = f2.eventTime;
        if ((d & h2) === h2) {
          null !== n2 && (n2 = n2.next = {
            eventTime: p2,
            lane: 0,
            tag: f2.tag,
            payload: f2.payload,
            callback: f2.callback,
            next: null
          });
          a: {
            var C2 = a, x2 = f2;
            h2 = b;
            p2 = c;
            switch (x2.tag) {
              case 1:
                C2 = x2.payload;
                if ("function" === typeof C2) {
                  A2 = C2.call(p2, A2, h2);
                  break a;
                }
                A2 = C2;
                break a;
              case 3:
                C2.flags = C2.flags & -4097 | 64;
              case 0:
                C2 = x2.payload;
                h2 = "function" === typeof C2 ? C2.call(p2, A2, h2) : C2;
                if (null === h2 || void 0 === h2)
                  break a;
                A2 = m$1({}, A2, h2);
                break a;
              case 2:
                wg = true;
            }
          }
          null !== f2.callback && (a.flags |= 32, h2 = e.effects, null === h2 ? e.effects = [f2] : h2.push(f2));
        } else
          p2 = { eventTime: p2, lane: h2, tag: f2.tag, payload: f2.payload, callback: f2.callback, next: null }, null === n2 ? (l2 = n2 = p2, k = A2) : n2 = n2.next = p2, g2 |= h2;
        f2 = f2.next;
        if (null === f2)
          if (h2 = e.shared.pending, null === h2)
            break;
          else
            f2 = h2.next, h2.next = null, e.lastBaseUpdate = h2, e.shared.pending = null;
      } while (1);
      null === n2 && (k = A2);
      e.baseState = k;
      e.firstBaseUpdate = l2;
      e.lastBaseUpdate = n2;
      Dg |= g2;
      a.lanes = g2;
      a.memoizedState = A2;
    }
  }
  function Eg(a, b, c) {
    a = b.effects;
    b.effects = null;
    if (null !== a)
      for (b = 0; b < a.length; b++) {
        var d = a[b], e = d.callback;
        if (null !== e) {
          d.callback = null;
          d = c;
          if ("function" !== typeof e)
            throw Error(y(191, e));
          e.call(d);
        }
      }
  }
  var Fg = new aa.Component().refs;
  function Gg(a, b, c, d) {
    b = a.memoizedState;
    c = c(d, b);
    c = null === c || void 0 === c ? b : m$1({}, b, c);
    a.memoizedState = c;
    0 === a.lanes && (a.updateQueue.baseState = c);
  }
  var Kg = { isMounted: function(a) {
    return (a = a._reactInternals) ? Zb(a) === a : false;
  }, enqueueSetState: function(a, b, c) {
    a = a._reactInternals;
    var d = Hg(), e = Ig(a), f2 = zg(d, e);
    f2.payload = b;
    void 0 !== c && null !== c && (f2.callback = c);
    Ag(a, f2);
    Jg(a, e, d);
  }, enqueueReplaceState: function(a, b, c) {
    a = a._reactInternals;
    var d = Hg(), e = Ig(a), f2 = zg(d, e);
    f2.tag = 1;
    f2.payload = b;
    void 0 !== c && null !== c && (f2.callback = c);
    Ag(a, f2);
    Jg(a, e, d);
  }, enqueueForceUpdate: function(a, b) {
    a = a._reactInternals;
    var c = Hg(), d = Ig(a), e = zg(c, d);
    e.tag = 2;
    void 0 !== b && null !== b && (e.callback = b);
    Ag(a, e);
    Jg(a, d, c);
  } };
  function Lg(a, b, c, d, e, f2, g2) {
    a = a.stateNode;
    return "function" === typeof a.shouldComponentUpdate ? a.shouldComponentUpdate(d, f2, g2) : b.prototype && b.prototype.isPureReactComponent ? !Je(c, d) || !Je(e, f2) : true;
  }
  function Mg(a, b, c) {
    var d = false, e = Cf;
    var f2 = b.contextType;
    "object" === typeof f2 && null !== f2 ? f2 = vg(f2) : (e = Ff(b) ? Df : M.current, d = b.contextTypes, f2 = (d = null !== d && void 0 !== d) ? Ef(a, e) : Cf);
    b = new b(c, f2);
    a.memoizedState = null !== b.state && void 0 !== b.state ? b.state : null;
    b.updater = Kg;
    a.stateNode = b;
    b._reactInternals = a;
    d && (a = a.stateNode, a.__reactInternalMemoizedUnmaskedChildContext = e, a.__reactInternalMemoizedMaskedChildContext = f2);
    return b;
  }
  function Ng(a, b, c, d) {
    a = b.state;
    "function" === typeof b.componentWillReceiveProps && b.componentWillReceiveProps(c, d);
    "function" === typeof b.UNSAFE_componentWillReceiveProps && b.UNSAFE_componentWillReceiveProps(c, d);
    b.state !== a && Kg.enqueueReplaceState(b, b.state, null);
  }
  function Og(a, b, c, d) {
    var e = a.stateNode;
    e.props = c;
    e.state = a.memoizedState;
    e.refs = Fg;
    xg(a);
    var f2 = b.contextType;
    "object" === typeof f2 && null !== f2 ? e.context = vg(f2) : (f2 = Ff(b) ? Df : M.current, e.context = Ef(a, f2));
    Cg(a, c, e, d);
    e.state = a.memoizedState;
    f2 = b.getDerivedStateFromProps;
    "function" === typeof f2 && (Gg(a, b, f2, c), e.state = a.memoizedState);
    "function" === typeof b.getDerivedStateFromProps || "function" === typeof e.getSnapshotBeforeUpdate || "function" !== typeof e.UNSAFE_componentWillMount && "function" !== typeof e.componentWillMount || (b = e.state, "function" === typeof e.componentWillMount && e.componentWillMount(), "function" === typeof e.UNSAFE_componentWillMount && e.UNSAFE_componentWillMount(), b !== e.state && Kg.enqueueReplaceState(e, e.state, null), Cg(a, c, e, d), e.state = a.memoizedState);
    "function" === typeof e.componentDidMount && (a.flags |= 4);
  }
  var Pg = Array.isArray;
  function Qg(a, b, c) {
    a = c.ref;
    if (null !== a && "function" !== typeof a && "object" !== typeof a) {
      if (c._owner) {
        c = c._owner;
        if (c) {
          if (1 !== c.tag)
            throw Error(y(309));
          var d = c.stateNode;
        }
        if (!d)
          throw Error(y(147, a));
        var e = "" + a;
        if (null !== b && null !== b.ref && "function" === typeof b.ref && b.ref._stringRef === e)
          return b.ref;
        b = function(a2) {
          var b2 = d.refs;
          b2 === Fg && (b2 = d.refs = {});
          null === a2 ? delete b2[e] : b2[e] = a2;
        };
        b._stringRef = e;
        return b;
      }
      if ("string" !== typeof a)
        throw Error(y(284));
      if (!c._owner)
        throw Error(y(290, a));
    }
    return a;
  }
  function Rg(a, b) {
    if ("textarea" !== a.type)
      throw Error(y(31, "[object Object]" === Object.prototype.toString.call(b) ? "object with keys {" + Object.keys(b).join(", ") + "}" : b));
  }
  function Sg(a) {
    function b(b2, c2) {
      if (a) {
        var d2 = b2.lastEffect;
        null !== d2 ? (d2.nextEffect = c2, b2.lastEffect = c2) : b2.firstEffect = b2.lastEffect = c2;
        c2.nextEffect = null;
        c2.flags = 8;
      }
    }
    function c(c2, d2) {
      if (!a)
        return null;
      for (; null !== d2; )
        b(c2, d2), d2 = d2.sibling;
      return null;
    }
    function d(a2, b2) {
      for (a2 = /* @__PURE__ */ new Map(); null !== b2; )
        null !== b2.key ? a2.set(b2.key, b2) : a2.set(b2.index, b2), b2 = b2.sibling;
      return a2;
    }
    function e(a2, b2) {
      a2 = Tg(a2, b2);
      a2.index = 0;
      a2.sibling = null;
      return a2;
    }
    function f2(b2, c2, d2) {
      b2.index = d2;
      if (!a)
        return c2;
      d2 = b2.alternate;
      if (null !== d2)
        return d2 = d2.index, d2 < c2 ? (b2.flags = 2, c2) : d2;
      b2.flags = 2;
      return c2;
    }
    function g2(b2) {
      a && null === b2.alternate && (b2.flags = 2);
      return b2;
    }
    function h2(a2, b2, c2, d2) {
      if (null === b2 || 6 !== b2.tag)
        return b2 = Ug(c2, a2.mode, d2), b2.return = a2, b2;
      b2 = e(b2, c2);
      b2.return = a2;
      return b2;
    }
    function k(a2, b2, c2, d2) {
      if (null !== b2 && b2.elementType === c2.type)
        return d2 = e(b2, c2.props), d2.ref = Qg(a2, b2, c2), d2.return = a2, d2;
      d2 = Vg(c2.type, c2.key, c2.props, null, a2.mode, d2);
      d2.ref = Qg(a2, b2, c2);
      d2.return = a2;
      return d2;
    }
    function l2(a2, b2, c2, d2) {
      if (null === b2 || 4 !== b2.tag || b2.stateNode.containerInfo !== c2.containerInfo || b2.stateNode.implementation !== c2.implementation)
        return b2 = Wg(c2, a2.mode, d2), b2.return = a2, b2;
      b2 = e(b2, c2.children || []);
      b2.return = a2;
      return b2;
    }
    function n2(a2, b2, c2, d2, f3) {
      if (null === b2 || 7 !== b2.tag)
        return b2 = Xg(c2, a2.mode, d2, f3), b2.return = a2, b2;
      b2 = e(b2, c2);
      b2.return = a2;
      return b2;
    }
    function A2(a2, b2, c2) {
      if ("string" === typeof b2 || "number" === typeof b2)
        return b2 = Ug("" + b2, a2.mode, c2), b2.return = a2, b2;
      if ("object" === typeof b2 && null !== b2) {
        switch (b2.$$typeof) {
          case sa:
            return c2 = Vg(b2.type, b2.key, b2.props, null, a2.mode, c2), c2.ref = Qg(a2, null, b2), c2.return = a2, c2;
          case ta:
            return b2 = Wg(b2, a2.mode, c2), b2.return = a2, b2;
        }
        if (Pg(b2) || La(b2))
          return b2 = Xg(
            b2,
            a2.mode,
            c2,
            null
          ), b2.return = a2, b2;
        Rg(a2, b2);
      }
      return null;
    }
    function p2(a2, b2, c2, d2) {
      var e2 = null !== b2 ? b2.key : null;
      if ("string" === typeof c2 || "number" === typeof c2)
        return null !== e2 ? null : h2(a2, b2, "" + c2, d2);
      if ("object" === typeof c2 && null !== c2) {
        switch (c2.$$typeof) {
          case sa:
            return c2.key === e2 ? c2.type === ua ? n2(a2, b2, c2.props.children, d2, e2) : k(a2, b2, c2, d2) : null;
          case ta:
            return c2.key === e2 ? l2(a2, b2, c2, d2) : null;
        }
        if (Pg(c2) || La(c2))
          return null !== e2 ? null : n2(a2, b2, c2, d2, null);
        Rg(a2, c2);
      }
      return null;
    }
    function C2(a2, b2, c2, d2, e2) {
      if ("string" === typeof d2 || "number" === typeof d2)
        return a2 = a2.get(c2) || null, h2(b2, a2, "" + d2, e2);
      if ("object" === typeof d2 && null !== d2) {
        switch (d2.$$typeof) {
          case sa:
            return a2 = a2.get(null === d2.key ? c2 : d2.key) || null, d2.type === ua ? n2(b2, a2, d2.props.children, e2, d2.key) : k(b2, a2, d2, e2);
          case ta:
            return a2 = a2.get(null === d2.key ? c2 : d2.key) || null, l2(b2, a2, d2, e2);
        }
        if (Pg(d2) || La(d2))
          return a2 = a2.get(c2) || null, n2(b2, a2, d2, e2, null);
        Rg(b2, d2);
      }
      return null;
    }
    function x2(e2, g3, h3, k2) {
      for (var l3 = null, t2 = null, u2 = g3, z2 = g3 = 0, q2 = null; null !== u2 && z2 < h3.length; z2++) {
        u2.index > z2 ? (q2 = u2, u2 = null) : q2 = u2.sibling;
        var n3 = p2(e2, u2, h3[z2], k2);
        if (null === n3) {
          null === u2 && (u2 = q2);
          break;
        }
        a && u2 && null === n3.alternate && b(e2, u2);
        g3 = f2(n3, g3, z2);
        null === t2 ? l3 = n3 : t2.sibling = n3;
        t2 = n3;
        u2 = q2;
      }
      if (z2 === h3.length)
        return c(e2, u2), l3;
      if (null === u2) {
        for (; z2 < h3.length; z2++)
          u2 = A2(e2, h3[z2], k2), null !== u2 && (g3 = f2(u2, g3, z2), null === t2 ? l3 = u2 : t2.sibling = u2, t2 = u2);
        return l3;
      }
      for (u2 = d(e2, u2); z2 < h3.length; z2++)
        q2 = C2(u2, e2, z2, h3[z2], k2), null !== q2 && (a && null !== q2.alternate && u2.delete(null === q2.key ? z2 : q2.key), g3 = f2(q2, g3, z2), null === t2 ? l3 = q2 : t2.sibling = q2, t2 = q2);
      a && u2.forEach(function(a2) {
        return b(e2, a2);
      });
      return l3;
    }
    function w2(e2, g3, h3, k2) {
      var l3 = La(h3);
      if ("function" !== typeof l3)
        throw Error(y(150));
      h3 = l3.call(h3);
      if (null == h3)
        throw Error(y(151));
      for (var t2 = l3 = null, u2 = g3, z2 = g3 = 0, q2 = null, n3 = h3.next(); null !== u2 && !n3.done; z2++, n3 = h3.next()) {
        u2.index > z2 ? (q2 = u2, u2 = null) : q2 = u2.sibling;
        var w3 = p2(e2, u2, n3.value, k2);
        if (null === w3) {
          null === u2 && (u2 = q2);
          break;
        }
        a && u2 && null === w3.alternate && b(e2, u2);
        g3 = f2(w3, g3, z2);
        null === t2 ? l3 = w3 : t2.sibling = w3;
        t2 = w3;
        u2 = q2;
      }
      if (n3.done)
        return c(e2, u2), l3;
      if (null === u2) {
        for (; !n3.done; z2++, n3 = h3.next())
          n3 = A2(e2, n3.value, k2), null !== n3 && (g3 = f2(n3, g3, z2), null === t2 ? l3 = n3 : t2.sibling = n3, t2 = n3);
        return l3;
      }
      for (u2 = d(e2, u2); !n3.done; z2++, n3 = h3.next())
        n3 = C2(u2, e2, z2, n3.value, k2), null !== n3 && (a && null !== n3.alternate && u2.delete(null === n3.key ? z2 : n3.key), g3 = f2(n3, g3, z2), null === t2 ? l3 = n3 : t2.sibling = n3, t2 = n3);
      a && u2.forEach(function(a2) {
        return b(e2, a2);
      });
      return l3;
    }
    return function(a2, d2, f3, h3) {
      var k2 = "object" === typeof f3 && null !== f3 && f3.type === ua && null === f3.key;
      k2 && (f3 = f3.props.children);
      var l3 = "object" === typeof f3 && null !== f3;
      if (l3)
        switch (f3.$$typeof) {
          case sa:
            a: {
              l3 = f3.key;
              for (k2 = d2; null !== k2; ) {
                if (k2.key === l3) {
                  switch (k2.tag) {
                    case 7:
                      if (f3.type === ua) {
                        c(a2, k2.sibling);
                        d2 = e(k2, f3.props.children);
                        d2.return = a2;
                        a2 = d2;
                        break a;
                      }
                      break;
                    default:
                      if (k2.elementType === f3.type) {
                        c(a2, k2.sibling);
                        d2 = e(k2, f3.props);
                        d2.ref = Qg(a2, k2, f3);
                        d2.return = a2;
                        a2 = d2;
                        break a;
                      }
                  }
                  c(a2, k2);
                  break;
                } else
                  b(a2, k2);
                k2 = k2.sibling;
              }
              f3.type === ua ? (d2 = Xg(f3.props.children, a2.mode, h3, f3.key), d2.return = a2, a2 = d2) : (h3 = Vg(f3.type, f3.key, f3.props, null, a2.mode, h3), h3.ref = Qg(a2, d2, f3), h3.return = a2, a2 = h3);
            }
            return g2(a2);
          case ta:
            a: {
              for (k2 = f3.key; null !== d2; ) {
                if (d2.key === k2)
                  if (4 === d2.tag && d2.stateNode.containerInfo === f3.containerInfo && d2.stateNode.implementation === f3.implementation) {
                    c(a2, d2.sibling);
                    d2 = e(d2, f3.children || []);
                    d2.return = a2;
                    a2 = d2;
                    break a;
                  } else {
                    c(a2, d2);
                    break;
                  }
                else
                  b(a2, d2);
                d2 = d2.sibling;
              }
              d2 = Wg(f3, a2.mode, h3);
              d2.return = a2;
              a2 = d2;
            }
            return g2(a2);
        }
      if ("string" === typeof f3 || "number" === typeof f3)
        return f3 = "" + f3, null !== d2 && 6 === d2.tag ? (c(a2, d2.sibling), d2 = e(d2, f3), d2.return = a2, a2 = d2) : (c(a2, d2), d2 = Ug(f3, a2.mode, h3), d2.return = a2, a2 = d2), g2(a2);
      if (Pg(f3))
        return x2(a2, d2, f3, h3);
      if (La(f3))
        return w2(a2, d2, f3, h3);
      l3 && Rg(a2, f3);
      if ("undefined" === typeof f3 && !k2)
        switch (a2.tag) {
          case 1:
          case 22:
          case 0:
          case 11:
          case 15:
            throw Error(y(152, Ra(a2.type) || "Component"));
        }
      return c(a2, d2);
    };
  }
  var Yg = Sg(true), Zg = Sg(false), $g = {}, ah = Bf($g), bh = Bf($g), ch = Bf($g);
  function dh(a) {
    if (a === $g)
      throw Error(y(174));
    return a;
  }
  function eh(a, b) {
    I(ch, b);
    I(bh, a);
    I(ah, $g);
    a = b.nodeType;
    switch (a) {
      case 9:
      case 11:
        b = (b = b.documentElement) ? b.namespaceURI : mb(null, "");
        break;
      default:
        a = 8 === a ? b.parentNode : b, b = a.namespaceURI || null, a = a.tagName, b = mb(b, a);
    }
    H(ah);
    I(ah, b);
  }
  function fh() {
    H(ah);
    H(bh);
    H(ch);
  }
  function gh(a) {
    dh(ch.current);
    var b = dh(ah.current);
    var c = mb(b, a.type);
    b !== c && (I(bh, a), I(ah, c));
  }
  function hh(a) {
    bh.current === a && (H(ah), H(bh));
  }
  var P = Bf(0);
  function ih(a) {
    for (var b = a; null !== b; ) {
      if (13 === b.tag) {
        var c = b.memoizedState;
        if (null !== c && (c = c.dehydrated, null === c || "$?" === c.data || "$!" === c.data))
          return b;
      } else if (19 === b.tag && void 0 !== b.memoizedProps.revealOrder) {
        if (0 !== (b.flags & 64))
          return b;
      } else if (null !== b.child) {
        b.child.return = b;
        b = b.child;
        continue;
      }
      if (b === a)
        break;
      for (; null === b.sibling; ) {
        if (null === b.return || b.return === a)
          return null;
        b = b.return;
      }
      b.sibling.return = b.return;
      b = b.sibling;
    }
    return null;
  }
  var jh = null, kh = null, lh = false;
  function mh(a, b) {
    var c = nh(5, null, null, 0);
    c.elementType = "DELETED";
    c.type = "DELETED";
    c.stateNode = b;
    c.return = a;
    c.flags = 8;
    null !== a.lastEffect ? (a.lastEffect.nextEffect = c, a.lastEffect = c) : a.firstEffect = a.lastEffect = c;
  }
  function oh(a, b) {
    switch (a.tag) {
      case 5:
        var c = a.type;
        b = 1 !== b.nodeType || c.toLowerCase() !== b.nodeName.toLowerCase() ? null : b;
        return null !== b ? (a.stateNode = b, true) : false;
      case 6:
        return b = "" === a.pendingProps || 3 !== b.nodeType ? null : b, null !== b ? (a.stateNode = b, true) : false;
      case 13:
        return false;
      default:
        return false;
    }
  }
  function ph(a) {
    if (lh) {
      var b = kh;
      if (b) {
        var c = b;
        if (!oh(a, b)) {
          b = rf(c.nextSibling);
          if (!b || !oh(a, b)) {
            a.flags = a.flags & -1025 | 2;
            lh = false;
            jh = a;
            return;
          }
          mh(jh, c);
        }
        jh = a;
        kh = rf(b.firstChild);
      } else
        a.flags = a.flags & -1025 | 2, lh = false, jh = a;
    }
  }
  function qh(a) {
    for (a = a.return; null !== a && 5 !== a.tag && 3 !== a.tag && 13 !== a.tag; )
      a = a.return;
    jh = a;
  }
  function rh(a) {
    if (a !== jh)
      return false;
    if (!lh)
      return qh(a), lh = true, false;
    var b = a.type;
    if (5 !== a.tag || "head" !== b && "body" !== b && !nf(b, a.memoizedProps))
      for (b = kh; b; )
        mh(a, b), b = rf(b.nextSibling);
    qh(a);
    if (13 === a.tag) {
      a = a.memoizedState;
      a = null !== a ? a.dehydrated : null;
      if (!a)
        throw Error(y(317));
      a: {
        a = a.nextSibling;
        for (b = 0; a; ) {
          if (8 === a.nodeType) {
            var c = a.data;
            if ("/$" === c) {
              if (0 === b) {
                kh = rf(a.nextSibling);
                break a;
              }
              b--;
            } else
              "$" !== c && "$!" !== c && "$?" !== c || b++;
          }
          a = a.nextSibling;
        }
        kh = null;
      }
    } else
      kh = jh ? rf(a.stateNode.nextSibling) : null;
    return true;
  }
  function sh() {
    kh = jh = null;
    lh = false;
  }
  var th = [];
  function uh() {
    for (var a = 0; a < th.length; a++)
      th[a]._workInProgressVersionPrimary = null;
    th.length = 0;
  }
  var vh = ra.ReactCurrentDispatcher, wh = ra.ReactCurrentBatchConfig, xh = 0, R = null, S = null, T = null, yh = false, zh = false;
  function Ah() {
    throw Error(y(321));
  }
  function Bh(a, b) {
    if (null === b)
      return false;
    for (var c = 0; c < b.length && c < a.length; c++)
      if (!He(a[c], b[c]))
        return false;
    return true;
  }
  function Ch(a, b, c, d, e, f2) {
    xh = f2;
    R = b;
    b.memoizedState = null;
    b.updateQueue = null;
    b.lanes = 0;
    vh.current = null === a || null === a.memoizedState ? Dh : Eh;
    a = c(d, e);
    if (zh) {
      f2 = 0;
      do {
        zh = false;
        if (!(25 > f2))
          throw Error(y(301));
        f2 += 1;
        T = S = null;
        b.updateQueue = null;
        vh.current = Fh;
        a = c(d, e);
      } while (zh);
    }
    vh.current = Gh;
    b = null !== S && null !== S.next;
    xh = 0;
    T = S = R = null;
    yh = false;
    if (b)
      throw Error(y(300));
    return a;
  }
  function Hh() {
    var a = { memoizedState: null, baseState: null, baseQueue: null, queue: null, next: null };
    null === T ? R.memoizedState = T = a : T = T.next = a;
    return T;
  }
  function Ih() {
    if (null === S) {
      var a = R.alternate;
      a = null !== a ? a.memoizedState : null;
    } else
      a = S.next;
    var b = null === T ? R.memoizedState : T.next;
    if (null !== b)
      T = b, S = a;
    else {
      if (null === a)
        throw Error(y(310));
      S = a;
      a = { memoizedState: S.memoizedState, baseState: S.baseState, baseQueue: S.baseQueue, queue: S.queue, next: null };
      null === T ? R.memoizedState = T = a : T = T.next = a;
    }
    return T;
  }
  function Jh(a, b) {
    return "function" === typeof b ? b(a) : b;
  }
  function Kh(a) {
    var b = Ih(), c = b.queue;
    if (null === c)
      throw Error(y(311));
    c.lastRenderedReducer = a;
    var d = S, e = d.baseQueue, f2 = c.pending;
    if (null !== f2) {
      if (null !== e) {
        var g2 = e.next;
        e.next = f2.next;
        f2.next = g2;
      }
      d.baseQueue = e = f2;
      c.pending = null;
    }
    if (null !== e) {
      e = e.next;
      d = d.baseState;
      var h2 = g2 = f2 = null, k = e;
      do {
        var l2 = k.lane;
        if ((xh & l2) === l2)
          null !== h2 && (h2 = h2.next = { lane: 0, action: k.action, eagerReducer: k.eagerReducer, eagerState: k.eagerState, next: null }), d = k.eagerReducer === a ? k.eagerState : a(d, k.action);
        else {
          var n2 = {
            lane: l2,
            action: k.action,
            eagerReducer: k.eagerReducer,
            eagerState: k.eagerState,
            next: null
          };
          null === h2 ? (g2 = h2 = n2, f2 = d) : h2 = h2.next = n2;
          R.lanes |= l2;
          Dg |= l2;
        }
        k = k.next;
      } while (null !== k && k !== e);
      null === h2 ? f2 = d : h2.next = g2;
      He(d, b.memoizedState) || (ug = true);
      b.memoizedState = d;
      b.baseState = f2;
      b.baseQueue = h2;
      c.lastRenderedState = d;
    }
    return [b.memoizedState, c.dispatch];
  }
  function Lh(a) {
    var b = Ih(), c = b.queue;
    if (null === c)
      throw Error(y(311));
    c.lastRenderedReducer = a;
    var d = c.dispatch, e = c.pending, f2 = b.memoizedState;
    if (null !== e) {
      c.pending = null;
      var g2 = e = e.next;
      do
        f2 = a(f2, g2.action), g2 = g2.next;
      while (g2 !== e);
      He(f2, b.memoizedState) || (ug = true);
      b.memoizedState = f2;
      null === b.baseQueue && (b.baseState = f2);
      c.lastRenderedState = f2;
    }
    return [f2, d];
  }
  function Mh(a, b, c) {
    var d = b._getVersion;
    d = d(b._source);
    var e = b._workInProgressVersionPrimary;
    if (null !== e)
      a = e === d;
    else if (a = a.mutableReadLanes, a = (xh & a) === a)
      b._workInProgressVersionPrimary = d, th.push(b);
    if (a)
      return c(b._source);
    th.push(b);
    throw Error(y(350));
  }
  function Nh(a, b, c, d) {
    var e = U;
    if (null === e)
      throw Error(y(349));
    var f2 = b._getVersion, g2 = f2(b._source), h2 = vh.current, k = h2.useState(function() {
      return Mh(e, b, c);
    }), l2 = k[1], n2 = k[0];
    k = T;
    var A2 = a.memoizedState, p2 = A2.refs, C2 = p2.getSnapshot, x2 = A2.source;
    A2 = A2.subscribe;
    var w2 = R;
    a.memoizedState = { refs: p2, source: b, subscribe: d };
    h2.useEffect(function() {
      p2.getSnapshot = c;
      p2.setSnapshot = l2;
      var a2 = f2(b._source);
      if (!He(g2, a2)) {
        a2 = c(b._source);
        He(n2, a2) || (l2(a2), a2 = Ig(w2), e.mutableReadLanes |= a2 & e.pendingLanes);
        a2 = e.mutableReadLanes;
        e.entangledLanes |= a2;
        for (var d2 = e.entanglements, h3 = a2; 0 < h3; ) {
          var k2 = 31 - Vc(h3), v2 = 1 << k2;
          d2[k2] |= a2;
          h3 &= ~v2;
        }
      }
    }, [c, b, d]);
    h2.useEffect(function() {
      return d(b._source, function() {
        var a2 = p2.getSnapshot, c2 = p2.setSnapshot;
        try {
          c2(a2(b._source));
          var d2 = Ig(w2);
          e.mutableReadLanes |= d2 & e.pendingLanes;
        } catch (q2) {
          c2(function() {
            throw q2;
          });
        }
      });
    }, [b, d]);
    He(C2, c) && He(x2, b) && He(A2, d) || (a = { pending: null, dispatch: null, lastRenderedReducer: Jh, lastRenderedState: n2 }, a.dispatch = l2 = Oh.bind(null, R, a), k.queue = a, k.baseQueue = null, n2 = Mh(e, b, c), k.memoizedState = k.baseState = n2);
    return n2;
  }
  function Ph(a, b, c) {
    var d = Ih();
    return Nh(d, a, b, c);
  }
  function Qh(a) {
    var b = Hh();
    "function" === typeof a && (a = a());
    b.memoizedState = b.baseState = a;
    a = b.queue = { pending: null, dispatch: null, lastRenderedReducer: Jh, lastRenderedState: a };
    a = a.dispatch = Oh.bind(null, R, a);
    return [b.memoizedState, a];
  }
  function Rh(a, b, c, d) {
    a = { tag: a, create: b, destroy: c, deps: d, next: null };
    b = R.updateQueue;
    null === b ? (b = { lastEffect: null }, R.updateQueue = b, b.lastEffect = a.next = a) : (c = b.lastEffect, null === c ? b.lastEffect = a.next = a : (d = c.next, c.next = a, a.next = d, b.lastEffect = a));
    return a;
  }
  function Sh(a) {
    var b = Hh();
    a = { current: a };
    return b.memoizedState = a;
  }
  function Th() {
    return Ih().memoizedState;
  }
  function Uh(a, b, c, d) {
    var e = Hh();
    R.flags |= a;
    e.memoizedState = Rh(1 | b, c, void 0, void 0 === d ? null : d);
  }
  function Vh(a, b, c, d) {
    var e = Ih();
    d = void 0 === d ? null : d;
    var f2 = void 0;
    if (null !== S) {
      var g2 = S.memoizedState;
      f2 = g2.destroy;
      if (null !== d && Bh(d, g2.deps)) {
        Rh(b, c, f2, d);
        return;
      }
    }
    R.flags |= a;
    e.memoizedState = Rh(1 | b, c, f2, d);
  }
  function Wh(a, b) {
    return Uh(516, 4, a, b);
  }
  function Xh(a, b) {
    return Vh(516, 4, a, b);
  }
  function Yh(a, b) {
    return Vh(4, 2, a, b);
  }
  function Zh(a, b) {
    if ("function" === typeof b)
      return a = a(), b(a), function() {
        b(null);
      };
    if (null !== b && void 0 !== b)
      return a = a(), b.current = a, function() {
        b.current = null;
      };
  }
  function $h(a, b, c) {
    c = null !== c && void 0 !== c ? c.concat([a]) : null;
    return Vh(4, 2, Zh.bind(null, b, a), c);
  }
  function ai() {
  }
  function bi(a, b) {
    var c = Ih();
    b = void 0 === b ? null : b;
    var d = c.memoizedState;
    if (null !== d && null !== b && Bh(b, d[1]))
      return d[0];
    c.memoizedState = [a, b];
    return a;
  }
  function ci(a, b) {
    var c = Ih();
    b = void 0 === b ? null : b;
    var d = c.memoizedState;
    if (null !== d && null !== b && Bh(b, d[1]))
      return d[0];
    a = a();
    c.memoizedState = [a, b];
    return a;
  }
  function di(a, b) {
    var c = eg();
    gg(98 > c ? 98 : c, function() {
      a(true);
    });
    gg(97 < c ? 97 : c, function() {
      var c2 = wh.transition;
      wh.transition = 1;
      try {
        a(false), b();
      } finally {
        wh.transition = c2;
      }
    });
  }
  function Oh(a, b, c) {
    var d = Hg(), e = Ig(a), f2 = { lane: e, action: c, eagerReducer: null, eagerState: null, next: null }, g2 = b.pending;
    null === g2 ? f2.next = f2 : (f2.next = g2.next, g2.next = f2);
    b.pending = f2;
    g2 = a.alternate;
    if (a === R || null !== g2 && g2 === R)
      zh = yh = true;
    else {
      if (0 === a.lanes && (null === g2 || 0 === g2.lanes) && (g2 = b.lastRenderedReducer, null !== g2))
        try {
          var h2 = b.lastRenderedState, k = g2(h2, c);
          f2.eagerReducer = g2;
          f2.eagerState = k;
          if (He(k, h2))
            return;
        } catch (l2) {
        } finally {
        }
      Jg(a, e, d);
    }
  }
  var Gh = { readContext: vg, useCallback: Ah, useContext: Ah, useEffect: Ah, useImperativeHandle: Ah, useLayoutEffect: Ah, useMemo: Ah, useReducer: Ah, useRef: Ah, useState: Ah, useDebugValue: Ah, useDeferredValue: Ah, useTransition: Ah, useMutableSource: Ah, useOpaqueIdentifier: Ah, unstable_isNewReconciler: false }, Dh = { readContext: vg, useCallback: function(a, b) {
    Hh().memoizedState = [a, void 0 === b ? null : b];
    return a;
  }, useContext: vg, useEffect: Wh, useImperativeHandle: function(a, b, c) {
    c = null !== c && void 0 !== c ? c.concat([a]) : null;
    return Uh(4, 2, Zh.bind(
      null,
      b,
      a
    ), c);
  }, useLayoutEffect: function(a, b) {
    return Uh(4, 2, a, b);
  }, useMemo: function(a, b) {
    var c = Hh();
    b = void 0 === b ? null : b;
    a = a();
    c.memoizedState = [a, b];
    return a;
  }, useReducer: function(a, b, c) {
    var d = Hh();
    b = void 0 !== c ? c(b) : b;
    d.memoizedState = d.baseState = b;
    a = d.queue = { pending: null, dispatch: null, lastRenderedReducer: a, lastRenderedState: b };
    a = a.dispatch = Oh.bind(null, R, a);
    return [d.memoizedState, a];
  }, useRef: Sh, useState: Qh, useDebugValue: ai, useDeferredValue: function(a) {
    var b = Qh(a), c = b[0], d = b[1];
    Wh(function() {
      var b2 = wh.transition;
      wh.transition = 1;
      try {
        d(a);
      } finally {
        wh.transition = b2;
      }
    }, [a]);
    return c;
  }, useTransition: function() {
    var a = Qh(false), b = a[0];
    a = di.bind(null, a[1]);
    Sh(a);
    return [a, b];
  }, useMutableSource: function(a, b, c) {
    var d = Hh();
    d.memoizedState = { refs: { getSnapshot: b, setSnapshot: null }, source: a, subscribe: c };
    return Nh(d, a, b, c);
  }, useOpaqueIdentifier: function() {
    if (lh) {
      var a = false, b = uf(function() {
        a || (a = true, c("r:" + (tf++).toString(36)));
        throw Error(y(355));
      }), c = Qh(b)[1];
      0 === (R.mode & 2) && (R.flags |= 516, Rh(
        5,
        function() {
          c("r:" + (tf++).toString(36));
        },
        void 0,
        null
      ));
      return b;
    }
    b = "r:" + (tf++).toString(36);
    Qh(b);
    return b;
  }, unstable_isNewReconciler: false }, Eh = { readContext: vg, useCallback: bi, useContext: vg, useEffect: Xh, useImperativeHandle: $h, useLayoutEffect: Yh, useMemo: ci, useReducer: Kh, useRef: Th, useState: function() {
    return Kh(Jh);
  }, useDebugValue: ai, useDeferredValue: function(a) {
    var b = Kh(Jh), c = b[0], d = b[1];
    Xh(function() {
      var b2 = wh.transition;
      wh.transition = 1;
      try {
        d(a);
      } finally {
        wh.transition = b2;
      }
    }, [a]);
    return c;
  }, useTransition: function() {
    var a = Kh(Jh)[0];
    return [
      Th().current,
      a
    ];
  }, useMutableSource: Ph, useOpaqueIdentifier: function() {
    return Kh(Jh)[0];
  }, unstable_isNewReconciler: false }, Fh = { readContext: vg, useCallback: bi, useContext: vg, useEffect: Xh, useImperativeHandle: $h, useLayoutEffect: Yh, useMemo: ci, useReducer: Lh, useRef: Th, useState: function() {
    return Lh(Jh);
  }, useDebugValue: ai, useDeferredValue: function(a) {
    var b = Lh(Jh), c = b[0], d = b[1];
    Xh(function() {
      var b2 = wh.transition;
      wh.transition = 1;
      try {
        d(a);
      } finally {
        wh.transition = b2;
      }
    }, [a]);
    return c;
  }, useTransition: function() {
    var a = Lh(Jh)[0];
    return [
      Th().current,
      a
    ];
  }, useMutableSource: Ph, useOpaqueIdentifier: function() {
    return Lh(Jh)[0];
  }, unstable_isNewReconciler: false }, ei = ra.ReactCurrentOwner, ug = false;
  function fi(a, b, c, d) {
    b.child = null === a ? Zg(b, null, c, d) : Yg(b, a.child, c, d);
  }
  function gi(a, b, c, d, e) {
    c = c.render;
    var f2 = b.ref;
    tg(b, e);
    d = Ch(a, b, c, d, f2, e);
    if (null !== a && !ug)
      return b.updateQueue = a.updateQueue, b.flags &= -517, a.lanes &= ~e, hi(a, b, e);
    b.flags |= 1;
    fi(a, b, d, e);
    return b.child;
  }
  function ii(a, b, c, d, e, f2) {
    if (null === a) {
      var g2 = c.type;
      if ("function" === typeof g2 && !ji(g2) && void 0 === g2.defaultProps && null === c.compare && void 0 === c.defaultProps)
        return b.tag = 15, b.type = g2, ki(a, b, g2, d, e, f2);
      a = Vg(c.type, null, d, b, b.mode, f2);
      a.ref = b.ref;
      a.return = b;
      return b.child = a;
    }
    g2 = a.child;
    if (0 === (e & f2) && (e = g2.memoizedProps, c = c.compare, c = null !== c ? c : Je, c(e, d) && a.ref === b.ref))
      return hi(a, b, f2);
    b.flags |= 1;
    a = Tg(g2, d);
    a.ref = b.ref;
    a.return = b;
    return b.child = a;
  }
  function ki(a, b, c, d, e, f2) {
    if (null !== a && Je(a.memoizedProps, d) && a.ref === b.ref)
      if (ug = false, 0 !== (f2 & e))
        0 !== (a.flags & 16384) && (ug = true);
      else
        return b.lanes = a.lanes, hi(a, b, f2);
    return li(a, b, c, d, f2);
  }
  function mi(a, b, c) {
    var d = b.pendingProps, e = d.children, f2 = null !== a ? a.memoizedState : null;
    if ("hidden" === d.mode || "unstable-defer-without-hiding" === d.mode)
      if (0 === (b.mode & 4))
        b.memoizedState = { baseLanes: 0 }, ni(b, c);
      else if (0 !== (c & 1073741824))
        b.memoizedState = { baseLanes: 0 }, ni(b, null !== f2 ? f2.baseLanes : c);
      else
        return a = null !== f2 ? f2.baseLanes | c : c, b.lanes = b.childLanes = 1073741824, b.memoizedState = { baseLanes: a }, ni(b, a), null;
    else
      null !== f2 ? (d = f2.baseLanes | c, b.memoizedState = null) : d = c, ni(b, d);
    fi(a, b, e, c);
    return b.child;
  }
  function oi(a, b) {
    var c = b.ref;
    if (null === a && null !== c || null !== a && a.ref !== c)
      b.flags |= 128;
  }
  function li(a, b, c, d, e) {
    var f2 = Ff(c) ? Df : M.current;
    f2 = Ef(b, f2);
    tg(b, e);
    c = Ch(a, b, c, d, f2, e);
    if (null !== a && !ug)
      return b.updateQueue = a.updateQueue, b.flags &= -517, a.lanes &= ~e, hi(a, b, e);
    b.flags |= 1;
    fi(a, b, c, e);
    return b.child;
  }
  function pi(a, b, c, d, e) {
    if (Ff(c)) {
      var f2 = true;
      Jf(b);
    } else
      f2 = false;
    tg(b, e);
    if (null === b.stateNode)
      null !== a && (a.alternate = null, b.alternate = null, b.flags |= 2), Mg(b, c, d), Og(b, c, d, e), d = true;
    else if (null === a) {
      var g2 = b.stateNode, h2 = b.memoizedProps;
      g2.props = h2;
      var k = g2.context, l2 = c.contextType;
      "object" === typeof l2 && null !== l2 ? l2 = vg(l2) : (l2 = Ff(c) ? Df : M.current, l2 = Ef(b, l2));
      var n2 = c.getDerivedStateFromProps, A2 = "function" === typeof n2 || "function" === typeof g2.getSnapshotBeforeUpdate;
      A2 || "function" !== typeof g2.UNSAFE_componentWillReceiveProps && "function" !== typeof g2.componentWillReceiveProps || (h2 !== d || k !== l2) && Ng(b, g2, d, l2);
      wg = false;
      var p2 = b.memoizedState;
      g2.state = p2;
      Cg(b, d, g2, e);
      k = b.memoizedState;
      h2 !== d || p2 !== k || N.current || wg ? ("function" === typeof n2 && (Gg(b, c, n2, d), k = b.memoizedState), (h2 = wg || Lg(b, c, h2, d, p2, k, l2)) ? (A2 || "function" !== typeof g2.UNSAFE_componentWillMount && "function" !== typeof g2.componentWillMount || ("function" === typeof g2.componentWillMount && g2.componentWillMount(), "function" === typeof g2.UNSAFE_componentWillMount && g2.UNSAFE_componentWillMount()), "function" === typeof g2.componentDidMount && (b.flags |= 4)) : ("function" === typeof g2.componentDidMount && (b.flags |= 4), b.memoizedProps = d, b.memoizedState = k), g2.props = d, g2.state = k, g2.context = l2, d = h2) : ("function" === typeof g2.componentDidMount && (b.flags |= 4), d = false);
    } else {
      g2 = b.stateNode;
      yg(a, b);
      h2 = b.memoizedProps;
      l2 = b.type === b.elementType ? h2 : lg(b.type, h2);
      g2.props = l2;
      A2 = b.pendingProps;
      p2 = g2.context;
      k = c.contextType;
      "object" === typeof k && null !== k ? k = vg(k) : (k = Ff(c) ? Df : M.current, k = Ef(b, k));
      var C2 = c.getDerivedStateFromProps;
      (n2 = "function" === typeof C2 || "function" === typeof g2.getSnapshotBeforeUpdate) || "function" !== typeof g2.UNSAFE_componentWillReceiveProps && "function" !== typeof g2.componentWillReceiveProps || (h2 !== A2 || p2 !== k) && Ng(b, g2, d, k);
      wg = false;
      p2 = b.memoizedState;
      g2.state = p2;
      Cg(b, d, g2, e);
      var x2 = b.memoizedState;
      h2 !== A2 || p2 !== x2 || N.current || wg ? ("function" === typeof C2 && (Gg(b, c, C2, d), x2 = b.memoizedState), (l2 = wg || Lg(b, c, l2, d, p2, x2, k)) ? (n2 || "function" !== typeof g2.UNSAFE_componentWillUpdate && "function" !== typeof g2.componentWillUpdate || ("function" === typeof g2.componentWillUpdate && g2.componentWillUpdate(
        d,
        x2,
        k
      ), "function" === typeof g2.UNSAFE_componentWillUpdate && g2.UNSAFE_componentWillUpdate(d, x2, k)), "function" === typeof g2.componentDidUpdate && (b.flags |= 4), "function" === typeof g2.getSnapshotBeforeUpdate && (b.flags |= 256)) : ("function" !== typeof g2.componentDidUpdate || h2 === a.memoizedProps && p2 === a.memoizedState || (b.flags |= 4), "function" !== typeof g2.getSnapshotBeforeUpdate || h2 === a.memoizedProps && p2 === a.memoizedState || (b.flags |= 256), b.memoizedProps = d, b.memoizedState = x2), g2.props = d, g2.state = x2, g2.context = k, d = l2) : ("function" !== typeof g2.componentDidUpdate || h2 === a.memoizedProps && p2 === a.memoizedState || (b.flags |= 4), "function" !== typeof g2.getSnapshotBeforeUpdate || h2 === a.memoizedProps && p2 === a.memoizedState || (b.flags |= 256), d = false);
    }
    return qi(a, b, c, d, f2, e);
  }
  function qi(a, b, c, d, e, f2) {
    oi(a, b);
    var g2 = 0 !== (b.flags & 64);
    if (!d && !g2)
      return e && Kf(b, c, false), hi(a, b, f2);
    d = b.stateNode;
    ei.current = b;
    var h2 = g2 && "function" !== typeof c.getDerivedStateFromError ? null : d.render();
    b.flags |= 1;
    null !== a && g2 ? (b.child = Yg(b, a.child, null, f2), b.child = Yg(b, null, h2, f2)) : fi(a, b, h2, f2);
    b.memoizedState = d.state;
    e && Kf(b, c, true);
    return b.child;
  }
  function ri(a) {
    var b = a.stateNode;
    b.pendingContext ? Hf(a, b.pendingContext, b.pendingContext !== b.context) : b.context && Hf(a, b.context, false);
    eh(a, b.containerInfo);
  }
  var si = { dehydrated: null, retryLane: 0 };
  function ti(a, b, c) {
    var d = b.pendingProps, e = P.current, f2 = false, g2;
    (g2 = 0 !== (b.flags & 64)) || (g2 = null !== a && null === a.memoizedState ? false : 0 !== (e & 2));
    g2 ? (f2 = true, b.flags &= -65) : null !== a && null === a.memoizedState || void 0 === d.fallback || true === d.unstable_avoidThisFallback || (e |= 1);
    I(P, e & 1);
    if (null === a) {
      void 0 !== d.fallback && ph(b);
      a = d.children;
      e = d.fallback;
      if (f2)
        return a = ui(b, a, e, c), b.child.memoizedState = { baseLanes: c }, b.memoizedState = si, a;
      if ("number" === typeof d.unstable_expectedLoadTime)
        return a = ui(b, a, e, c), b.child.memoizedState = { baseLanes: c }, b.memoizedState = si, b.lanes = 33554432, a;
      c = vi({ mode: "visible", children: a }, b.mode, c, null);
      c.return = b;
      return b.child = c;
    }
    if (null !== a.memoizedState) {
      if (f2)
        return d = wi(a, b, d.children, d.fallback, c), f2 = b.child, e = a.child.memoizedState, f2.memoizedState = null === e ? { baseLanes: c } : { baseLanes: e.baseLanes | c }, f2.childLanes = a.childLanes & ~c, b.memoizedState = si, d;
      c = xi(a, b, d.children, c);
      b.memoizedState = null;
      return c;
    }
    if (f2)
      return d = wi(a, b, d.children, d.fallback, c), f2 = b.child, e = a.child.memoizedState, f2.memoizedState = null === e ? { baseLanes: c } : { baseLanes: e.baseLanes | c }, f2.childLanes = a.childLanes & ~c, b.memoizedState = si, d;
    c = xi(a, b, d.children, c);
    b.memoizedState = null;
    return c;
  }
  function ui(a, b, c, d) {
    var e = a.mode, f2 = a.child;
    b = { mode: "hidden", children: b };
    0 === (e & 2) && null !== f2 ? (f2.childLanes = 0, f2.pendingProps = b) : f2 = vi(b, e, 0, null);
    c = Xg(c, e, d, null);
    f2.return = a;
    c.return = a;
    f2.sibling = c;
    a.child = f2;
    return c;
  }
  function xi(a, b, c, d) {
    var e = a.child;
    a = e.sibling;
    c = Tg(e, { mode: "visible", children: c });
    0 === (b.mode & 2) && (c.lanes = d);
    c.return = b;
    c.sibling = null;
    null !== a && (a.nextEffect = null, a.flags = 8, b.firstEffect = b.lastEffect = a);
    return b.child = c;
  }
  function wi(a, b, c, d, e) {
    var f2 = b.mode, g2 = a.child;
    a = g2.sibling;
    var h2 = { mode: "hidden", children: c };
    0 === (f2 & 2) && b.child !== g2 ? (c = b.child, c.childLanes = 0, c.pendingProps = h2, g2 = c.lastEffect, null !== g2 ? (b.firstEffect = c.firstEffect, b.lastEffect = g2, g2.nextEffect = null) : b.firstEffect = b.lastEffect = null) : c = Tg(g2, h2);
    null !== a ? d = Tg(a, d) : (d = Xg(d, f2, e, null), d.flags |= 2);
    d.return = b;
    c.return = b;
    c.sibling = d;
    b.child = c;
    return d;
  }
  function yi(a, b) {
    a.lanes |= b;
    var c = a.alternate;
    null !== c && (c.lanes |= b);
    sg(a.return, b);
  }
  function zi(a, b, c, d, e, f2) {
    var g2 = a.memoizedState;
    null === g2 ? a.memoizedState = { isBackwards: b, rendering: null, renderingStartTime: 0, last: d, tail: c, tailMode: e, lastEffect: f2 } : (g2.isBackwards = b, g2.rendering = null, g2.renderingStartTime = 0, g2.last = d, g2.tail = c, g2.tailMode = e, g2.lastEffect = f2);
  }
  function Ai(a, b, c) {
    var d = b.pendingProps, e = d.revealOrder, f2 = d.tail;
    fi(a, b, d.children, c);
    d = P.current;
    if (0 !== (d & 2))
      d = d & 1 | 2, b.flags |= 64;
    else {
      if (null !== a && 0 !== (a.flags & 64))
        a:
          for (a = b.child; null !== a; ) {
            if (13 === a.tag)
              null !== a.memoizedState && yi(a, c);
            else if (19 === a.tag)
              yi(a, c);
            else if (null !== a.child) {
              a.child.return = a;
              a = a.child;
              continue;
            }
            if (a === b)
              break a;
            for (; null === a.sibling; ) {
              if (null === a.return || a.return === b)
                break a;
              a = a.return;
            }
            a.sibling.return = a.return;
            a = a.sibling;
          }
      d &= 1;
    }
    I(P, d);
    if (0 === (b.mode & 2))
      b.memoizedState = null;
    else
      switch (e) {
        case "forwards":
          c = b.child;
          for (e = null; null !== c; )
            a = c.alternate, null !== a && null === ih(a) && (e = c), c = c.sibling;
          c = e;
          null === c ? (e = b.child, b.child = null) : (e = c.sibling, c.sibling = null);
          zi(b, false, e, c, f2, b.lastEffect);
          break;
        case "backwards":
          c = null;
          e = b.child;
          for (b.child = null; null !== e; ) {
            a = e.alternate;
            if (null !== a && null === ih(a)) {
              b.child = e;
              break;
            }
            a = e.sibling;
            e.sibling = c;
            c = e;
            e = a;
          }
          zi(b, true, c, null, f2, b.lastEffect);
          break;
        case "together":
          zi(b, false, null, null, void 0, b.lastEffect);
          break;
        default:
          b.memoizedState = null;
      }
    return b.child;
  }
  function hi(a, b, c) {
    null !== a && (b.dependencies = a.dependencies);
    Dg |= b.lanes;
    if (0 !== (c & b.childLanes)) {
      if (null !== a && b.child !== a.child)
        throw Error(y(153));
      if (null !== b.child) {
        a = b.child;
        c = Tg(a, a.pendingProps);
        b.child = c;
        for (c.return = b; null !== a.sibling; )
          a = a.sibling, c = c.sibling = Tg(a, a.pendingProps), c.return = b;
        c.sibling = null;
      }
      return b.child;
    }
    return null;
  }
  var Bi, Ci, Di, Ei;
  Bi = function(a, b) {
    for (var c = b.child; null !== c; ) {
      if (5 === c.tag || 6 === c.tag)
        a.appendChild(c.stateNode);
      else if (4 !== c.tag && null !== c.child) {
        c.child.return = c;
        c = c.child;
        continue;
      }
      if (c === b)
        break;
      for (; null === c.sibling; ) {
        if (null === c.return || c.return === b)
          return;
        c = c.return;
      }
      c.sibling.return = c.return;
      c = c.sibling;
    }
  };
  Ci = function() {
  };
  Di = function(a, b, c, d) {
    var e = a.memoizedProps;
    if (e !== d) {
      a = b.stateNode;
      dh(ah.current);
      var f2 = null;
      switch (c) {
        case "input":
          e = Ya(a, e);
          d = Ya(a, d);
          f2 = [];
          break;
        case "option":
          e = eb(a, e);
          d = eb(a, d);
          f2 = [];
          break;
        case "select":
          e = m$1({}, e, { value: void 0 });
          d = m$1({}, d, { value: void 0 });
          f2 = [];
          break;
        case "textarea":
          e = gb(a, e);
          d = gb(a, d);
          f2 = [];
          break;
        default:
          "function" !== typeof e.onClick && "function" === typeof d.onClick && (a.onclick = jf);
      }
      vb(c, d);
      var g2;
      c = null;
      for (l2 in e)
        if (!d.hasOwnProperty(l2) && e.hasOwnProperty(l2) && null != e[l2])
          if ("style" === l2) {
            var h2 = e[l2];
            for (g2 in h2)
              h2.hasOwnProperty(g2) && (c || (c = {}), c[g2] = "");
          } else
            "dangerouslySetInnerHTML" !== l2 && "children" !== l2 && "suppressContentEditableWarning" !== l2 && "suppressHydrationWarning" !== l2 && "autoFocus" !== l2 && (ca.hasOwnProperty(l2) ? f2 || (f2 = []) : (f2 = f2 || []).push(l2, null));
      for (l2 in d) {
        var k = d[l2];
        h2 = null != e ? e[l2] : void 0;
        if (d.hasOwnProperty(l2) && k !== h2 && (null != k || null != h2))
          if ("style" === l2)
            if (h2) {
              for (g2 in h2)
                !h2.hasOwnProperty(g2) || k && k.hasOwnProperty(g2) || (c || (c = {}), c[g2] = "");
              for (g2 in k)
                k.hasOwnProperty(g2) && h2[g2] !== k[g2] && (c || (c = {}), c[g2] = k[g2]);
            } else
              c || (f2 || (f2 = []), f2.push(l2, c)), c = k;
          else
            "dangerouslySetInnerHTML" === l2 ? (k = k ? k.__html : void 0, h2 = h2 ? h2.__html : void 0, null != k && h2 !== k && (f2 = f2 || []).push(l2, k)) : "children" === l2 ? "string" !== typeof k && "number" !== typeof k || (f2 = f2 || []).push(l2, "" + k) : "suppressContentEditableWarning" !== l2 && "suppressHydrationWarning" !== l2 && (ca.hasOwnProperty(l2) ? (null != k && "onScroll" === l2 && G("scroll", a), f2 || h2 === k || (f2 = [])) : "object" === typeof k && null !== k && k.$$typeof === Ga ? k.toString() : (f2 = f2 || []).push(l2, k));
      }
      c && (f2 = f2 || []).push(
        "style",
        c
      );
      var l2 = f2;
      if (b.updateQueue = l2)
        b.flags |= 4;
    }
  };
  Ei = function(a, b, c, d) {
    c !== d && (b.flags |= 4);
  };
  function Fi(a, b) {
    if (!lh)
      switch (a.tailMode) {
        case "hidden":
          b = a.tail;
          for (var c = null; null !== b; )
            null !== b.alternate && (c = b), b = b.sibling;
          null === c ? a.tail = null : c.sibling = null;
          break;
        case "collapsed":
          c = a.tail;
          for (var d = null; null !== c; )
            null !== c.alternate && (d = c), c = c.sibling;
          null === d ? b || null === a.tail ? a.tail = null : a.tail.sibling = null : d.sibling = null;
      }
  }
  function Gi(a, b, c) {
    var d = b.pendingProps;
    switch (b.tag) {
      case 2:
      case 16:
      case 15:
      case 0:
      case 11:
      case 7:
      case 8:
      case 12:
      case 9:
      case 14:
        return null;
      case 1:
        return Ff(b.type) && Gf(), null;
      case 3:
        fh();
        H(N);
        H(M);
        uh();
        d = b.stateNode;
        d.pendingContext && (d.context = d.pendingContext, d.pendingContext = null);
        if (null === a || null === a.child)
          rh(b) ? b.flags |= 4 : d.hydrate || (b.flags |= 256);
        Ci(b);
        return null;
      case 5:
        hh(b);
        var e = dh(ch.current);
        c = b.type;
        if (null !== a && null != b.stateNode)
          Di(a, b, c, d, e), a.ref !== b.ref && (b.flags |= 128);
        else {
          if (!d) {
            if (null === b.stateNode)
              throw Error(y(166));
            return null;
          }
          a = dh(ah.current);
          if (rh(b)) {
            d = b.stateNode;
            c = b.type;
            var f2 = b.memoizedProps;
            d[wf] = b;
            d[xf] = f2;
            switch (c) {
              case "dialog":
                G("cancel", d);
                G("close", d);
                break;
              case "iframe":
              case "object":
              case "embed":
                G("load", d);
                break;
              case "video":
              case "audio":
                for (a = 0; a < Xe.length; a++)
                  G(Xe[a], d);
                break;
              case "source":
                G("error", d);
                break;
              case "img":
              case "image":
              case "link":
                G("error", d);
                G("load", d);
                break;
              case "details":
                G("toggle", d);
                break;
              case "input":
                Za(d, f2);
                G("invalid", d);
                break;
              case "select":
                d._wrapperState = { wasMultiple: !!f2.multiple };
                G("invalid", d);
                break;
              case "textarea":
                hb(d, f2), G("invalid", d);
            }
            vb(c, f2);
            a = null;
            for (var g2 in f2)
              f2.hasOwnProperty(g2) && (e = f2[g2], "children" === g2 ? "string" === typeof e ? d.textContent !== e && (a = ["children", e]) : "number" === typeof e && d.textContent !== "" + e && (a = ["children", "" + e]) : ca.hasOwnProperty(g2) && null != e && "onScroll" === g2 && G("scroll", d));
            switch (c) {
              case "input":
                Va(d);
                cb(d, f2, true);
                break;
              case "textarea":
                Va(d);
                jb(d);
                break;
              case "select":
              case "option":
                break;
              default:
                "function" === typeof f2.onClick && (d.onclick = jf);
            }
            d = a;
            b.updateQueue = d;
            null !== d && (b.flags |= 4);
          } else {
            g2 = 9 === e.nodeType ? e : e.ownerDocument;
            a === kb.html && (a = lb(c));
            a === kb.html ? "script" === c ? (a = g2.createElement("div"), a.innerHTML = "<script><\/script>", a = a.removeChild(a.firstChild)) : "string" === typeof d.is ? a = g2.createElement(c, { is: d.is }) : (a = g2.createElement(c), "select" === c && (g2 = a, d.multiple ? g2.multiple = true : d.size && (g2.size = d.size))) : a = g2.createElementNS(a, c);
            a[wf] = b;
            a[xf] = d;
            Bi(a, b, false, false);
            b.stateNode = a;
            g2 = wb(c, d);
            switch (c) {
              case "dialog":
                G("cancel", a);
                G("close", a);
                e = d;
                break;
              case "iframe":
              case "object":
              case "embed":
                G("load", a);
                e = d;
                break;
              case "video":
              case "audio":
                for (e = 0; e < Xe.length; e++)
                  G(Xe[e], a);
                e = d;
                break;
              case "source":
                G("error", a);
                e = d;
                break;
              case "img":
              case "image":
              case "link":
                G("error", a);
                G("load", a);
                e = d;
                break;
              case "details":
                G("toggle", a);
                e = d;
                break;
              case "input":
                Za(a, d);
                e = Ya(a, d);
                G("invalid", a);
                break;
              case "option":
                e = eb(a, d);
                break;
              case "select":
                a._wrapperState = { wasMultiple: !!d.multiple };
                e = m$1({}, d, { value: void 0 });
                G("invalid", a);
                break;
              case "textarea":
                hb(a, d);
                e = gb(a, d);
                G("invalid", a);
                break;
              default:
                e = d;
            }
            vb(c, e);
            var h2 = e;
            for (f2 in h2)
              if (h2.hasOwnProperty(f2)) {
                var k = h2[f2];
                "style" === f2 ? tb(a, k) : "dangerouslySetInnerHTML" === f2 ? (k = k ? k.__html : void 0, null != k && ob(a, k)) : "children" === f2 ? "string" === typeof k ? ("textarea" !== c || "" !== k) && pb(a, k) : "number" === typeof k && pb(a, "" + k) : "suppressContentEditableWarning" !== f2 && "suppressHydrationWarning" !== f2 && "autoFocus" !== f2 && (ca.hasOwnProperty(f2) ? null != k && "onScroll" === f2 && G("scroll", a) : null != k && qa(a, f2, k, g2));
              }
            switch (c) {
              case "input":
                Va(a);
                cb(a, d, false);
                break;
              case "textarea":
                Va(a);
                jb(a);
                break;
              case "option":
                null != d.value && a.setAttribute("value", "" + Sa(d.value));
                break;
              case "select":
                a.multiple = !!d.multiple;
                f2 = d.value;
                null != f2 ? fb(a, !!d.multiple, f2, false) : null != d.defaultValue && fb(a, !!d.multiple, d.defaultValue, true);
                break;
              default:
                "function" === typeof e.onClick && (a.onclick = jf);
            }
            mf(c, d) && (b.flags |= 4);
          }
          null !== b.ref && (b.flags |= 128);
        }
        return null;
      case 6:
        if (a && null != b.stateNode)
          Ei(a, b, a.memoizedProps, d);
        else {
          if ("string" !== typeof d && null === b.stateNode)
            throw Error(y(166));
          c = dh(ch.current);
          dh(ah.current);
          rh(b) ? (d = b.stateNode, c = b.memoizedProps, d[wf] = b, d.nodeValue !== c && (b.flags |= 4)) : (d = (9 === c.nodeType ? c : c.ownerDocument).createTextNode(d), d[wf] = b, b.stateNode = d);
        }
        return null;
      case 13:
        H(P);
        d = b.memoizedState;
        if (0 !== (b.flags & 64))
          return b.lanes = c, b;
        d = null !== d;
        c = false;
        null === a ? void 0 !== b.memoizedProps.fallback && rh(b) : c = null !== a.memoizedState;
        if (d && !c && 0 !== (b.mode & 2))
          if (null === a && true !== b.memoizedProps.unstable_avoidThisFallback || 0 !== (P.current & 1))
            0 === V && (V = 3);
          else {
            if (0 === V || 3 === V)
              V = 4;
            null === U || 0 === (Dg & 134217727) && 0 === (Hi & 134217727) || Ii(U, W);
          }
        if (d || c)
          b.flags |= 4;
        return null;
      case 4:
        return fh(), Ci(b), null === a && cf(b.stateNode.containerInfo), null;
      case 10:
        return rg(b), null;
      case 17:
        return Ff(b.type) && Gf(), null;
      case 19:
        H(P);
        d = b.memoizedState;
        if (null === d)
          return null;
        f2 = 0 !== (b.flags & 64);
        g2 = d.rendering;
        if (null === g2)
          if (f2)
            Fi(d, false);
          else {
            if (0 !== V || null !== a && 0 !== (a.flags & 64))
              for (a = b.child; null !== a; ) {
                g2 = ih(a);
                if (null !== g2) {
                  b.flags |= 64;
                  Fi(d, false);
                  f2 = g2.updateQueue;
                  null !== f2 && (b.updateQueue = f2, b.flags |= 4);
                  null === d.lastEffect && (b.firstEffect = null);
                  b.lastEffect = d.lastEffect;
                  d = c;
                  for (c = b.child; null !== c; )
                    f2 = c, a = d, f2.flags &= 2, f2.nextEffect = null, f2.firstEffect = null, f2.lastEffect = null, g2 = f2.alternate, null === g2 ? (f2.childLanes = 0, f2.lanes = a, f2.child = null, f2.memoizedProps = null, f2.memoizedState = null, f2.updateQueue = null, f2.dependencies = null, f2.stateNode = null) : (f2.childLanes = g2.childLanes, f2.lanes = g2.lanes, f2.child = g2.child, f2.memoizedProps = g2.memoizedProps, f2.memoizedState = g2.memoizedState, f2.updateQueue = g2.updateQueue, f2.type = g2.type, a = g2.dependencies, f2.dependencies = null === a ? null : { lanes: a.lanes, firstContext: a.firstContext }), c = c.sibling;
                  I(P, P.current & 1 | 2);
                  return b.child;
                }
                a = a.sibling;
              }
            null !== d.tail && O() > Ji && (b.flags |= 64, f2 = true, Fi(d, false), b.lanes = 33554432);
          }
        else {
          if (!f2)
            if (a = ih(g2), null !== a) {
              if (b.flags |= 64, f2 = true, c = a.updateQueue, null !== c && (b.updateQueue = c, b.flags |= 4), Fi(d, true), null === d.tail && "hidden" === d.tailMode && !g2.alternate && !lh)
                return b = b.lastEffect = d.lastEffect, null !== b && (b.nextEffect = null), null;
            } else
              2 * O() - d.renderingStartTime > Ji && 1073741824 !== c && (b.flags |= 64, f2 = true, Fi(d, false), b.lanes = 33554432);
          d.isBackwards ? (g2.sibling = b.child, b.child = g2) : (c = d.last, null !== c ? c.sibling = g2 : b.child = g2, d.last = g2);
        }
        return null !== d.tail ? (c = d.tail, d.rendering = c, d.tail = c.sibling, d.lastEffect = b.lastEffect, d.renderingStartTime = O(), c.sibling = null, b = P.current, I(P, f2 ? b & 1 | 2 : b & 1), c) : null;
      case 23:
      case 24:
        return Ki(), null !== a && null !== a.memoizedState !== (null !== b.memoizedState) && "unstable-defer-without-hiding" !== d.mode && (b.flags |= 4), null;
    }
    throw Error(y(156, b.tag));
  }
  function Li(a) {
    switch (a.tag) {
      case 1:
        Ff(a.type) && Gf();
        var b = a.flags;
        return b & 4096 ? (a.flags = b & -4097 | 64, a) : null;
      case 3:
        fh();
        H(N);
        H(M);
        uh();
        b = a.flags;
        if (0 !== (b & 64))
          throw Error(y(285));
        a.flags = b & -4097 | 64;
        return a;
      case 5:
        return hh(a), null;
      case 13:
        return H(P), b = a.flags, b & 4096 ? (a.flags = b & -4097 | 64, a) : null;
      case 19:
        return H(P), null;
      case 4:
        return fh(), null;
      case 10:
        return rg(a), null;
      case 23:
      case 24:
        return Ki(), null;
      default:
        return null;
    }
  }
  function Mi(a, b) {
    try {
      var c = "", d = b;
      do
        c += Qa(d), d = d.return;
      while (d);
      var e = c;
    } catch (f2) {
      e = "\nError generating stack: " + f2.message + "\n" + f2.stack;
    }
    return { value: a, source: b, stack: e };
  }
  function Ni(a, b) {
    try {
      console.error(b.value);
    } catch (c) {
      setTimeout(function() {
        throw c;
      });
    }
  }
  var Oi = "function" === typeof WeakMap ? WeakMap : Map;
  function Pi(a, b, c) {
    c = zg(-1, c);
    c.tag = 3;
    c.payload = { element: null };
    var d = b.value;
    c.callback = function() {
      Qi || (Qi = true, Ri = d);
      Ni(a, b);
    };
    return c;
  }
  function Si(a, b, c) {
    c = zg(-1, c);
    c.tag = 3;
    var d = a.type.getDerivedStateFromError;
    if ("function" === typeof d) {
      var e = b.value;
      c.payload = function() {
        Ni(a, b);
        return d(e);
      };
    }
    var f2 = a.stateNode;
    null !== f2 && "function" === typeof f2.componentDidCatch && (c.callback = function() {
      "function" !== typeof d && (null === Ti ? Ti = /* @__PURE__ */ new Set([this]) : Ti.add(this), Ni(a, b));
      var c2 = b.stack;
      this.componentDidCatch(b.value, { componentStack: null !== c2 ? c2 : "" });
    });
    return c;
  }
  var Ui = "function" === typeof WeakSet ? WeakSet : Set;
  function Vi(a) {
    var b = a.ref;
    if (null !== b)
      if ("function" === typeof b)
        try {
          b(null);
        } catch (c) {
          Wi(a, c);
        }
      else
        b.current = null;
  }
  function Xi(a, b) {
    switch (b.tag) {
      case 0:
      case 11:
      case 15:
      case 22:
        return;
      case 1:
        if (b.flags & 256 && null !== a) {
          var c = a.memoizedProps, d = a.memoizedState;
          a = b.stateNode;
          b = a.getSnapshotBeforeUpdate(b.elementType === b.type ? c : lg(b.type, c), d);
          a.__reactInternalSnapshotBeforeUpdate = b;
        }
        return;
      case 3:
        b.flags & 256 && qf(b.stateNode.containerInfo);
        return;
      case 5:
      case 6:
      case 4:
      case 17:
        return;
    }
    throw Error(y(163));
  }
  function Yi(a, b, c) {
    switch (c.tag) {
      case 0:
      case 11:
      case 15:
      case 22:
        b = c.updateQueue;
        b = null !== b ? b.lastEffect : null;
        if (null !== b) {
          a = b = b.next;
          do {
            if (3 === (a.tag & 3)) {
              var d = a.create;
              a.destroy = d();
            }
            a = a.next;
          } while (a !== b);
        }
        b = c.updateQueue;
        b = null !== b ? b.lastEffect : null;
        if (null !== b) {
          a = b = b.next;
          do {
            var e = a;
            d = e.next;
            e = e.tag;
            0 !== (e & 4) && 0 !== (e & 1) && (Zi(c, a), $i(c, a));
            a = d;
          } while (a !== b);
        }
        return;
      case 1:
        a = c.stateNode;
        c.flags & 4 && (null === b ? a.componentDidMount() : (d = c.elementType === c.type ? b.memoizedProps : lg(c.type, b.memoizedProps), a.componentDidUpdate(
          d,
          b.memoizedState,
          a.__reactInternalSnapshotBeforeUpdate
        )));
        b = c.updateQueue;
        null !== b && Eg(c, b, a);
        return;
      case 3:
        b = c.updateQueue;
        if (null !== b) {
          a = null;
          if (null !== c.child)
            switch (c.child.tag) {
              case 5:
                a = c.child.stateNode;
                break;
              case 1:
                a = c.child.stateNode;
            }
          Eg(c, b, a);
        }
        return;
      case 5:
        a = c.stateNode;
        null === b && c.flags & 4 && mf(c.type, c.memoizedProps) && a.focus();
        return;
      case 6:
        return;
      case 4:
        return;
      case 12:
        return;
      case 13:
        null === c.memoizedState && (c = c.alternate, null !== c && (c = c.memoizedState, null !== c && (c = c.dehydrated, null !== c && Cc(c))));
        return;
      case 19:
      case 17:
      case 20:
      case 21:
      case 23:
      case 24:
        return;
    }
    throw Error(y(163));
  }
  function aj(a, b) {
    for (var c = a; ; ) {
      if (5 === c.tag) {
        var d = c.stateNode;
        if (b)
          d = d.style, "function" === typeof d.setProperty ? d.setProperty("display", "none", "important") : d.display = "none";
        else {
          d = c.stateNode;
          var e = c.memoizedProps.style;
          e = void 0 !== e && null !== e && e.hasOwnProperty("display") ? e.display : null;
          d.style.display = sb("display", e);
        }
      } else if (6 === c.tag)
        c.stateNode.nodeValue = b ? "" : c.memoizedProps;
      else if ((23 !== c.tag && 24 !== c.tag || null === c.memoizedState || c === a) && null !== c.child) {
        c.child.return = c;
        c = c.child;
        continue;
      }
      if (c === a)
        break;
      for (; null === c.sibling; ) {
        if (null === c.return || c.return === a)
          return;
        c = c.return;
      }
      c.sibling.return = c.return;
      c = c.sibling;
    }
  }
  function bj(a, b) {
    if (Mf && "function" === typeof Mf.onCommitFiberUnmount)
      try {
        Mf.onCommitFiberUnmount(Lf, b);
      } catch (f2) {
      }
    switch (b.tag) {
      case 0:
      case 11:
      case 14:
      case 15:
      case 22:
        a = b.updateQueue;
        if (null !== a && (a = a.lastEffect, null !== a)) {
          var c = a = a.next;
          do {
            var d = c, e = d.destroy;
            d = d.tag;
            if (void 0 !== e)
              if (0 !== (d & 4))
                Zi(b, c);
              else {
                d = b;
                try {
                  e();
                } catch (f2) {
                  Wi(d, f2);
                }
              }
            c = c.next;
          } while (c !== a);
        }
        break;
      case 1:
        Vi(b);
        a = b.stateNode;
        if ("function" === typeof a.componentWillUnmount)
          try {
            a.props = b.memoizedProps, a.state = b.memoizedState, a.componentWillUnmount();
          } catch (f2) {
            Wi(
              b,
              f2
            );
          }
        break;
      case 5:
        Vi(b);
        break;
      case 4:
        cj(a, b);
    }
  }
  function dj(a) {
    a.alternate = null;
    a.child = null;
    a.dependencies = null;
    a.firstEffect = null;
    a.lastEffect = null;
    a.memoizedProps = null;
    a.memoizedState = null;
    a.pendingProps = null;
    a.return = null;
    a.updateQueue = null;
  }
  function ej(a) {
    return 5 === a.tag || 3 === a.tag || 4 === a.tag;
  }
  function fj(a) {
    a: {
      for (var b = a.return; null !== b; ) {
        if (ej(b))
          break a;
        b = b.return;
      }
      throw Error(y(160));
    }
    var c = b;
    b = c.stateNode;
    switch (c.tag) {
      case 5:
        var d = false;
        break;
      case 3:
        b = b.containerInfo;
        d = true;
        break;
      case 4:
        b = b.containerInfo;
        d = true;
        break;
      default:
        throw Error(y(161));
    }
    c.flags & 16 && (pb(b, ""), c.flags &= -17);
    a:
      b:
        for (c = a; ; ) {
          for (; null === c.sibling; ) {
            if (null === c.return || ej(c.return)) {
              c = null;
              break a;
            }
            c = c.return;
          }
          c.sibling.return = c.return;
          for (c = c.sibling; 5 !== c.tag && 6 !== c.tag && 18 !== c.tag; ) {
            if (c.flags & 2)
              continue b;
            if (null === c.child || 4 === c.tag)
              continue b;
            else
              c.child.return = c, c = c.child;
          }
          if (!(c.flags & 2)) {
            c = c.stateNode;
            break a;
          }
        }
    d ? gj(a, c, b) : hj(a, c, b);
  }
  function gj(a, b, c) {
    var d = a.tag, e = 5 === d || 6 === d;
    if (e)
      a = e ? a.stateNode : a.stateNode.instance, b ? 8 === c.nodeType ? c.parentNode.insertBefore(a, b) : c.insertBefore(a, b) : (8 === c.nodeType ? (b = c.parentNode, b.insertBefore(a, c)) : (b = c, b.appendChild(a)), c = c._reactRootContainer, null !== c && void 0 !== c || null !== b.onclick || (b.onclick = jf));
    else if (4 !== d && (a = a.child, null !== a))
      for (gj(a, b, c), a = a.sibling; null !== a; )
        gj(a, b, c), a = a.sibling;
  }
  function hj(a, b, c) {
    var d = a.tag, e = 5 === d || 6 === d;
    if (e)
      a = e ? a.stateNode : a.stateNode.instance, b ? c.insertBefore(a, b) : c.appendChild(a);
    else if (4 !== d && (a = a.child, null !== a))
      for (hj(a, b, c), a = a.sibling; null !== a; )
        hj(a, b, c), a = a.sibling;
  }
  function cj(a, b) {
    for (var c = b, d = false, e, f2; ; ) {
      if (!d) {
        d = c.return;
        a:
          for (; ; ) {
            if (null === d)
              throw Error(y(160));
            e = d.stateNode;
            switch (d.tag) {
              case 5:
                f2 = false;
                break a;
              case 3:
                e = e.containerInfo;
                f2 = true;
                break a;
              case 4:
                e = e.containerInfo;
                f2 = true;
                break a;
            }
            d = d.return;
          }
        d = true;
      }
      if (5 === c.tag || 6 === c.tag) {
        a:
          for (var g2 = a, h2 = c, k = h2; ; )
            if (bj(g2, k), null !== k.child && 4 !== k.tag)
              k.child.return = k, k = k.child;
            else {
              if (k === h2)
                break a;
              for (; null === k.sibling; ) {
                if (null === k.return || k.return === h2)
                  break a;
                k = k.return;
              }
              k.sibling.return = k.return;
              k = k.sibling;
            }
        f2 ? (g2 = e, h2 = c.stateNode, 8 === g2.nodeType ? g2.parentNode.removeChild(h2) : g2.removeChild(h2)) : e.removeChild(c.stateNode);
      } else if (4 === c.tag) {
        if (null !== c.child) {
          e = c.stateNode.containerInfo;
          f2 = true;
          c.child.return = c;
          c = c.child;
          continue;
        }
      } else if (bj(a, c), null !== c.child) {
        c.child.return = c;
        c = c.child;
        continue;
      }
      if (c === b)
        break;
      for (; null === c.sibling; ) {
        if (null === c.return || c.return === b)
          return;
        c = c.return;
        4 === c.tag && (d = false);
      }
      c.sibling.return = c.return;
      c = c.sibling;
    }
  }
  function ij(a, b) {
    switch (b.tag) {
      case 0:
      case 11:
      case 14:
      case 15:
      case 22:
        var c = b.updateQueue;
        c = null !== c ? c.lastEffect : null;
        if (null !== c) {
          var d = c = c.next;
          do
            3 === (d.tag & 3) && (a = d.destroy, d.destroy = void 0, void 0 !== a && a()), d = d.next;
          while (d !== c);
        }
        return;
      case 1:
        return;
      case 5:
        c = b.stateNode;
        if (null != c) {
          d = b.memoizedProps;
          var e = null !== a ? a.memoizedProps : d;
          a = b.type;
          var f2 = b.updateQueue;
          b.updateQueue = null;
          if (null !== f2) {
            c[xf] = d;
            "input" === a && "radio" === d.type && null != d.name && $a(c, d);
            wb(a, e);
            b = wb(a, d);
            for (e = 0; e < f2.length; e += 2) {
              var g2 = f2[e], h2 = f2[e + 1];
              "style" === g2 ? tb(c, h2) : "dangerouslySetInnerHTML" === g2 ? ob(c, h2) : "children" === g2 ? pb(c, h2) : qa(c, g2, h2, b);
            }
            switch (a) {
              case "input":
                ab(c, d);
                break;
              case "textarea":
                ib(c, d);
                break;
              case "select":
                a = c._wrapperState.wasMultiple, c._wrapperState.wasMultiple = !!d.multiple, f2 = d.value, null != f2 ? fb(c, !!d.multiple, f2, false) : a !== !!d.multiple && (null != d.defaultValue ? fb(c, !!d.multiple, d.defaultValue, true) : fb(c, !!d.multiple, d.multiple ? [] : "", false));
            }
          }
        }
        return;
      case 6:
        if (null === b.stateNode)
          throw Error(y(162));
        b.stateNode.nodeValue = b.memoizedProps;
        return;
      case 3:
        c = b.stateNode;
        c.hydrate && (c.hydrate = false, Cc(c.containerInfo));
        return;
      case 12:
        return;
      case 13:
        null !== b.memoizedState && (jj = O(), aj(b.child, true));
        kj(b);
        return;
      case 19:
        kj(b);
        return;
      case 17:
        return;
      case 23:
      case 24:
        aj(b, null !== b.memoizedState);
        return;
    }
    throw Error(y(163));
  }
  function kj(a) {
    var b = a.updateQueue;
    if (null !== b) {
      a.updateQueue = null;
      var c = a.stateNode;
      null === c && (c = a.stateNode = new Ui());
      b.forEach(function(b2) {
        var d = lj.bind(null, a, b2);
        c.has(b2) || (c.add(b2), b2.then(d, d));
      });
    }
  }
  function mj(a, b) {
    return null !== a && (a = a.memoizedState, null === a || null !== a.dehydrated) ? (b = b.memoizedState, null !== b && null === b.dehydrated) : false;
  }
  var nj = Math.ceil, oj = ra.ReactCurrentDispatcher, pj = ra.ReactCurrentOwner, X = 0, U = null, Y = null, W = 0, qj = 0, rj = Bf(0), V = 0, sj = null, tj = 0, Dg = 0, Hi = 0, uj = 0, vj = null, jj = 0, Ji = Infinity;
  function wj() {
    Ji = O() + 500;
  }
  var Z = null, Qi = false, Ri = null, Ti = null, xj = false, yj = null, zj = 90, Aj = [], Bj = [], Cj = null, Dj = 0, Ej = null, Fj = -1, Gj = 0, Hj = 0, Ij = null, Jj = false;
  function Hg() {
    return 0 !== (X & 48) ? O() : -1 !== Fj ? Fj : Fj = O();
  }
  function Ig(a) {
    a = a.mode;
    if (0 === (a & 2))
      return 1;
    if (0 === (a & 4))
      return 99 === eg() ? 1 : 2;
    0 === Gj && (Gj = tj);
    if (0 !== kg.transition) {
      0 !== Hj && (Hj = null !== vj ? vj.pendingLanes : 0);
      a = Gj;
      var b = 4186112 & ~Hj;
      b &= -b;
      0 === b && (a = 4186112 & ~a, b = a & -a, 0 === b && (b = 8192));
      return b;
    }
    a = eg();
    0 !== (X & 4) && 98 === a ? a = Xc(12, Gj) : (a = Sc(a), a = Xc(a, Gj));
    return a;
  }
  function Jg(a, b, c) {
    if (50 < Dj)
      throw Dj = 0, Ej = null, Error(y(185));
    a = Kj(a, b);
    if (null === a)
      return null;
    $c(a, b, c);
    a === U && (Hi |= b, 4 === V && Ii(a, W));
    var d = eg();
    1 === b ? 0 !== (X & 8) && 0 === (X & 48) ? Lj(a) : (Mj(a, c), 0 === X && (wj(), ig())) : (0 === (X & 4) || 98 !== d && 99 !== d || (null === Cj ? Cj = /* @__PURE__ */ new Set([a]) : Cj.add(a)), Mj(a, c));
    vj = a;
  }
  function Kj(a, b) {
    a.lanes |= b;
    var c = a.alternate;
    null !== c && (c.lanes |= b);
    c = a;
    for (a = a.return; null !== a; )
      a.childLanes |= b, c = a.alternate, null !== c && (c.childLanes |= b), c = a, a = a.return;
    return 3 === c.tag ? c.stateNode : null;
  }
  function Mj(a, b) {
    for (var c = a.callbackNode, d = a.suspendedLanes, e = a.pingedLanes, f2 = a.expirationTimes, g2 = a.pendingLanes; 0 < g2; ) {
      var h2 = 31 - Vc(g2), k = 1 << h2, l2 = f2[h2];
      if (-1 === l2) {
        if (0 === (k & d) || 0 !== (k & e)) {
          l2 = b;
          Rc(k);
          var n2 = F;
          f2[h2] = 10 <= n2 ? l2 + 250 : 6 <= n2 ? l2 + 5e3 : -1;
        }
      } else
        l2 <= b && (a.expiredLanes |= k);
      g2 &= ~k;
    }
    d = Uc(a, a === U ? W : 0);
    b = F;
    if (0 === d)
      null !== c && (c !== Zf && Pf(c), a.callbackNode = null, a.callbackPriority = 0);
    else {
      if (null !== c) {
        if (a.callbackPriority === b)
          return;
        c !== Zf && Pf(c);
      }
      15 === b ? (c = Lj.bind(null, a), null === ag ? (ag = [c], bg = Of(Uf, jg)) : ag.push(c), c = Zf) : 14 === b ? c = hg(99, Lj.bind(null, a)) : (c = Tc(b), c = hg(c, Nj.bind(null, a)));
      a.callbackPriority = b;
      a.callbackNode = c;
    }
  }
  function Nj(a) {
    Fj = -1;
    Hj = Gj = 0;
    if (0 !== (X & 48))
      throw Error(y(327));
    var b = a.callbackNode;
    if (Oj() && a.callbackNode !== b)
      return null;
    var c = Uc(a, a === U ? W : 0);
    if (0 === c)
      return null;
    var d = c;
    var e = X;
    X |= 16;
    var f2 = Pj();
    if (U !== a || W !== d)
      wj(), Qj(a, d);
    do
      try {
        Rj();
        break;
      } catch (h2) {
        Sj(a, h2);
      }
    while (1);
    qg();
    oj.current = f2;
    X = e;
    null !== Y ? d = 0 : (U = null, W = 0, d = V);
    if (0 !== (tj & Hi))
      Qj(a, 0);
    else if (0 !== d) {
      2 === d && (X |= 64, a.hydrate && (a.hydrate = false, qf(a.containerInfo)), c = Wc(a), 0 !== c && (d = Tj(a, c)));
      if (1 === d)
        throw b = sj, Qj(a, 0), Ii(a, c), Mj(a, O()), b;
      a.finishedWork = a.current.alternate;
      a.finishedLanes = c;
      switch (d) {
        case 0:
        case 1:
          throw Error(y(345));
        case 2:
          Uj(a);
          break;
        case 3:
          Ii(a, c);
          if ((c & 62914560) === c && (d = jj + 500 - O(), 10 < d)) {
            if (0 !== Uc(a, 0))
              break;
            e = a.suspendedLanes;
            if ((e & c) !== c) {
              Hg();
              a.pingedLanes |= a.suspendedLanes & e;
              break;
            }
            a.timeoutHandle = of(Uj.bind(null, a), d);
            break;
          }
          Uj(a);
          break;
        case 4:
          Ii(a, c);
          if ((c & 4186112) === c)
            break;
          d = a.eventTimes;
          for (e = -1; 0 < c; ) {
            var g2 = 31 - Vc(c);
            f2 = 1 << g2;
            g2 = d[g2];
            g2 > e && (e = g2);
            c &= ~f2;
          }
          c = e;
          c = O() - c;
          c = (120 > c ? 120 : 480 > c ? 480 : 1080 > c ? 1080 : 1920 > c ? 1920 : 3e3 > c ? 3e3 : 4320 > c ? 4320 : 1960 * nj(c / 1960)) - c;
          if (10 < c) {
            a.timeoutHandle = of(Uj.bind(null, a), c);
            break;
          }
          Uj(a);
          break;
        case 5:
          Uj(a);
          break;
        default:
          throw Error(y(329));
      }
    }
    Mj(a, O());
    return a.callbackNode === b ? Nj.bind(null, a) : null;
  }
  function Ii(a, b) {
    b &= ~uj;
    b &= ~Hi;
    a.suspendedLanes |= b;
    a.pingedLanes &= ~b;
    for (a = a.expirationTimes; 0 < b; ) {
      var c = 31 - Vc(b), d = 1 << c;
      a[c] = -1;
      b &= ~d;
    }
  }
  function Lj(a) {
    if (0 !== (X & 48))
      throw Error(y(327));
    Oj();
    if (a === U && 0 !== (a.expiredLanes & W)) {
      var b = W;
      var c = Tj(a, b);
      0 !== (tj & Hi) && (b = Uc(a, b), c = Tj(a, b));
    } else
      b = Uc(a, 0), c = Tj(a, b);
    0 !== a.tag && 2 === c && (X |= 64, a.hydrate && (a.hydrate = false, qf(a.containerInfo)), b = Wc(a), 0 !== b && (c = Tj(a, b)));
    if (1 === c)
      throw c = sj, Qj(a, 0), Ii(a, b), Mj(a, O()), c;
    a.finishedWork = a.current.alternate;
    a.finishedLanes = b;
    Uj(a);
    Mj(a, O());
    return null;
  }
  function Vj() {
    if (null !== Cj) {
      var a = Cj;
      Cj = null;
      a.forEach(function(a2) {
        a2.expiredLanes |= 24 & a2.pendingLanes;
        Mj(a2, O());
      });
    }
    ig();
  }
  function Wj(a, b) {
    var c = X;
    X |= 1;
    try {
      return a(b);
    } finally {
      X = c, 0 === X && (wj(), ig());
    }
  }
  function Xj(a, b) {
    var c = X;
    X &= -2;
    X |= 8;
    try {
      return a(b);
    } finally {
      X = c, 0 === X && (wj(), ig());
    }
  }
  function ni(a, b) {
    I(rj, qj);
    qj |= b;
    tj |= b;
  }
  function Ki() {
    qj = rj.current;
    H(rj);
  }
  function Qj(a, b) {
    a.finishedWork = null;
    a.finishedLanes = 0;
    var c = a.timeoutHandle;
    -1 !== c && (a.timeoutHandle = -1, pf(c));
    if (null !== Y)
      for (c = Y.return; null !== c; ) {
        var d = c;
        switch (d.tag) {
          case 1:
            d = d.type.childContextTypes;
            null !== d && void 0 !== d && Gf();
            break;
          case 3:
            fh();
            H(N);
            H(M);
            uh();
            break;
          case 5:
            hh(d);
            break;
          case 4:
            fh();
            break;
          case 13:
            H(P);
            break;
          case 19:
            H(P);
            break;
          case 10:
            rg(d);
            break;
          case 23:
          case 24:
            Ki();
        }
        c = c.return;
      }
    U = a;
    Y = Tg(a.current, null);
    W = qj = tj = b;
    V = 0;
    sj = null;
    uj = Hi = Dg = 0;
  }
  function Sj(a, b) {
    do {
      var c = Y;
      try {
        qg();
        vh.current = Gh;
        if (yh) {
          for (var d = R.memoizedState; null !== d; ) {
            var e = d.queue;
            null !== e && (e.pending = null);
            d = d.next;
          }
          yh = false;
        }
        xh = 0;
        T = S = R = null;
        zh = false;
        pj.current = null;
        if (null === c || null === c.return) {
          V = 1;
          sj = b;
          Y = null;
          break;
        }
        a: {
          var f2 = a, g2 = c.return, h2 = c, k = b;
          b = W;
          h2.flags |= 2048;
          h2.firstEffect = h2.lastEffect = null;
          if (null !== k && "object" === typeof k && "function" === typeof k.then) {
            var l2 = k;
            if (0 === (h2.mode & 2)) {
              var n2 = h2.alternate;
              n2 ? (h2.updateQueue = n2.updateQueue, h2.memoizedState = n2.memoizedState, h2.lanes = n2.lanes) : (h2.updateQueue = null, h2.memoizedState = null);
            }
            var A2 = 0 !== (P.current & 1), p2 = g2;
            do {
              var C2;
              if (C2 = 13 === p2.tag) {
                var x2 = p2.memoizedState;
                if (null !== x2)
                  C2 = null !== x2.dehydrated ? true : false;
                else {
                  var w2 = p2.memoizedProps;
                  C2 = void 0 === w2.fallback ? false : true !== w2.unstable_avoidThisFallback ? true : A2 ? false : true;
                }
              }
              if (C2) {
                var z2 = p2.updateQueue;
                if (null === z2) {
                  var u2 = /* @__PURE__ */ new Set();
                  u2.add(l2);
                  p2.updateQueue = u2;
                } else
                  z2.add(l2);
                if (0 === (p2.mode & 2)) {
                  p2.flags |= 64;
                  h2.flags |= 16384;
                  h2.flags &= -2981;
                  if (1 === h2.tag)
                    if (null === h2.alternate)
                      h2.tag = 17;
                    else {
                      var t2 = zg(-1, 1);
                      t2.tag = 2;
                      Ag(h2, t2);
                    }
                  h2.lanes |= 1;
                  break a;
                }
                k = void 0;
                h2 = b;
                var q2 = f2.pingCache;
                null === q2 ? (q2 = f2.pingCache = new Oi(), k = /* @__PURE__ */ new Set(), q2.set(l2, k)) : (k = q2.get(l2), void 0 === k && (k = /* @__PURE__ */ new Set(), q2.set(l2, k)));
                if (!k.has(h2)) {
                  k.add(h2);
                  var v2 = Yj.bind(null, f2, l2, h2);
                  l2.then(v2, v2);
                }
                p2.flags |= 4096;
                p2.lanes = b;
                break a;
              }
              p2 = p2.return;
            } while (null !== p2);
            k = Error((Ra(h2.type) || "A React component") + " suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.");
          }
          5 !== V && (V = 2);
          k = Mi(k, h2);
          p2 = g2;
          do {
            switch (p2.tag) {
              case 3:
                f2 = k;
                p2.flags |= 4096;
                b &= -b;
                p2.lanes |= b;
                var J2 = Pi(p2, f2, b);
                Bg(p2, J2);
                break a;
              case 1:
                f2 = k;
                var K2 = p2.type, Q2 = p2.stateNode;
                if (0 === (p2.flags & 64) && ("function" === typeof K2.getDerivedStateFromError || null !== Q2 && "function" === typeof Q2.componentDidCatch && (null === Ti || !Ti.has(Q2)))) {
                  p2.flags |= 4096;
                  b &= -b;
                  p2.lanes |= b;
                  var L2 = Si(p2, f2, b);
                  Bg(p2, L2);
                  break a;
                }
            }
            p2 = p2.return;
          } while (null !== p2);
        }
        Zj(c);
      } catch (va) {
        b = va;
        Y === c && null !== c && (Y = c = c.return);
        continue;
      }
      break;
    } while (1);
  }
  function Pj() {
    var a = oj.current;
    oj.current = Gh;
    return null === a ? Gh : a;
  }
  function Tj(a, b) {
    var c = X;
    X |= 16;
    var d = Pj();
    U === a && W === b || Qj(a, b);
    do
      try {
        ak();
        break;
      } catch (e) {
        Sj(a, e);
      }
    while (1);
    qg();
    X = c;
    oj.current = d;
    if (null !== Y)
      throw Error(y(261));
    U = null;
    W = 0;
    return V;
  }
  function ak() {
    for (; null !== Y; )
      bk(Y);
  }
  function Rj() {
    for (; null !== Y && !Qf(); )
      bk(Y);
  }
  function bk(a) {
    var b = ck(a.alternate, a, qj);
    a.memoizedProps = a.pendingProps;
    null === b ? Zj(a) : Y = b;
    pj.current = null;
  }
  function Zj(a) {
    var b = a;
    do {
      var c = b.alternate;
      a = b.return;
      if (0 === (b.flags & 2048)) {
        c = Gi(c, b, qj);
        if (null !== c) {
          Y = c;
          return;
        }
        c = b;
        if (24 !== c.tag && 23 !== c.tag || null === c.memoizedState || 0 !== (qj & 1073741824) || 0 === (c.mode & 4)) {
          for (var d = 0, e = c.child; null !== e; )
            d |= e.lanes | e.childLanes, e = e.sibling;
          c.childLanes = d;
        }
        null !== a && 0 === (a.flags & 2048) && (null === a.firstEffect && (a.firstEffect = b.firstEffect), null !== b.lastEffect && (null !== a.lastEffect && (a.lastEffect.nextEffect = b.firstEffect), a.lastEffect = b.lastEffect), 1 < b.flags && (null !== a.lastEffect ? a.lastEffect.nextEffect = b : a.firstEffect = b, a.lastEffect = b));
      } else {
        c = Li(b);
        if (null !== c) {
          c.flags &= 2047;
          Y = c;
          return;
        }
        null !== a && (a.firstEffect = a.lastEffect = null, a.flags |= 2048);
      }
      b = b.sibling;
      if (null !== b) {
        Y = b;
        return;
      }
      Y = b = a;
    } while (null !== b);
    0 === V && (V = 5);
  }
  function Uj(a) {
    var b = eg();
    gg(99, dk.bind(null, a, b));
    return null;
  }
  function dk(a, b) {
    do
      Oj();
    while (null !== yj);
    if (0 !== (X & 48))
      throw Error(y(327));
    var c = a.finishedWork;
    if (null === c)
      return null;
    a.finishedWork = null;
    a.finishedLanes = 0;
    if (c === a.current)
      throw Error(y(177));
    a.callbackNode = null;
    var d = c.lanes | c.childLanes, e = d, f2 = a.pendingLanes & ~e;
    a.pendingLanes = e;
    a.suspendedLanes = 0;
    a.pingedLanes = 0;
    a.expiredLanes &= e;
    a.mutableReadLanes &= e;
    a.entangledLanes &= e;
    e = a.entanglements;
    for (var g2 = a.eventTimes, h2 = a.expirationTimes; 0 < f2; ) {
      var k = 31 - Vc(f2), l2 = 1 << k;
      e[k] = 0;
      g2[k] = -1;
      h2[k] = -1;
      f2 &= ~l2;
    }
    null !== Cj && 0 === (d & 24) && Cj.has(a) && Cj.delete(a);
    a === U && (Y = U = null, W = 0);
    1 < c.flags ? null !== c.lastEffect ? (c.lastEffect.nextEffect = c, d = c.firstEffect) : d = c : d = c.firstEffect;
    if (null !== d) {
      e = X;
      X |= 32;
      pj.current = null;
      kf = fd;
      g2 = Ne();
      if (Oe(g2)) {
        if ("selectionStart" in g2)
          h2 = { start: g2.selectionStart, end: g2.selectionEnd };
        else
          a:
            if (h2 = (h2 = g2.ownerDocument) && h2.defaultView || window, (l2 = h2.getSelection && h2.getSelection()) && 0 !== l2.rangeCount) {
              h2 = l2.anchorNode;
              f2 = l2.anchorOffset;
              k = l2.focusNode;
              l2 = l2.focusOffset;
              try {
                h2.nodeType, k.nodeType;
              } catch (va) {
                h2 = null;
                break a;
              }
              var n2 = 0, A2 = -1, p2 = -1, C2 = 0, x2 = 0, w2 = g2, z2 = null;
              b:
                for (; ; ) {
                  for (var u2; ; ) {
                    w2 !== h2 || 0 !== f2 && 3 !== w2.nodeType || (A2 = n2 + f2);
                    w2 !== k || 0 !== l2 && 3 !== w2.nodeType || (p2 = n2 + l2);
                    3 === w2.nodeType && (n2 += w2.nodeValue.length);
                    if (null === (u2 = w2.firstChild))
                      break;
                    z2 = w2;
                    w2 = u2;
                  }
                  for (; ; ) {
                    if (w2 === g2)
                      break b;
                    z2 === h2 && ++C2 === f2 && (A2 = n2);
                    z2 === k && ++x2 === l2 && (p2 = n2);
                    if (null !== (u2 = w2.nextSibling))
                      break;
                    w2 = z2;
                    z2 = w2.parentNode;
                  }
                  w2 = u2;
                }
              h2 = -1 === A2 || -1 === p2 ? null : { start: A2, end: p2 };
            } else
              h2 = null;
        h2 = h2 || { start: 0, end: 0 };
      } else
        h2 = null;
      lf = { focusedElem: g2, selectionRange: h2 };
      fd = false;
      Ij = null;
      Jj = false;
      Z = d;
      do
        try {
          ek();
        } catch (va) {
          if (null === Z)
            throw Error(y(330));
          Wi(Z, va);
          Z = Z.nextEffect;
        }
      while (null !== Z);
      Ij = null;
      Z = d;
      do
        try {
          for (g2 = a; null !== Z; ) {
            var t2 = Z.flags;
            t2 & 16 && pb(Z.stateNode, "");
            if (t2 & 128) {
              var q2 = Z.alternate;
              if (null !== q2) {
                var v2 = q2.ref;
                null !== v2 && ("function" === typeof v2 ? v2(null) : v2.current = null);
              }
            }
            switch (t2 & 1038) {
              case 2:
                fj(Z);
                Z.flags &= -3;
                break;
              case 6:
                fj(Z);
                Z.flags &= -3;
                ij(Z.alternate, Z);
                break;
              case 1024:
                Z.flags &= -1025;
                break;
              case 1028:
                Z.flags &= -1025;
                ij(Z.alternate, Z);
                break;
              case 4:
                ij(Z.alternate, Z);
                break;
              case 8:
                h2 = Z;
                cj(g2, h2);
                var J2 = h2.alternate;
                dj(h2);
                null !== J2 && dj(J2);
            }
            Z = Z.nextEffect;
          }
        } catch (va) {
          if (null === Z)
            throw Error(y(330));
          Wi(Z, va);
          Z = Z.nextEffect;
        }
      while (null !== Z);
      v2 = lf;
      q2 = Ne();
      t2 = v2.focusedElem;
      g2 = v2.selectionRange;
      if (q2 !== t2 && t2 && t2.ownerDocument && Me(t2.ownerDocument.documentElement, t2)) {
        null !== g2 && Oe(t2) && (q2 = g2.start, v2 = g2.end, void 0 === v2 && (v2 = q2), "selectionStart" in t2 ? (t2.selectionStart = q2, t2.selectionEnd = Math.min(v2, t2.value.length)) : (v2 = (q2 = t2.ownerDocument || document) && q2.defaultView || window, v2.getSelection && (v2 = v2.getSelection(), h2 = t2.textContent.length, J2 = Math.min(g2.start, h2), g2 = void 0 === g2.end ? J2 : Math.min(g2.end, h2), !v2.extend && J2 > g2 && (h2 = g2, g2 = J2, J2 = h2), h2 = Le(t2, J2), f2 = Le(t2, g2), h2 && f2 && (1 !== v2.rangeCount || v2.anchorNode !== h2.node || v2.anchorOffset !== h2.offset || v2.focusNode !== f2.node || v2.focusOffset !== f2.offset) && (q2 = q2.createRange(), q2.setStart(h2.node, h2.offset), v2.removeAllRanges(), J2 > g2 ? (v2.addRange(q2), v2.extend(f2.node, f2.offset)) : (q2.setEnd(f2.node, f2.offset), v2.addRange(q2))))));
        q2 = [];
        for (v2 = t2; v2 = v2.parentNode; )
          1 === v2.nodeType && q2.push({ element: v2, left: v2.scrollLeft, top: v2.scrollTop });
        "function" === typeof t2.focus && t2.focus();
        for (t2 = 0; t2 < q2.length; t2++)
          v2 = q2[t2], v2.element.scrollLeft = v2.left, v2.element.scrollTop = v2.top;
      }
      fd = !!kf;
      lf = kf = null;
      a.current = c;
      Z = d;
      do
        try {
          for (t2 = a; null !== Z; ) {
            var K2 = Z.flags;
            K2 & 36 && Yi(t2, Z.alternate, Z);
            if (K2 & 128) {
              q2 = void 0;
              var Q2 = Z.ref;
              if (null !== Q2) {
                var L2 = Z.stateNode;
                switch (Z.tag) {
                  case 5:
                    q2 = L2;
                    break;
                  default:
                    q2 = L2;
                }
                "function" === typeof Q2 ? Q2(q2) : Q2.current = q2;
              }
            }
            Z = Z.nextEffect;
          }
        } catch (va) {
          if (null === Z)
            throw Error(y(330));
          Wi(Z, va);
          Z = Z.nextEffect;
        }
      while (null !== Z);
      Z = null;
      $f();
      X = e;
    } else
      a.current = c;
    if (xj)
      xj = false, yj = a, zj = b;
    else
      for (Z = d; null !== Z; )
        b = Z.nextEffect, Z.nextEffect = null, Z.flags & 8 && (K2 = Z, K2.sibling = null, K2.stateNode = null), Z = b;
    d = a.pendingLanes;
    0 === d && (Ti = null);
    1 === d ? a === Ej ? Dj++ : (Dj = 0, Ej = a) : Dj = 0;
    c = c.stateNode;
    if (Mf && "function" === typeof Mf.onCommitFiberRoot)
      try {
        Mf.onCommitFiberRoot(Lf, c, void 0, 64 === (c.current.flags & 64));
      } catch (va) {
      }
    Mj(a, O());
    if (Qi)
      throw Qi = false, a = Ri, Ri = null, a;
    if (0 !== (X & 8))
      return null;
    ig();
    return null;
  }
  function ek() {
    for (; null !== Z; ) {
      var a = Z.alternate;
      Jj || null === Ij || (0 !== (Z.flags & 8) ? dc(Z, Ij) && (Jj = true) : 13 === Z.tag && mj(a, Z) && dc(Z, Ij) && (Jj = true));
      var b = Z.flags;
      0 !== (b & 256) && Xi(a, Z);
      0 === (b & 512) || xj || (xj = true, hg(97, function() {
        Oj();
        return null;
      }));
      Z = Z.nextEffect;
    }
  }
  function Oj() {
    if (90 !== zj) {
      var a = 97 < zj ? 97 : zj;
      zj = 90;
      return gg(a, fk);
    }
    return false;
  }
  function $i(a, b) {
    Aj.push(b, a);
    xj || (xj = true, hg(97, function() {
      Oj();
      return null;
    }));
  }
  function Zi(a, b) {
    Bj.push(b, a);
    xj || (xj = true, hg(97, function() {
      Oj();
      return null;
    }));
  }
  function fk() {
    if (null === yj)
      return false;
    var a = yj;
    yj = null;
    if (0 !== (X & 48))
      throw Error(y(331));
    var b = X;
    X |= 32;
    var c = Bj;
    Bj = [];
    for (var d = 0; d < c.length; d += 2) {
      var e = c[d], f2 = c[d + 1], g2 = e.destroy;
      e.destroy = void 0;
      if ("function" === typeof g2)
        try {
          g2();
        } catch (k) {
          if (null === f2)
            throw Error(y(330));
          Wi(f2, k);
        }
    }
    c = Aj;
    Aj = [];
    for (d = 0; d < c.length; d += 2) {
      e = c[d];
      f2 = c[d + 1];
      try {
        var h2 = e.create;
        e.destroy = h2();
      } catch (k) {
        if (null === f2)
          throw Error(y(330));
        Wi(f2, k);
      }
    }
    for (h2 = a.current.firstEffect; null !== h2; )
      a = h2.nextEffect, h2.nextEffect = null, h2.flags & 8 && (h2.sibling = null, h2.stateNode = null), h2 = a;
    X = b;
    ig();
    return true;
  }
  function gk(a, b, c) {
    b = Mi(c, b);
    b = Pi(a, b, 1);
    Ag(a, b);
    b = Hg();
    a = Kj(a, 1);
    null !== a && ($c(a, 1, b), Mj(a, b));
  }
  function Wi(a, b) {
    if (3 === a.tag)
      gk(a, a, b);
    else
      for (var c = a.return; null !== c; ) {
        if (3 === c.tag) {
          gk(c, a, b);
          break;
        } else if (1 === c.tag) {
          var d = c.stateNode;
          if ("function" === typeof c.type.getDerivedStateFromError || "function" === typeof d.componentDidCatch && (null === Ti || !Ti.has(d))) {
            a = Mi(b, a);
            var e = Si(c, a, 1);
            Ag(c, e);
            e = Hg();
            c = Kj(c, 1);
            if (null !== c)
              $c(c, 1, e), Mj(c, e);
            else if ("function" === typeof d.componentDidCatch && (null === Ti || !Ti.has(d)))
              try {
                d.componentDidCatch(b, a);
              } catch (f2) {
              }
            break;
          }
        }
        c = c.return;
      }
  }
  function Yj(a, b, c) {
    var d = a.pingCache;
    null !== d && d.delete(b);
    b = Hg();
    a.pingedLanes |= a.suspendedLanes & c;
    U === a && (W & c) === c && (4 === V || 3 === V && (W & 62914560) === W && 500 > O() - jj ? Qj(a, 0) : uj |= c);
    Mj(a, b);
  }
  function lj(a, b) {
    var c = a.stateNode;
    null !== c && c.delete(b);
    b = 0;
    0 === b && (b = a.mode, 0 === (b & 2) ? b = 1 : 0 === (b & 4) ? b = 99 === eg() ? 1 : 2 : (0 === Gj && (Gj = tj), b = Yc(62914560 & ~Gj), 0 === b && (b = 4194304)));
    c = Hg();
    a = Kj(a, b);
    null !== a && ($c(a, b, c), Mj(a, c));
  }
  var ck;
  ck = function(a, b, c) {
    var d = b.lanes;
    if (null !== a)
      if (a.memoizedProps !== b.pendingProps || N.current)
        ug = true;
      else if (0 !== (c & d))
        ug = 0 !== (a.flags & 16384) ? true : false;
      else {
        ug = false;
        switch (b.tag) {
          case 3:
            ri(b);
            sh();
            break;
          case 5:
            gh(b);
            break;
          case 1:
            Ff(b.type) && Jf(b);
            break;
          case 4:
            eh(b, b.stateNode.containerInfo);
            break;
          case 10:
            d = b.memoizedProps.value;
            var e = b.type._context;
            I(mg, e._currentValue);
            e._currentValue = d;
            break;
          case 13:
            if (null !== b.memoizedState) {
              if (0 !== (c & b.child.childLanes))
                return ti(a, b, c);
              I(P, P.current & 1);
              b = hi(a, b, c);
              return null !== b ? b.sibling : null;
            }
            I(P, P.current & 1);
            break;
          case 19:
            d = 0 !== (c & b.childLanes);
            if (0 !== (a.flags & 64)) {
              if (d)
                return Ai(a, b, c);
              b.flags |= 64;
            }
            e = b.memoizedState;
            null !== e && (e.rendering = null, e.tail = null, e.lastEffect = null);
            I(P, P.current);
            if (d)
              break;
            else
              return null;
          case 23:
          case 24:
            return b.lanes = 0, mi(a, b, c);
        }
        return hi(a, b, c);
      }
    else
      ug = false;
    b.lanes = 0;
    switch (b.tag) {
      case 2:
        d = b.type;
        null !== a && (a.alternate = null, b.alternate = null, b.flags |= 2);
        a = b.pendingProps;
        e = Ef(b, M.current);
        tg(b, c);
        e = Ch(null, b, d, a, e, c);
        b.flags |= 1;
        if ("object" === typeof e && null !== e && "function" === typeof e.render && void 0 === e.$$typeof) {
          b.tag = 1;
          b.memoizedState = null;
          b.updateQueue = null;
          if (Ff(d)) {
            var f2 = true;
            Jf(b);
          } else
            f2 = false;
          b.memoizedState = null !== e.state && void 0 !== e.state ? e.state : null;
          xg(b);
          var g2 = d.getDerivedStateFromProps;
          "function" === typeof g2 && Gg(b, d, g2, a);
          e.updater = Kg;
          b.stateNode = e;
          e._reactInternals = b;
          Og(b, d, a, c);
          b = qi(null, b, d, true, f2, c);
        } else
          b.tag = 0, fi(null, b, e, c), b = b.child;
        return b;
      case 16:
        e = b.elementType;
        a: {
          null !== a && (a.alternate = null, b.alternate = null, b.flags |= 2);
          a = b.pendingProps;
          f2 = e._init;
          e = f2(e._payload);
          b.type = e;
          f2 = b.tag = hk(e);
          a = lg(e, a);
          switch (f2) {
            case 0:
              b = li(null, b, e, a, c);
              break a;
            case 1:
              b = pi(null, b, e, a, c);
              break a;
            case 11:
              b = gi(null, b, e, a, c);
              break a;
            case 14:
              b = ii(null, b, e, lg(e.type, a), d, c);
              break a;
          }
          throw Error(y(306, e, ""));
        }
        return b;
      case 0:
        return d = b.type, e = b.pendingProps, e = b.elementType === d ? e : lg(d, e), li(a, b, d, e, c);
      case 1:
        return d = b.type, e = b.pendingProps, e = b.elementType === d ? e : lg(d, e), pi(a, b, d, e, c);
      case 3:
        ri(b);
        d = b.updateQueue;
        if (null === a || null === d)
          throw Error(y(282));
        d = b.pendingProps;
        e = b.memoizedState;
        e = null !== e ? e.element : null;
        yg(a, b);
        Cg(b, d, null, c);
        d = b.memoizedState.element;
        if (d === e)
          sh(), b = hi(a, b, c);
        else {
          e = b.stateNode;
          if (f2 = e.hydrate)
            kh = rf(b.stateNode.containerInfo.firstChild), jh = b, f2 = lh = true;
          if (f2) {
            a = e.mutableSourceEagerHydrationData;
            if (null != a)
              for (e = 0; e < a.length; e += 2)
                f2 = a[e], f2._workInProgressVersionPrimary = a[e + 1], th.push(f2);
            c = Zg(b, null, d, c);
            for (b.child = c; c; )
              c.flags = c.flags & -3 | 1024, c = c.sibling;
          } else
            fi(a, b, d, c), sh();
          b = b.child;
        }
        return b;
      case 5:
        return gh(b), null === a && ph(b), d = b.type, e = b.pendingProps, f2 = null !== a ? a.memoizedProps : null, g2 = e.children, nf(d, e) ? g2 = null : null !== f2 && nf(d, f2) && (b.flags |= 16), oi(a, b), fi(a, b, g2, c), b.child;
      case 6:
        return null === a && ph(b), null;
      case 13:
        return ti(a, b, c);
      case 4:
        return eh(b, b.stateNode.containerInfo), d = b.pendingProps, null === a ? b.child = Yg(b, null, d, c) : fi(a, b, d, c), b.child;
      case 11:
        return d = b.type, e = b.pendingProps, e = b.elementType === d ? e : lg(d, e), gi(a, b, d, e, c);
      case 7:
        return fi(a, b, b.pendingProps, c), b.child;
      case 8:
        return fi(
          a,
          b,
          b.pendingProps.children,
          c
        ), b.child;
      case 12:
        return fi(a, b, b.pendingProps.children, c), b.child;
      case 10:
        a: {
          d = b.type._context;
          e = b.pendingProps;
          g2 = b.memoizedProps;
          f2 = e.value;
          var h2 = b.type._context;
          I(mg, h2._currentValue);
          h2._currentValue = f2;
          if (null !== g2)
            if (h2 = g2.value, f2 = He(h2, f2) ? 0 : ("function" === typeof d._calculateChangedBits ? d._calculateChangedBits(h2, f2) : 1073741823) | 0, 0 === f2) {
              if (g2.children === e.children && !N.current) {
                b = hi(a, b, c);
                break a;
              }
            } else
              for (h2 = b.child, null !== h2 && (h2.return = b); null !== h2; ) {
                var k = h2.dependencies;
                if (null !== k) {
                  g2 = h2.child;
                  for (var l2 = k.firstContext; null !== l2; ) {
                    if (l2.context === d && 0 !== (l2.observedBits & f2)) {
                      1 === h2.tag && (l2 = zg(-1, c & -c), l2.tag = 2, Ag(h2, l2));
                      h2.lanes |= c;
                      l2 = h2.alternate;
                      null !== l2 && (l2.lanes |= c);
                      sg(h2.return, c);
                      k.lanes |= c;
                      break;
                    }
                    l2 = l2.next;
                  }
                } else
                  g2 = 10 === h2.tag ? h2.type === b.type ? null : h2.child : h2.child;
                if (null !== g2)
                  g2.return = h2;
                else
                  for (g2 = h2; null !== g2; ) {
                    if (g2 === b) {
                      g2 = null;
                      break;
                    }
                    h2 = g2.sibling;
                    if (null !== h2) {
                      h2.return = g2.return;
                      g2 = h2;
                      break;
                    }
                    g2 = g2.return;
                  }
                h2 = g2;
              }
          fi(a, b, e.children, c);
          b = b.child;
        }
        return b;
      case 9:
        return e = b.type, f2 = b.pendingProps, d = f2.children, tg(b, c), e = vg(
          e,
          f2.unstable_observedBits
        ), d = d(e), b.flags |= 1, fi(a, b, d, c), b.child;
      case 14:
        return e = b.type, f2 = lg(e, b.pendingProps), f2 = lg(e.type, f2), ii(a, b, e, f2, d, c);
      case 15:
        return ki(a, b, b.type, b.pendingProps, d, c);
      case 17:
        return d = b.type, e = b.pendingProps, e = b.elementType === d ? e : lg(d, e), null !== a && (a.alternate = null, b.alternate = null, b.flags |= 2), b.tag = 1, Ff(d) ? (a = true, Jf(b)) : a = false, tg(b, c), Mg(b, d, e), Og(b, d, e, c), qi(null, b, d, true, a, c);
      case 19:
        return Ai(a, b, c);
      case 23:
        return mi(a, b, c);
      case 24:
        return mi(a, b, c);
    }
    throw Error(y(156, b.tag));
  };
  function ik(a, b, c, d) {
    this.tag = a;
    this.key = c;
    this.sibling = this.child = this.return = this.stateNode = this.type = this.elementType = null;
    this.index = 0;
    this.ref = null;
    this.pendingProps = b;
    this.dependencies = this.memoizedState = this.updateQueue = this.memoizedProps = null;
    this.mode = d;
    this.flags = 0;
    this.lastEffect = this.firstEffect = this.nextEffect = null;
    this.childLanes = this.lanes = 0;
    this.alternate = null;
  }
  function nh(a, b, c, d) {
    return new ik(a, b, c, d);
  }
  function ji(a) {
    a = a.prototype;
    return !(!a || !a.isReactComponent);
  }
  function hk(a) {
    if ("function" === typeof a)
      return ji(a) ? 1 : 0;
    if (void 0 !== a && null !== a) {
      a = a.$$typeof;
      if (a === Aa)
        return 11;
      if (a === Da)
        return 14;
    }
    return 2;
  }
  function Tg(a, b) {
    var c = a.alternate;
    null === c ? (c = nh(a.tag, b, a.key, a.mode), c.elementType = a.elementType, c.type = a.type, c.stateNode = a.stateNode, c.alternate = a, a.alternate = c) : (c.pendingProps = b, c.type = a.type, c.flags = 0, c.nextEffect = null, c.firstEffect = null, c.lastEffect = null);
    c.childLanes = a.childLanes;
    c.lanes = a.lanes;
    c.child = a.child;
    c.memoizedProps = a.memoizedProps;
    c.memoizedState = a.memoizedState;
    c.updateQueue = a.updateQueue;
    b = a.dependencies;
    c.dependencies = null === b ? null : { lanes: b.lanes, firstContext: b.firstContext };
    c.sibling = a.sibling;
    c.index = a.index;
    c.ref = a.ref;
    return c;
  }
  function Vg(a, b, c, d, e, f2) {
    var g2 = 2;
    d = a;
    if ("function" === typeof a)
      ji(a) && (g2 = 1);
    else if ("string" === typeof a)
      g2 = 5;
    else
      a:
        switch (a) {
          case ua:
            return Xg(c.children, e, f2, b);
          case Ha:
            g2 = 8;
            e |= 16;
            break;
          case wa:
            g2 = 8;
            e |= 1;
            break;
          case xa:
            return a = nh(12, c, b, e | 8), a.elementType = xa, a.type = xa, a.lanes = f2, a;
          case Ba:
            return a = nh(13, c, b, e), a.type = Ba, a.elementType = Ba, a.lanes = f2, a;
          case Ca:
            return a = nh(19, c, b, e), a.elementType = Ca, a.lanes = f2, a;
          case Ia:
            return vi(c, e, f2, b);
          case Ja:
            return a = nh(24, c, b, e), a.elementType = Ja, a.lanes = f2, a;
          default:
            if ("object" === typeof a && null !== a)
              switch (a.$$typeof) {
                case ya:
                  g2 = 10;
                  break a;
                case za:
                  g2 = 9;
                  break a;
                case Aa:
                  g2 = 11;
                  break a;
                case Da:
                  g2 = 14;
                  break a;
                case Ea:
                  g2 = 16;
                  d = null;
                  break a;
                case Fa:
                  g2 = 22;
                  break a;
              }
            throw Error(y(130, null == a ? a : typeof a, ""));
        }
    b = nh(g2, c, b, e);
    b.elementType = a;
    b.type = d;
    b.lanes = f2;
    return b;
  }
  function Xg(a, b, c, d) {
    a = nh(7, a, d, b);
    a.lanes = c;
    return a;
  }
  function vi(a, b, c, d) {
    a = nh(23, a, d, b);
    a.elementType = Ia;
    a.lanes = c;
    return a;
  }
  function Ug(a, b, c) {
    a = nh(6, a, null, b);
    a.lanes = c;
    return a;
  }
  function Wg(a, b, c) {
    b = nh(4, null !== a.children ? a.children : [], a.key, b);
    b.lanes = c;
    b.stateNode = { containerInfo: a.containerInfo, pendingChildren: null, implementation: a.implementation };
    return b;
  }
  function jk(a, b, c) {
    this.tag = b;
    this.containerInfo = a;
    this.finishedWork = this.pingCache = this.current = this.pendingChildren = null;
    this.timeoutHandle = -1;
    this.pendingContext = this.context = null;
    this.hydrate = c;
    this.callbackNode = null;
    this.callbackPriority = 0;
    this.eventTimes = Zc(0);
    this.expirationTimes = Zc(-1);
    this.entangledLanes = this.finishedLanes = this.mutableReadLanes = this.expiredLanes = this.pingedLanes = this.suspendedLanes = this.pendingLanes = 0;
    this.entanglements = Zc(0);
    this.mutableSourceEagerHydrationData = null;
  }
  function kk(a, b, c) {
    var d = 3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : null;
    return { $$typeof: ta, key: null == d ? null : "" + d, children: a, containerInfo: b, implementation: c };
  }
  function lk(a, b, c, d) {
    var e = b.current, f2 = Hg(), g2 = Ig(e);
    a:
      if (c) {
        c = c._reactInternals;
        b: {
          if (Zb(c) !== c || 1 !== c.tag)
            throw Error(y(170));
          var h2 = c;
          do {
            switch (h2.tag) {
              case 3:
                h2 = h2.stateNode.context;
                break b;
              case 1:
                if (Ff(h2.type)) {
                  h2 = h2.stateNode.__reactInternalMemoizedMergedChildContext;
                  break b;
                }
            }
            h2 = h2.return;
          } while (null !== h2);
          throw Error(y(171));
        }
        if (1 === c.tag) {
          var k = c.type;
          if (Ff(k)) {
            c = If(c, k, h2);
            break a;
          }
        }
        c = h2;
      } else
        c = Cf;
    null === b.context ? b.context = c : b.pendingContext = c;
    b = zg(f2, g2);
    b.payload = { element: a };
    d = void 0 === d ? null : d;
    null !== d && (b.callback = d);
    Ag(e, b);
    Jg(e, g2, f2);
    return g2;
  }
  function mk(a) {
    a = a.current;
    if (!a.child)
      return null;
    switch (a.child.tag) {
      case 5:
        return a.child.stateNode;
      default:
        return a.child.stateNode;
    }
  }
  function nk(a, b) {
    a = a.memoizedState;
    if (null !== a && null !== a.dehydrated) {
      var c = a.retryLane;
      a.retryLane = 0 !== c && c < b ? c : b;
    }
  }
  function ok(a, b) {
    nk(a, b);
    (a = a.alternate) && nk(a, b);
  }
  function pk() {
    return null;
  }
  function qk(a, b, c) {
    var d = null != c && null != c.hydrationOptions && c.hydrationOptions.mutableSources || null;
    c = new jk(a, b, null != c && true === c.hydrate);
    b = nh(3, null, null, 2 === b ? 7 : 1 === b ? 3 : 0);
    c.current = b;
    b.stateNode = c;
    xg(b);
    a[ff] = c.current;
    cf(8 === a.nodeType ? a.parentNode : a);
    if (d)
      for (a = 0; a < d.length; a++) {
        b = d[a];
        var e = b._getVersion;
        e = e(b._source);
        null == c.mutableSourceEagerHydrationData ? c.mutableSourceEagerHydrationData = [b, e] : c.mutableSourceEagerHydrationData.push(b, e);
      }
    this._internalRoot = c;
  }
  qk.prototype.render = function(a) {
    lk(a, this._internalRoot, null, null);
  };
  qk.prototype.unmount = function() {
    var a = this._internalRoot, b = a.containerInfo;
    lk(null, a, null, function() {
      b[ff] = null;
    });
  };
  function rk(a) {
    return !(!a || 1 !== a.nodeType && 9 !== a.nodeType && 11 !== a.nodeType && (8 !== a.nodeType || " react-mount-point-unstable " !== a.nodeValue));
  }
  function sk(a, b) {
    b || (b = a ? 9 === a.nodeType ? a.documentElement : a.firstChild : null, b = !(!b || 1 !== b.nodeType || !b.hasAttribute("data-reactroot")));
    if (!b)
      for (var c; c = a.lastChild; )
        a.removeChild(c);
    return new qk(a, 0, b ? { hydrate: true } : void 0);
  }
  function tk(a, b, c, d, e) {
    var f2 = c._reactRootContainer;
    if (f2) {
      var g2 = f2._internalRoot;
      if ("function" === typeof e) {
        var h2 = e;
        e = function() {
          var a2 = mk(g2);
          h2.call(a2);
        };
      }
      lk(b, g2, a, e);
    } else {
      f2 = c._reactRootContainer = sk(c, d);
      g2 = f2._internalRoot;
      if ("function" === typeof e) {
        var k = e;
        e = function() {
          var a2 = mk(g2);
          k.call(a2);
        };
      }
      Xj(function() {
        lk(b, g2, a, e);
      });
    }
    return mk(g2);
  }
  ec = function(a) {
    if (13 === a.tag) {
      var b = Hg();
      Jg(a, 4, b);
      ok(a, 4);
    }
  };
  fc = function(a) {
    if (13 === a.tag) {
      var b = Hg();
      Jg(a, 67108864, b);
      ok(a, 67108864);
    }
  };
  gc = function(a) {
    if (13 === a.tag) {
      var b = Hg(), c = Ig(a);
      Jg(a, c, b);
      ok(a, c);
    }
  };
  hc = function(a, b) {
    return b();
  };
  yb = function(a, b, c) {
    switch (b) {
      case "input":
        ab(a, c);
        b = c.name;
        if ("radio" === c.type && null != b) {
          for (c = a; c.parentNode; )
            c = c.parentNode;
          c = c.querySelectorAll("input[name=" + JSON.stringify("" + b) + '][type="radio"]');
          for (b = 0; b < c.length; b++) {
            var d = c[b];
            if (d !== a && d.form === a.form) {
              var e = Db(d);
              if (!e)
                throw Error(y(90));
              Wa(d);
              ab(d, e);
            }
          }
        }
        break;
      case "textarea":
        ib(a, c);
        break;
      case "select":
        b = c.value, null != b && fb(a, !!c.multiple, b, false);
    }
  };
  Gb = Wj;
  Hb = function(a, b, c, d, e) {
    var f2 = X;
    X |= 4;
    try {
      return gg(98, a.bind(null, b, c, d, e));
    } finally {
      X = f2, 0 === X && (wj(), ig());
    }
  };
  Ib = function() {
    0 === (X & 49) && (Vj(), Oj());
  };
  Jb = function(a, b) {
    var c = X;
    X |= 2;
    try {
      return a(b);
    } finally {
      X = c, 0 === X && (wj(), ig());
    }
  };
  function uk(a, b) {
    var c = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null;
    if (!rk(b))
      throw Error(y(200));
    return kk(a, b, null, c);
  }
  var vk = { Events: [Cb, ue, Db, Eb, Fb, Oj, { current: false }] }, wk = { findFiberByHostInstance: wc, bundleType: 0, version: "17.0.2", rendererPackageName: "react-dom" };
  var xk = { bundleType: wk.bundleType, version: wk.version, rendererPackageName: wk.rendererPackageName, rendererConfig: wk.rendererConfig, overrideHookState: null, overrideHookStateDeletePath: null, overrideHookStateRenamePath: null, overrideProps: null, overridePropsDeletePath: null, overridePropsRenamePath: null, setSuspenseHandler: null, scheduleUpdate: null, currentDispatcherRef: ra.ReactCurrentDispatcher, findHostInstanceByFiber: function(a) {
    a = cc(a);
    return null === a ? null : a.stateNode;
  }, findFiberByHostInstance: wk.findFiberByHostInstance || pk, findHostInstancesForRefresh: null, scheduleRefresh: null, scheduleRoot: null, setRefreshHandler: null, getCurrentFiber: null };
  if ("undefined" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) {
    var yk = __REACT_DEVTOOLS_GLOBAL_HOOK__;
    if (!yk.isDisabled && yk.supportsFiber)
      try {
        Lf = yk.inject(xk), Mf = yk;
      } catch (a) {
      }
  }
  reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = vk;
  reactDom_production_min.createPortal = uk;
  reactDom_production_min.findDOMNode = function(a) {
    if (null == a)
      return null;
    if (1 === a.nodeType)
      return a;
    var b = a._reactInternals;
    if (void 0 === b) {
      if ("function" === typeof a.render)
        throw Error(y(188));
      throw Error(y(268, Object.keys(a)));
    }
    a = cc(b);
    a = null === a ? null : a.stateNode;
    return a;
  };
  reactDom_production_min.flushSync = function(a, b) {
    var c = X;
    if (0 !== (c & 48))
      return a(b);
    X |= 1;
    try {
      if (a)
        return gg(99, a.bind(null, b));
    } finally {
      X = c, ig();
    }
  };
  reactDom_production_min.hydrate = function(a, b, c) {
    if (!rk(b))
      throw Error(y(200));
    return tk(null, a, b, true, c);
  };
  reactDom_production_min.render = function(a, b, c) {
    if (!rk(b))
      throw Error(y(200));
    return tk(null, a, b, false, c);
  };
  reactDom_production_min.unmountComponentAtNode = function(a) {
    if (!rk(a))
      throw Error(y(40));
    return a._reactRootContainer ? (Xj(function() {
      tk(null, null, a, false, function() {
        a._reactRootContainer = null;
        a[ff] = null;
      });
    }), true) : false;
  };
  reactDom_production_min.unstable_batchedUpdates = Wj;
  reactDom_production_min.unstable_createPortal = function(a, b) {
    return uk(a, b, 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null);
  };
  reactDom_production_min.unstable_renderSubtreeIntoContainer = function(a, b, c, d) {
    if (!rk(c))
      throw Error(y(200));
    if (null == a || void 0 === a._reactInternals)
      throw Error(y(38));
    return tk(a, b, c, false, d);
  };
  reactDom_production_min.version = "17.0.2";
  function checkDCE() {
    if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === "undefined" || typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== "function") {
      return;
    }
    try {
      __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);
    } catch (err) {
      console.error(err);
    }
  }
  {
    checkDCE();
    reactDom.exports = reactDom_production_min;
  }
  var ReactDOM = reactDom.exports;
  const scriptRel = "modulepreload";
  const seen = {};
  const base = "./";
  const __vitePreload = function preload(baseModule, deps) {
    if (true) {
      return baseModule();
    }
    return Promise.all(deps.map((dep) => {
      dep = `${base}${dep}`;
      if (dep in seen)
        return;
      seen[dep] = true;
      const isCss = dep.endsWith(".css");
      const cssSelector = isCss ? '[rel="stylesheet"]' : "";
      if (document.querySelector(`link[href="${dep}"]${cssSelector}`)) {
        return;
      }
      const link = document.createElement("link");
      link.rel = isCss ? "stylesheet" : scriptRel;
      if (!isCss) {
        link.as = "script";
        link.crossOrigin = "";
      }
      link.href = dep;
      document.head.appendChild(link);
      if (isCss) {
        return new Promise((res, rej) => {
          link.addEventListener("load", res);
          link.addEventListener("error", () => rej(new Error(`Unable to preload CSS for ${dep}`)));
        });
      }
    })).then(() => baseModule());
  };
  var RendererTypes = /* @__PURE__ */ ((RendererTypes2) => {
    RendererTypes2["WEB"] = "WEB";
    RendererTypes2["MOBILE"] = "MOBILE";
    return RendererTypes2;
  })(RendererTypes || {});
  var ENVIRONMENTS$1 = /* @__PURE__ */ ((ENVIRONMENTS2) => {
    ENVIRONMENTS2["DEV"] = "dev";
    ENVIRONMENTS2["QA"] = "qaint";
    ENVIRONMENTS2["STG"] = "stg";
    ENVIRONMENTS2["PPE"] = "ppe";
    ENVIRONMENTS2["PROD"] = "prod";
    return ENVIRONMENTS2;
  })(ENVIRONMENTS$1 || {});
  const generateCSS = (learnerViewData) => {
    const css = `
    body {
      ${learnerViewData.fontSize ? "font-size: " + learnerViewData.fontSize + "px;" : ""}
      ${learnerViewData.textTransform === "caps" ? "text-transform: uppercase;" : ""}
    }
    body p {
      ${learnerViewData.lineSpacing !== "default" ? "line-height: " + (learnerViewData.lineSpacing === "wider" ? "3.5em;" : "2.75em;") : ""}
    }
    body * {
      ${learnerViewData.fontSelector !== "default" ? `font-family: "${learnerViewData.fontSelector}";` : ""}
    }
  `;
    return css;
  };
  class ViewerApi {
    constructor(viewerConfig) {
      __publicField(this, "viewer");
      __publicField(this, "appConfig");
      __publicField(this, "viewerConfig");
      __publicField(this, "selectedThemePayload");
      __publicField(this, "init", async () => {
        console.log(
          `*** ViewerApi: Initializing Bronte Viewer using ${globalThis.appEnv} environment config ***`
        );
        if (this.viewerConfig.renderer === RendererTypes.WEB) {
          this.appConfig = (await __vitePreload(() => Promise.resolve().then(function() {
            return appConfig$2;
          }), false ? void 0 : void 0)).default;
          console.log("ViewerApi: Config loaded:", this.appConfig);
        }
        await __vitePreload(() => Promise.resolve().then(function() {
          return Viewer$1;
        }), false ? "__VITE_PRELOAD__" : void 0).then(async ({ Viewer: Viewer2 }) => {
          var _a, _b;
          this.viewer = new Viewer2(
            this.viewerConfig,
            (_a = this.appConfig) == null ? void 0 : _a.getLearnerGraphqlEndpoint(),
            (_b = this.appConfig) == null ? void 0 : _b.getLearnerWebsocketURL()
          );
        });
      });
      __publicField(this, "getCoursewareStructure", () => {
        var _a;
        return this.viewerConfig.renderer === RendererTypes.WEB ? (_a = this.viewer) == null ? void 0 : _a.services.coursewareStructureService.getCoursewareStructure() : window.ambrosia.toc;
      });
      __publicField(this, "route", (elementId) => {
        this.viewer.services.cdpServices.get("ROUTE_SERVICE").build({
          target: { id: elementId }
        }).routeTo();
      });
      __publicField(this, "getThemeVariants", async () => {
        var _a;
        if (!this.selectedThemePayload) {
          const themeService = this.viewer.services.cdpServices.get("THEME_SERVICE").build({
            target: { id: this.viewer.coursewareItemId }
          });
          this.selectedThemePayload = await themeService.getThemeVariants();
        }
        return ((_a = this.selectedThemePayload) == null ? void 0 : _a.themeVariants) || {};
      });
      __publicField(this, "updateTheme", async (themeOptions) => {
        var _a;
        if (!this.selectedThemePayload) {
          await this.getThemeVariants();
        }
        if ((_a = this.selectedThemePayload) == null ? void 0 : _a.themeVariants) {
          const themeService = this.viewer.services.cdpServices.get("THEME_SERVICE").build({
            target: { id: this.viewer.coursewareItemId }
          });
          let selectedThemeVariant = await themeService.getThemeVariant(
            themeOptions.variantId,
            this.selectedThemePayload.themeId || this.selectedThemePayload.id
          );
          console.log("selectedThemeVariant: ", selectedThemeVariant);
          if (selectedThemeVariant) {
            selectedThemeVariant = JSON.parse(selectedThemeVariant.config);
            selectedThemeVariant.css = selectedThemeVariant.css + generateCSS(themeOptions);
            console.log("selectedThemeVariant with generated css: ", selectedThemeVariant);
            await themeService.setInTheme(selectedThemeVariant);
          } else {
            console.error("Specified theme variant id not found.");
          }
        }
      });
      __publicField(this, "setOnline", (isOnline) => {
        console.log("isOnline: ", isOnline);
      });
      globalThis.appEnv = viewerConfig.env || ENVIRONMENTS$1.STG;
      this.viewerConfig = viewerConfig;
      this.init();
    }
  }
  const getURLParams = () => {
    const pathname = window.location.pathname.split("/");
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    return {
      cohortId: pathname[1],
      deploymentId: pathname[2],
      env: urlParams.get("env") || ENVIRONMENTS$1.STG,
      pocEnabled: urlParams.get("pocEnabled") || "",
      disableIES: urlParams.get("disableIES") || "",
      screenId: urlParams.get("screenId") || "",
      userId: urlParams.get("userId") || "",
      token: urlParams.get("token") || ""
    };
  };
  const getPearsonToken = async () => {
    const token = getURLParams().token;
    if (token) {
      return token;
    } else {
      let pearsonSessionToken = "";
      await window.piSession.getToken(async (_status, pearsonToken) => {
        pearsonSessionToken = pearsonToken;
      });
      return pearsonSessionToken;
    }
  };
  const getClientId = () => {
    return getURLParams().env === ENVIRONMENTS$1.PROD ? "hQ8ZsSZoIjyl8chQLgo7dB7fAlGIFvVG" : "oX5Vm6SEEeSi5QBEAU0081tx20UHE469";
  };
  const getSessionJsURL = () => {
    const env = getURLParams().env;
    let sessionJsURL = "";
    switch (env) {
      case ENVIRONMENTS$1.PPE:
        sessionJsURL = "https://login-ppe.pearson.com/v1/piapi-pqa/login/js/v2/session.js";
        break;
      case ENVIRONMENTS$1.PROD:
        sessionJsURL = "https://login.pearson.com/v1/piapi/login/js/v2/session.js";
        break;
      default:
        sessionJsURL = "https://login-stg.pearson.com/v1/piapi-int/login/js/v2/session.js";
    }
    return sessionJsURL;
  };
  const getTitle = (data) => {
    var _a;
    return ((_a = data.find(({ fieldName }) => fieldName === "title")) == null ? void 0 : _a.fieldValue) || "";
  };
  const DefaultThemeOptions = {
    enableShowHide: true,
    fontSelector: "default",
    fontSize: 16,
    isAnnotationHide: false,
    isFitToPage: false,
    isFitToWidth: false,
    isHotspotsHide: false,
    lineSpacing: "default",
    sliderVal: 20.5,
    textTransform: "default",
    variantId: "default-variant-id"
  };
  const FONT_OPTIONS = [
    {
      label: "Default",
      value: "default"
    },
    {
      label: "Verdana",
      value: "Verdana"
    },
    {
      label: "Arial",
      value: "Arial"
    },
    {
      label: "Times New Roman",
      value: "Times New Roman"
    },
    {
      label: "Sassoon Sans",
      value: "Sassoon Sans"
    }
  ];
  const getTocForWeb = async (viewerApi2) => {
    let firstScreenId;
    let tocHtmlNode = "";
    const activityToScreens = {};
    const getHrefElement = (elementId, elementTitle) => `<button onclick="route('${elementId}');">${elementTitle}</button>`;
    const appendPathways = (pathways) => {
      const result = [];
      pathways.forEach((pathway) => {
        var _a;
        tocHtmlNode += `<ul id=${pathway.id}>`;
        if ((_a = pathway.walkables) == null ? void 0 : _a.edges) {
          pathway.walkables.edges.forEach((_node) => {
            var _a2;
            tocHtmlNode += `<li id=${_node.node.elementId}>${getHrefElement(
              _node.node.elementId,
              getTitle(_node.node.configurationFields)
            )}`;
            if (_node.node.elementType === "INTERACTIVE") {
              if (!firstScreenId) {
                firstScreenId = _node.node.elementId;
              }
              result.push(_node.node);
            } else if ((_a2 = _node.node) == null ? void 0 : _a2.pathways) {
              const pathwayScreens = appendPathways(_node.node.pathways);
              activityToScreens[_node.node.elementId] = (pathwayScreens == null ? void 0 : pathwayScreens.length) ? pathwayScreens[0].elementId : _node.node.elementId;
              result.push(...pathwayScreens);
            }
            tocHtmlNode += `</li>`;
          });
        }
        tocHtmlNode += "</ul>";
      });
      return result;
    };
    const toc = await viewerApi2.getCoursewareStructure();
    let screens = [];
    return () => {
      toc == null ? void 0 : toc.learn.cohort.deployment.forEach((deployment) => {
        screens = [...screens, ...appendPathways(deployment.activity.pathways)];
      });
      return {
        tocHtmlNode,
        firstScreenId,
        screens,
        activityToScreens
      };
    };
  };
  const getTocForMobile = async (viewerApi2) => {
    let firstScreenId;
    let tocHtmlNode = "";
    const activityToScreens = {};
    const getHrefElement = (elementId, elementTitle) => `<button onclick="route('${elementId}');">${elementTitle}</button>`;
    const appendPathways = (tocData) => {
      const result = [];
      tocHtmlNode += `<ul>`;
      tocData == null ? void 0 : tocData.children.forEach((chapter) => {
        tocHtmlNode += `<li id=${chapter.id}>${getHrefElement(chapter.id, chapter.title || "")}`;
        if (chapter.children) {
          tocHtmlNode += `<ul>`;
          chapter.children.forEach((lesson) => {
            tocHtmlNode += `<li id=${lesson.id}>${getHrefElement(lesson.id, lesson.title || "")}`;
            if (lesson.children) {
              tocHtmlNode += `<ul>`;
              lesson.children.forEach((screen) => {
                tocHtmlNode += `<li id=${screen.id}>${getHrefElement(
                  screen.id,
                  screen.title || "Not Available"
                )}`;
                if (!firstScreenId) {
                  firstScreenId = screen.id;
                }
                result.push({
                  elementId: screen.id
                });
                tocHtmlNode += `</li>`;
              });
              activityToScreens[lesson.id] = lesson.id;
              tocHtmlNode += `</ul>`;
            }
            tocHtmlNode += `</li>`;
          });
          activityToScreens[chapter.id] = chapter.id;
          tocHtmlNode += `</ul>`;
        }
        tocHtmlNode += `</li>`;
      });
      tocHtmlNode += "</ul>";
      return result;
    };
    const toc = await viewerApi2.getCoursewareStructure();
    let screens = [];
    return () => {
      screens = [...appendPathways(toc)];
      return {
        tocHtmlNode,
        firstScreenId,
        screens,
        activityToScreens
      };
    };
  };
  const getCoursewareStructure = (viewerApi2) => {
    return viewerApi2.viewerConfig.renderer === RendererTypes.WEB ? getTocForWeb(viewerApi2) : getTocForMobile(viewerApi2);
  };
  var styles$4 = "";
  var DrawerTypes = /* @__PURE__ */ ((DrawerTypes2) => {
    DrawerTypes2[DrawerTypes2["TOC"] = 0] = "TOC";
    DrawerTypes2[DrawerTypes2["SETTINGS"] = 1] = "SETTINGS";
    return DrawerTypes2;
  })(DrawerTypes || {});
  var jsxRuntime = { exports: {} };
  var reactJsxRuntime_production_min = {};
  /** @license React v17.0.2
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   */
  var f = react.exports, g = 60103;
  reactJsxRuntime_production_min.Fragment = 60107;
  if ("function" === typeof Symbol && Symbol.for) {
    var h = Symbol.for;
    g = h("react.element");
    reactJsxRuntime_production_min.Fragment = h("react.fragment");
  }
  var m = f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner, n = Object.prototype.hasOwnProperty, p = { key: true, ref: true, __self: true, __source: true };
  function q(c, a, k) {
    var b, d = {}, e = null, l2 = null;
    void 0 !== k && (e = "" + k);
    void 0 !== a.key && (e = "" + a.key);
    void 0 !== a.ref && (l2 = a.ref);
    for (b in a)
      n.call(a, b) && !p.hasOwnProperty(b) && (d[b] = a[b]);
    if (c && c.defaultProps)
      for (b in a = c.defaultProps, a)
        void 0 === d[b] && (d[b] = a[b]);
    return { $$typeof: g, type: c, key: e, ref: l2, props: d, _owner: m.current };
  }
  reactJsxRuntime_production_min.jsx = q;
  reactJsxRuntime_production_min.jsxs = q;
  {
    jsxRuntime.exports = reactJsxRuntime_production_min;
  }
  const jsx = jsxRuntime.exports.jsx;
  const jsxs = jsxRuntime.exports.jsxs;
  const Menu = ({
    onMenuItemClick
  }) => {
    return /* @__PURE__ */ jsxs("div", {
      className: "menu",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "menu-items",
        children: [/* @__PURE__ */ jsx("button", {
          className: "menu-item home",
          "aria-label": "Home"
        }), /* @__PURE__ */ jsx("hr", {}), /* @__PURE__ */ jsx("button", {
          className: "menu-item toc",
          "aria-label": "Table of Contents",
          onClick: () => onMenuItemClick(DrawerTypes.TOC)
        }), /* @__PURE__ */ jsx("button", {
          className: "menu-item navigation",
          "aria-label": "Navigation"
        }), /* @__PURE__ */ jsx("button", {
          className: "menu-item search",
          "aria-label": "Search"
        }), /* @__PURE__ */ jsx("hr", {}), /* @__PURE__ */ jsx("button", {
          className: "menu-item notebook",
          "aria-label": "Notebook"
        }), /* @__PURE__ */ jsx("button", {
          className: "menu-item study",
          "aria-label": "Study"
        }), /* @__PURE__ */ jsx("hr", {}), /* @__PURE__ */ jsx("button", {
          className: "menu-item settings",
          "aria-label": "Settings",
          onClick: () => onMenuItemClick(DrawerTypes.SETTINGS)
        })]
      }), /* @__PURE__ */ jsx("button", {
        className: "menu-item close",
        "aria-label": "Close"
      })]
    });
  };
  var styles$3 = "";
  const TocDrawer = ({
    onClose,
    children
  }) => {
    return /* @__PURE__ */ jsxs("div", {
      className: "drawer toc-drawer",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "header",
        children: [/* @__PURE__ */ jsx("h3", {
          className: "title",
          children: "Table of contents"
        }), /* @__PURE__ */ jsx("button", {
          className: "close-button",
          "aria-label": "Close button",
          onClick: onClose,
          children: /* @__PURE__ */ jsx("div", {
            className: "close-icon"
          })
        })]
      }), /* @__PURE__ */ jsxs("div", {
        className: "tabs",
        children: [/* @__PURE__ */ jsx("button", {
          className: "tab-item",
          children: "Content"
        }), /* @__PURE__ */ jsx("button", {
          className: "tab-item",
          children: "Bookmarks"
        }), /* @__PURE__ */ jsx("button", {
          className: "tab-item",
          children: "Recent"
        })]
      }), /* @__PURE__ */ jsx("div", {
        className: "toc",
        dangerouslySetInnerHTML: {
          __html: children
        }
      })]
    });
  };
  const ThemeContext = react.exports.createContext(null);
  var styles$2 = "";
  const SettingsDrawer = ({
    viewerApi: viewerApi2,
    onClose
  }) => {
    const [themeVariants, setThemeVariants] = react.exports.useState([]);
    const {
      currentTheme,
      setCurrentTheme
    } = react.exports.useContext(ThemeContext);
    const [fontSize, setFontSize] = react.exports.useState(currentTheme.fontSize);
    const [font, setFont] = react.exports.useState(currentTheme.fontSelector);
    const onUpdateTheme = (themeOptions) => {
      const theme = {
        ...currentTheme,
        ...themeOptions
      };
      setCurrentTheme(theme);
      viewerApi2.updateTheme(theme);
    };
    react.exports.useEffect(() => {
      const getThemeVariants = async () => {
        let variants = await viewerApi2.getThemeVariants();
        variants = variants == null ? void 0 : variants.map((variant) => ({
          ...variant,
          ...getVariantOptions(variant.variantName)
        }));
        setThemeVariants(variants);
      };
      getThemeVariants();
    }, []);
    const getVariantOptions = (variantName) => {
      switch (variantName) {
        case "Sepia":
          return {
            cssClass: "sepia",
            label: "Sepia theme"
          };
        case "Night":
          return {
            cssClass: "dark",
            label: "Dark theme"
          };
        default:
          return {
            cssClass: "light",
            label: "Light theme"
          };
      }
    };
    react.exports.useEffect(() => {
      onUpdateTheme({
        fontSelector: font
      });
    }, [font]);
    return /* @__PURE__ */ jsxs("div", {
      className: "drawer settings-drawer",
      children: [/* @__PURE__ */ jsxs("div", {
        className: "header",
        children: [/* @__PURE__ */ jsx("h3", {
          className: "title",
          children: "Settings"
        }), /* @__PURE__ */ jsx("button", {
          className: "close-button",
          "aria-label": "Close settings",
          onClick: onClose,
          children: /* @__PURE__ */ jsx("div", {
            className: "close-icon"
          })
        })]
      }), /* @__PURE__ */ jsx("div", {
        className: "theme-button-row-label",
        children: "Select Theme"
      }), /* @__PURE__ */ jsx("div", {
        className: "theme-button-row",
        children: themeVariants == null ? void 0 : themeVariants.map((themeVariant) => /* @__PURE__ */ jsx("button", {
          className: `action-button ${themeVariant.cssClass}`,
          "aria-label": themeVariant.label,
          onClick: () => {
            onUpdateTheme({
              variantId: themeVariant.variantId
            });
          },
          children: themeVariant.variantName
        }, themeVariant.variantId))
      }), /* @__PURE__ */ jsx("div", {
        className: "theme-button-row-label",
        children: "Select Text Size"
      }), /* @__PURE__ */ jsx("div", {
        className: "theme-button-row",
        children: /* @__PURE__ */ jsx("div", {
          className: "range-slider",
          children: /* @__PURE__ */ jsx("input", {
            type: "range",
            min: "12",
            max: "21",
            "aria-label": "font-size-slider",
            value: fontSize,
            onChange: (event) => setFontSize(Number.parseInt(event.target.value)),
            onMouseUp: () => onUpdateTheme({
              fontSize
            })
          })
        })
      }), /* @__PURE__ */ jsx("div", {
        className: "theme-button-row-label",
        children: "Select Font"
      }), /* @__PURE__ */ jsx("div", {
        children: FONT_OPTIONS.map((item) => /* @__PURE__ */ jsxs("label", {
          className: "theme-font-option",
          children: [/* @__PURE__ */ jsx("input", {
            type: "radio",
            name: "font",
            value: item.value,
            checked: font === item.value,
            onChange: (e) => setFont(e.target.value)
          }), " ", item.label]
        }, `font_${item.value}`))
      }), /* @__PURE__ */ jsx("div", {
        className: "theme-button-row-label",
        children: "Upper/Lowercase"
      }), /* @__PURE__ */ jsxs("div", {
        className: "theme-button-row",
        children: [/* @__PURE__ */ jsx("button", {
          className: "action-button",
          "aria-label": "Default case",
          onClick: () => {
            onUpdateTheme({
              textTransform: "default"
            });
          },
          children: "Abcd"
        }), /* @__PURE__ */ jsx("button", {
          className: "action-button",
          "aria-label": "All uppercase",
          onClick: () => {
            onUpdateTheme({
              textTransform: "caps"
            });
          },
          children: "ABCD"
        })]
      }), /* @__PURE__ */ jsx("div", {
        className: "theme-button-row-label",
        children: "Select Line Spacing"
      }), /* @__PURE__ */ jsxs("div", {
        className: "theme-button-row",
        children: [/* @__PURE__ */ jsx("button", {
          className: "action-button",
          "aria-label": "Default line height",
          onClick: () => {
            onUpdateTheme({
              lineSpacing: "default"
            });
          },
          children: "Default Line Spacing"
        }), /* @__PURE__ */ jsx("button", {
          className: "action-button",
          "aria-label": "Wide line height",
          onClick: () => {
            onUpdateTheme({
              lineSpacing: "wide"
            });
          },
          children: "Wider Line Spacing"
        }), /* @__PURE__ */ jsx("button", {
          className: "action-button",
          "aria-label": "Wider line height",
          onClick: () => {
            onUpdateTheme({
              lineSpacing: "wider"
            });
          },
          children: "Widest Line Spacing"
        })]
      })]
    });
  };
  var styles$1 = "";
  const AsideBar = ({
    tocNodeHtml,
    viewerApi: viewerApi2
  }) => {
    const [showToc, setShowToc] = react.exports.useState(false);
    const [showSettings, setShowSettings] = react.exports.useState(false);
    const handleDrawers = (type) => {
      switch (type) {
        case DrawerTypes.TOC:
          setShowSettings(false);
          setShowToc((prevState) => !prevState);
          break;
        case DrawerTypes.SETTINGS:
          setShowToc(false);
          setShowSettings((prevState) => !prevState);
          break;
      }
    };
    return /* @__PURE__ */ jsxs(react.exports.Fragment, {
      children: [/* @__PURE__ */ jsx(Menu, {
        onMenuItemClick: handleDrawers
      }), showToc && /* @__PURE__ */ jsx(TocDrawer, {
        onClose: () => setShowToc(false),
        children: tocNodeHtml
      }), showSettings && /* @__PURE__ */ jsx(SettingsDrawer, {
        viewerApi: viewerApi2,
        onClose: () => setShowSettings(false)
      })]
    });
  };
  var styles = "";
  const EnvironmentForm = () => {
    const urlParams = getURLParams();
    const [env, setEnv] = react.exports.useState(urlParams.env);
    const [pocEnabled, setPocEnabled] = react.exports.useState(urlParams.pocEnabled === "true");
    const [disableIES, setDisableIES] = react.exports.useState(urlParams.disableIES === "true");
    const [screenId, setScreenId] = react.exports.useState(urlParams.screenId);
    const [userId, setUserId] = react.exports.useState(urlParams.userId);
    const [token, setToken] = react.exports.useState(urlParams.token);
    const [deploymentURL, setDeploymentURL] = react.exports.useState(`${urlParams.cohortId}/${urlParams.deploymentId}`);
    const [displayEnvChangeSection, setDisplayEnvChangeSection] = react.exports.useState(false);
    const handleEnvChange = (event) => {
      setEnv(event.target.value);
    };
    const handleURLChange = (event) => {
      setDeploymentURL(event.target.value);
    };
    const handleSubmit = () => {
      if (!deploymentURL) {
        alert("please enter url");
        return;
      }
      let url = `${window.location.origin}/${deploymentURL}?env=${env}`;
      if (disableIES) {
        if (!(userId && token)) {
          alert("Enter user id and token both.");
          return;
        }
        url += `&disableIES=${disableIES}&userId=${userId}&token=${token}`;
      }
      if (pocEnabled) {
        url += `&pocEnabled=${pocEnabled}${screenId ? `&screenId=${screenId}` : ""}`;
      }
      window.location.href = url;
      if (urlParams.env !== env && window.piSession) {
        window.piSession.setOptions({
          requireLogin: false
        });
        window.piSession.logout(url);
      } else {
        window.location.href = url;
      }
    };
    const toggleEnvChangeSection = () => {
      setDisplayEnvChangeSection(!displayEnvChangeSection);
    };
    return /* @__PURE__ */ jsxs(react.exports.Fragment, {
      children: [/* @__PURE__ */ jsx("button", {
        className: "env-toggle-button",
        onClick: toggleEnvChangeSection,
        children: "Switch Env/Course"
      }), displayEnvChangeSection && /* @__PURE__ */ jsx("div", {
        className: "environment-form",
        children: /* @__PURE__ */ jsxs("form", {
          children: [/* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsx("label", {
              children: "Select Environment"
            }), /* @__PURE__ */ jsxs("select", {
              value: env,
              onChange: handleEnvChange,
              children: [/* @__PURE__ */ jsx("option", {
                value: ENVIRONMENTS$1.DEV,
                children: "Dev"
              }), /* @__PURE__ */ jsx("option", {
                value: ENVIRONMENTS$1.QA,
                children: "QA int"
              }), /* @__PURE__ */ jsx("option", {
                value: ENVIRONMENTS$1.STG,
                children: "Stage"
              }), /* @__PURE__ */ jsx("option", {
                value: ENVIRONMENTS$1.PPE,
                children: "Ppe"
              }), /* @__PURE__ */ jsx("option", {
                value: ENVIRONMENTS$1.PROD,
                children: "Prod"
              })]
            })]
          }), /* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsx("label", {
              children: "Enter URL"
            }), /* @__PURE__ */ jsx("input", {
              type: "text",
              value: deploymentURL,
              onChange: handleURLChange,
              placeholder: "cohortId/deploymentId"
            }), /* @__PURE__ */ jsxs("div", {
              className: "example-url",
              children: ["Example (stg): 7cb48310-7e24-11ec-9972-017a7c2abbdd/84ef7210-7e24-11ec-9972-017a7c2abbdd ", /* @__PURE__ */ jsx("br", {}), "Example (dev): 5a1beb80-0228-11ed-b2f5-036476aaf1ec/9bb55ec0-09ec-11ed-972e-4dccf421768b ", /* @__PURE__ */ jsx("br", {}), "Example (qaint): 53995dc0-0871-11ed-9af5-cd0858a07bff/5f43a9f0-0871-11ed-9af5-cd0858a07bff ", /* @__PURE__ */ jsx("br", {}), "Example (ppe): e67ab1e0-a17c-11ec-98b4-59fa254ca097/f669d3b0-a17c-11ec-98b4-59fa254ca097 ", /* @__PURE__ */ jsx("br", {}), "Example (prod): 63208ca0-eb3e-11ec-af3a-5d3ac6ba0af5/69d5ed10-eb3e-11ec-af3a-5d3ac6ba0af5"]
            })]
          }), /* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsx("label", {
              children: "Disable IES"
            }), /* @__PURE__ */ jsx("input", {
              type: "checkbox",
              checked: disableIES,
              onChange: (e) => {
                const isChecked = e.target.checked;
                setDisableIES(isChecked);
              }
            })]
          }), disableIES && /* @__PURE__ */ jsxs(react.exports.Fragment, {
            children: [/* @__PURE__ */ jsx("div", {
              children: /* @__PURE__ */ jsx("div", {
                className: "example-url black",
                children: /* @__PURE__ */ jsx("h3", {
                  children: "Provide following values for testing without IES."
                })
              })
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                children: "Enter PI User Id"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: userId,
                onChange: (e) => setUserId(e.target.value),
                placeholder: "PI User Id"
              })]
            }), /* @__PURE__ */ jsxs("div", {
              children: [/* @__PURE__ */ jsx("label", {
                children: "Enter Token"
              }), /* @__PURE__ */ jsx("input", {
                type: "text",
                value: token,
                onChange: (e) => setToken(e.target.value),
                placeholder: "PI Token / bearer token"
              })]
            })]
          }), /* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsx("label", {
              children: "Enable POC Learnspace Services"
            }), /* @__PURE__ */ jsx("input", {
              type: "checkbox",
              checked: pocEnabled,
              onChange: (e) => {
                const isChecked = e.target.checked;
                setPocEnabled(isChecked);
              }
            })]
          }), pocEnabled && /* @__PURE__ */ jsxs("div", {
            children: [/* @__PURE__ */ jsx("label", {
              children: "Enter Screen Id"
            }), /* @__PURE__ */ jsx("input", {
              type: "text",
              value: screenId,
              onChange: (e) => setScreenId(e.target.value),
              placeholder: "Optional - enter screen id to test non default case"
            })]
          }), /* @__PURE__ */ jsx("div", {
            children: /* @__PURE__ */ jsx("button", {
              type: "button",
              onClick: handleSubmit,
              children: "Submit"
            })
          })]
        })
      })]
    });
  };
  let viewerApi;
  function usePrevious(value) {
    const ref = react.exports.useRef();
    react.exports.useEffect(() => {
      ref.current = value;
    }, [value]);
    return ref.current;
  }
  const App = () => {
    const urlParams = getURLParams();
    const [renderer] = react.exports.useState(RendererTypes.MOBILE);
    const [message, setMessage] = react.exports.useState("");
    const frameElement = react.exports.useRef(document.createElement("div"));
    const [tocNodeHtml, setTocNodeHtml] = react.exports.useState("");
    const [screensState, setScreens] = react.exports.useState([]);
    const [activityToScreenMap, setActivityToScreenMap] = react.exports.useState({});
    const [renderedId, setRenderedId] = react.exports.useState("");
    const previousRenderedId = usePrevious(renderedId);
    const [nextEnabled, setNextEnabled] = react.exports.useState(false);
    const [nextItem, setNextItem] = react.exports.useState();
    const [prevEnabled, setPrevEnabled] = react.exports.useState(false);
    const [prevItem, setPrevItem] = react.exports.useState();
    const [imgData, setImageData] = react.exports.useState({
      src: ""
    });
    const [currentTheme, setCurrentTheme] = react.exports.useState(DefaultThemeOptions);
    const getPrevNextItem = (screens, currentId) => {
      const i2 = screens.findIndex((screen) => screen.elementId === currentId);
      setNextEnabled(i2 < screens.length - 1);
      setNextItem(screens[i2 + 1]);
      setPrevEnabled(i2 > 0);
      setPrevItem(screens[i2 - 1]);
    };
    const onNext = () => {
      if (nextItem == null ? void 0 : nextItem.elementId) {
        viewerApi.route(nextItem.elementId);
      }
    };
    const onPrev = () => {
      if (prevItem == null ? void 0 : prevItem.elementId) {
        viewerApi.route(prevItem.elementId);
      }
    };
    const init2 = () => {
      if (renderer === RendererTypes.MOBILE) {
        loadPage("");
      } else {
        const screenId = urlParams.screenId;
        const isIESDisabled = urlParams.disableIES;
        if (isIESDisabled) {
          loadPage(urlParams.userId, screenId);
        } else {
          const piSessionConfig = {
            loginSuccessUrl: window.location.href,
            requireLogin: true,
            avoidReInit: true
          };
          const envURL = getSessionJsURL();
          const clientId = getClientId();
          const sessionJsScript = window.document.querySelector("#sessionJSScript");
          sessionJsScript.src = envURL;
          sessionJsScript.onload = function() {
            try {
              setMessage("Authorizing...");
              const piSession = window.piSession;
              piSession.initialize(clientId, piSessionConfig);
              piSession.getToken(async (_status, _pearsonToken) => {
                setMessage("Loading...");
                loadPage(piSession.userId());
              });
            } catch (e) {
              console.error("Dev Shell: Session js initialize error. Pi Session undefined\n", e);
            }
          };
          sessionJsScript.onerror = () => {
            console.error("Dev Shell: Session js initialize error. Invalid session js url/file");
          };
        }
      }
    };
    react.exports.useEffect(() => {
      init2();
      window.addEventListener("offline", () => {
        viewerApi.setOnline(false);
      });
      window.addEventListener("online", () => {
        viewerApi.setOnline(true);
      });
    }, []);
    react.exports.useEffect(() => {
      var _a, _b;
      getPrevNextItem(screensState, activityToScreenMap[renderedId] || renderedId || "");
      if (previousRenderedId) {
        (_a = document.getElementById(previousRenderedId)) == null ? void 0 : _a.classList.remove("active");
      }
      (_b = document.getElementById(renderedId)) == null ? void 0 : _b.classList.add("active");
    }, [screensState, renderedId, activityToScreenMap]);
    const loadPage = (pearsonUid, screenId = "") => {
      const viewerConfig = {
        domElement: frameElement.current,
        cohortId: urlParams.cohortId,
        deploymentId: urlParams.deploymentId,
        getPearsonToken,
        getContent: async (filename) => {
          const response = await fetch(filename);
          return response.json();
        },
        offlinePackagePath: "./sample-offline-package",
        renderer,
        pearsonUid,
        env: urlParams.env,
        events: {
          onReady: async () => {
            const {
              tocHtmlNode,
              firstScreenId,
              screens: screenData,
              activityToScreens
            } = (await getCoursewareStructure(viewerApi))();
            setTocNodeHtml(tocHtmlNode);
            setScreens(screenData);
            setActivityToScreenMap(activityToScreens);
            setMessage("onReady: Bronte Viewer has been initialized.");
            viewerApi.setOnline(true);
            viewerApi.route(screenId || firstScreenId);
            const themeVariants = await viewerApi.getThemeVariants();
            const defaultThemeVariant = themeVariants == null ? void 0 : themeVariants.find((themeVariant) => themeVariant.state === "DEFAULT");
            if (defaultThemeVariant) {
              DefaultThemeOptions.variantId = defaultThemeVariant.variantId;
            }
            viewerApi.updateTheme(DefaultThemeOptions);
          },
          onRouteChange: (data) => {
            console.log("Dev Shell: onRouteChange =>", data);
            setRenderedId(data == null ? void 0 : data.id);
          },
          onImageClick: (data) => {
            setImageData(data);
          }
        }
      };
      viewerApi = new ViewerApi(viewerConfig);
      window.__viewerApi = viewerApi;
    };
    return /* @__PURE__ */ jsxs(ThemeContext.Provider, {
      value: {
        currentTheme,
        setCurrentTheme
      },
      children: [/* @__PURE__ */ jsx("h3", {
        className: "app-title",
        children: "App Shell (3rd Party)"
      }), /* @__PURE__ */ jsxs("div", {
        className: "app-shell",
        children: [/* @__PURE__ */ jsx(EnvironmentForm, {}), /* @__PURE__ */ jsxs("div", {
          className: "content-wrapper",
          children: [/* @__PURE__ */ jsx(AsideBar, {
            tocNodeHtml,
            viewerApi
          }), /* @__PURE__ */ jsxs("div", {
            className: "content",
            children: [/* @__PURE__ */ jsx("div", {
              className: "message",
              children: message
            }), /* @__PURE__ */ jsxs("div", {
              className: "content-frame-container",
              children: [prevEnabled && prevItem && prevItem.elementId && /* @__PURE__ */ jsxs("button", {
                className: "navigation-button previous-button",
                onClick: onPrev,
                children: ["\u276E", " ", /* @__PURE__ */ jsx("span", {
                  children: !!(prevItem == null ? void 0 : prevItem.configurationFields) && getTitle(prevItem.configurationFields)
                })]
              }), nextEnabled && nextItem && nextItem.elementId && /* @__PURE__ */ jsxs("button", {
                className: "navigation-button next-button",
                onClick: onNext,
                children: [/* @__PURE__ */ jsx("span", {
                  children: !!(nextItem == null ? void 0 : nextItem.configurationFields) && getTitle(nextItem.configurationFields)
                }), " ", "\u276F"]
              }), /* @__PURE__ */ jsx("div", {
                className: "content-frame",
                "data-disable-check-for-top-level-plugin": "true",
                ref: frameElement
              })]
            })]
          })]
        })]
      }), (imgData == null ? void 0 : imgData.src) && /* @__PURE__ */ jsxs(react.exports.Fragment, {
        children: [/* @__PURE__ */ jsx("div", {
          className: "modal-backdrop",
          onClick: () => setImageData({
            src: ""
          })
        }), /* @__PURE__ */ jsxs("div", {
          className: "modal-content",
          children: [/* @__PURE__ */ jsx("img", {
            alt: imgData.alt,
            className: "zoomable-image",
            src: imgData.src
          }), imgData.caption && /* @__PURE__ */ jsx("div", {
            dangerouslySetInnerHTML: {
              __html: imgData.caption
            }
          })]
        })]
      })]
    });
  };
  var style = "";
  ReactDOM.render(/* @__PURE__ */ jsx(React.StrictMode, {
    children: /* @__PURE__ */ jsx(App, {})
  }), document.getElementById("root"));
  var ENVIRONMENTS = /* @__PURE__ */ ((ENVIRONMENTS2) => {
    ENVIRONMENTS2["DEV"] = "dev";
    ENVIRONMENTS2["QA"] = "qaint";
    ENVIRONMENTS2["STG"] = "stg";
    ENVIRONMENTS2["PPE"] = "ppe";
    ENVIRONMENTS2["PROD"] = "prod";
    return ENVIRONMENTS2;
  })(ENVIRONMENTS || {});
  const constructGetter = function(value) {
    return function() {
      return value;
    };
  };
  let appConfig;
  switch (globalThis.appEnv) {
    case ENVIRONMENTS.DEV:
      {
        const learnerEndpoint = "learning-service-dev.pearson.com";
        const graphqlEndpoint = "graphql-learning-service-dev.pearson.com";
        appConfig = {
          getCSGURL: constructGetter("https://content-service-qa.stg-prsn.com"),
          getLearnerGraphqlEndpoint: constructGetter("https://" + graphqlEndpoint + "/graphql"),
          getLearnerWebsocketURL: constructGetter("wss://" + learnerEndpoint + "/socket"),
          getPIClientID: constructGetter("oX5Vm6SEEeSi5QBEAU0081tx20UHE469"),
          getPILoginURL: constructGetter("https://login-stg.pearson.com/v1/piapi-int/login"),
          getGTMAuth: constructGetter("RAFSvAg1n6HG6mFYuU0s3w"),
          getGTMPreview: constructGetter("env-3"),
          getLaunchDarklyClientId: constructGetter("5fa470392368f008d07dd711"),
          getLearnspaceURL: constructGetter("https://dev-learn.bronte.dev-prsn.com"),
          getNRAccountId: constructGetter("693300"),
          getNRAgentId: constructGetter("646263374"),
          getNRLicenseKey: constructGetter("d6db832bf0")
        };
      }
      break;
    case ENVIRONMENTS.QA:
      {
        const learnerEndpoint = "learning-service-qaint.pearson.com";
        const graphqlEndpoint = "graphql-learning-service-qaint.pearson.com";
        appConfig = {
          getCSGURL: constructGetter("https://content-service-qa.stg-prsn.com"),
          getLearnerGraphqlEndpoint: constructGetter("https://" + graphqlEndpoint + "/graphql"),
          getLearnerWebsocketURL: constructGetter("wss://" + learnerEndpoint + "/socket"),
          getPIClientID: constructGetter("oX5Vm6SEEeSi5QBEAU0081tx20UHE469"),
          getPILoginURL: constructGetter("https://login-stg.pearson.com/v1/piapi-int/login"),
          getGTMAuth: constructGetter("RAFSvAg1n6HG6mFYuU0s3w"),
          getGTMPreview: constructGetter("env-3"),
          getLaunchDarklyClientId: constructGetter("5fa470392368f008d07dd711"),
          getLearnspaceURL: constructGetter("https://learn-bronte-qaint.pearson.com"),
          getNRAccountId: constructGetter("693300"),
          getNRAgentId: constructGetter("646263374"),
          getNRLicenseKey: constructGetter("d6db832bf0")
        };
      }
      break;
    case ENVIRONMENTS.PPE:
      {
        const learnerEndpoint = "learning-service-ppe.pearson.com";
        const graphqlEndpoint = "graphql-learning-service-ppe.pearson.com";
        appConfig = {
          getCSGURL: constructGetter("https://content-service-perf.stg-prsn.com"),
          getLearnerGraphqlEndpoint: constructGetter("https://" + graphqlEndpoint + "/graphql"),
          getLearnerWebsocketURL: constructGetter("wss://" + learnerEndpoint + "/socket"),
          getPIClientID: constructGetter("oX5Vm6SEEeSi5QBEAU0081tx20UHE469"),
          getPILoginURL: constructGetter("https://login-ppe.pearson.com/v1/piapi-pqa/login"),
          getGTMAuth: constructGetter("Q9O-rqpcZufxlu8kc5oAtQ"),
          getGTMPreview: constructGetter("env-286"),
          getLaunchDarklyClientId: constructGetter("5fa470802368f008d07dd727"),
          getLearnspaceURL: constructGetter("https://learn-bronte-ppe.pearson.com"),
          getNRAccountId: constructGetter("693300"),
          getNRAgentId: constructGetter("646263374"),
          getNRLicenseKey: constructGetter("d6db832bf0")
        };
      }
      break;
    case ENVIRONMENTS.PROD:
      {
        const learnerEndpoint = "learning-service.pearson.com";
        appConfig = {
          getCSGURL: constructGetter("https://content-service.prd-prsn.com"),
          getLearnerGraphqlEndpoint: constructGetter("https://" + learnerEndpoint + "/graphql"),
          getLearnerWebsocketURL: constructGetter("wss://" + learnerEndpoint + "/learn"),
          getPIClientID: constructGetter("hQ8ZsSZoIjyl8chQLgo7dB7fAlGIFvVG"),
          getPILoginURL: constructGetter("https://login.pearson.com/v1/piapi/login"),
          getLearnspaceGTMAuth: constructGetter("BZDe-AMDFM0MIVRf42LnxA"),
          getLearnspaceGTMPreview: constructGetter("env-1"),
          getLaunchDarklyClientId: constructGetter("5f48dd1158b578095c12a310"),
          getLearnspaceURL: constructGetter("https://learning.pearson.com"),
          getNRAccountId: constructGetter("1322480"),
          getNRAgentId: constructGetter("664913296"),
          getNRLicenseKey: constructGetter("d527718953")
        };
      }
      break;
    case ENVIRONMENTS.STG:
    default:
      {
        const learnerEndpoint = "learning-service-stg.pearson.com";
        const graphqlEndpoint = "graphql-learning-service-stg.pearson.com";
        appConfig = {
          getCSGURL: constructGetter("https://content-service-qa.stg-prsn.com"),
          getLearnerGraphqlEndpoint: constructGetter("https://" + graphqlEndpoint + "/graphql"),
          getLearnerWebsocketURL: constructGetter("wss://" + learnerEndpoint + "/socket"),
          getPIClientID: constructGetter("oX5Vm6SEEeSi5QBEAU0081tx20UHE469"),
          getPILoginURL: constructGetter("https://login-stg.pearson.com/v1/piapi-int/login"),
          getGTMAuth: constructGetter("RAFSvAg1n6HG6mFYuU0s3w"),
          getGTMPreview: constructGetter("env-3"),
          getLaunchDarklyClientId: constructGetter("5fa470392368f008d07dd711"),
          getLearnspaceURL: constructGetter("https://learn-bronte-stg.pearson.com"),
          getNRAccountId: constructGetter("693300"),
          getNRAgentId: constructGetter("646263374"),
          getNRLicenseKey: constructGetter("d6db832bf0")
        };
      }
      break;
  }
  var appConfig$1 = appConfig;
  var appConfig$2 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
    __proto__: null,
    "default": appConfig$1
  }, Symbol.toStringTag, { value: "Module" }));
  var cdpPluginApi = {};
  var immutable$1 = { exports: {} };
  (function(module, exports) {
    (function(global2, factory) {
      module.exports = factory();
    })(commonjsGlobal, function() {
      var SLICE$0 = Array.prototype.slice;
      function createClass2(ctor, superClass) {
        if (superClass) {
          ctor.prototype = Object.create(superClass.prototype);
        }
        ctor.prototype.constructor = ctor;
      }
      function Iterable(value) {
        return isIterable(value) ? value : Seq(value);
      }
      createClass2(KeyedIterable, Iterable);
      function KeyedIterable(value) {
        return isKeyed(value) ? value : KeyedSeq(value);
      }
      createClass2(IndexedIterable, Iterable);
      function IndexedIterable(value) {
        return isIndexed(value) ? value : IndexedSeq(value);
      }
      createClass2(SetIterable, Iterable);
      function SetIterable(value) {
        return isIterable(value) && !isAssociative(value) ? value : SetSeq(value);
      }
      function isIterable(maybeIterable) {
        return !!(maybeIterable && maybeIterable[IS_ITERABLE_SENTINEL]);
      }
      function isKeyed(maybeKeyed) {
        return !!(maybeKeyed && maybeKeyed[IS_KEYED_SENTINEL]);
      }
      function isIndexed(maybeIndexed) {
        return !!(maybeIndexed && maybeIndexed[IS_INDEXED_SENTINEL]);
      }
      function isAssociative(maybeAssociative) {
        return isKeyed(maybeAssociative) || isIndexed(maybeAssociative);
      }
      function isOrdered(maybeOrdered) {
        return !!(maybeOrdered && maybeOrdered[IS_ORDERED_SENTINEL]);
      }
      Iterable.isIterable = isIterable;
      Iterable.isKeyed = isKeyed;
      Iterable.isIndexed = isIndexed;
      Iterable.isAssociative = isAssociative;
      Iterable.isOrdered = isOrdered;
      Iterable.Keyed = KeyedIterable;
      Iterable.Indexed = IndexedIterable;
      Iterable.Set = SetIterable;
      var IS_ITERABLE_SENTINEL = "@@__IMMUTABLE_ITERABLE__@@";
      var IS_KEYED_SENTINEL = "@@__IMMUTABLE_KEYED__@@";
      var IS_INDEXED_SENTINEL = "@@__IMMUTABLE_INDEXED__@@";
      var IS_ORDERED_SENTINEL = "@@__IMMUTABLE_ORDERED__@@";
      var DELETE = "delete";
      var SHIFT = 5;
      var SIZE = 1 << SHIFT;
      var MASK = SIZE - 1;
      var NOT_SET = {};
      var CHANGE_LENGTH = { value: false };
      var DID_ALTER = { value: false };
      function MakeRef(ref) {
        ref.value = false;
        return ref;
      }
      function SetRef(ref) {
        ref && (ref.value = true);
      }
      function OwnerID() {
      }
      function arrCopy(arr, offset) {
        offset = offset || 0;
        var len = Math.max(0, arr.length - offset);
        var newArr = new Array(len);
        for (var ii2 = 0; ii2 < len; ii2++) {
          newArr[ii2] = arr[ii2 + offset];
        }
        return newArr;
      }
      function ensureSize(iter) {
        if (iter.size === void 0) {
          iter.size = iter.__iterate(returnTrue);
        }
        return iter.size;
      }
      function wrapIndex(iter, index2) {
        if (typeof index2 !== "number") {
          var uint32Index = index2 >>> 0;
          if ("" + uint32Index !== index2 || uint32Index === 4294967295) {
            return NaN;
          }
          index2 = uint32Index;
        }
        return index2 < 0 ? ensureSize(iter) + index2 : index2;
      }
      function returnTrue() {
        return true;
      }
      function wholeSlice(begin, end, size) {
        return (begin === 0 || size !== void 0 && begin <= -size) && (end === void 0 || size !== void 0 && end >= size);
      }
      function resolveBegin(begin, size) {
        return resolveIndex(begin, size, 0);
      }
      function resolveEnd(end, size) {
        return resolveIndex(end, size, size);
      }
      function resolveIndex(index2, size, defaultIndex) {
        return index2 === void 0 ? defaultIndex : index2 < 0 ? Math.max(0, size + index2) : size === void 0 ? index2 : Math.min(size, index2);
      }
      var ITERATE_KEYS = 0;
      var ITERATE_VALUES = 1;
      var ITERATE_ENTRIES = 2;
      var REAL_ITERATOR_SYMBOL = typeof Symbol === "function" && Symbol.iterator;
      var FAUX_ITERATOR_SYMBOL = "@@iterator";
      var ITERATOR_SYMBOL = REAL_ITERATOR_SYMBOL || FAUX_ITERATOR_SYMBOL;
      function Iterator(next) {
        this.next = next;
      }
      Iterator.prototype.toString = function() {
        return "[Iterator]";
      };
      Iterator.KEYS = ITERATE_KEYS;
      Iterator.VALUES = ITERATE_VALUES;
      Iterator.ENTRIES = ITERATE_ENTRIES;
      Iterator.prototype.inspect = Iterator.prototype.toSource = function() {
        return this.toString();
      };
      Iterator.prototype[ITERATOR_SYMBOL] = function() {
        return this;
      };
      function iteratorValue(type, k, v2, iteratorResult) {
        var value = type === 0 ? k : type === 1 ? v2 : [k, v2];
        iteratorResult ? iteratorResult.value = value : iteratorResult = {
          value,
          done: false
        };
        return iteratorResult;
      }
      function iteratorDone() {
        return { value: void 0, done: true };
      }
      function hasIterator(maybeIterable) {
        return !!getIteratorFn(maybeIterable);
      }
      function isIterator(maybeIterator) {
        return maybeIterator && typeof maybeIterator.next === "function";
      }
      function getIterator(iterable) {
        var iteratorFn = getIteratorFn(iterable);
        return iteratorFn && iteratorFn.call(iterable);
      }
      function getIteratorFn(iterable) {
        var iteratorFn = iterable && (REAL_ITERATOR_SYMBOL && iterable[REAL_ITERATOR_SYMBOL] || iterable[FAUX_ITERATOR_SYMBOL]);
        if (typeof iteratorFn === "function") {
          return iteratorFn;
        }
      }
      function isArrayLike(value) {
        return value && typeof value.length === "number";
      }
      createClass2(Seq, Iterable);
      function Seq(value) {
        return value === null || value === void 0 ? emptySequence() : isIterable(value) ? value.toSeq() : seqFromValue(value);
      }
      Seq.of = function() {
        return Seq(arguments);
      };
      Seq.prototype.toSeq = function() {
        return this;
      };
      Seq.prototype.toString = function() {
        return this.__toString("Seq {", "}");
      };
      Seq.prototype.cacheResult = function() {
        if (!this._cache && this.__iterateUncached) {
          this._cache = this.entrySeq().toArray();
          this.size = this._cache.length;
        }
        return this;
      };
      Seq.prototype.__iterate = function(fn, reverse) {
        return seqIterate(this, fn, reverse, true);
      };
      Seq.prototype.__iterator = function(type, reverse) {
        return seqIterator(this, type, reverse, true);
      };
      createClass2(KeyedSeq, Seq);
      function KeyedSeq(value) {
        return value === null || value === void 0 ? emptySequence().toKeyedSeq() : isIterable(value) ? isKeyed(value) ? value.toSeq() : value.fromEntrySeq() : keyedSeqFromValue(value);
      }
      KeyedSeq.prototype.toKeyedSeq = function() {
        return this;
      };
      createClass2(IndexedSeq, Seq);
      function IndexedSeq(value) {
        return value === null || value === void 0 ? emptySequence() : !isIterable(value) ? indexedSeqFromValue(value) : isKeyed(value) ? value.entrySeq() : value.toIndexedSeq();
      }
      IndexedSeq.of = function() {
        return IndexedSeq(arguments);
      };
      IndexedSeq.prototype.toIndexedSeq = function() {
        return this;
      };
      IndexedSeq.prototype.toString = function() {
        return this.__toString("Seq [", "]");
      };
      IndexedSeq.prototype.__iterate = function(fn, reverse) {
        return seqIterate(this, fn, reverse, false);
      };
      IndexedSeq.prototype.__iterator = function(type, reverse) {
        return seqIterator(this, type, reverse, false);
      };
      createClass2(SetSeq, Seq);
      function SetSeq(value) {
        return (value === null || value === void 0 ? emptySequence() : !isIterable(value) ? indexedSeqFromValue(value) : isKeyed(value) ? value.entrySeq() : value).toSetSeq();
      }
      SetSeq.of = function() {
        return SetSeq(arguments);
      };
      SetSeq.prototype.toSetSeq = function() {
        return this;
      };
      Seq.isSeq = isSeq;
      Seq.Keyed = KeyedSeq;
      Seq.Set = SetSeq;
      Seq.Indexed = IndexedSeq;
      var IS_SEQ_SENTINEL = "@@__IMMUTABLE_SEQ__@@";
      Seq.prototype[IS_SEQ_SENTINEL] = true;
      createClass2(ArraySeq, IndexedSeq);
      function ArraySeq(array) {
        this._array = array;
        this.size = array.length;
      }
      ArraySeq.prototype.get = function(index2, notSetValue) {
        return this.has(index2) ? this._array[wrapIndex(this, index2)] : notSetValue;
      };
      ArraySeq.prototype.__iterate = function(fn, reverse) {
        var array = this._array;
        var maxIndex = array.length - 1;
        for (var ii2 = 0; ii2 <= maxIndex; ii2++) {
          if (fn(array[reverse ? maxIndex - ii2 : ii2], ii2, this) === false) {
            return ii2 + 1;
          }
        }
        return ii2;
      };
      ArraySeq.prototype.__iterator = function(type, reverse) {
        var array = this._array;
        var maxIndex = array.length - 1;
        var ii2 = 0;
        return new Iterator(
          function() {
            return ii2 > maxIndex ? iteratorDone() : iteratorValue(type, ii2, array[reverse ? maxIndex - ii2++ : ii2++]);
          }
        );
      };
      createClass2(ObjectSeq, KeyedSeq);
      function ObjectSeq(object) {
        var keys = Object.keys(object);
        this._object = object;
        this._keys = keys;
        this.size = keys.length;
      }
      ObjectSeq.prototype.get = function(key, notSetValue) {
        if (notSetValue !== void 0 && !this.has(key)) {
          return notSetValue;
        }
        return this._object[key];
      };
      ObjectSeq.prototype.has = function(key) {
        return this._object.hasOwnProperty(key);
      };
      ObjectSeq.prototype.__iterate = function(fn, reverse) {
        var object = this._object;
        var keys = this._keys;
        var maxIndex = keys.length - 1;
        for (var ii2 = 0; ii2 <= maxIndex; ii2++) {
          var key = keys[reverse ? maxIndex - ii2 : ii2];
          if (fn(object[key], key, this) === false) {
            return ii2 + 1;
          }
        }
        return ii2;
      };
      ObjectSeq.prototype.__iterator = function(type, reverse) {
        var object = this._object;
        var keys = this._keys;
        var maxIndex = keys.length - 1;
        var ii2 = 0;
        return new Iterator(function() {
          var key = keys[reverse ? maxIndex - ii2 : ii2];
          return ii2++ > maxIndex ? iteratorDone() : iteratorValue(type, key, object[key]);
        });
      };
      ObjectSeq.prototype[IS_ORDERED_SENTINEL] = true;
      createClass2(IterableSeq, IndexedSeq);
      function IterableSeq(iterable) {
        this._iterable = iterable;
        this.size = iterable.length || iterable.size;
      }
      IterableSeq.prototype.__iterateUncached = function(fn, reverse) {
        if (reverse) {
          return this.cacheResult().__iterate(fn, reverse);
        }
        var iterable = this._iterable;
        var iterator = getIterator(iterable);
        var iterations = 0;
        if (isIterator(iterator)) {
          var step;
          while (!(step = iterator.next()).done) {
            if (fn(step.value, iterations++, this) === false) {
              break;
            }
          }
        }
        return iterations;
      };
      IterableSeq.prototype.__iteratorUncached = function(type, reverse) {
        if (reverse) {
          return this.cacheResult().__iterator(type, reverse);
        }
        var iterable = this._iterable;
        var iterator = getIterator(iterable);
        if (!isIterator(iterator)) {
          return new Iterator(iteratorDone);
        }
        var iterations = 0;
        return new Iterator(function() {
          var step = iterator.next();
          return step.done ? step : iteratorValue(type, iterations++, step.value);
        });
      };
      createClass2(IteratorSeq, IndexedSeq);
      function IteratorSeq(iterator) {
        this._iterator = iterator;
        this._iteratorCache = [];
      }
      IteratorSeq.prototype.__iterateUncached = function(fn, reverse) {
        if (reverse) {
          return this.cacheResult().__iterate(fn, reverse);
        }
        var iterator = this._iterator;
        var cache = this._iteratorCache;
        var iterations = 0;
        while (iterations < cache.length) {
          if (fn(cache[iterations], iterations++, this) === false) {
            return iterations;
          }
        }
        var step;
        while (!(step = iterator.next()).done) {
          var val = step.value;
          cache[iterations] = val;
          if (fn(val, iterations++, this) === false) {
            break;
          }
        }
        return iterations;
      };
      IteratorSeq.prototype.__iteratorUncached = function(type, reverse) {
        if (reverse) {
          return this.cacheResult().__iterator(type, reverse);
        }
        var iterator = this._iterator;
        var cache = this._iteratorCache;
        var iterations = 0;
        return new Iterator(function() {
          if (iterations >= cache.length) {
            var step = iterator.next();
            if (step.done) {
              return step;
            }
            cache[iterations] = step.value;
          }
          return iteratorValue(type, iterations, cache[iterations++]);
        });
      };
      function isSeq(maybeSeq) {
        return !!(maybeSeq && maybeSeq[IS_SEQ_SENTINEL]);
      }
      var EMPTY_SEQ;
      function emptySequence() {
        return EMPTY_SEQ || (EMPTY_SEQ = new ArraySeq([]));
      }
      function keyedSeqFromValue(value) {
        var seq = Array.isArray(value) ? new ArraySeq(value).fromEntrySeq() : isIterator(value) ? new IteratorSeq(value).fromEntrySeq() : hasIterator(value) ? new IterableSeq(value).fromEntrySeq() : typeof value === "object" ? new ObjectSeq(value) : void 0;
        if (!seq) {
          throw new TypeError(
            "Expected Array or iterable object of [k, v] entries, or keyed object: " + value
          );
        }
        return seq;
      }
      function indexedSeqFromValue(value) {
        var seq = maybeIndexedSeqFromValue(value);
        if (!seq) {
          throw new TypeError(
            "Expected Array or iterable object of values: " + value
          );
        }
        return seq;
      }
      function seqFromValue(value) {
        var seq = maybeIndexedSeqFromValue(value) || typeof value === "object" && new ObjectSeq(value);
        if (!seq) {
          throw new TypeError(
            "Expected Array or iterable object of values, or keyed object: " + value
          );
        }
        return seq;
      }
      function maybeIndexedSeqFromValue(value) {
        return isArrayLike(value) ? new ArraySeq(value) : isIterator(value) ? new IteratorSeq(value) : hasIterator(value) ? new IterableSeq(value) : void 0;
      }
      function seqIterate(seq, fn, reverse, useKeys) {
        var cache = seq._cache;
        if (cache) {
          var maxIndex = cache.length - 1;
          for (var ii2 = 0; ii2 <= maxIndex; ii2++) {
            var entry = cache[reverse ? maxIndex - ii2 : ii2];
            if (fn(entry[1], useKeys ? entry[0] : ii2, seq) === false) {
              return ii2 + 1;
            }
          }
          return ii2;
        }
        return seq.__iterateUncached(fn, reverse);
      }
      function seqIterator(seq, type, reverse, useKeys) {
        var cache = seq._cache;
        if (cache) {
          var maxIndex = cache.length - 1;
          var ii2 = 0;
          return new Iterator(function() {
            var entry = cache[reverse ? maxIndex - ii2 : ii2];
            return ii2++ > maxIndex ? iteratorDone() : iteratorValue(type, useKeys ? entry[0] : ii2 - 1, entry[1]);
          });
        }
        return seq.__iteratorUncached(type, reverse);
      }
      function fromJS(json, converter) {
        return converter ? fromJSWith(converter, json, "", { "": json }) : fromJSDefault(json);
      }
      function fromJSWith(converter, json, key, parentJSON) {
        if (Array.isArray(json)) {
          return converter.call(parentJSON, key, IndexedSeq(json).map(function(v2, k) {
            return fromJSWith(converter, v2, k, json);
          }));
        }
        if (isPlainObj(json)) {
          return converter.call(parentJSON, key, KeyedSeq(json).map(function(v2, k) {
            return fromJSWith(converter, v2, k, json);
          }));
        }
        return json;
      }
      function fromJSDefault(json) {
        if (Array.isArray(json)) {
          return IndexedSeq(json).map(fromJSDefault).toList();
        }
        if (isPlainObj(json)) {
          return KeyedSeq(json).map(fromJSDefault).toMap();
        }
        return json;
      }
      function isPlainObj(value) {
        return value && (value.constructor === Object || value.constructor === void 0);
      }
      function is(valueA, valueB) {
        if (valueA === valueB || valueA !== valueA && valueB !== valueB) {
          return true;
        }
        if (!valueA || !valueB) {
          return false;
        }
        if (typeof valueA.valueOf === "function" && typeof valueB.valueOf === "function") {
          valueA = valueA.valueOf();
          valueB = valueB.valueOf();
          if (valueA === valueB || valueA !== valueA && valueB !== valueB) {
            return true;
          }
          if (!valueA || !valueB) {
            return false;
          }
        }
        if (typeof valueA.equals === "function" && typeof valueB.equals === "function" && valueA.equals(valueB)) {
          return true;
        }
        return false;
      }
      function deepEqual(a, b) {
        if (a === b) {
          return true;
        }
        if (!isIterable(b) || a.size !== void 0 && b.size !== void 0 && a.size !== b.size || a.__hash !== void 0 && b.__hash !== void 0 && a.__hash !== b.__hash || isKeyed(a) !== isKeyed(b) || isIndexed(a) !== isIndexed(b) || isOrdered(a) !== isOrdered(b)) {
          return false;
        }
        if (a.size === 0 && b.size === 0) {
          return true;
        }
        var notAssociative = !isAssociative(a);
        if (isOrdered(a)) {
          var entries = a.entries();
          return b.every(function(v2, k) {
            var entry = entries.next().value;
            return entry && is(entry[1], v2) && (notAssociative || is(entry[0], k));
          }) && entries.next().done;
        }
        var flipped = false;
        if (a.size === void 0) {
          if (b.size === void 0) {
            if (typeof a.cacheResult === "function") {
              a.cacheResult();
            }
          } else {
            flipped = true;
            var _ = a;
            a = b;
            b = _;
          }
        }
        var allEqual = true;
        var bSize = b.__iterate(function(v2, k) {
          if (notAssociative ? !a.has(v2) : flipped ? !is(v2, a.get(k, NOT_SET)) : !is(a.get(k, NOT_SET), v2)) {
            allEqual = false;
            return false;
          }
        });
        return allEqual && a.size === bSize;
      }
      createClass2(Repeat, IndexedSeq);
      function Repeat(value, times) {
        if (!(this instanceof Repeat)) {
          return new Repeat(value, times);
        }
        this._value = value;
        this.size = times === void 0 ? Infinity : Math.max(0, times);
        if (this.size === 0) {
          if (EMPTY_REPEAT) {
            return EMPTY_REPEAT;
          }
          EMPTY_REPEAT = this;
        }
      }
      Repeat.prototype.toString = function() {
        if (this.size === 0) {
          return "Repeat []";
        }
        return "Repeat [ " + this._value + " " + this.size + " times ]";
      };
      Repeat.prototype.get = function(index2, notSetValue) {
        return this.has(index2) ? this._value : notSetValue;
      };
      Repeat.prototype.includes = function(searchValue) {
        return is(this._value, searchValue);
      };
      Repeat.prototype.slice = function(begin, end) {
        var size = this.size;
        return wholeSlice(begin, end, size) ? this : new Repeat(this._value, resolveEnd(end, size) - resolveBegin(begin, size));
      };
      Repeat.prototype.reverse = function() {
        return this;
      };
      Repeat.prototype.indexOf = function(searchValue) {
        if (is(this._value, searchValue)) {
          return 0;
        }
        return -1;
      };
      Repeat.prototype.lastIndexOf = function(searchValue) {
        if (is(this._value, searchValue)) {
          return this.size;
        }
        return -1;
      };
      Repeat.prototype.__iterate = function(fn, reverse) {
        for (var ii2 = 0; ii2 < this.size; ii2++) {
          if (fn(this._value, ii2, this) === false) {
            return ii2 + 1;
          }
        }
        return ii2;
      };
      Repeat.prototype.__iterator = function(type, reverse) {
        var this$0 = this;
        var ii2 = 0;
        return new Iterator(
          function() {
            return ii2 < this$0.size ? iteratorValue(type, ii2++, this$0._value) : iteratorDone();
          }
        );
      };
      Repeat.prototype.equals = function(other) {
        return other instanceof Repeat ? is(this._value, other._value) : deepEqual(other);
      };
      var EMPTY_REPEAT;
      function invariant(condition, error) {
        if (!condition)
          throw new Error(error);
      }
      createClass2(Range, IndexedSeq);
      function Range(start, end, step) {
        if (!(this instanceof Range)) {
          return new Range(start, end, step);
        }
        invariant(step !== 0, "Cannot step a Range by 0");
        start = start || 0;
        if (end === void 0) {
          end = Infinity;
        }
        step = step === void 0 ? 1 : Math.abs(step);
        if (end < start) {
          step = -step;
        }
        this._start = start;
        this._end = end;
        this._step = step;
        this.size = Math.max(0, Math.ceil((end - start) / step - 1) + 1);
        if (this.size === 0) {
          if (EMPTY_RANGE) {
            return EMPTY_RANGE;
          }
          EMPTY_RANGE = this;
        }
      }
      Range.prototype.toString = function() {
        if (this.size === 0) {
          return "Range []";
        }
        return "Range [ " + this._start + "..." + this._end + (this._step !== 1 ? " by " + this._step : "") + " ]";
      };
      Range.prototype.get = function(index2, notSetValue) {
        return this.has(index2) ? this._start + wrapIndex(this, index2) * this._step : notSetValue;
      };
      Range.prototype.includes = function(searchValue) {
        var possibleIndex = (searchValue - this._start) / this._step;
        return possibleIndex >= 0 && possibleIndex < this.size && possibleIndex === Math.floor(possibleIndex);
      };
      Range.prototype.slice = function(begin, end) {
        if (wholeSlice(begin, end, this.size)) {
          return this;
        }
        begin = resolveBegin(begin, this.size);
        end = resolveEnd(end, this.size);
        if (end <= begin) {
          return new Range(0, 0);
        }
        return new Range(this.get(begin, this._end), this.get(end, this._end), this._step);
      };
      Range.prototype.indexOf = function(searchValue) {
        var offsetValue = searchValue - this._start;
        if (offsetValue % this._step === 0) {
          var index2 = offsetValue / this._step;
          if (index2 >= 0 && index2 < this.size) {
            return index2;
          }
        }
        return -1;
      };
      Range.prototype.lastIndexOf = function(searchValue) {
        return this.indexOf(searchValue);
      };
      Range.prototype.__iterate = function(fn, reverse) {
        var maxIndex = this.size - 1;
        var step = this._step;
        var value = reverse ? this._start + maxIndex * step : this._start;
        for (var ii2 = 0; ii2 <= maxIndex; ii2++) {
          if (fn(value, ii2, this) === false) {
            return ii2 + 1;
          }
          value += reverse ? -step : step;
        }
        return ii2;
      };
      Range.prototype.__iterator = function(type, reverse) {
        var maxIndex = this.size - 1;
        var step = this._step;
        var value = reverse ? this._start + maxIndex * step : this._start;
        var ii2 = 0;
        return new Iterator(function() {
          var v2 = value;
          value += reverse ? -step : step;
          return ii2 > maxIndex ? iteratorDone() : iteratorValue(type, ii2++, v2);
        });
      };
      Range.prototype.equals = function(other) {
        return other instanceof Range ? this._start === other._start && this._end === other._end && this._step === other._step : deepEqual(this, other);
      };
      var EMPTY_RANGE;
      createClass2(Collection, Iterable);
      function Collection() {
        throw TypeError("Abstract");
      }
      createClass2(KeyedCollection, Collection);
      function KeyedCollection() {
      }
      createClass2(IndexedCollection, Collection);
      function IndexedCollection() {
      }
      createClass2(SetCollection, Collection);
      function SetCollection() {
      }
      Collection.Keyed = KeyedCollection;
      Collection.Indexed = IndexedCollection;
      Collection.Set = SetCollection;
      var imul = typeof Math.imul === "function" && Math.imul(4294967295, 2) === -2 ? Math.imul : function imul2(a, b) {
        a = a | 0;
        b = b | 0;
        var c = a & 65535;
        var d = b & 65535;
        return c * d + ((a >>> 16) * d + c * (b >>> 16) << 16 >>> 0) | 0;
      };
      function smi(i32) {
        return i32 >>> 1 & 1073741824 | i32 & 3221225471;
      }
      function hash(o) {
        if (o === false || o === null || o === void 0) {
          return 0;
        }
        if (typeof o.valueOf === "function") {
          o = o.valueOf();
          if (o === false || o === null || o === void 0) {
            return 0;
          }
        }
        if (o === true) {
          return 1;
        }
        var type = typeof o;
        if (type === "number") {
          if (o !== o || o === Infinity) {
            return 0;
          }
          var h2 = o | 0;
          if (h2 !== o) {
            h2 ^= o * 4294967295;
          }
          while (o > 4294967295) {
            o /= 4294967295;
            h2 ^= o;
          }
          return smi(h2);
        }
        if (type === "string") {
          return o.length > STRING_HASH_CACHE_MIN_STRLEN ? cachedHashString(o) : hashString(o);
        }
        if (typeof o.hashCode === "function") {
          return o.hashCode();
        }
        if (type === "object") {
          return hashJSObj(o);
        }
        if (typeof o.toString === "function") {
          return hashString(o.toString());
        }
        throw new Error("Value type " + type + " cannot be hashed.");
      }
      function cachedHashString(string) {
        var hash2 = stringHashCache[string];
        if (hash2 === void 0) {
          hash2 = hashString(string);
          if (STRING_HASH_CACHE_SIZE === STRING_HASH_CACHE_MAX_SIZE) {
            STRING_HASH_CACHE_SIZE = 0;
            stringHashCache = {};
          }
          STRING_HASH_CACHE_SIZE++;
          stringHashCache[string] = hash2;
        }
        return hash2;
      }
      function hashString(string) {
        var hash2 = 0;
        for (var ii2 = 0; ii2 < string.length; ii2++) {
          hash2 = 31 * hash2 + string.charCodeAt(ii2) | 0;
        }
        return smi(hash2);
      }
      function hashJSObj(obj) {
        var hash2;
        if (usingWeakMap) {
          hash2 = weakMap.get(obj);
          if (hash2 !== void 0) {
            return hash2;
          }
        }
        hash2 = obj[UID_HASH_KEY];
        if (hash2 !== void 0) {
          return hash2;
        }
        if (!canDefineProperty) {
          hash2 = obj.propertyIsEnumerable && obj.propertyIsEnumerable[UID_HASH_KEY];
          if (hash2 !== void 0) {
            return hash2;
          }
          hash2 = getIENodeHash(obj);
          if (hash2 !== void 0) {
            return hash2;
          }
        }
        hash2 = ++objHashUID;
        if (objHashUID & 1073741824) {
          objHashUID = 0;
        }
        if (usingWeakMap) {
          weakMap.set(obj, hash2);
        } else if (isExtensible !== void 0 && isExtensible(obj) === false) {
          throw new Error("Non-extensible objects are not allowed as keys.");
        } else if (canDefineProperty) {
          Object.defineProperty(obj, UID_HASH_KEY, {
            "enumerable": false,
            "configurable": false,
            "writable": false,
            "value": hash2
          });
        } else if (obj.propertyIsEnumerable !== void 0 && obj.propertyIsEnumerable === obj.constructor.prototype.propertyIsEnumerable) {
          obj.propertyIsEnumerable = function() {
            return this.constructor.prototype.propertyIsEnumerable.apply(this, arguments);
          };
          obj.propertyIsEnumerable[UID_HASH_KEY] = hash2;
        } else if (obj.nodeType !== void 0) {
          obj[UID_HASH_KEY] = hash2;
        } else {
          throw new Error("Unable to set a non-enumerable property on object.");
        }
        return hash2;
      }
      var isExtensible = Object.isExtensible;
      var canDefineProperty = function() {
        try {
          Object.defineProperty({}, "@", {});
          return true;
        } catch (e) {
          return false;
        }
      }();
      function getIENodeHash(node) {
        if (node && node.nodeType > 0) {
          switch (node.nodeType) {
            case 1:
              return node.uniqueID;
            case 9:
              return node.documentElement && node.documentElement.uniqueID;
          }
        }
      }
      var usingWeakMap = typeof WeakMap === "function";
      var weakMap;
      if (usingWeakMap) {
        weakMap = /* @__PURE__ */ new WeakMap();
      }
      var objHashUID = 0;
      var UID_HASH_KEY = "__immutablehash__";
      if (typeof Symbol === "function") {
        UID_HASH_KEY = Symbol(UID_HASH_KEY);
      }
      var STRING_HASH_CACHE_MIN_STRLEN = 16;
      var STRING_HASH_CACHE_MAX_SIZE = 255;
      var STRING_HASH_CACHE_SIZE = 0;
      var stringHashCache = {};
      function assertNotInfinite(size) {
        invariant(
          size !== Infinity,
          "Cannot perform this action with an infinite size."
        );
      }
      createClass2(Map2, KeyedCollection);
      function Map2(value) {
        return value === null || value === void 0 ? emptyMap() : isMap(value) && !isOrdered(value) ? value : emptyMap().withMutations(function(map) {
          var iter = KeyedIterable(value);
          assertNotInfinite(iter.size);
          iter.forEach(function(v2, k) {
            return map.set(k, v2);
          });
        });
      }
      Map2.of = function() {
        var keyValues = SLICE$0.call(arguments, 0);
        return emptyMap().withMutations(function(map) {
          for (var i2 = 0; i2 < keyValues.length; i2 += 2) {
            if (i2 + 1 >= keyValues.length) {
              throw new Error("Missing value for key: " + keyValues[i2]);
            }
            map.set(keyValues[i2], keyValues[i2 + 1]);
          }
        });
      };
      Map2.prototype.toString = function() {
        return this.__toString("Map {", "}");
      };
      Map2.prototype.get = function(k, notSetValue) {
        return this._root ? this._root.get(0, void 0, k, notSetValue) : notSetValue;
      };
      Map2.prototype.set = function(k, v2) {
        return updateMap(this, k, v2);
      };
      Map2.prototype.setIn = function(keyPath, v2) {
        return this.updateIn(keyPath, NOT_SET, function() {
          return v2;
        });
      };
      Map2.prototype.remove = function(k) {
        return updateMap(this, k, NOT_SET);
      };
      Map2.prototype.deleteIn = function(keyPath) {
        return this.updateIn(keyPath, function() {
          return NOT_SET;
        });
      };
      Map2.prototype.update = function(k, notSetValue, updater) {
        return arguments.length === 1 ? k(this) : this.updateIn([k], notSetValue, updater);
      };
      Map2.prototype.updateIn = function(keyPath, notSetValue, updater) {
        if (!updater) {
          updater = notSetValue;
          notSetValue = void 0;
        }
        var updatedValue = updateInDeepMap(
          this,
          forceIterator(keyPath),
          notSetValue,
          updater
        );
        return updatedValue === NOT_SET ? void 0 : updatedValue;
      };
      Map2.prototype.clear = function() {
        if (this.size === 0) {
          return this;
        }
        if (this.__ownerID) {
          this.size = 0;
          this._root = null;
          this.__hash = void 0;
          this.__altered = true;
          return this;
        }
        return emptyMap();
      };
      Map2.prototype.merge = function() {
        return mergeIntoMapWith(this, void 0, arguments);
      };
      Map2.prototype.mergeWith = function(merger) {
        var iters = SLICE$0.call(arguments, 1);
        return mergeIntoMapWith(this, merger, iters);
      };
      Map2.prototype.mergeIn = function(keyPath) {
        var iters = SLICE$0.call(arguments, 1);
        return this.updateIn(
          keyPath,
          emptyMap(),
          function(m2) {
            return typeof m2.merge === "function" ? m2.merge.apply(m2, iters) : iters[iters.length - 1];
          }
        );
      };
      Map2.prototype.mergeDeep = function() {
        return mergeIntoMapWith(this, deepMerger, arguments);
      };
      Map2.prototype.mergeDeepWith = function(merger) {
        var iters = SLICE$0.call(arguments, 1);
        return mergeIntoMapWith(this, deepMergerWith(merger), iters);
      };
      Map2.prototype.mergeDeepIn = function(keyPath) {
        var iters = SLICE$0.call(arguments, 1);
        return this.updateIn(
          keyPath,
          emptyMap(),
          function(m2) {
            return typeof m2.mergeDeep === "function" ? m2.mergeDeep.apply(m2, iters) : iters[iters.length - 1];
          }
        );
      };
      Map2.prototype.sort = function(comparator) {
        return OrderedMap(sortFactory(this, comparator));
      };
      Map2.prototype.sortBy = function(mapper, comparator) {
        return OrderedMap(sortFactory(this, comparator, mapper));
      };
      Map2.prototype.withMutations = function(fn) {
        var mutable = this.asMutable();
        fn(mutable);
        return mutable.wasAltered() ? mutable.__ensureOwner(this.__ownerID) : this;
      };
      Map2.prototype.asMutable = function() {
        return this.__ownerID ? this : this.__ensureOwner(new OwnerID());
      };
      Map2.prototype.asImmutable = function() {
        return this.__ensureOwner();
      };
      Map2.prototype.wasAltered = function() {
        return this.__altered;
      };
      Map2.prototype.__iterator = function(type, reverse) {
        return new MapIterator(this, type, reverse);
      };
      Map2.prototype.__iterate = function(fn, reverse) {
        var this$0 = this;
        var iterations = 0;
        this._root && this._root.iterate(function(entry) {
          iterations++;
          return fn(entry[1], entry[0], this$0);
        }, reverse);
        return iterations;
      };
      Map2.prototype.__ensureOwner = function(ownerID) {
        if (ownerID === this.__ownerID) {
          return this;
        }
        if (!ownerID) {
          this.__ownerID = ownerID;
          this.__altered = false;
          return this;
        }
        return makeMap(this.size, this._root, ownerID, this.__hash);
      };
      function isMap(maybeMap) {
        return !!(maybeMap && maybeMap[IS_MAP_SENTINEL]);
      }
      Map2.isMap = isMap;
      var IS_MAP_SENTINEL = "@@__IMMUTABLE_MAP__@@";
      var MapPrototype = Map2.prototype;
      MapPrototype[IS_MAP_SENTINEL] = true;
      MapPrototype[DELETE] = MapPrototype.remove;
      MapPrototype.removeIn = MapPrototype.deleteIn;
      function ArrayMapNode(ownerID, entries) {
        this.ownerID = ownerID;
        this.entries = entries;
      }
      ArrayMapNode.prototype.get = function(shift, keyHash, key, notSetValue) {
        var entries = this.entries;
        for (var ii2 = 0, len = entries.length; ii2 < len; ii2++) {
          if (is(key, entries[ii2][0])) {
            return entries[ii2][1];
          }
        }
        return notSetValue;
      };
      ArrayMapNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {
        var removed = value === NOT_SET;
        var entries = this.entries;
        var idx = 0;
        for (var len = entries.length; idx < len; idx++) {
          if (is(key, entries[idx][0])) {
            break;
          }
        }
        var exists = idx < len;
        if (exists ? entries[idx][1] === value : removed) {
          return this;
        }
        SetRef(didAlter);
        (removed || !exists) && SetRef(didChangeSize);
        if (removed && entries.length === 1) {
          return;
        }
        if (!exists && !removed && entries.length >= MAX_ARRAY_MAP_SIZE) {
          return createNodes(ownerID, entries, key, value);
        }
        var isEditable = ownerID && ownerID === this.ownerID;
        var newEntries = isEditable ? entries : arrCopy(entries);
        if (exists) {
          if (removed) {
            idx === len - 1 ? newEntries.pop() : newEntries[idx] = newEntries.pop();
          } else {
            newEntries[idx] = [key, value];
          }
        } else {
          newEntries.push([key, value]);
        }
        if (isEditable) {
          this.entries = newEntries;
          return this;
        }
        return new ArrayMapNode(ownerID, newEntries);
      };
      function BitmapIndexedNode(ownerID, bitmap, nodes) {
        this.ownerID = ownerID;
        this.bitmap = bitmap;
        this.nodes = nodes;
      }
      BitmapIndexedNode.prototype.get = function(shift, keyHash, key, notSetValue) {
        if (keyHash === void 0) {
          keyHash = hash(key);
        }
        var bit = 1 << ((shift === 0 ? keyHash : keyHash >>> shift) & MASK);
        var bitmap = this.bitmap;
        return (bitmap & bit) === 0 ? notSetValue : this.nodes[popCount(bitmap & bit - 1)].get(shift + SHIFT, keyHash, key, notSetValue);
      };
      BitmapIndexedNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {
        if (keyHash === void 0) {
          keyHash = hash(key);
        }
        var keyHashFrag = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;
        var bit = 1 << keyHashFrag;
        var bitmap = this.bitmap;
        var exists = (bitmap & bit) !== 0;
        if (!exists && value === NOT_SET) {
          return this;
        }
        var idx = popCount(bitmap & bit - 1);
        var nodes = this.nodes;
        var node = exists ? nodes[idx] : void 0;
        var newNode = updateNode(node, ownerID, shift + SHIFT, keyHash, key, value, didChangeSize, didAlter);
        if (newNode === node) {
          return this;
        }
        if (!exists && newNode && nodes.length >= MAX_BITMAP_INDEXED_SIZE) {
          return expandNodes(ownerID, nodes, bitmap, keyHashFrag, newNode);
        }
        if (exists && !newNode && nodes.length === 2 && isLeafNode(nodes[idx ^ 1])) {
          return nodes[idx ^ 1];
        }
        if (exists && newNode && nodes.length === 1 && isLeafNode(newNode)) {
          return newNode;
        }
        var isEditable = ownerID && ownerID === this.ownerID;
        var newBitmap = exists ? newNode ? bitmap : bitmap ^ bit : bitmap | bit;
        var newNodes = exists ? newNode ? setIn(nodes, idx, newNode, isEditable) : spliceOut(nodes, idx, isEditable) : spliceIn(nodes, idx, newNode, isEditable);
        if (isEditable) {
          this.bitmap = newBitmap;
          this.nodes = newNodes;
          return this;
        }
        return new BitmapIndexedNode(ownerID, newBitmap, newNodes);
      };
      function HashArrayMapNode(ownerID, count, nodes) {
        this.ownerID = ownerID;
        this.count = count;
        this.nodes = nodes;
      }
      HashArrayMapNode.prototype.get = function(shift, keyHash, key, notSetValue) {
        if (keyHash === void 0) {
          keyHash = hash(key);
        }
        var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;
        var node = this.nodes[idx];
        return node ? node.get(shift + SHIFT, keyHash, key, notSetValue) : notSetValue;
      };
      HashArrayMapNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {
        if (keyHash === void 0) {
          keyHash = hash(key);
        }
        var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;
        var removed = value === NOT_SET;
        var nodes = this.nodes;
        var node = nodes[idx];
        if (removed && !node) {
          return this;
        }
        var newNode = updateNode(node, ownerID, shift + SHIFT, keyHash, key, value, didChangeSize, didAlter);
        if (newNode === node) {
          return this;
        }
        var newCount = this.count;
        if (!node) {
          newCount++;
        } else if (!newNode) {
          newCount--;
          if (newCount < MIN_HASH_ARRAY_MAP_SIZE) {
            return packNodes(ownerID, nodes, newCount, idx);
          }
        }
        var isEditable = ownerID && ownerID === this.ownerID;
        var newNodes = setIn(nodes, idx, newNode, isEditable);
        if (isEditable) {
          this.count = newCount;
          this.nodes = newNodes;
          return this;
        }
        return new HashArrayMapNode(ownerID, newCount, newNodes);
      };
      function HashCollisionNode(ownerID, keyHash, entries) {
        this.ownerID = ownerID;
        this.keyHash = keyHash;
        this.entries = entries;
      }
      HashCollisionNode.prototype.get = function(shift, keyHash, key, notSetValue) {
        var entries = this.entries;
        for (var ii2 = 0, len = entries.length; ii2 < len; ii2++) {
          if (is(key, entries[ii2][0])) {
            return entries[ii2][1];
          }
        }
        return notSetValue;
      };
      HashCollisionNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {
        if (keyHash === void 0) {
          keyHash = hash(key);
        }
        var removed = value === NOT_SET;
        if (keyHash !== this.keyHash) {
          if (removed) {
            return this;
          }
          SetRef(didAlter);
          SetRef(didChangeSize);
          return mergeIntoNode(this, ownerID, shift, keyHash, [key, value]);
        }
        var entries = this.entries;
        var idx = 0;
        for (var len = entries.length; idx < len; idx++) {
          if (is(key, entries[idx][0])) {
            break;
          }
        }
        var exists = idx < len;
        if (exists ? entries[idx][1] === value : removed) {
          return this;
        }
        SetRef(didAlter);
        (removed || !exists) && SetRef(didChangeSize);
        if (removed && len === 2) {
          return new ValueNode(ownerID, this.keyHash, entries[idx ^ 1]);
        }
        var isEditable = ownerID && ownerID === this.ownerID;
        var newEntries = isEditable ? entries : arrCopy(entries);
        if (exists) {
          if (removed) {
            idx === len - 1 ? newEntries.pop() : newEntries[idx] = newEntries.pop();
          } else {
            newEntries[idx] = [key, value];
          }
        } else {
          newEntries.push([key, value]);
        }
        if (isEditable) {
          this.entries = newEntries;
          return this;
        }
        return new HashCollisionNode(ownerID, this.keyHash, newEntries);
      };
      function ValueNode(ownerID, keyHash, entry) {
        this.ownerID = ownerID;
        this.keyHash = keyHash;
        this.entry = entry;
      }
      ValueNode.prototype.get = function(shift, keyHash, key, notSetValue) {
        return is(key, this.entry[0]) ? this.entry[1] : notSetValue;
      };
      ValueNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {
        var removed = value === NOT_SET;
        var keyMatch = is(key, this.entry[0]);
        if (keyMatch ? value === this.entry[1] : removed) {
          return this;
        }
        SetRef(didAlter);
        if (removed) {
          SetRef(didChangeSize);
          return;
        }
        if (keyMatch) {
          if (ownerID && ownerID === this.ownerID) {
            this.entry[1] = value;
            return this;
          }
          return new ValueNode(ownerID, this.keyHash, [key, value]);
        }
        SetRef(didChangeSize);
        return mergeIntoNode(this, ownerID, shift, hash(key), [key, value]);
      };
      ArrayMapNode.prototype.iterate = HashCollisionNode.prototype.iterate = function(fn, reverse) {
        var entries = this.entries;
        for (var ii2 = 0, maxIndex = entries.length - 1; ii2 <= maxIndex; ii2++) {
          if (fn(entries[reverse ? maxIndex - ii2 : ii2]) === false) {
            return false;
          }
        }
      };
      BitmapIndexedNode.prototype.iterate = HashArrayMapNode.prototype.iterate = function(fn, reverse) {
        var nodes = this.nodes;
        for (var ii2 = 0, maxIndex = nodes.length - 1; ii2 <= maxIndex; ii2++) {
          var node = nodes[reverse ? maxIndex - ii2 : ii2];
          if (node && node.iterate(fn, reverse) === false) {
            return false;
          }
        }
      };
      ValueNode.prototype.iterate = function(fn, reverse) {
        return fn(this.entry);
      };
      createClass2(MapIterator, Iterator);
      function MapIterator(map, type, reverse) {
        this._type = type;
        this._reverse = reverse;
        this._stack = map._root && mapIteratorFrame(map._root);
      }
      MapIterator.prototype.next = function() {
        var type = this._type;
        var stack = this._stack;
        while (stack) {
          var node = stack.node;
          var index2 = stack.index++;
          var maxIndex;
          if (node.entry) {
            if (index2 === 0) {
              return mapIteratorValue(type, node.entry);
            }
          } else if (node.entries) {
            maxIndex = node.entries.length - 1;
            if (index2 <= maxIndex) {
              return mapIteratorValue(type, node.entries[this._reverse ? maxIndex - index2 : index2]);
            }
          } else {
            maxIndex = node.nodes.length - 1;
            if (index2 <= maxIndex) {
              var subNode = node.nodes[this._reverse ? maxIndex - index2 : index2];
              if (subNode) {
                if (subNode.entry) {
                  return mapIteratorValue(type, subNode.entry);
                }
                stack = this._stack = mapIteratorFrame(subNode, stack);
              }
              continue;
            }
          }
          stack = this._stack = this._stack.__prev;
        }
        return iteratorDone();
      };
      function mapIteratorValue(type, entry) {
        return iteratorValue(type, entry[0], entry[1]);
      }
      function mapIteratorFrame(node, prev) {
        return {
          node,
          index: 0,
          __prev: prev
        };
      }
      function makeMap(size, root2, ownerID, hash2) {
        var map = Object.create(MapPrototype);
        map.size = size;
        map._root = root2;
        map.__ownerID = ownerID;
        map.__hash = hash2;
        map.__altered = false;
        return map;
      }
      var EMPTY_MAP;
      function emptyMap() {
        return EMPTY_MAP || (EMPTY_MAP = makeMap(0));
      }
      function updateMap(map, k, v2) {
        var newRoot;
        var newSize;
        if (!map._root) {
          if (v2 === NOT_SET) {
            return map;
          }
          newSize = 1;
          newRoot = new ArrayMapNode(map.__ownerID, [[k, v2]]);
        } else {
          var didChangeSize = MakeRef(CHANGE_LENGTH);
          var didAlter = MakeRef(DID_ALTER);
          newRoot = updateNode(map._root, map.__ownerID, 0, void 0, k, v2, didChangeSize, didAlter);
          if (!didAlter.value) {
            return map;
          }
          newSize = map.size + (didChangeSize.value ? v2 === NOT_SET ? -1 : 1 : 0);
        }
        if (map.__ownerID) {
          map.size = newSize;
          map._root = newRoot;
          map.__hash = void 0;
          map.__altered = true;
          return map;
        }
        return newRoot ? makeMap(newSize, newRoot) : emptyMap();
      }
      function updateNode(node, ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {
        if (!node) {
          if (value === NOT_SET) {
            return node;
          }
          SetRef(didAlter);
          SetRef(didChangeSize);
          return new ValueNode(ownerID, keyHash, [key, value]);
        }
        return node.update(ownerID, shift, keyHash, key, value, didChangeSize, didAlter);
      }
      function isLeafNode(node) {
        return node.constructor === ValueNode || node.constructor === HashCollisionNode;
      }
      function mergeIntoNode(node, ownerID, shift, keyHash, entry) {
        if (node.keyHash === keyHash) {
          return new HashCollisionNode(ownerID, keyHash, [node.entry, entry]);
        }
        var idx1 = (shift === 0 ? node.keyHash : node.keyHash >>> shift) & MASK;
        var idx2 = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;
        var newNode;
        var nodes = idx1 === idx2 ? [mergeIntoNode(node, ownerID, shift + SHIFT, keyHash, entry)] : (newNode = new ValueNode(ownerID, keyHash, entry), idx1 < idx2 ? [node, newNode] : [newNode, node]);
        return new BitmapIndexedNode(ownerID, 1 << idx1 | 1 << idx2, nodes);
      }
      function createNodes(ownerID, entries, key, value) {
        if (!ownerID) {
          ownerID = new OwnerID();
        }
        var node = new ValueNode(ownerID, hash(key), [key, value]);
        for (var ii2 = 0; ii2 < entries.length; ii2++) {
          var entry = entries[ii2];
          node = node.update(ownerID, 0, void 0, entry[0], entry[1]);
        }
        return node;
      }
      function packNodes(ownerID, nodes, count, excluding) {
        var bitmap = 0;
        var packedII = 0;
        var packedNodes = new Array(count);
        for (var ii2 = 0, bit = 1, len = nodes.length; ii2 < len; ii2++, bit <<= 1) {
          var node = nodes[ii2];
          if (node !== void 0 && ii2 !== excluding) {
            bitmap |= bit;
            packedNodes[packedII++] = node;
          }
        }
        return new BitmapIndexedNode(ownerID, bitmap, packedNodes);
      }
      function expandNodes(ownerID, nodes, bitmap, including, node) {
        var count = 0;
        var expandedNodes = new Array(SIZE);
        for (var ii2 = 0; bitmap !== 0; ii2++, bitmap >>>= 1) {
          expandedNodes[ii2] = bitmap & 1 ? nodes[count++] : void 0;
        }
        expandedNodes[including] = node;
        return new HashArrayMapNode(ownerID, count + 1, expandedNodes);
      }
      function mergeIntoMapWith(map, merger, iterables) {
        var iters = [];
        for (var ii2 = 0; ii2 < iterables.length; ii2++) {
          var value = iterables[ii2];
          var iter = KeyedIterable(value);
          if (!isIterable(value)) {
            iter = iter.map(function(v2) {
              return fromJS(v2);
            });
          }
          iters.push(iter);
        }
        return mergeIntoCollectionWith(map, merger, iters);
      }
      function deepMerger(existing, value, key) {
        return existing && existing.mergeDeep && isIterable(value) ? existing.mergeDeep(value) : is(existing, value) ? existing : value;
      }
      function deepMergerWith(merger) {
        return function(existing, value, key) {
          if (existing && existing.mergeDeepWith && isIterable(value)) {
            return existing.mergeDeepWith(merger, value);
          }
          var nextValue = merger(existing, value, key);
          return is(existing, nextValue) ? existing : nextValue;
        };
      }
      function mergeIntoCollectionWith(collection, merger, iters) {
        iters = iters.filter(function(x2) {
          return x2.size !== 0;
        });
        if (iters.length === 0) {
          return collection;
        }
        if (collection.size === 0 && !collection.__ownerID && iters.length === 1) {
          return collection.constructor(iters[0]);
        }
        return collection.withMutations(function(collection2) {
          var mergeIntoMap = merger ? function(value, key) {
            collection2.update(
              key,
              NOT_SET,
              function(existing) {
                return existing === NOT_SET ? value : merger(existing, value, key);
              }
            );
          } : function(value, key) {
            collection2.set(key, value);
          };
          for (var ii2 = 0; ii2 < iters.length; ii2++) {
            iters[ii2].forEach(mergeIntoMap);
          }
        });
      }
      function updateInDeepMap(existing, keyPathIter, notSetValue, updater) {
        var isNotSet = existing === NOT_SET;
        var step = keyPathIter.next();
        if (step.done) {
          var existingValue = isNotSet ? notSetValue : existing;
          var newValue = updater(existingValue);
          return newValue === existingValue ? existing : newValue;
        }
        invariant(
          isNotSet || existing && existing.set,
          "invalid keyPath"
        );
        var key = step.value;
        var nextExisting = isNotSet ? NOT_SET : existing.get(key, NOT_SET);
        var nextUpdated = updateInDeepMap(
          nextExisting,
          keyPathIter,
          notSetValue,
          updater
        );
        return nextUpdated === nextExisting ? existing : nextUpdated === NOT_SET ? existing.remove(key) : (isNotSet ? emptyMap() : existing).set(key, nextUpdated);
      }
      function popCount(x2) {
        x2 = x2 - (x2 >> 1 & 1431655765);
        x2 = (x2 & 858993459) + (x2 >> 2 & 858993459);
        x2 = x2 + (x2 >> 4) & 252645135;
        x2 = x2 + (x2 >> 8);
        x2 = x2 + (x2 >> 16);
        return x2 & 127;
      }
      function setIn(array, idx, val, canEdit) {
        var newArray = canEdit ? array : arrCopy(array);
        newArray[idx] = val;
        return newArray;
      }
      function spliceIn(array, idx, val, canEdit) {
        var newLen = array.length + 1;
        if (canEdit && idx + 1 === newLen) {
          array[idx] = val;
          return array;
        }
        var newArray = new Array(newLen);
        var after = 0;
        for (var ii2 = 0; ii2 < newLen; ii2++) {
          if (ii2 === idx) {
            newArray[ii2] = val;
            after = -1;
          } else {
            newArray[ii2] = array[ii2 + after];
          }
        }
        return newArray;
      }
      function spliceOut(array, idx, canEdit) {
        var newLen = array.length - 1;
        if (canEdit && idx === newLen) {
          array.pop();
          return array;
        }
        var newArray = new Array(newLen);
        var after = 0;
        for (var ii2 = 0; ii2 < newLen; ii2++) {
          if (ii2 === idx) {
            after = 1;
          }
          newArray[ii2] = array[ii2 + after];
        }
        return newArray;
      }
      var MAX_ARRAY_MAP_SIZE = SIZE / 4;
      var MAX_BITMAP_INDEXED_SIZE = SIZE / 2;
      var MIN_HASH_ARRAY_MAP_SIZE = SIZE / 4;
      createClass2(List, IndexedCollection);
      function List(value) {
        var empty = emptyList();
        if (value === null || value === void 0) {
          return empty;
        }
        if (isList(value)) {
          return value;
        }
        var iter = IndexedIterable(value);
        var size = iter.size;
        if (size === 0) {
          return empty;
        }
        assertNotInfinite(size);
        if (size > 0 && size < SIZE) {
          return makeList(0, size, SHIFT, null, new VNode(iter.toArray()));
        }
        return empty.withMutations(function(list) {
          list.setSize(size);
          iter.forEach(function(v2, i2) {
            return list.set(i2, v2);
          });
        });
      }
      List.of = function() {
        return this(arguments);
      };
      List.prototype.toString = function() {
        return this.__toString("List [", "]");
      };
      List.prototype.get = function(index2, notSetValue) {
        index2 = wrapIndex(this, index2);
        if (index2 >= 0 && index2 < this.size) {
          index2 += this._origin;
          var node = listNodeFor(this, index2);
          return node && node.array[index2 & MASK];
        }
        return notSetValue;
      };
      List.prototype.set = function(index2, value) {
        return updateList(this, index2, value);
      };
      List.prototype.remove = function(index2) {
        return !this.has(index2) ? this : index2 === 0 ? this.shift() : index2 === this.size - 1 ? this.pop() : this.splice(index2, 1);
      };
      List.prototype.insert = function(index2, value) {
        return this.splice(index2, 0, value);
      };
      List.prototype.clear = function() {
        if (this.size === 0) {
          return this;
        }
        if (this.__ownerID) {
          this.size = this._origin = this._capacity = 0;
          this._level = SHIFT;
          this._root = this._tail = null;
          this.__hash = void 0;
          this.__altered = true;
          return this;
        }
        return emptyList();
      };
      List.prototype.push = function() {
        var values = arguments;
        var oldSize = this.size;
        return this.withMutations(function(list) {
          setListBounds(list, 0, oldSize + values.length);
          for (var ii2 = 0; ii2 < values.length; ii2++) {
            list.set(oldSize + ii2, values[ii2]);
          }
        });
      };
      List.prototype.pop = function() {
        return setListBounds(this, 0, -1);
      };
      List.prototype.unshift = function() {
        var values = arguments;
        return this.withMutations(function(list) {
          setListBounds(list, -values.length);
          for (var ii2 = 0; ii2 < values.length; ii2++) {
            list.set(ii2, values[ii2]);
          }
        });
      };
      List.prototype.shift = function() {
        return setListBounds(this, 1);
      };
      List.prototype.merge = function() {
        return mergeIntoListWith(this, void 0, arguments);
      };
      List.prototype.mergeWith = function(merger) {
        var iters = SLICE$0.call(arguments, 1);
        return mergeIntoListWith(this, merger, iters);
      };
      List.prototype.mergeDeep = function() {
        return mergeIntoListWith(this, deepMerger, arguments);
      };
      List.prototype.mergeDeepWith = function(merger) {
        var iters = SLICE$0.call(arguments, 1);
        return mergeIntoListWith(this, deepMergerWith(merger), iters);
      };
      List.prototype.setSize = function(size) {
        return setListBounds(this, 0, size);
      };
      List.prototype.slice = function(begin, end) {
        var size = this.size;
        if (wholeSlice(begin, end, size)) {
          return this;
        }
        return setListBounds(
          this,
          resolveBegin(begin, size),
          resolveEnd(end, size)
        );
      };
      List.prototype.__iterator = function(type, reverse) {
        var index2 = 0;
        var values = iterateList(this, reverse);
        return new Iterator(function() {
          var value = values();
          return value === DONE ? iteratorDone() : iteratorValue(type, index2++, value);
        });
      };
      List.prototype.__iterate = function(fn, reverse) {
        var index2 = 0;
        var values = iterateList(this, reverse);
        var value;
        while ((value = values()) !== DONE) {
          if (fn(value, index2++, this) === false) {
            break;
          }
        }
        return index2;
      };
      List.prototype.__ensureOwner = function(ownerID) {
        if (ownerID === this.__ownerID) {
          return this;
        }
        if (!ownerID) {
          this.__ownerID = ownerID;
          return this;
        }
        return makeList(this._origin, this._capacity, this._level, this._root, this._tail, ownerID, this.__hash);
      };
      function isList(maybeList) {
        return !!(maybeList && maybeList[IS_LIST_SENTINEL]);
      }
      List.isList = isList;
      var IS_LIST_SENTINEL = "@@__IMMUTABLE_LIST__@@";
      var ListPrototype = List.prototype;
      ListPrototype[IS_LIST_SENTINEL] = true;
      ListPrototype[DELETE] = ListPrototype.remove;
      ListPrototype.setIn = MapPrototype.setIn;
      ListPrototype.deleteIn = ListPrototype.removeIn = MapPrototype.removeIn;
      ListPrototype.update = MapPrototype.update;
      ListPrototype.updateIn = MapPrototype.updateIn;
      ListPrototype.mergeIn = MapPrototype.mergeIn;
      ListPrototype.mergeDeepIn = MapPrototype.mergeDeepIn;
      ListPrototype.withMutations = MapPrototype.withMutations;
      ListPrototype.asMutable = MapPrototype.asMutable;
      ListPrototype.asImmutable = MapPrototype.asImmutable;
      ListPrototype.wasAltered = MapPrototype.wasAltered;
      function VNode(array, ownerID) {
        this.array = array;
        this.ownerID = ownerID;
      }
      VNode.prototype.removeBefore = function(ownerID, level, index2) {
        if (index2 === level ? 1 << level : this.array.length === 0) {
          return this;
        }
        var originIndex = index2 >>> level & MASK;
        if (originIndex >= this.array.length) {
          return new VNode([], ownerID);
        }
        var removingFirst = originIndex === 0;
        var newChild;
        if (level > 0) {
          var oldChild = this.array[originIndex];
          newChild = oldChild && oldChild.removeBefore(ownerID, level - SHIFT, index2);
          if (newChild === oldChild && removingFirst) {
            return this;
          }
        }
        if (removingFirst && !newChild) {
          return this;
        }
        var editable = editableVNode(this, ownerID);
        if (!removingFirst) {
          for (var ii2 = 0; ii2 < originIndex; ii2++) {
            editable.array[ii2] = void 0;
          }
        }
        if (newChild) {
          editable.array[originIndex] = newChild;
        }
        return editable;
      };
      VNode.prototype.removeAfter = function(ownerID, level, index2) {
        if (index2 === (level ? 1 << level : 0) || this.array.length === 0) {
          return this;
        }
        var sizeIndex = index2 - 1 >>> level & MASK;
        if (sizeIndex >= this.array.length) {
          return this;
        }
        var newChild;
        if (level > 0) {
          var oldChild = this.array[sizeIndex];
          newChild = oldChild && oldChild.removeAfter(ownerID, level - SHIFT, index2);
          if (newChild === oldChild && sizeIndex === this.array.length - 1) {
            return this;
          }
        }
        var editable = editableVNode(this, ownerID);
        editable.array.splice(sizeIndex + 1);
        if (newChild) {
          editable.array[sizeIndex] = newChild;
        }
        return editable;
      };
      var DONE = {};
      function iterateList(list, reverse) {
        var left = list._origin;
        var right = list._capacity;
        var tailPos = getTailOffset(right);
        var tail = list._tail;
        return iterateNodeOrLeaf(list._root, list._level, 0);
        function iterateNodeOrLeaf(node, level, offset) {
          return level === 0 ? iterateLeaf(node, offset) : iterateNode(node, level, offset);
        }
        function iterateLeaf(node, offset) {
          var array = offset === tailPos ? tail && tail.array : node && node.array;
          var from = offset > left ? 0 : left - offset;
          var to = right - offset;
          if (to > SIZE) {
            to = SIZE;
          }
          return function() {
            if (from === to) {
              return DONE;
            }
            var idx = reverse ? --to : from++;
            return array && array[idx];
          };
        }
        function iterateNode(node, level, offset) {
          var values;
          var array = node && node.array;
          var from = offset > left ? 0 : left - offset >> level;
          var to = (right - offset >> level) + 1;
          if (to > SIZE) {
            to = SIZE;
          }
          return function() {
            do {
              if (values) {
                var value = values();
                if (value !== DONE) {
                  return value;
                }
                values = null;
              }
              if (from === to) {
                return DONE;
              }
              var idx = reverse ? --to : from++;
              values = iterateNodeOrLeaf(
                array && array[idx],
                level - SHIFT,
                offset + (idx << level)
              );
            } while (true);
          };
        }
      }
      function makeList(origin, capacity, level, root2, tail, ownerID, hash2) {
        var list = Object.create(ListPrototype);
        list.size = capacity - origin;
        list._origin = origin;
        list._capacity = capacity;
        list._level = level;
        list._root = root2;
        list._tail = tail;
        list.__ownerID = ownerID;
        list.__hash = hash2;
        list.__altered = false;
        return list;
      }
      var EMPTY_LIST;
      function emptyList() {
        return EMPTY_LIST || (EMPTY_LIST = makeList(0, 0, SHIFT));
      }
      function updateList(list, index2, value) {
        index2 = wrapIndex(list, index2);
        if (index2 !== index2) {
          return list;
        }
        if (index2 >= list.size || index2 < 0) {
          return list.withMutations(function(list2) {
            index2 < 0 ? setListBounds(list2, index2).set(0, value) : setListBounds(list2, 0, index2 + 1).set(index2, value);
          });
        }
        index2 += list._origin;
        var newTail = list._tail;
        var newRoot = list._root;
        var didAlter = MakeRef(DID_ALTER);
        if (index2 >= getTailOffset(list._capacity)) {
          newTail = updateVNode(newTail, list.__ownerID, 0, index2, value, didAlter);
        } else {
          newRoot = updateVNode(newRoot, list.__ownerID, list._level, index2, value, didAlter);
        }
        if (!didAlter.value) {
          return list;
        }
        if (list.__ownerID) {
          list._root = newRoot;
          list._tail = newTail;
          list.__hash = void 0;
          list.__altered = true;
          return list;
        }
        return makeList(list._origin, list._capacity, list._level, newRoot, newTail);
      }
      function updateVNode(node, ownerID, level, index2, value, didAlter) {
        var idx = index2 >>> level & MASK;
        var nodeHas = node && idx < node.array.length;
        if (!nodeHas && value === void 0) {
          return node;
        }
        var newNode;
        if (level > 0) {
          var lowerNode = node && node.array[idx];
          var newLowerNode = updateVNode(lowerNode, ownerID, level - SHIFT, index2, value, didAlter);
          if (newLowerNode === lowerNode) {
            return node;
          }
          newNode = editableVNode(node, ownerID);
          newNode.array[idx] = newLowerNode;
          return newNode;
        }
        if (nodeHas && node.array[idx] === value) {
          return node;
        }
        SetRef(didAlter);
        newNode = editableVNode(node, ownerID);
        if (value === void 0 && idx === newNode.array.length - 1) {
          newNode.array.pop();
        } else {
          newNode.array[idx] = value;
        }
        return newNode;
      }
      function editableVNode(node, ownerID) {
        if (ownerID && node && ownerID === node.ownerID) {
          return node;
        }
        return new VNode(node ? node.array.slice() : [], ownerID);
      }
      function listNodeFor(list, rawIndex) {
        if (rawIndex >= getTailOffset(list._capacity)) {
          return list._tail;
        }
        if (rawIndex < 1 << list._level + SHIFT) {
          var node = list._root;
          var level = list._level;
          while (node && level > 0) {
            node = node.array[rawIndex >>> level & MASK];
            level -= SHIFT;
          }
          return node;
        }
      }
      function setListBounds(list, begin, end) {
        if (begin !== void 0) {
          begin = begin | 0;
        }
        if (end !== void 0) {
          end = end | 0;
        }
        var owner = list.__ownerID || new OwnerID();
        var oldOrigin = list._origin;
        var oldCapacity = list._capacity;
        var newOrigin = oldOrigin + begin;
        var newCapacity = end === void 0 ? oldCapacity : end < 0 ? oldCapacity + end : oldOrigin + end;
        if (newOrigin === oldOrigin && newCapacity === oldCapacity) {
          return list;
        }
        if (newOrigin >= newCapacity) {
          return list.clear();
        }
        var newLevel = list._level;
        var newRoot = list._root;
        var offsetShift = 0;
        while (newOrigin + offsetShift < 0) {
          newRoot = new VNode(newRoot && newRoot.array.length ? [void 0, newRoot] : [], owner);
          newLevel += SHIFT;
          offsetShift += 1 << newLevel;
        }
        if (offsetShift) {
          newOrigin += offsetShift;
          oldOrigin += offsetShift;
          newCapacity += offsetShift;
          oldCapacity += offsetShift;
        }
        var oldTailOffset = getTailOffset(oldCapacity);
        var newTailOffset = getTailOffset(newCapacity);
        while (newTailOffset >= 1 << newLevel + SHIFT) {
          newRoot = new VNode(newRoot && newRoot.array.length ? [newRoot] : [], owner);
          newLevel += SHIFT;
        }
        var oldTail = list._tail;
        var newTail = newTailOffset < oldTailOffset ? listNodeFor(list, newCapacity - 1) : newTailOffset > oldTailOffset ? new VNode([], owner) : oldTail;
        if (oldTail && newTailOffset > oldTailOffset && newOrigin < oldCapacity && oldTail.array.length) {
          newRoot = editableVNode(newRoot, owner);
          var node = newRoot;
          for (var level = newLevel; level > SHIFT; level -= SHIFT) {
            var idx = oldTailOffset >>> level & MASK;
            node = node.array[idx] = editableVNode(node.array[idx], owner);
          }
          node.array[oldTailOffset >>> SHIFT & MASK] = oldTail;
        }
        if (newCapacity < oldCapacity) {
          newTail = newTail && newTail.removeAfter(owner, 0, newCapacity);
        }
        if (newOrigin >= newTailOffset) {
          newOrigin -= newTailOffset;
          newCapacity -= newTailOffset;
          newLevel = SHIFT;
          newRoot = null;
          newTail = newTail && newTail.removeBefore(owner, 0, newOrigin);
        } else if (newOrigin > oldOrigin || newTailOffset < oldTailOffset) {
          offsetShift = 0;
          while (newRoot) {
            var beginIndex = newOrigin >>> newLevel & MASK;
            if (beginIndex !== newTailOffset >>> newLevel & MASK) {
              break;
            }
            if (beginIndex) {
              offsetShift += (1 << newLevel) * beginIndex;
            }
            newLevel -= SHIFT;
            newRoot = newRoot.array[beginIndex];
          }
          if (newRoot && newOrigin > oldOrigin) {
            newRoot = newRoot.removeBefore(owner, newLevel, newOrigin - offsetShift);
          }
          if (newRoot && newTailOffset < oldTailOffset) {
            newRoot = newRoot.removeAfter(owner, newLevel, newTailOffset - offsetShift);
          }
          if (offsetShift) {
            newOrigin -= offsetShift;
            newCapacity -= offsetShift;
          }
        }
        if (list.__ownerID) {
          list.size = newCapacity - newOrigin;
          list._origin = newOrigin;
          list._capacity = newCapacity;
          list._level = newLevel;
          list._root = newRoot;
          list._tail = newTail;
          list.__hash = void 0;
          list.__altered = true;
          return list;
        }
        return makeList(newOrigin, newCapacity, newLevel, newRoot, newTail);
      }
      function mergeIntoListWith(list, merger, iterables) {
        var iters = [];
        var maxSize = 0;
        for (var ii2 = 0; ii2 < iterables.length; ii2++) {
          var value = iterables[ii2];
          var iter = IndexedIterable(value);
          if (iter.size > maxSize) {
            maxSize = iter.size;
          }
          if (!isIterable(value)) {
            iter = iter.map(function(v2) {
              return fromJS(v2);
            });
          }
          iters.push(iter);
        }
        if (maxSize > list.size) {
          list = list.setSize(maxSize);
        }
        return mergeIntoCollectionWith(list, merger, iters);
      }
      function getTailOffset(size) {
        return size < SIZE ? 0 : size - 1 >>> SHIFT << SHIFT;
      }
      createClass2(OrderedMap, Map2);
      function OrderedMap(value) {
        return value === null || value === void 0 ? emptyOrderedMap() : isOrderedMap(value) ? value : emptyOrderedMap().withMutations(function(map) {
          var iter = KeyedIterable(value);
          assertNotInfinite(iter.size);
          iter.forEach(function(v2, k) {
            return map.set(k, v2);
          });
        });
      }
      OrderedMap.of = function() {
        return this(arguments);
      };
      OrderedMap.prototype.toString = function() {
        return this.__toString("OrderedMap {", "}");
      };
      OrderedMap.prototype.get = function(k, notSetValue) {
        var index2 = this._map.get(k);
        return index2 !== void 0 ? this._list.get(index2)[1] : notSetValue;
      };
      OrderedMap.prototype.clear = function() {
        if (this.size === 0) {
          return this;
        }
        if (this.__ownerID) {
          this.size = 0;
          this._map.clear();
          this._list.clear();
          return this;
        }
        return emptyOrderedMap();
      };
      OrderedMap.prototype.set = function(k, v2) {
        return updateOrderedMap(this, k, v2);
      };
      OrderedMap.prototype.remove = function(k) {
        return updateOrderedMap(this, k, NOT_SET);
      };
      OrderedMap.prototype.wasAltered = function() {
        return this._map.wasAltered() || this._list.wasAltered();
      };
      OrderedMap.prototype.__iterate = function(fn, reverse) {
        var this$0 = this;
        return this._list.__iterate(
          function(entry) {
            return entry && fn(entry[1], entry[0], this$0);
          },
          reverse
        );
      };
      OrderedMap.prototype.__iterator = function(type, reverse) {
        return this._list.fromEntrySeq().__iterator(type, reverse);
      };
      OrderedMap.prototype.__ensureOwner = function(ownerID) {
        if (ownerID === this.__ownerID) {
          return this;
        }
        var newMap = this._map.__ensureOwner(ownerID);
        var newList = this._list.__ensureOwner(ownerID);
        if (!ownerID) {
          this.__ownerID = ownerID;
          this._map = newMap;
          this._list = newList;
          return this;
        }
        return makeOrderedMap(newMap, newList, ownerID, this.__hash);
      };
      function isOrderedMap(maybeOrderedMap) {
        return isMap(maybeOrderedMap) && isOrdered(maybeOrderedMap);
      }
      OrderedMap.isOrderedMap = isOrderedMap;
      OrderedMap.prototype[IS_ORDERED_SENTINEL] = true;
      OrderedMap.prototype[DELETE] = OrderedMap.prototype.remove;
      function makeOrderedMap(map, list, ownerID, hash2) {
        var omap = Object.create(OrderedMap.prototype);
        omap.size = map ? map.size : 0;
        omap._map = map;
        omap._list = list;
        omap.__ownerID = ownerID;
        omap.__hash = hash2;
        return omap;
      }
      var EMPTY_ORDERED_MAP;
      function emptyOrderedMap() {
        return EMPTY_ORDERED_MAP || (EMPTY_ORDERED_MAP = makeOrderedMap(emptyMap(), emptyList()));
      }
      function updateOrderedMap(omap, k, v2) {
        var map = omap._map;
        var list = omap._list;
        var i2 = map.get(k);
        var has = i2 !== void 0;
        var newMap;
        var newList;
        if (v2 === NOT_SET) {
          if (!has) {
            return omap;
          }
          if (list.size >= SIZE && list.size >= map.size * 2) {
            newList = list.filter(function(entry, idx) {
              return entry !== void 0 && i2 !== idx;
            });
            newMap = newList.toKeyedSeq().map(function(entry) {
              return entry[0];
            }).flip().toMap();
            if (omap.__ownerID) {
              newMap.__ownerID = newList.__ownerID = omap.__ownerID;
            }
          } else {
            newMap = map.remove(k);
            newList = i2 === list.size - 1 ? list.pop() : list.set(i2, void 0);
          }
        } else {
          if (has) {
            if (v2 === list.get(i2)[1]) {
              return omap;
            }
            newMap = map;
            newList = list.set(i2, [k, v2]);
          } else {
            newMap = map.set(k, list.size);
            newList = list.set(list.size, [k, v2]);
          }
        }
        if (omap.__ownerID) {
          omap.size = newMap.size;
          omap._map = newMap;
          omap._list = newList;
          omap.__hash = void 0;
          return omap;
        }
        return makeOrderedMap(newMap, newList);
      }
      createClass2(ToKeyedSequence, KeyedSeq);
      function ToKeyedSequence(indexed, useKeys) {
        this._iter = indexed;
        this._useKeys = useKeys;
        this.size = indexed.size;
      }
      ToKeyedSequence.prototype.get = function(key, notSetValue) {
        return this._iter.get(key, notSetValue);
      };
      ToKeyedSequence.prototype.has = function(key) {
        return this._iter.has(key);
      };
      ToKeyedSequence.prototype.valueSeq = function() {
        return this._iter.valueSeq();
      };
      ToKeyedSequence.prototype.reverse = function() {
        var this$0 = this;
        var reversedSequence = reverseFactory(this, true);
        if (!this._useKeys) {
          reversedSequence.valueSeq = function() {
            return this$0._iter.toSeq().reverse();
          };
        }
        return reversedSequence;
      };
      ToKeyedSequence.prototype.map = function(mapper, context) {
        var this$0 = this;
        var mappedSequence = mapFactory(this, mapper, context);
        if (!this._useKeys) {
          mappedSequence.valueSeq = function() {
            return this$0._iter.toSeq().map(mapper, context);
          };
        }
        return mappedSequence;
      };
      ToKeyedSequence.prototype.__iterate = function(fn, reverse) {
        var this$0 = this;
        var ii2;
        return this._iter.__iterate(
          this._useKeys ? function(v2, k) {
            return fn(v2, k, this$0);
          } : (ii2 = reverse ? resolveSize(this) : 0, function(v2) {
            return fn(v2, reverse ? --ii2 : ii2++, this$0);
          }),
          reverse
        );
      };
      ToKeyedSequence.prototype.__iterator = function(type, reverse) {
        if (this._useKeys) {
          return this._iter.__iterator(type, reverse);
        }
        var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);
        var ii2 = reverse ? resolveSize(this) : 0;
        return new Iterator(function() {
          var step = iterator.next();
          return step.done ? step : iteratorValue(type, reverse ? --ii2 : ii2++, step.value, step);
        });
      };
      ToKeyedSequence.prototype[IS_ORDERED_SENTINEL] = true;
      createClass2(ToIndexedSequence, IndexedSeq);
      function ToIndexedSequence(iter) {
        this._iter = iter;
        this.size = iter.size;
      }
      ToIndexedSequence.prototype.includes = function(value) {
        return this._iter.includes(value);
      };
      ToIndexedSequence.prototype.__iterate = function(fn, reverse) {
        var this$0 = this;
        var iterations = 0;
        return this._iter.__iterate(function(v2) {
          return fn(v2, iterations++, this$0);
        }, reverse);
      };
      ToIndexedSequence.prototype.__iterator = function(type, reverse) {
        var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);
        var iterations = 0;
        return new Iterator(function() {
          var step = iterator.next();
          return step.done ? step : iteratorValue(type, iterations++, step.value, step);
        });
      };
      createClass2(ToSetSequence, SetSeq);
      function ToSetSequence(iter) {
        this._iter = iter;
        this.size = iter.size;
      }
      ToSetSequence.prototype.has = function(key) {
        return this._iter.includes(key);
      };
      ToSetSequence.prototype.__iterate = function(fn, reverse) {
        var this$0 = this;
        return this._iter.__iterate(function(v2) {
          return fn(v2, v2, this$0);
        }, reverse);
      };
      ToSetSequence.prototype.__iterator = function(type, reverse) {
        var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);
        return new Iterator(function() {
          var step = iterator.next();
          return step.done ? step : iteratorValue(type, step.value, step.value, step);
        });
      };
      createClass2(FromEntriesSequence, KeyedSeq);
      function FromEntriesSequence(entries) {
        this._iter = entries;
        this.size = entries.size;
      }
      FromEntriesSequence.prototype.entrySeq = function() {
        return this._iter.toSeq();
      };
      FromEntriesSequence.prototype.__iterate = function(fn, reverse) {
        var this$0 = this;
        return this._iter.__iterate(function(entry) {
          if (entry) {
            validateEntry(entry);
            var indexedIterable = isIterable(entry);
            return fn(
              indexedIterable ? entry.get(1) : entry[1],
              indexedIterable ? entry.get(0) : entry[0],
              this$0
            );
          }
        }, reverse);
      };
      FromEntriesSequence.prototype.__iterator = function(type, reverse) {
        var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);
        return new Iterator(function() {
          while (true) {
            var step = iterator.next();
            if (step.done) {
              return step;
            }
            var entry = step.value;
            if (entry) {
              validateEntry(entry);
              var indexedIterable = isIterable(entry);
              return iteratorValue(
                type,
                indexedIterable ? entry.get(0) : entry[0],
                indexedIterable ? entry.get(1) : entry[1],
                step
              );
            }
          }
        });
      };
      ToIndexedSequence.prototype.cacheResult = ToKeyedSequence.prototype.cacheResult = ToSetSequence.prototype.cacheResult = FromEntriesSequence.prototype.cacheResult = cacheResultThrough;
      function flipFactory(iterable) {
        var flipSequence = makeSequence(iterable);
        flipSequence._iter = iterable;
        flipSequence.size = iterable.size;
        flipSequence.flip = function() {
          return iterable;
        };
        flipSequence.reverse = function() {
          var reversedSequence = iterable.reverse.apply(this);
          reversedSequence.flip = function() {
            return iterable.reverse();
          };
          return reversedSequence;
        };
        flipSequence.has = function(key) {
          return iterable.includes(key);
        };
        flipSequence.includes = function(key) {
          return iterable.has(key);
        };
        flipSequence.cacheResult = cacheResultThrough;
        flipSequence.__iterateUncached = function(fn, reverse) {
          var this$0 = this;
          return iterable.__iterate(function(v2, k) {
            return fn(k, v2, this$0) !== false;
          }, reverse);
        };
        flipSequence.__iteratorUncached = function(type, reverse) {
          if (type === ITERATE_ENTRIES) {
            var iterator = iterable.__iterator(type, reverse);
            return new Iterator(function() {
              var step = iterator.next();
              if (!step.done) {
                var k = step.value[0];
                step.value[0] = step.value[1];
                step.value[1] = k;
              }
              return step;
            });
          }
          return iterable.__iterator(
            type === ITERATE_VALUES ? ITERATE_KEYS : ITERATE_VALUES,
            reverse
          );
        };
        return flipSequence;
      }
      function mapFactory(iterable, mapper, context) {
        var mappedSequence = makeSequence(iterable);
        mappedSequence.size = iterable.size;
        mappedSequence.has = function(key) {
          return iterable.has(key);
        };
        mappedSequence.get = function(key, notSetValue) {
          var v2 = iterable.get(key, NOT_SET);
          return v2 === NOT_SET ? notSetValue : mapper.call(context, v2, key, iterable);
        };
        mappedSequence.__iterateUncached = function(fn, reverse) {
          var this$0 = this;
          return iterable.__iterate(
            function(v2, k, c) {
              return fn(mapper.call(context, v2, k, c), k, this$0) !== false;
            },
            reverse
          );
        };
        mappedSequence.__iteratorUncached = function(type, reverse) {
          var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);
          return new Iterator(function() {
            var step = iterator.next();
            if (step.done) {
              return step;
            }
            var entry = step.value;
            var key = entry[0];
            return iteratorValue(
              type,
              key,
              mapper.call(context, entry[1], key, iterable),
              step
            );
          });
        };
        return mappedSequence;
      }
      function reverseFactory(iterable, useKeys) {
        var reversedSequence = makeSequence(iterable);
        reversedSequence._iter = iterable;
        reversedSequence.size = iterable.size;
        reversedSequence.reverse = function() {
          return iterable;
        };
        if (iterable.flip) {
          reversedSequence.flip = function() {
            var flipSequence = flipFactory(iterable);
            flipSequence.reverse = function() {
              return iterable.flip();
            };
            return flipSequence;
          };
        }
        reversedSequence.get = function(key, notSetValue) {
          return iterable.get(useKeys ? key : -1 - key, notSetValue);
        };
        reversedSequence.has = function(key) {
          return iterable.has(useKeys ? key : -1 - key);
        };
        reversedSequence.includes = function(value) {
          return iterable.includes(value);
        };
        reversedSequence.cacheResult = cacheResultThrough;
        reversedSequence.__iterate = function(fn, reverse) {
          var this$0 = this;
          return iterable.__iterate(function(v2, k) {
            return fn(v2, k, this$0);
          }, !reverse);
        };
        reversedSequence.__iterator = function(type, reverse) {
          return iterable.__iterator(type, !reverse);
        };
        return reversedSequence;
      }
      function filterFactory(iterable, predicate, context, useKeys) {
        var filterSequence = makeSequence(iterable);
        if (useKeys) {
          filterSequence.has = function(key) {
            var v2 = iterable.get(key, NOT_SET);
            return v2 !== NOT_SET && !!predicate.call(context, v2, key, iterable);
          };
          filterSequence.get = function(key, notSetValue) {
            var v2 = iterable.get(key, NOT_SET);
            return v2 !== NOT_SET && predicate.call(context, v2, key, iterable) ? v2 : notSetValue;
          };
        }
        filterSequence.__iterateUncached = function(fn, reverse) {
          var this$0 = this;
          var iterations = 0;
          iterable.__iterate(function(v2, k, c) {
            if (predicate.call(context, v2, k, c)) {
              iterations++;
              return fn(v2, useKeys ? k : iterations - 1, this$0);
            }
          }, reverse);
          return iterations;
        };
        filterSequence.__iteratorUncached = function(type, reverse) {
          var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);
          var iterations = 0;
          return new Iterator(function() {
            while (true) {
              var step = iterator.next();
              if (step.done) {
                return step;
              }
              var entry = step.value;
              var key = entry[0];
              var value = entry[1];
              if (predicate.call(context, value, key, iterable)) {
                return iteratorValue(type, useKeys ? key : iterations++, value, step);
              }
            }
          });
        };
        return filterSequence;
      }
      function countByFactory(iterable, grouper, context) {
        var groups = Map2().asMutable();
        iterable.__iterate(function(v2, k) {
          groups.update(
            grouper.call(context, v2, k, iterable),
            0,
            function(a) {
              return a + 1;
            }
          );
        });
        return groups.asImmutable();
      }
      function groupByFactory(iterable, grouper, context) {
        var isKeyedIter = isKeyed(iterable);
        var groups = (isOrdered(iterable) ? OrderedMap() : Map2()).asMutable();
        iterable.__iterate(function(v2, k) {
          groups.update(
            grouper.call(context, v2, k, iterable),
            function(a) {
              return a = a || [], a.push(isKeyedIter ? [k, v2] : v2), a;
            }
          );
        });
        var coerce = iterableClass(iterable);
        return groups.map(function(arr) {
          return reify(iterable, coerce(arr));
        });
      }
      function sliceFactory(iterable, begin, end, useKeys) {
        var originalSize = iterable.size;
        if (begin !== void 0) {
          begin = begin | 0;
        }
        if (end !== void 0) {
          if (end === Infinity) {
            end = originalSize;
          } else {
            end = end | 0;
          }
        }
        if (wholeSlice(begin, end, originalSize)) {
          return iterable;
        }
        var resolvedBegin = resolveBegin(begin, originalSize);
        var resolvedEnd = resolveEnd(end, originalSize);
        if (resolvedBegin !== resolvedBegin || resolvedEnd !== resolvedEnd) {
          return sliceFactory(iterable.toSeq().cacheResult(), begin, end, useKeys);
        }
        var resolvedSize = resolvedEnd - resolvedBegin;
        var sliceSize;
        if (resolvedSize === resolvedSize) {
          sliceSize = resolvedSize < 0 ? 0 : resolvedSize;
        }
        var sliceSeq = makeSequence(iterable);
        sliceSeq.size = sliceSize === 0 ? sliceSize : iterable.size && sliceSize || void 0;
        if (!useKeys && isSeq(iterable) && sliceSize >= 0) {
          sliceSeq.get = function(index2, notSetValue) {
            index2 = wrapIndex(this, index2);
            return index2 >= 0 && index2 < sliceSize ? iterable.get(index2 + resolvedBegin, notSetValue) : notSetValue;
          };
        }
        sliceSeq.__iterateUncached = function(fn, reverse) {
          var this$0 = this;
          if (sliceSize === 0) {
            return 0;
          }
          if (reverse) {
            return this.cacheResult().__iterate(fn, reverse);
          }
          var skipped = 0;
          var isSkipping = true;
          var iterations = 0;
          iterable.__iterate(function(v2, k) {
            if (!(isSkipping && (isSkipping = skipped++ < resolvedBegin))) {
              iterations++;
              return fn(v2, useKeys ? k : iterations - 1, this$0) !== false && iterations !== sliceSize;
            }
          });
          return iterations;
        };
        sliceSeq.__iteratorUncached = function(type, reverse) {
          if (sliceSize !== 0 && reverse) {
            return this.cacheResult().__iterator(type, reverse);
          }
          var iterator = sliceSize !== 0 && iterable.__iterator(type, reverse);
          var skipped = 0;
          var iterations = 0;
          return new Iterator(function() {
            while (skipped++ < resolvedBegin) {
              iterator.next();
            }
            if (++iterations > sliceSize) {
              return iteratorDone();
            }
            var step = iterator.next();
            if (useKeys || type === ITERATE_VALUES) {
              return step;
            } else if (type === ITERATE_KEYS) {
              return iteratorValue(type, iterations - 1, void 0, step);
            } else {
              return iteratorValue(type, iterations - 1, step.value[1], step);
            }
          });
        };
        return sliceSeq;
      }
      function takeWhileFactory(iterable, predicate, context) {
        var takeSequence = makeSequence(iterable);
        takeSequence.__iterateUncached = function(fn, reverse) {
          var this$0 = this;
          if (reverse) {
            return this.cacheResult().__iterate(fn, reverse);
          }
          var iterations = 0;
          iterable.__iterate(
            function(v2, k, c) {
              return predicate.call(context, v2, k, c) && ++iterations && fn(v2, k, this$0);
            }
          );
          return iterations;
        };
        takeSequence.__iteratorUncached = function(type, reverse) {
          var this$0 = this;
          if (reverse) {
            return this.cacheResult().__iterator(type, reverse);
          }
          var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);
          var iterating = true;
          return new Iterator(function() {
            if (!iterating) {
              return iteratorDone();
            }
            var step = iterator.next();
            if (step.done) {
              return step;
            }
            var entry = step.value;
            var k = entry[0];
            var v2 = entry[1];
            if (!predicate.call(context, v2, k, this$0)) {
              iterating = false;
              return iteratorDone();
            }
            return type === ITERATE_ENTRIES ? step : iteratorValue(type, k, v2, step);
          });
        };
        return takeSequence;
      }
      function skipWhileFactory(iterable, predicate, context, useKeys) {
        var skipSequence = makeSequence(iterable);
        skipSequence.__iterateUncached = function(fn, reverse) {
          var this$0 = this;
          if (reverse) {
            return this.cacheResult().__iterate(fn, reverse);
          }
          var isSkipping = true;
          var iterations = 0;
          iterable.__iterate(function(v2, k, c) {
            if (!(isSkipping && (isSkipping = predicate.call(context, v2, k, c)))) {
              iterations++;
              return fn(v2, useKeys ? k : iterations - 1, this$0);
            }
          });
          return iterations;
        };
        skipSequence.__iteratorUncached = function(type, reverse) {
          var this$0 = this;
          if (reverse) {
            return this.cacheResult().__iterator(type, reverse);
          }
          var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);
          var skipping = true;
          var iterations = 0;
          return new Iterator(function() {
            var step, k, v2;
            do {
              step = iterator.next();
              if (step.done) {
                if (useKeys || type === ITERATE_VALUES) {
                  return step;
                } else if (type === ITERATE_KEYS) {
                  return iteratorValue(type, iterations++, void 0, step);
                } else {
                  return iteratorValue(type, iterations++, step.value[1], step);
                }
              }
              var entry = step.value;
              k = entry[0];
              v2 = entry[1];
              skipping && (skipping = predicate.call(context, v2, k, this$0));
            } while (skipping);
            return type === ITERATE_ENTRIES ? step : iteratorValue(type, k, v2, step);
          });
        };
        return skipSequence;
      }
      function concatFactory(iterable, values) {
        var isKeyedIterable = isKeyed(iterable);
        var iters = [iterable].concat(values).map(function(v2) {
          if (!isIterable(v2)) {
            v2 = isKeyedIterable ? keyedSeqFromValue(v2) : indexedSeqFromValue(Array.isArray(v2) ? v2 : [v2]);
          } else if (isKeyedIterable) {
            v2 = KeyedIterable(v2);
          }
          return v2;
        }).filter(function(v2) {
          return v2.size !== 0;
        });
        if (iters.length === 0) {
          return iterable;
        }
        if (iters.length === 1) {
          var singleton = iters[0];
          if (singleton === iterable || isKeyedIterable && isKeyed(singleton) || isIndexed(iterable) && isIndexed(singleton)) {
            return singleton;
          }
        }
        var concatSeq = new ArraySeq(iters);
        if (isKeyedIterable) {
          concatSeq = concatSeq.toKeyedSeq();
        } else if (!isIndexed(iterable)) {
          concatSeq = concatSeq.toSetSeq();
        }
        concatSeq = concatSeq.flatten(true);
        concatSeq.size = iters.reduce(
          function(sum, seq) {
            if (sum !== void 0) {
              var size = seq.size;
              if (size !== void 0) {
                return sum + size;
              }
            }
          },
          0
        );
        return concatSeq;
      }
      function flattenFactory(iterable, depth, useKeys) {
        var flatSequence = makeSequence(iterable);
        flatSequence.__iterateUncached = function(fn, reverse) {
          var iterations = 0;
          var stopped = false;
          function flatDeep(iter, currentDepth) {
            var this$0 = this;
            iter.__iterate(function(v2, k) {
              if ((!depth || currentDepth < depth) && isIterable(v2)) {
                flatDeep(v2, currentDepth + 1);
              } else if (fn(v2, useKeys ? k : iterations++, this$0) === false) {
                stopped = true;
              }
              return !stopped;
            }, reverse);
          }
          flatDeep(iterable, 0);
          return iterations;
        };
        flatSequence.__iteratorUncached = function(type, reverse) {
          var iterator = iterable.__iterator(type, reverse);
          var stack = [];
          var iterations = 0;
          return new Iterator(function() {
            while (iterator) {
              var step = iterator.next();
              if (step.done !== false) {
                iterator = stack.pop();
                continue;
              }
              var v2 = step.value;
              if (type === ITERATE_ENTRIES) {
                v2 = v2[1];
              }
              if ((!depth || stack.length < depth) && isIterable(v2)) {
                stack.push(iterator);
                iterator = v2.__iterator(type, reverse);
              } else {
                return useKeys ? step : iteratorValue(type, iterations++, v2, step);
              }
            }
            return iteratorDone();
          });
        };
        return flatSequence;
      }
      function flatMapFactory(iterable, mapper, context) {
        var coerce = iterableClass(iterable);
        return iterable.toSeq().map(
          function(v2, k) {
            return coerce(mapper.call(context, v2, k, iterable));
          }
        ).flatten(true);
      }
      function interposeFactory(iterable, separator) {
        var interposedSequence = makeSequence(iterable);
        interposedSequence.size = iterable.size && iterable.size * 2 - 1;
        interposedSequence.__iterateUncached = function(fn, reverse) {
          var this$0 = this;
          var iterations = 0;
          iterable.__iterate(
            function(v2, k) {
              return (!iterations || fn(separator, iterations++, this$0) !== false) && fn(v2, iterations++, this$0) !== false;
            },
            reverse
          );
          return iterations;
        };
        interposedSequence.__iteratorUncached = function(type, reverse) {
          var iterator = iterable.__iterator(ITERATE_VALUES, reverse);
          var iterations = 0;
          var step;
          return new Iterator(function() {
            if (!step || iterations % 2) {
              step = iterator.next();
              if (step.done) {
                return step;
              }
            }
            return iterations % 2 ? iteratorValue(type, iterations++, separator) : iteratorValue(type, iterations++, step.value, step);
          });
        };
        return interposedSequence;
      }
      function sortFactory(iterable, comparator, mapper) {
        if (!comparator) {
          comparator = defaultComparator;
        }
        var isKeyedIterable = isKeyed(iterable);
        var index2 = 0;
        var entries = iterable.toSeq().map(
          function(v2, k) {
            return [k, v2, index2++, mapper ? mapper(v2, k, iterable) : v2];
          }
        ).toArray();
        entries.sort(function(a, b) {
          return comparator(a[3], b[3]) || a[2] - b[2];
        }).forEach(
          isKeyedIterable ? function(v2, i2) {
            entries[i2].length = 2;
          } : function(v2, i2) {
            entries[i2] = v2[1];
          }
        );
        return isKeyedIterable ? KeyedSeq(entries) : isIndexed(iterable) ? IndexedSeq(entries) : SetSeq(entries);
      }
      function maxFactory(iterable, comparator, mapper) {
        if (!comparator) {
          comparator = defaultComparator;
        }
        if (mapper) {
          var entry = iterable.toSeq().map(function(v2, k) {
            return [v2, mapper(v2, k, iterable)];
          }).reduce(function(a, b) {
            return maxCompare(comparator, a[1], b[1]) ? b : a;
          });
          return entry && entry[0];
        } else {
          return iterable.reduce(function(a, b) {
            return maxCompare(comparator, a, b) ? b : a;
          });
        }
      }
      function maxCompare(comparator, a, b) {
        var comp = comparator(b, a);
        return comp === 0 && b !== a && (b === void 0 || b === null || b !== b) || comp > 0;
      }
      function zipWithFactory(keyIter, zipper, iters) {
        var zipSequence = makeSequence(keyIter);
        zipSequence.size = new ArraySeq(iters).map(function(i2) {
          return i2.size;
        }).min();
        zipSequence.__iterate = function(fn, reverse) {
          var iterator = this.__iterator(ITERATE_VALUES, reverse);
          var step;
          var iterations = 0;
          while (!(step = iterator.next()).done) {
            if (fn(step.value, iterations++, this) === false) {
              break;
            }
          }
          return iterations;
        };
        zipSequence.__iteratorUncached = function(type, reverse) {
          var iterators = iters.map(
            function(i2) {
              return i2 = Iterable(i2), getIterator(reverse ? i2.reverse() : i2);
            }
          );
          var iterations = 0;
          var isDone = false;
          return new Iterator(function() {
            var steps;
            if (!isDone) {
              steps = iterators.map(function(i2) {
                return i2.next();
              });
              isDone = steps.some(function(s) {
                return s.done;
              });
            }
            if (isDone) {
              return iteratorDone();
            }
            return iteratorValue(
              type,
              iterations++,
              zipper.apply(null, steps.map(function(s) {
                return s.value;
              }))
            );
          });
        };
        return zipSequence;
      }
      function reify(iter, seq) {
        return isSeq(iter) ? seq : iter.constructor(seq);
      }
      function validateEntry(entry) {
        if (entry !== Object(entry)) {
          throw new TypeError("Expected [K, V] tuple: " + entry);
        }
      }
      function resolveSize(iter) {
        assertNotInfinite(iter.size);
        return ensureSize(iter);
      }
      function iterableClass(iterable) {
        return isKeyed(iterable) ? KeyedIterable : isIndexed(iterable) ? IndexedIterable : SetIterable;
      }
      function makeSequence(iterable) {
        return Object.create(
          (isKeyed(iterable) ? KeyedSeq : isIndexed(iterable) ? IndexedSeq : SetSeq).prototype
        );
      }
      function cacheResultThrough() {
        if (this._iter.cacheResult) {
          this._iter.cacheResult();
          this.size = this._iter.size;
          return this;
        } else {
          return Seq.prototype.cacheResult.call(this);
        }
      }
      function defaultComparator(a, b) {
        return a > b ? 1 : a < b ? -1 : 0;
      }
      function forceIterator(keyPath) {
        var iter = getIterator(keyPath);
        if (!iter) {
          if (!isArrayLike(keyPath)) {
            throw new TypeError("Expected iterable or array-like: " + keyPath);
          }
          iter = getIterator(Iterable(keyPath));
        }
        return iter;
      }
      createClass2(Record, KeyedCollection);
      function Record(defaultValues, name) {
        var hasInitialized;
        var RecordType = function Record2(values) {
          if (values instanceof RecordType) {
            return values;
          }
          if (!(this instanceof RecordType)) {
            return new RecordType(values);
          }
          if (!hasInitialized) {
            hasInitialized = true;
            var keys = Object.keys(defaultValues);
            setProps(RecordTypePrototype, keys);
            RecordTypePrototype.size = keys.length;
            RecordTypePrototype._name = name;
            RecordTypePrototype._keys = keys;
            RecordTypePrototype._defaultValues = defaultValues;
          }
          this._map = Map2(values);
        };
        var RecordTypePrototype = RecordType.prototype = Object.create(RecordPrototype);
        RecordTypePrototype.constructor = RecordType;
        return RecordType;
      }
      Record.prototype.toString = function() {
        return this.__toString(recordName(this) + " {", "}");
      };
      Record.prototype.has = function(k) {
        return this._defaultValues.hasOwnProperty(k);
      };
      Record.prototype.get = function(k, notSetValue) {
        if (!this.has(k)) {
          return notSetValue;
        }
        var defaultVal = this._defaultValues[k];
        return this._map ? this._map.get(k, defaultVal) : defaultVal;
      };
      Record.prototype.clear = function() {
        if (this.__ownerID) {
          this._map && this._map.clear();
          return this;
        }
        var RecordType = this.constructor;
        return RecordType._empty || (RecordType._empty = makeRecord(this, emptyMap()));
      };
      Record.prototype.set = function(k, v2) {
        if (!this.has(k)) {
          throw new Error('Cannot set unknown key "' + k + '" on ' + recordName(this));
        }
        if (this._map && !this._map.has(k)) {
          var defaultVal = this._defaultValues[k];
          if (v2 === defaultVal) {
            return this;
          }
        }
        var newMap = this._map && this._map.set(k, v2);
        if (this.__ownerID || newMap === this._map) {
          return this;
        }
        return makeRecord(this, newMap);
      };
      Record.prototype.remove = function(k) {
        if (!this.has(k)) {
          return this;
        }
        var newMap = this._map && this._map.remove(k);
        if (this.__ownerID || newMap === this._map) {
          return this;
        }
        return makeRecord(this, newMap);
      };
      Record.prototype.wasAltered = function() {
        return this._map.wasAltered();
      };
      Record.prototype.__iterator = function(type, reverse) {
        var this$0 = this;
        return KeyedIterable(this._defaultValues).map(function(_, k) {
          return this$0.get(k);
        }).__iterator(type, reverse);
      };
      Record.prototype.__iterate = function(fn, reverse) {
        var this$0 = this;
        return KeyedIterable(this._defaultValues).map(function(_, k) {
          return this$0.get(k);
        }).__iterate(fn, reverse);
      };
      Record.prototype.__ensureOwner = function(ownerID) {
        if (ownerID === this.__ownerID) {
          return this;
        }
        var newMap = this._map && this._map.__ensureOwner(ownerID);
        if (!ownerID) {
          this.__ownerID = ownerID;
          this._map = newMap;
          return this;
        }
        return makeRecord(this, newMap, ownerID);
      };
      var RecordPrototype = Record.prototype;
      RecordPrototype[DELETE] = RecordPrototype.remove;
      RecordPrototype.deleteIn = RecordPrototype.removeIn = MapPrototype.removeIn;
      RecordPrototype.merge = MapPrototype.merge;
      RecordPrototype.mergeWith = MapPrototype.mergeWith;
      RecordPrototype.mergeIn = MapPrototype.mergeIn;
      RecordPrototype.mergeDeep = MapPrototype.mergeDeep;
      RecordPrototype.mergeDeepWith = MapPrototype.mergeDeepWith;
      RecordPrototype.mergeDeepIn = MapPrototype.mergeDeepIn;
      RecordPrototype.setIn = MapPrototype.setIn;
      RecordPrototype.update = MapPrototype.update;
      RecordPrototype.updateIn = MapPrototype.updateIn;
      RecordPrototype.withMutations = MapPrototype.withMutations;
      RecordPrototype.asMutable = MapPrototype.asMutable;
      RecordPrototype.asImmutable = MapPrototype.asImmutable;
      function makeRecord(likeRecord, map, ownerID) {
        var record = Object.create(Object.getPrototypeOf(likeRecord));
        record._map = map;
        record.__ownerID = ownerID;
        return record;
      }
      function recordName(record) {
        return record._name || record.constructor.name || "Record";
      }
      function setProps(prototype, names) {
        try {
          names.forEach(setProp.bind(void 0, prototype));
        } catch (error) {
        }
      }
      function setProp(prototype, name) {
        Object.defineProperty(prototype, name, {
          get: function() {
            return this.get(name);
          },
          set: function(value) {
            invariant(this.__ownerID, "Cannot set on an immutable record.");
            this.set(name, value);
          }
        });
      }
      createClass2(Set2, SetCollection);
      function Set2(value) {
        return value === null || value === void 0 ? emptySet() : isSet(value) && !isOrdered(value) ? value : emptySet().withMutations(function(set2) {
          var iter = SetIterable(value);
          assertNotInfinite(iter.size);
          iter.forEach(function(v2) {
            return set2.add(v2);
          });
        });
      }
      Set2.of = function() {
        return this(arguments);
      };
      Set2.fromKeys = function(value) {
        return this(KeyedIterable(value).keySeq());
      };
      Set2.prototype.toString = function() {
        return this.__toString("Set {", "}");
      };
      Set2.prototype.has = function(value) {
        return this._map.has(value);
      };
      Set2.prototype.add = function(value) {
        return updateSet(this, this._map.set(value, true));
      };
      Set2.prototype.remove = function(value) {
        return updateSet(this, this._map.remove(value));
      };
      Set2.prototype.clear = function() {
        return updateSet(this, this._map.clear());
      };
      Set2.prototype.union = function() {
        var iters = SLICE$0.call(arguments, 0);
        iters = iters.filter(function(x2) {
          return x2.size !== 0;
        });
        if (iters.length === 0) {
          return this;
        }
        if (this.size === 0 && !this.__ownerID && iters.length === 1) {
          return this.constructor(iters[0]);
        }
        return this.withMutations(function(set2) {
          for (var ii2 = 0; ii2 < iters.length; ii2++) {
            SetIterable(iters[ii2]).forEach(function(value) {
              return set2.add(value);
            });
          }
        });
      };
      Set2.prototype.intersect = function() {
        var iters = SLICE$0.call(arguments, 0);
        if (iters.length === 0) {
          return this;
        }
        iters = iters.map(function(iter) {
          return SetIterable(iter);
        });
        var originalSet = this;
        return this.withMutations(function(set2) {
          originalSet.forEach(function(value) {
            if (!iters.every(function(iter) {
              return iter.includes(value);
            })) {
              set2.remove(value);
            }
          });
        });
      };
      Set2.prototype.subtract = function() {
        var iters = SLICE$0.call(arguments, 0);
        if (iters.length === 0) {
          return this;
        }
        iters = iters.map(function(iter) {
          return SetIterable(iter);
        });
        var originalSet = this;
        return this.withMutations(function(set2) {
          originalSet.forEach(function(value) {
            if (iters.some(function(iter) {
              return iter.includes(value);
            })) {
              set2.remove(value);
            }
          });
        });
      };
      Set2.prototype.merge = function() {
        return this.union.apply(this, arguments);
      };
      Set2.prototype.mergeWith = function(merger) {
        var iters = SLICE$0.call(arguments, 1);
        return this.union.apply(this, iters);
      };
      Set2.prototype.sort = function(comparator) {
        return OrderedSet(sortFactory(this, comparator));
      };
      Set2.prototype.sortBy = function(mapper, comparator) {
        return OrderedSet(sortFactory(this, comparator, mapper));
      };
      Set2.prototype.wasAltered = function() {
        return this._map.wasAltered();
      };
      Set2.prototype.__iterate = function(fn, reverse) {
        var this$0 = this;
        return this._map.__iterate(function(_, k) {
          return fn(k, k, this$0);
        }, reverse);
      };
      Set2.prototype.__iterator = function(type, reverse) {
        return this._map.map(function(_, k) {
          return k;
        }).__iterator(type, reverse);
      };
      Set2.prototype.__ensureOwner = function(ownerID) {
        if (ownerID === this.__ownerID) {
          return this;
        }
        var newMap = this._map.__ensureOwner(ownerID);
        if (!ownerID) {
          this.__ownerID = ownerID;
          this._map = newMap;
          return this;
        }
        return this.__make(newMap, ownerID);
      };
      function isSet(maybeSet) {
        return !!(maybeSet && maybeSet[IS_SET_SENTINEL]);
      }
      Set2.isSet = isSet;
      var IS_SET_SENTINEL = "@@__IMMUTABLE_SET__@@";
      var SetPrototype = Set2.prototype;
      SetPrototype[IS_SET_SENTINEL] = true;
      SetPrototype[DELETE] = SetPrototype.remove;
      SetPrototype.mergeDeep = SetPrototype.merge;
      SetPrototype.mergeDeepWith = SetPrototype.mergeWith;
      SetPrototype.withMutations = MapPrototype.withMutations;
      SetPrototype.asMutable = MapPrototype.asMutable;
      SetPrototype.asImmutable = MapPrototype.asImmutable;
      SetPrototype.__empty = emptySet;
      SetPrototype.__make = makeSet;
      function updateSet(set2, newMap) {
        if (set2.__ownerID) {
          set2.size = newMap.size;
          set2._map = newMap;
          return set2;
        }
        return newMap === set2._map ? set2 : newMap.size === 0 ? set2.__empty() : set2.__make(newMap);
      }
      function makeSet(map, ownerID) {
        var set2 = Object.create(SetPrototype);
        set2.size = map ? map.size : 0;
        set2._map = map;
        set2.__ownerID = ownerID;
        return set2;
      }
      var EMPTY_SET;
      function emptySet() {
        return EMPTY_SET || (EMPTY_SET = makeSet(emptyMap()));
      }
      createClass2(OrderedSet, Set2);
      function OrderedSet(value) {
        return value === null || value === void 0 ? emptyOrderedSet() : isOrderedSet(value) ? value : emptyOrderedSet().withMutations(function(set2) {
          var iter = SetIterable(value);
          assertNotInfinite(iter.size);
          iter.forEach(function(v2) {
            return set2.add(v2);
          });
        });
      }
      OrderedSet.of = function() {
        return this(arguments);
      };
      OrderedSet.fromKeys = function(value) {
        return this(KeyedIterable(value).keySeq());
      };
      OrderedSet.prototype.toString = function() {
        return this.__toString("OrderedSet {", "}");
      };
      function isOrderedSet(maybeOrderedSet) {
        return isSet(maybeOrderedSet) && isOrdered(maybeOrderedSet);
      }
      OrderedSet.isOrderedSet = isOrderedSet;
      var OrderedSetPrototype = OrderedSet.prototype;
      OrderedSetPrototype[IS_ORDERED_SENTINEL] = true;
      OrderedSetPrototype.__empty = emptyOrderedSet;
      OrderedSetPrototype.__make = makeOrderedSet;
      function makeOrderedSet(map, ownerID) {
        var set2 = Object.create(OrderedSetPrototype);
        set2.size = map ? map.size : 0;
        set2._map = map;
        set2.__ownerID = ownerID;
        return set2;
      }
      var EMPTY_ORDERED_SET;
      function emptyOrderedSet() {
        return EMPTY_ORDERED_SET || (EMPTY_ORDERED_SET = makeOrderedSet(emptyOrderedMap()));
      }
      createClass2(Stack, IndexedCollection);
      function Stack(value) {
        return value === null || value === void 0 ? emptyStack() : isStack(value) ? value : emptyStack().unshiftAll(value);
      }
      Stack.of = function() {
        return this(arguments);
      };
      Stack.prototype.toString = function() {
        return this.__toString("Stack [", "]");
      };
      Stack.prototype.get = function(index2, notSetValue) {
        var head = this._head;
        index2 = wrapIndex(this, index2);
        while (head && index2--) {
          head = head.next;
        }
        return head ? head.value : notSetValue;
      };
      Stack.prototype.peek = function() {
        return this._head && this._head.value;
      };
      Stack.prototype.push = function() {
        if (arguments.length === 0) {
          return this;
        }
        var newSize = this.size + arguments.length;
        var head = this._head;
        for (var ii2 = arguments.length - 1; ii2 >= 0; ii2--) {
          head = {
            value: arguments[ii2],
            next: head
          };
        }
        if (this.__ownerID) {
          this.size = newSize;
          this._head = head;
          this.__hash = void 0;
          this.__altered = true;
          return this;
        }
        return makeStack(newSize, head);
      };
      Stack.prototype.pushAll = function(iter) {
        iter = IndexedIterable(iter);
        if (iter.size === 0) {
          return this;
        }
        assertNotInfinite(iter.size);
        var newSize = this.size;
        var head = this._head;
        iter.reverse().forEach(function(value) {
          newSize++;
          head = {
            value,
            next: head
          };
        });
        if (this.__ownerID) {
          this.size = newSize;
          this._head = head;
          this.__hash = void 0;
          this.__altered = true;
          return this;
        }
        return makeStack(newSize, head);
      };
      Stack.prototype.pop = function() {
        return this.slice(1);
      };
      Stack.prototype.unshift = function() {
        return this.push.apply(this, arguments);
      };
      Stack.prototype.unshiftAll = function(iter) {
        return this.pushAll(iter);
      };
      Stack.prototype.shift = function() {
        return this.pop.apply(this, arguments);
      };
      Stack.prototype.clear = function() {
        if (this.size === 0) {
          return this;
        }
        if (this.__ownerID) {
          this.size = 0;
          this._head = void 0;
          this.__hash = void 0;
          this.__altered = true;
          return this;
        }
        return emptyStack();
      };
      Stack.prototype.slice = function(begin, end) {
        if (wholeSlice(begin, end, this.size)) {
          return this;
        }
        var resolvedBegin = resolveBegin(begin, this.size);
        var resolvedEnd = resolveEnd(end, this.size);
        if (resolvedEnd !== this.size) {
          return IndexedCollection.prototype.slice.call(this, begin, end);
        }
        var newSize = this.size - resolvedBegin;
        var head = this._head;
        while (resolvedBegin--) {
          head = head.next;
        }
        if (this.__ownerID) {
          this.size = newSize;
          this._head = head;
          this.__hash = void 0;
          this.__altered = true;
          return this;
        }
        return makeStack(newSize, head);
      };
      Stack.prototype.__ensureOwner = function(ownerID) {
        if (ownerID === this.__ownerID) {
          return this;
        }
        if (!ownerID) {
          this.__ownerID = ownerID;
          this.__altered = false;
          return this;
        }
        return makeStack(this.size, this._head, ownerID, this.__hash);
      };
      Stack.prototype.__iterate = function(fn, reverse) {
        if (reverse) {
          return this.reverse().__iterate(fn);
        }
        var iterations = 0;
        var node = this._head;
        while (node) {
          if (fn(node.value, iterations++, this) === false) {
            break;
          }
          node = node.next;
        }
        return iterations;
      };
      Stack.prototype.__iterator = function(type, reverse) {
        if (reverse) {
          return this.reverse().__iterator(type);
        }
        var iterations = 0;
        var node = this._head;
        return new Iterator(function() {
          if (node) {
            var value = node.value;
            node = node.next;
            return iteratorValue(type, iterations++, value);
          }
          return iteratorDone();
        });
      };
      function isStack(maybeStack) {
        return !!(maybeStack && maybeStack[IS_STACK_SENTINEL]);
      }
      Stack.isStack = isStack;
      var IS_STACK_SENTINEL = "@@__IMMUTABLE_STACK__@@";
      var StackPrototype = Stack.prototype;
      StackPrototype[IS_STACK_SENTINEL] = true;
      StackPrototype.withMutations = MapPrototype.withMutations;
      StackPrototype.asMutable = MapPrototype.asMutable;
      StackPrototype.asImmutable = MapPrototype.asImmutable;
      StackPrototype.wasAltered = MapPrototype.wasAltered;
      function makeStack(size, head, ownerID, hash2) {
        var map = Object.create(StackPrototype);
        map.size = size;
        map._head = head;
        map.__ownerID = ownerID;
        map.__hash = hash2;
        map.__altered = false;
        return map;
      }
      var EMPTY_STACK;
      function emptyStack() {
        return EMPTY_STACK || (EMPTY_STACK = makeStack(0));
      }
      function mixin(ctor, methods) {
        var keyCopier = function(key) {
          ctor.prototype[key] = methods[key];
        };
        Object.keys(methods).forEach(keyCopier);
        Object.getOwnPropertySymbols && Object.getOwnPropertySymbols(methods).forEach(keyCopier);
        return ctor;
      }
      Iterable.Iterator = Iterator;
      mixin(Iterable, {
        toArray: function() {
          assertNotInfinite(this.size);
          var array = new Array(this.size || 0);
          this.valueSeq().__iterate(function(v2, i2) {
            array[i2] = v2;
          });
          return array;
        },
        toIndexedSeq: function() {
          return new ToIndexedSequence(this);
        },
        toJS: function() {
          return this.toSeq().map(
            function(value) {
              return value && typeof value.toJS === "function" ? value.toJS() : value;
            }
          ).__toJS();
        },
        toJSON: function() {
          return this.toSeq().map(
            function(value) {
              return value && typeof value.toJSON === "function" ? value.toJSON() : value;
            }
          ).__toJS();
        },
        toKeyedSeq: function() {
          return new ToKeyedSequence(this, true);
        },
        toMap: function() {
          return Map2(this.toKeyedSeq());
        },
        toObject: function() {
          assertNotInfinite(this.size);
          var object = {};
          this.__iterate(function(v2, k) {
            object[k] = v2;
          });
          return object;
        },
        toOrderedMap: function() {
          return OrderedMap(this.toKeyedSeq());
        },
        toOrderedSet: function() {
          return OrderedSet(isKeyed(this) ? this.valueSeq() : this);
        },
        toSet: function() {
          return Set2(isKeyed(this) ? this.valueSeq() : this);
        },
        toSetSeq: function() {
          return new ToSetSequence(this);
        },
        toSeq: function() {
          return isIndexed(this) ? this.toIndexedSeq() : isKeyed(this) ? this.toKeyedSeq() : this.toSetSeq();
        },
        toStack: function() {
          return Stack(isKeyed(this) ? this.valueSeq() : this);
        },
        toList: function() {
          return List(isKeyed(this) ? this.valueSeq() : this);
        },
        toString: function() {
          return "[Iterable]";
        },
        __toString: function(head, tail) {
          if (this.size === 0) {
            return head + tail;
          }
          return head + " " + this.toSeq().map(this.__toStringMapper).join(", ") + " " + tail;
        },
        concat: function() {
          var values = SLICE$0.call(arguments, 0);
          return reify(this, concatFactory(this, values));
        },
        includes: function(searchValue) {
          return this.some(function(value) {
            return is(value, searchValue);
          });
        },
        entries: function() {
          return this.__iterator(ITERATE_ENTRIES);
        },
        every: function(predicate, context) {
          assertNotInfinite(this.size);
          var returnValue = true;
          this.__iterate(function(v2, k, c) {
            if (!predicate.call(context, v2, k, c)) {
              returnValue = false;
              return false;
            }
          });
          return returnValue;
        },
        filter: function(predicate, context) {
          return reify(this, filterFactory(this, predicate, context, true));
        },
        find: function(predicate, context, notSetValue) {
          var entry = this.findEntry(predicate, context);
          return entry ? entry[1] : notSetValue;
        },
        forEach: function(sideEffect, context) {
          assertNotInfinite(this.size);
          return this.__iterate(context ? sideEffect.bind(context) : sideEffect);
        },
        join: function(separator) {
          assertNotInfinite(this.size);
          separator = separator !== void 0 ? "" + separator : ",";
          var joined = "";
          var isFirst = true;
          this.__iterate(function(v2) {
            isFirst ? isFirst = false : joined += separator;
            joined += v2 !== null && v2 !== void 0 ? v2.toString() : "";
          });
          return joined;
        },
        keys: function() {
          return this.__iterator(ITERATE_KEYS);
        },
        map: function(mapper, context) {
          return reify(this, mapFactory(this, mapper, context));
        },
        reduce: function(reducer, initialReduction, context) {
          assertNotInfinite(this.size);
          var reduction;
          var useFirst;
          if (arguments.length < 2) {
            useFirst = true;
          } else {
            reduction = initialReduction;
          }
          this.__iterate(function(v2, k, c) {
            if (useFirst) {
              useFirst = false;
              reduction = v2;
            } else {
              reduction = reducer.call(context, reduction, v2, k, c);
            }
          });
          return reduction;
        },
        reduceRight: function(reducer, initialReduction, context) {
          var reversed = this.toKeyedSeq().reverse();
          return reversed.reduce.apply(reversed, arguments);
        },
        reverse: function() {
          return reify(this, reverseFactory(this, true));
        },
        slice: function(begin, end) {
          return reify(this, sliceFactory(this, begin, end, true));
        },
        some: function(predicate, context) {
          return !this.every(not(predicate), context);
        },
        sort: function(comparator) {
          return reify(this, sortFactory(this, comparator));
        },
        values: function() {
          return this.__iterator(ITERATE_VALUES);
        },
        butLast: function() {
          return this.slice(0, -1);
        },
        isEmpty: function() {
          return this.size !== void 0 ? this.size === 0 : !this.some(function() {
            return true;
          });
        },
        count: function(predicate, context) {
          return ensureSize(
            predicate ? this.toSeq().filter(predicate, context) : this
          );
        },
        countBy: function(grouper, context) {
          return countByFactory(this, grouper, context);
        },
        equals: function(other) {
          return deepEqual(this, other);
        },
        entrySeq: function() {
          var iterable = this;
          if (iterable._cache) {
            return new ArraySeq(iterable._cache);
          }
          var entriesSequence = iterable.toSeq().map(entryMapper).toIndexedSeq();
          entriesSequence.fromEntrySeq = function() {
            return iterable.toSeq();
          };
          return entriesSequence;
        },
        filterNot: function(predicate, context) {
          return this.filter(not(predicate), context);
        },
        findEntry: function(predicate, context, notSetValue) {
          var found = notSetValue;
          this.__iterate(function(v2, k, c) {
            if (predicate.call(context, v2, k, c)) {
              found = [k, v2];
              return false;
            }
          });
          return found;
        },
        findKey: function(predicate, context) {
          var entry = this.findEntry(predicate, context);
          return entry && entry[0];
        },
        findLast: function(predicate, context, notSetValue) {
          return this.toKeyedSeq().reverse().find(predicate, context, notSetValue);
        },
        findLastEntry: function(predicate, context, notSetValue) {
          return this.toKeyedSeq().reverse().findEntry(predicate, context, notSetValue);
        },
        findLastKey: function(predicate, context) {
          return this.toKeyedSeq().reverse().findKey(predicate, context);
        },
        first: function() {
          return this.find(returnTrue);
        },
        flatMap: function(mapper, context) {
          return reify(this, flatMapFactory(this, mapper, context));
        },
        flatten: function(depth) {
          return reify(this, flattenFactory(this, depth, true));
        },
        fromEntrySeq: function() {
          return new FromEntriesSequence(this);
        },
        get: function(searchKey, notSetValue) {
          return this.find(function(_, key) {
            return is(key, searchKey);
          }, void 0, notSetValue);
        },
        getIn: function(searchKeyPath, notSetValue) {
          var nested = this;
          var iter = forceIterator(searchKeyPath);
          var step;
          while (!(step = iter.next()).done) {
            var key = step.value;
            nested = nested && nested.get ? nested.get(key, NOT_SET) : NOT_SET;
            if (nested === NOT_SET) {
              return notSetValue;
            }
          }
          return nested;
        },
        groupBy: function(grouper, context) {
          return groupByFactory(this, grouper, context);
        },
        has: function(searchKey) {
          return this.get(searchKey, NOT_SET) !== NOT_SET;
        },
        hasIn: function(searchKeyPath) {
          return this.getIn(searchKeyPath, NOT_SET) !== NOT_SET;
        },
        isSubset: function(iter) {
          iter = typeof iter.includes === "function" ? iter : Iterable(iter);
          return this.every(function(value) {
            return iter.includes(value);
          });
        },
        isSuperset: function(iter) {
          iter = typeof iter.isSubset === "function" ? iter : Iterable(iter);
          return iter.isSubset(this);
        },
        keyOf: function(searchValue) {
          return this.findKey(function(value) {
            return is(value, searchValue);
          });
        },
        keySeq: function() {
          return this.toSeq().map(keyMapper).toIndexedSeq();
        },
        last: function() {
          return this.toSeq().reverse().first();
        },
        lastKeyOf: function(searchValue) {
          return this.toKeyedSeq().reverse().keyOf(searchValue);
        },
        max: function(comparator) {
          return maxFactory(this, comparator);
        },
        maxBy: function(mapper, comparator) {
          return maxFactory(this, comparator, mapper);
        },
        min: function(comparator) {
          return maxFactory(this, comparator ? neg(comparator) : defaultNegComparator);
        },
        minBy: function(mapper, comparator) {
          return maxFactory(this, comparator ? neg(comparator) : defaultNegComparator, mapper);
        },
        rest: function() {
          return this.slice(1);
        },
        skip: function(amount) {
          return this.slice(Math.max(0, amount));
        },
        skipLast: function(amount) {
          return reify(this, this.toSeq().reverse().skip(amount).reverse());
        },
        skipWhile: function(predicate, context) {
          return reify(this, skipWhileFactory(this, predicate, context, true));
        },
        skipUntil: function(predicate, context) {
          return this.skipWhile(not(predicate), context);
        },
        sortBy: function(mapper, comparator) {
          return reify(this, sortFactory(this, comparator, mapper));
        },
        take: function(amount) {
          return this.slice(0, Math.max(0, amount));
        },
        takeLast: function(amount) {
          return reify(this, this.toSeq().reverse().take(amount).reverse());
        },
        takeWhile: function(predicate, context) {
          return reify(this, takeWhileFactory(this, predicate, context));
        },
        takeUntil: function(predicate, context) {
          return this.takeWhile(not(predicate), context);
        },
        valueSeq: function() {
          return this.toIndexedSeq();
        },
        hashCode: function() {
          return this.__hash || (this.__hash = hashIterable(this));
        }
      });
      var IterablePrototype = Iterable.prototype;
      IterablePrototype[IS_ITERABLE_SENTINEL] = true;
      IterablePrototype[ITERATOR_SYMBOL] = IterablePrototype.values;
      IterablePrototype.__toJS = IterablePrototype.toArray;
      IterablePrototype.__toStringMapper = quoteString;
      IterablePrototype.inspect = IterablePrototype.toSource = function() {
        return this.toString();
      };
      IterablePrototype.chain = IterablePrototype.flatMap;
      IterablePrototype.contains = IterablePrototype.includes;
      mixin(KeyedIterable, {
        flip: function() {
          return reify(this, flipFactory(this));
        },
        mapEntries: function(mapper, context) {
          var this$0 = this;
          var iterations = 0;
          return reify(
            this,
            this.toSeq().map(
              function(v2, k) {
                return mapper.call(context, [k, v2], iterations++, this$0);
              }
            ).fromEntrySeq()
          );
        },
        mapKeys: function(mapper, context) {
          var this$0 = this;
          return reify(
            this,
            this.toSeq().flip().map(
              function(k, v2) {
                return mapper.call(context, k, v2, this$0);
              }
            ).flip()
          );
        }
      });
      var KeyedIterablePrototype = KeyedIterable.prototype;
      KeyedIterablePrototype[IS_KEYED_SENTINEL] = true;
      KeyedIterablePrototype[ITERATOR_SYMBOL] = IterablePrototype.entries;
      KeyedIterablePrototype.__toJS = IterablePrototype.toObject;
      KeyedIterablePrototype.__toStringMapper = function(v2, k) {
        return JSON.stringify(k) + ": " + quoteString(v2);
      };
      mixin(IndexedIterable, {
        toKeyedSeq: function() {
          return new ToKeyedSequence(this, false);
        },
        filter: function(predicate, context) {
          return reify(this, filterFactory(this, predicate, context, false));
        },
        findIndex: function(predicate, context) {
          var entry = this.findEntry(predicate, context);
          return entry ? entry[0] : -1;
        },
        indexOf: function(searchValue) {
          var key = this.keyOf(searchValue);
          return key === void 0 ? -1 : key;
        },
        lastIndexOf: function(searchValue) {
          var key = this.lastKeyOf(searchValue);
          return key === void 0 ? -1 : key;
        },
        reverse: function() {
          return reify(this, reverseFactory(this, false));
        },
        slice: function(begin, end) {
          return reify(this, sliceFactory(this, begin, end, false));
        },
        splice: function(index2, removeNum) {
          var numArgs = arguments.length;
          removeNum = Math.max(removeNum | 0, 0);
          if (numArgs === 0 || numArgs === 2 && !removeNum) {
            return this;
          }
          index2 = resolveBegin(index2, index2 < 0 ? this.count() : this.size);
          var spliced = this.slice(0, index2);
          return reify(
            this,
            numArgs === 1 ? spliced : spliced.concat(arrCopy(arguments, 2), this.slice(index2 + removeNum))
          );
        },
        findLastIndex: function(predicate, context) {
          var entry = this.findLastEntry(predicate, context);
          return entry ? entry[0] : -1;
        },
        first: function() {
          return this.get(0);
        },
        flatten: function(depth) {
          return reify(this, flattenFactory(this, depth, false));
        },
        get: function(index2, notSetValue) {
          index2 = wrapIndex(this, index2);
          return index2 < 0 || (this.size === Infinity || this.size !== void 0 && index2 > this.size) ? notSetValue : this.find(function(_, key) {
            return key === index2;
          }, void 0, notSetValue);
        },
        has: function(index2) {
          index2 = wrapIndex(this, index2);
          return index2 >= 0 && (this.size !== void 0 ? this.size === Infinity || index2 < this.size : this.indexOf(index2) !== -1);
        },
        interpose: function(separator) {
          return reify(this, interposeFactory(this, separator));
        },
        interleave: function() {
          var iterables = [this].concat(arrCopy(arguments));
          var zipped = zipWithFactory(this.toSeq(), IndexedSeq.of, iterables);
          var interleaved = zipped.flatten(true);
          if (zipped.size) {
            interleaved.size = zipped.size * iterables.length;
          }
          return reify(this, interleaved);
        },
        keySeq: function() {
          return Range(0, this.size);
        },
        last: function() {
          return this.get(-1);
        },
        skipWhile: function(predicate, context) {
          return reify(this, skipWhileFactory(this, predicate, context, false));
        },
        zip: function() {
          var iterables = [this].concat(arrCopy(arguments));
          return reify(this, zipWithFactory(this, defaultZipper, iterables));
        },
        zipWith: function(zipper) {
          var iterables = arrCopy(arguments);
          iterables[0] = this;
          return reify(this, zipWithFactory(this, zipper, iterables));
        }
      });
      IndexedIterable.prototype[IS_INDEXED_SENTINEL] = true;
      IndexedIterable.prototype[IS_ORDERED_SENTINEL] = true;
      mixin(SetIterable, {
        get: function(value, notSetValue) {
          return this.has(value) ? value : notSetValue;
        },
        includes: function(value) {
          return this.has(value);
        },
        keySeq: function() {
          return this.valueSeq();
        }
      });
      SetIterable.prototype.has = IterablePrototype.includes;
      SetIterable.prototype.contains = SetIterable.prototype.includes;
      mixin(KeyedSeq, KeyedIterable.prototype);
      mixin(IndexedSeq, IndexedIterable.prototype);
      mixin(SetSeq, SetIterable.prototype);
      mixin(KeyedCollection, KeyedIterable.prototype);
      mixin(IndexedCollection, IndexedIterable.prototype);
      mixin(SetCollection, SetIterable.prototype);
      function keyMapper(v2, k) {
        return k;
      }
      function entryMapper(v2, k) {
        return [k, v2];
      }
      function not(predicate) {
        return function() {
          return !predicate.apply(this, arguments);
        };
      }
      function neg(predicate) {
        return function() {
          return -predicate.apply(this, arguments);
        };
      }
      function quoteString(value) {
        return typeof value === "string" ? JSON.stringify(value) : String(value);
      }
      function defaultZipper() {
        return arrCopy(arguments);
      }
      function defaultNegComparator(a, b) {
        return a < b ? 1 : a > b ? -1 : 0;
      }
      function hashIterable(iterable) {
        if (iterable.size === Infinity) {
          return 0;
        }
        var ordered = isOrdered(iterable);
        var keyed = isKeyed(iterable);
        var h2 = ordered ? 1 : 0;
        var size = iterable.__iterate(
          keyed ? ordered ? function(v2, k) {
            h2 = 31 * h2 + hashMerge(hash(v2), hash(k)) | 0;
          } : function(v2, k) {
            h2 = h2 + hashMerge(hash(v2), hash(k)) | 0;
          } : ordered ? function(v2) {
            h2 = 31 * h2 + hash(v2) | 0;
          } : function(v2) {
            h2 = h2 + hash(v2) | 0;
          }
        );
        return murmurHashOfSize(size, h2);
      }
      function murmurHashOfSize(size, h2) {
        h2 = imul(h2, 3432918353);
        h2 = imul(h2 << 15 | h2 >>> -15, 461845907);
        h2 = imul(h2 << 13 | h2 >>> -13, 5);
        h2 = (h2 + 3864292196 | 0) ^ size;
        h2 = imul(h2 ^ h2 >>> 16, 2246822507);
        h2 = imul(h2 ^ h2 >>> 13, 3266489909);
        h2 = smi(h2 ^ h2 >>> 16);
        return h2;
      }
      function hashMerge(a, b) {
        return a ^ b + 2654435769 + (a << 6) + (a >> 2) | 0;
      }
      var Immutable = {
        Iterable,
        Seq,
        Collection,
        Map: Map2,
        OrderedMap,
        List,
        Stack,
        Set: Set2,
        OrderedSet,
        Record,
        Range,
        Repeat,
        is,
        fromJS
      };
      return Immutable;
    });
  })(immutable$1);
  var postRobot$2 = { exports: {} };
  var postRobot$1 = { exports: {} };
  (function(module, exports) {
    !function(root2, factory) {
      module.exports = factory();
    }("undefined" != typeof self ? self : commonjsGlobal, function() {
      return function(modules) {
        var installedModules = {};
        function __webpack_require__(moduleId) {
          if (installedModules[moduleId])
            return installedModules[moduleId].exports;
          var module2 = installedModules[moduleId] = {
            i: moduleId,
            l: false,
            exports: {}
          };
          modules[moduleId].call(module2.exports, module2, module2.exports, __webpack_require__);
          module2.l = true;
          return module2.exports;
        }
        __webpack_require__.m = modules;
        __webpack_require__.c = installedModules;
        __webpack_require__.d = function(exports2, name, getter) {
          __webpack_require__.o(exports2, name) || Object.defineProperty(exports2, name, {
            configurable: false,
            enumerable: true,
            get: getter
          });
        };
        __webpack_require__.n = function(module2) {
          var getter = module2 && module2.__esModule ? function() {
            return module2.default;
          } : function() {
            return module2;
          };
          __webpack_require__.d(getter, "a", getter);
          return getter;
        };
        __webpack_require__.o = function(object, property) {
          return Object.prototype.hasOwnProperty.call(object, property);
        };
        __webpack_require__.p = "";
        return __webpack_require__(__webpack_require__.s = "./src/index.js");
      }({
        "./src/index.js": function(module2, __webpack_exports__, __webpack_require__) {
          Object.defineProperty(__webpack_exports__, "__esModule", {
            value: true
          });
          var interface_namespaceObject = {};
          __webpack_require__.d(interface_namespaceObject, "cleanUpWindow", function() {
            return cleanUpWindow;
          });
          __webpack_require__.d(interface_namespaceObject, "Promise", function() {
            return promise_ZalgoPromise;
          });
          __webpack_require__.d(interface_namespaceObject, "bridge", function() {
            return bridge;
          });
          __webpack_require__.d(interface_namespaceObject, "init", function() {
            return init2;
          });
          __webpack_require__.d(interface_namespaceObject, "parent", function() {
            return public_parent;
          });
          __webpack_require__.d(interface_namespaceObject, "send", function() {
            return _send;
          });
          __webpack_require__.d(interface_namespaceObject, "request", function() {
            return request;
          });
          __webpack_require__.d(interface_namespaceObject, "sendToParent", function() {
            return sendToParent;
          });
          __webpack_require__.d(interface_namespaceObject, "client", function() {
            return client;
          });
          __webpack_require__.d(interface_namespaceObject, "on", function() {
            return _on;
          });
          __webpack_require__.d(interface_namespaceObject, "listen", function() {
            return listen2;
          });
          __webpack_require__.d(interface_namespaceObject, "once", function() {
            return server_once;
          });
          __webpack_require__.d(interface_namespaceObject, "listener", function() {
            return server_listener;
          });
          __webpack_require__.d(interface_namespaceObject, "CONFIG", function() {
            return CONFIG;
          });
          __webpack_require__.d(interface_namespaceObject, "CONSTANTS", function() {
            return constants_CONSTANTS;
          });
          __webpack_require__.d(interface_namespaceObject, "disable", function() {
            return disable;
          });
          function isRegex(item) {
            return "[object RegExp]" === Object.prototype.toString.call(item);
          }
          var PROTOCOL = {
            MOCK: "mock:",
            FILE: "file:",
            ABOUT: "about:"
          }, WILDCARD = "*", IE_WIN_ACCESS_ERROR = "Call was rejected by callee.\r\n";
          function isAboutProtocol() {
            return (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : window).location.protocol === PROTOCOL.ABOUT;
          }
          function getParent() {
            var win = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : window;
            if (win)
              try {
                if (win.parent && win.parent !== win)
                  return win.parent;
              } catch (err) {
              }
          }
          function getOpener() {
            var win = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : window;
            if (win && !getParent(win))
              try {
                return win.opener;
              } catch (err) {
              }
          }
          function canReadFromWindow(win) {
            try {
              win && win.location && win.location.href;
              return true;
            } catch (err) {
            }
            return false;
          }
          function getActualDomain() {
            var win = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : window, location2 = win.location;
            if (!location2)
              throw new Error("Can not read window location");
            var protocol = location2.protocol;
            if (!protocol)
              throw new Error("Can not read window protocol");
            if (protocol === PROTOCOL.FILE)
              return PROTOCOL.FILE + "//";
            if (protocol === PROTOCOL.ABOUT) {
              var parent = getParent(win);
              return parent && canReadFromWindow(parent) ? getActualDomain(parent) : PROTOCOL.ABOUT + "//";
            }
            var host = location2.host;
            if (!host)
              throw new Error("Can not read window host");
            return protocol + "//" + host;
          }
          function utils_getDomain() {
            var win = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : window, domain = getActualDomain(win);
            return domain && win.mockDomain && 0 === win.mockDomain.indexOf(PROTOCOL.MOCK) ? win.mockDomain : domain;
          }
          function isActuallySameDomain(win) {
            try {
              if (win === window)
                return true;
            } catch (err) {
            }
            try {
              var desc = Object.getOwnPropertyDescriptor(win, "location");
              if (desc && false === desc.enumerable)
                return false;
            } catch (err) {
            }
            try {
              if (isAboutProtocol(win) && canReadFromWindow(win))
                return true;
            } catch (err) {
            }
            try {
              if (getActualDomain(win) === getActualDomain(window))
                return true;
            } catch (err) {
            }
            return false;
          }
          function isAncestorParent(parent, child) {
            if (!parent || !child)
              return false;
            var childParent = getParent(child);
            return childParent ? childParent === parent : -1 !== function(win) {
              var result = [];
              try {
                for (; win.parent !== win; ) {
                  result.push(win.parent);
                  win = win.parent;
                }
              } catch (err) {
              }
              return result;
            }(child).indexOf(parent);
          }
          function getFrames(win) {
            var result = [], frames = void 0;
            try {
              frames = win.frames;
            } catch (err) {
              frames = win;
            }
            var len = void 0;
            try {
              len = frames.length;
            } catch (err) {
            }
            if (0 === len)
              return result;
            if (len) {
              for (var i2 = 0; i2 < len; i2++) {
                var frame = void 0;
                try {
                  frame = frames[i2];
                } catch (err) {
                  continue;
                }
                result.push(frame);
              }
              return result;
            }
            for (var _i = 0; _i < 100; _i++) {
              var _frame = void 0;
              try {
                _frame = frames[_i];
              } catch (err) {
                return result;
              }
              if (!_frame)
                return result;
              result.push(_frame);
            }
            return result;
          }
          var iframeWindows = [], iframeFrames = [];
          function isWindowClosed(win) {
            var allowMock = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1];
            try {
              if (win === window)
                return false;
            } catch (err) {
              return true;
            }
            try {
              if (!win)
                return true;
            } catch (err) {
              return true;
            }
            try {
              if (win.closed)
                return true;
            } catch (err) {
              return !err || err.message !== IE_WIN_ACCESS_ERROR;
            }
            if (allowMock && function(win2) {
              if (!isActuallySameDomain(win2))
                return false;
              try {
                if (win2 === window)
                  return true;
                if (isAboutProtocol(win2) && canReadFromWindow(win2))
                  return true;
                if (utils_getDomain(window) === utils_getDomain(win2))
                  return true;
              } catch (err) {
              }
              return false;
            }(win))
              try {
                if (win.mockclosed)
                  return true;
              } catch (err) {
              }
            try {
              if (!win.parent || !win.top)
                return true;
            } catch (err) {
            }
            var iframeIndex = function(collection, item) {
              for (var i2 = 0; i2 < collection.length; i2++)
                try {
                  if (collection[i2] === item)
                    return i2;
                } catch (err) {
                }
              return -1;
            }(iframeWindows, win);
            if (-1 !== iframeIndex) {
              var frame = iframeFrames[iframeIndex];
              if (frame && function(frame2) {
                if (!frame2.contentWindow)
                  return true;
                if (!frame2.parentNode)
                  return true;
                var doc = frame2.ownerDocument;
                return !(!doc || !doc.documentElement || doc.documentElement.contains(frame2));
              }(frame))
                return true;
            }
            return false;
          }
          function getAncestor() {
            var win = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : window;
            return getOpener(win = win || window) || getParent(win) || void 0;
          }
          function matchDomain(pattern, origin) {
            if ("string" == typeof pattern) {
              if ("string" == typeof origin)
                return pattern === WILDCARD || origin === pattern;
              if (isRegex(origin))
                return false;
              if (Array.isArray(origin))
                return false;
            }
            return isRegex(pattern) ? isRegex(origin) ? pattern.toString() === origin.toString() : !Array.isArray(origin) && Boolean(origin.match(pattern)) : !!Array.isArray(pattern) && (Array.isArray(origin) ? JSON.stringify(pattern) === JSON.stringify(origin) : !isRegex(origin) && pattern.some(function(subpattern) {
              return matchDomain(subpattern, origin);
            }));
          }
          function isWindow(obj) {
            try {
              if (obj === window)
                return true;
            } catch (err) {
              if (err && err.message === IE_WIN_ACCESS_ERROR)
                return true;
            }
            try {
              if ("[object Window]" === Object.prototype.toString.call(obj))
                return true;
            } catch (err) {
              if (err && err.message === IE_WIN_ACCESS_ERROR)
                return true;
            }
            try {
              if (window.Window && obj instanceof window.Window)
                return true;
            } catch (err) {
              if (err && err.message === IE_WIN_ACCESS_ERROR)
                return true;
            }
            try {
              if (obj && obj.self === obj)
                return true;
            } catch (err) {
              if (err && err.message === IE_WIN_ACCESS_ERROR)
                return true;
            }
            try {
              if (obj && obj.parent === obj)
                return true;
            } catch (err) {
              if (err && err.message === IE_WIN_ACCESS_ERROR)
                return true;
            }
            try {
              if (obj && obj.top === obj)
                return true;
            } catch (err) {
              if (err && err.message === IE_WIN_ACCESS_ERROR)
                return true;
            }
            try {
              if (obj && "__unlikely_value__" === obj.__cross_domain_utils_window_check__)
                return false;
            } catch (err) {
              return true;
            }
            return false;
          }
          function util_safeIndexOf(collection, item) {
            for (var i2 = 0; i2 < collection.length; i2++)
              try {
                if (collection[i2] === item)
                  return i2;
              } catch (err) {
              }
            return -1;
          }
          var _ALLOWED_POST_MESSAGE, weakmap_CrossDomainSafeWeakMap = function() {
            function CrossDomainSafeWeakMap() {
              !function(instance, Constructor) {
                if (!(instance instanceof CrossDomainSafeWeakMap))
                  throw new TypeError("Cannot call a class as a function");
              }(this);
              this.name = "__weakmap_" + (1e9 * Math.random() >>> 0) + "__";
              if (function() {
                if ("undefined" == typeof WeakMap)
                  return false;
                if (void 0 === Object.freeze)
                  return false;
                try {
                  var testWeakMap = /* @__PURE__ */ new WeakMap(), testKey = {};
                  Object.freeze(testKey);
                  testWeakMap.set(testKey, "__testvalue__");
                  return "__testvalue__" === testWeakMap.get(testKey);
                } catch (err) {
                  return false;
                }
              }())
                try {
                  this.weakmap = /* @__PURE__ */ new WeakMap();
                } catch (err) {
                }
              this.keys = [];
              this.values = [];
            }
            CrossDomainSafeWeakMap.prototype._cleanupClosedWindows = function() {
              for (var weakmap = this.weakmap, keys = this.keys, i2 = 0; i2 < keys.length; i2++) {
                var value = keys[i2];
                if (isWindow(value) && isWindowClosed(value)) {
                  if (weakmap)
                    try {
                      weakmap.delete(value);
                    } catch (err) {
                    }
                  keys.splice(i2, 1);
                  this.values.splice(i2, 1);
                  i2 -= 1;
                }
              }
            };
            CrossDomainSafeWeakMap.prototype.isSafeToReadWrite = function(key) {
              if (isWindow(key))
                return false;
              try {
                key && key.self;
                key && key[this.name];
              } catch (err) {
                return false;
              }
              return true;
            };
            CrossDomainSafeWeakMap.prototype.set = function(key, value) {
              if (!key)
                throw new Error("WeakMap expected key");
              var weakmap = this.weakmap;
              if (weakmap)
                try {
                  weakmap.set(key, value);
                } catch (err) {
                  delete this.weakmap;
                }
              if (this.isSafeToReadWrite(key))
                try {
                  var name = this.name, entry = key[name];
                  entry && entry[0] === key ? entry[1] = value : Object.defineProperty(key, name, {
                    value: [key, value],
                    writable: true
                  });
                  return;
                } catch (err) {
                }
              this._cleanupClosedWindows();
              var keys = this.keys, values = this.values, index2 = util_safeIndexOf(keys, key);
              if (-1 === index2) {
                keys.push(key);
                values.push(value);
              } else
                values[index2] = value;
            };
            CrossDomainSafeWeakMap.prototype.get = function(key) {
              if (!key)
                throw new Error("WeakMap expected key");
              var weakmap = this.weakmap;
              if (weakmap)
                try {
                  if (weakmap.has(key))
                    return weakmap.get(key);
                } catch (err) {
                  delete this.weakmap;
                }
              if (this.isSafeToReadWrite(key))
                try {
                  var entry = key[this.name];
                  return entry && entry[0] === key ? entry[1] : void 0;
                } catch (err) {
                }
              this._cleanupClosedWindows();
              var index2 = util_safeIndexOf(this.keys, key);
              if (-1 !== index2)
                return this.values[index2];
            };
            CrossDomainSafeWeakMap.prototype.delete = function(key) {
              if (!key)
                throw new Error("WeakMap expected key");
              var weakmap = this.weakmap;
              if (weakmap)
                try {
                  weakmap.delete(key);
                } catch (err) {
                  delete this.weakmap;
                }
              if (this.isSafeToReadWrite(key))
                try {
                  var entry = key[this.name];
                  entry && entry[0] === key && (entry[0] = entry[1] = void 0);
                } catch (err) {
                }
              this._cleanupClosedWindows();
              var keys = this.keys, index2 = util_safeIndexOf(keys, key);
              if (-1 !== index2) {
                keys.splice(index2, 1);
                this.values.splice(index2, 1);
              }
            };
            CrossDomainSafeWeakMap.prototype.has = function(key) {
              if (!key)
                throw new Error("WeakMap expected key");
              var weakmap = this.weakmap;
              if (weakmap)
                try {
                  if (weakmap.has(key))
                    return true;
                } catch (err) {
                  delete this.weakmap;
                }
              if (this.isSafeToReadWrite(key))
                try {
                  var entry = key[this.name];
                  return !(!entry || entry[0] !== key);
                } catch (err) {
                }
              this._cleanupClosedWindows();
              return -1 !== util_safeIndexOf(this.keys, key);
            };
            CrossDomainSafeWeakMap.prototype.getOrSet = function(key, getter) {
              if (this.has(key))
                return this.get(key);
              var value = getter();
              this.set(key, value);
              return value;
            };
            return CrossDomainSafeWeakMap;
          }(), constants_CONSTANTS = {
            POST_MESSAGE_TYPE: {
              REQUEST: "postrobot_message_request",
              RESPONSE: "postrobot_message_response",
              ACK: "postrobot_message_ack"
            },
            POST_MESSAGE_ACK: {
              SUCCESS: "success",
              ERROR: "error"
            },
            POST_MESSAGE_NAMES: {
              METHOD: "postrobot_method",
              HELLO: "postrobot_ready",
              OPEN_TUNNEL: "postrobot_open_tunnel"
            },
            WINDOW_TYPES: {
              FULLPAGE: "fullpage",
              POPUP: "popup",
              IFRAME: "iframe"
            },
            WINDOW_PROPS: {
              POSTROBOT: "__postRobot__"
            },
            SERIALIZATION_TYPES: {
              METHOD: "postrobot_method",
              ERROR: "postrobot_error",
              PROMISE: "postrobot_promise",
              ZALGO_PROMISE: "postrobot_zalgo_promise",
              REGEX: "regex"
            },
            SEND_STRATEGIES: {
              POST_MESSAGE: "postrobot_post_message",
              BRIDGE: "postrobot_bridge",
              GLOBAL: "postrobot_global"
            },
            MOCK_PROTOCOL: "mock:",
            FILE_PROTOCOL: "file:",
            BRIDGE_NAME_PREFIX: "__postrobot_bridge__",
            POSTROBOT_PROXY: "__postrobot_proxy__",
            WILDCARD: "*"
          }, POST_MESSAGE_NAMES = {
            METHOD: "postrobot_method",
            HELLO: "postrobot_hello",
            OPEN_TUNNEL: "postrobot_open_tunnel"
          }, CONFIG = (Object.keys(POST_MESSAGE_NAMES).map(function(key) {
            return POST_MESSAGE_NAMES[key];
          }), {
            ALLOW_POSTMESSAGE_POPUP: !("__ALLOW_POSTMESSAGE_POPUP__" in window) || window.__ALLOW_POSTMESSAGE_POPUP__,
            BRIDGE_TIMEOUT: 5e3,
            CHILD_WINDOW_TIMEOUT: 5e3,
            ACK_TIMEOUT: -1 !== window.navigator.userAgent.match(/MSIE/i) ? 1e4 : 2e3,
            RES_TIMEOUT: -1,
            ALLOWED_POST_MESSAGE_METHODS: (_ALLOWED_POST_MESSAGE = {}, _ALLOWED_POST_MESSAGE[constants_CONSTANTS.SEND_STRATEGIES.POST_MESSAGE] = true, _ALLOWED_POST_MESSAGE[constants_CONSTANTS.SEND_STRATEGIES.BRIDGE] = true, _ALLOWED_POST_MESSAGE[constants_CONSTANTS.SEND_STRATEGIES.GLOBAL] = true, _ALLOWED_POST_MESSAGE),
            ALLOW_SAME_ORIGIN: false
          });
          0 === window.location.href.indexOf(constants_CONSTANTS.FILE_PROTOCOL) && (CONFIG.ALLOW_POSTMESSAGE_POPUP = true);
          var _typeof2 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(obj) {
            return typeof obj;
          } : function(obj) {
            return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
          };
          function stringifyError(err) {
            var level = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 1;
            if (level >= 3)
              return "stringifyError stack overflow";
            try {
              if (!err)
                return "<unknown error: " + Object.prototype.toString.call(err) + ">";
              if ("string" == typeof err)
                return err;
              if (err instanceof Error) {
                var stack = err && err.stack, message = err && err.message;
                if (stack && message)
                  return -1 !== stack.indexOf(message) ? stack : message + "\n" + stack;
                if (stack)
                  return stack;
                if (message)
                  return message;
              }
              return "function" == typeof err.toString ? err.toString() : Object.prototype.toString.call(err);
            } catch (newErr) {
              return "Error while stringifying error: " + stringifyError(newErr, level + 1);
            }
          }
          var once = function(method) {
            if (!method)
              return method;
            var called = false;
            return function() {
              if (!called) {
                called = true;
                return method.apply(this, arguments);
              }
            };
          };
          function lib_util_noop() {
          }
          function uniqueID() {
            var chars = "0123456789abcdef";
            return "xxxxxxxxxx".replace(/./g, function() {
              return chars.charAt(Math.floor(Math.random() * chars.length));
            });
          }
          function replaceObject(item, callback) {
            var depth = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1;
            if (depth >= 100)
              throw new Error("Self-referential object passed, or object contained too many layers");
            var newobj = void 0;
            if ("object" !== (void 0 === item ? "undefined" : _typeof2(item)) || null === item || Array.isArray(item)) {
              if (!Array.isArray(item))
                throw new TypeError("Invalid type: " + (void 0 === item ? "undefined" : _typeof2(item)));
              newobj = [];
            } else
              newobj = {};
            !function(item2, callback2) {
              Array.isArray(item2) ? function(item3, callback3) {
                for (var i2 = 0; i2 < item3.length; i2++)
                  callback3(item3[i2], i2);
              }(item2, callback2) : "object" === (void 0 === item2 ? "undefined" : _typeof2(item2)) && null !== item2 && function(item3, callback3) {
                for (var _key in item3)
                  item3.hasOwnProperty(_key) && callback3(item3[_key], _key);
              }(item2, callback2);
            }(item, function(childItem, key) {
              var result = callback(childItem, key);
              void 0 !== result ? newobj[key] = result : "object" === (void 0 === childItem ? "undefined" : _typeof2(childItem)) && null !== childItem ? newobj[key] = replaceObject(childItem, callback, depth + 1) : newobj[key] = childItem;
            });
            return newobj;
          }
          function util_isRegex(item) {
            return "[object RegExp]" === Object.prototype.toString.call(item);
          }
          function utils_isPromise(item) {
            try {
              if (!item)
                return false;
              if ("undefined" != typeof Promise && item instanceof Promise)
                return true;
              if ("undefined" != typeof window && "function" == typeof window.Window && item instanceof window.Window)
                return false;
              if ("undefined" != typeof window && "function" == typeof window.constructor && item instanceof window.constructor)
                return false;
              var _toString = {}.toString;
              if (_toString) {
                var name = _toString.call(item);
                if ("[object Window]" === name || "[object global]" === name || "[object DOMWindow]" === name)
                  return false;
              }
              if ("function" == typeof item.then)
                return true;
            } catch (err) {
              return false;
            }
            return false;
          }
          var dispatchedErrors = [], possiblyUnhandledPromiseHandlers = [], activeCount = 0, flushPromise = void 0;
          function flushActive() {
            if (!activeCount && flushPromise) {
              var promise = flushPromise;
              flushPromise = null;
              promise.resolve();
            }
          }
          function startActive() {
            activeCount += 1;
          }
          function endActive() {
            activeCount -= 1;
            flushActive();
          }
          var promise_ZalgoPromise = function() {
            function ZalgoPromise(handler) {
              var _this = this;
              !function(instance, Constructor) {
                if (!(instance instanceof ZalgoPromise))
                  throw new TypeError("Cannot call a class as a function");
              }(this);
              this.resolved = false;
              this.rejected = false;
              this.errorHandled = false;
              this.handlers = [];
              if (handler) {
                var _result = void 0, _error = void 0, resolved = false, rejected = false, isAsync = false;
                startActive();
                try {
                  handler(function(res) {
                    if (isAsync)
                      _this.resolve(res);
                    else {
                      resolved = true;
                      _result = res;
                    }
                  }, function(err) {
                    if (isAsync)
                      _this.reject(err);
                    else {
                      rejected = true;
                      _error = err;
                    }
                  });
                } catch (err) {
                  endActive();
                  this.reject(err);
                  return;
                }
                endActive();
                isAsync = true;
                resolved ? this.resolve(_result) : rejected && this.reject(_error);
              }
            }
            ZalgoPromise.prototype.resolve = function(result) {
              if (this.resolved || this.rejected)
                return this;
              if (utils_isPromise(result))
                throw new Error("Can not resolve promise with another promise");
              this.resolved = true;
              this.value = result;
              this.dispatch();
              return this;
            };
            ZalgoPromise.prototype.reject = function(error) {
              var _this2 = this;
              if (this.resolved || this.rejected)
                return this;
              if (utils_isPromise(error))
                throw new Error("Can not reject promise with another promise");
              if (!error) {
                var _err = error && "function" == typeof error.toString ? error.toString() : Object.prototype.toString.call(error);
                error = new Error("Expected reject to be called with Error, got " + _err);
              }
              this.rejected = true;
              this.error = error;
              this.errorHandled || setTimeout(function() {
                _this2.errorHandled || function(err, promise) {
                  if (-1 === dispatchedErrors.indexOf(err)) {
                    dispatchedErrors.push(err);
                    setTimeout(function() {
                      throw err;
                    }, 1);
                    for (var j = 0; j < possiblyUnhandledPromiseHandlers.length; j++)
                      possiblyUnhandledPromiseHandlers[j](err, promise);
                  }
                }(error, _this2);
              }, 1);
              this.dispatch();
              return this;
            };
            ZalgoPromise.prototype.asyncReject = function(error) {
              this.errorHandled = true;
              this.reject(error);
              return this;
            };
            ZalgoPromise.prototype.dispatch = function() {
              var dispatching = this.dispatching, resolved = this.resolved, rejected = this.rejected, handlers = this.handlers;
              if (!dispatching && (resolved || rejected)) {
                this.dispatching = true;
                startActive();
                for (var chain = function(firstPromise, secondPromise) {
                  return firstPromise.then(function(res) {
                    secondPromise.resolve(res);
                  }, function(err) {
                    secondPromise.reject(err);
                  });
                }, i2 = 0; i2 < handlers.length; i2++) {
                  var _handlers$i = handlers[i2], _onSuccess = _handlers$i.onSuccess, _onError = _handlers$i.onError, _promise = _handlers$i.promise, _result2 = void 0;
                  if (resolved)
                    try {
                      _result2 = _onSuccess ? _onSuccess(this.value) : this.value;
                    } catch (err) {
                      _promise.reject(err);
                      continue;
                    }
                  else if (rejected) {
                    if (!_onError) {
                      _promise.reject(this.error);
                      continue;
                    }
                    try {
                      _result2 = _onError(this.error);
                    } catch (err) {
                      _promise.reject(err);
                      continue;
                    }
                  }
                  if (_result2 instanceof ZalgoPromise && (_result2.resolved || _result2.rejected)) {
                    _result2.resolved ? _promise.resolve(_result2.value) : _promise.reject(_result2.error);
                    _result2.errorHandled = true;
                  } else
                    utils_isPromise(_result2) ? _result2 instanceof ZalgoPromise && (_result2.resolved || _result2.rejected) ? _result2.resolved ? _promise.resolve(_result2.value) : _promise.reject(_result2.error) : chain(_result2, _promise) : _promise.resolve(_result2);
                }
                handlers.length = 0;
                this.dispatching = false;
                endActive();
              }
            };
            ZalgoPromise.prototype.then = function(onSuccess, onError) {
              if (onSuccess && "function" != typeof onSuccess && !onSuccess.call)
                throw new Error("Promise.then expected a function for success handler");
              if (onError && "function" != typeof onError && !onError.call)
                throw new Error("Promise.then expected a function for error handler");
              var promise = new ZalgoPromise();
              this.handlers.push({
                promise,
                onSuccess,
                onError
              });
              this.errorHandled = true;
              this.dispatch();
              return promise;
            };
            ZalgoPromise.prototype.catch = function(onError) {
              return this.then(void 0, onError);
            };
            ZalgoPromise.prototype.finally = function(onFinally) {
              if (onFinally && "function" != typeof onFinally && !onFinally.call)
                throw new Error("Promise.finally expected a function");
              return this.then(function(result) {
                return ZalgoPromise.try(onFinally).then(function() {
                  return result;
                });
              }, function(err) {
                return ZalgoPromise.try(onFinally).then(function() {
                  throw err;
                });
              });
            };
            ZalgoPromise.prototype.timeout = function(time, err) {
              var _this3 = this;
              if (this.resolved || this.rejected)
                return this;
              var timeout = setTimeout(function() {
                _this3.resolved || _this3.rejected || _this3.reject(err || new Error("Promise timed out after " + time + "ms"));
              }, time);
              return this.then(function(result) {
                clearTimeout(timeout);
                return result;
              });
            };
            ZalgoPromise.prototype.toPromise = function() {
              if ("undefined" == typeof Promise)
                throw new TypeError("Could not find Promise");
              return Promise.resolve(this);
            };
            ZalgoPromise.resolve = function(value) {
              return value instanceof ZalgoPromise ? value : utils_isPromise(value) ? new ZalgoPromise(function(resolve, reject) {
                return value.then(resolve, reject);
              }) : new ZalgoPromise().resolve(value);
            };
            ZalgoPromise.reject = function(error) {
              return new ZalgoPromise().reject(error);
            };
            ZalgoPromise.asyncReject = function(error) {
              return new ZalgoPromise().asyncReject(error);
            };
            ZalgoPromise.all = function(promises) {
              var promise = new ZalgoPromise(), count = promises.length, results = [];
              if (!count) {
                promise.resolve(results);
                return promise;
              }
              for (var chain = function(i3, firstPromise, secondPromise) {
                return firstPromise.then(function(res) {
                  results[i3] = res;
                  0 == (count -= 1) && promise.resolve(results);
                }, function(err) {
                  secondPromise.reject(err);
                });
              }, i2 = 0; i2 < promises.length; i2++) {
                var prom = promises[i2];
                if (prom instanceof ZalgoPromise) {
                  if (prom.resolved) {
                    results[i2] = prom.value;
                    count -= 1;
                    continue;
                  }
                } else if (!utils_isPromise(prom)) {
                  results[i2] = prom;
                  count -= 1;
                  continue;
                }
                chain(i2, ZalgoPromise.resolve(prom), promise);
              }
              0 === count && promise.resolve(results);
              return promise;
            };
            ZalgoPromise.hash = function(promises) {
              var result = {};
              return ZalgoPromise.all(Object.keys(promises).map(function(key) {
                return ZalgoPromise.resolve(promises[key]).then(function(value) {
                  result[key] = value;
                });
              })).then(function() {
                return result;
              });
            };
            ZalgoPromise.map = function(items, method) {
              return ZalgoPromise.all(items.map(method));
            };
            ZalgoPromise.onPossiblyUnhandledException = function(handler) {
              return function(handler2) {
                possiblyUnhandledPromiseHandlers.push(handler2);
                return {
                  cancel: function() {
                    possiblyUnhandledPromiseHandlers.splice(possiblyUnhandledPromiseHandlers.indexOf(handler2), 1);
                  }
                };
              }(handler);
            };
            ZalgoPromise.try = function(method, context, args) {
              if (method && "function" != typeof method && !method.call)
                throw new Error("Promise.try expected a function");
              var result = void 0;
              startActive();
              try {
                result = method.apply(context, args || []);
              } catch (err) {
                endActive();
                return ZalgoPromise.reject(err);
              }
              endActive();
              return ZalgoPromise.resolve(result);
            };
            ZalgoPromise.delay = function(_delay) {
              return new ZalgoPromise(function(resolve) {
                setTimeout(resolve, _delay);
              });
            };
            ZalgoPromise.isPromise = function(value) {
              return !!(value && value instanceof ZalgoPromise) || utils_isPromise(value);
            };
            ZalgoPromise.flush = function() {
              return function(Zalgo) {
                var promise = flushPromise = flushPromise || new ZalgoPromise();
                flushActive();
                return promise;
              }();
            };
            return ZalgoPromise;
          }(), global2 = window[constants_CONSTANTS.WINDOW_PROPS.POSTROBOT] = window[constants_CONSTANTS.WINDOW_PROPS.POSTROBOT] || {};
          global2.registerSelf = function() {
          };
          var serialize__typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(obj) {
            return typeof obj;
          } : function(obj) {
            return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
          };
          global2.methods = global2.methods || new weakmap_CrossDomainSafeWeakMap();
          var listenForMethods = once(function() {
            global2.on(constants_CONSTANTS.POST_MESSAGE_NAMES.METHOD, {
              origin: constants_CONSTANTS.WILDCARD
            }, function(_ref) {
              var source = _ref.source, origin = _ref.origin, data = _ref.data, methods = global2.methods.get(source);
              if (!methods)
                throw new Error("Could not find any methods this window has privileges to call");
              var meth = methods[data.id];
              if (!meth)
                throw new Error("Could not find method with id: " + data.id);
              if (!matchDomain(meth.domain, origin))
                throw new Error("Method domain " + meth.domain + " does not match origin " + origin);
              return promise_ZalgoPromise.try(function() {
                return meth.method.apply({
                  source,
                  origin,
                  data
                }, data.args);
              }).then(function(result) {
                return {
                  result,
                  id: data.id,
                  name: data.name
                };
              });
            });
          });
          function isSerialized(item, type) {
            return "object" === (void 0 === item ? "undefined" : serialize__typeof(item)) && null !== item && item.__type__ === type;
          }
          function serializeMethod(destination, domain, method, name) {
            var id2 = uniqueID(), methods = global2.methods.get(destination);
            if (!methods) {
              methods = {};
              global2.methods.set(destination, methods);
            }
            methods[id2] = {
              domain,
              method
            };
            return {
              __type__: constants_CONSTANTS.SERIALIZATION_TYPES.METHOD,
              __id__: id2,
              __name__: name
            };
          }
          function deserializeMethod(source, origin, obj) {
            function wrapper() {
              var args = Array.prototype.slice.call(arguments);
              return global2.send(source, constants_CONSTANTS.POST_MESSAGE_NAMES.METHOD, {
                id: obj.__id__,
                name: obj.__name__,
                args
              }, {
                domain: origin,
                timeout: -1
              }).then(function(_ref2) {
                return _ref2.data.result;
              }, function(err) {
                throw err;
              });
            }
            wrapper.__name__ = obj.__name__;
            wrapper.__xdomain__ = true;
            wrapper.source = source;
            wrapper.origin = origin;
            return wrapper;
          }
          function deserializeZalgoPromise(source, origin, prom) {
            return new promise_ZalgoPromise(function(resolve, reject) {
              return deserializeMethod(source, origin, prom.__then__)(resolve, reject);
            });
          }
          global2.readyPromises = global2.readyPromises || new weakmap_CrossDomainSafeWeakMap();
          function sayHello(win) {
            return global2.send(win, constants_CONSTANTS.POST_MESSAGE_NAMES.HELLO, {}, {
              domain: constants_CONSTANTS.WILDCARD,
              timeout: -1
            }).then(function(_ref2) {
              return {
                origin: _ref2.origin
              };
            });
          }
          var SEND_MESSAGE_STRATEGIES = {};
          SEND_MESSAGE_STRATEGIES[constants_CONSTANTS.SEND_STRATEGIES.POST_MESSAGE] = function(win, serializedMessage, domain) {
            (Array.isArray(domain) ? domain : "string" == typeof domain ? [domain] : [constants_CONSTANTS.WILDCARD]).map(function(dom) {
              if (0 === dom.indexOf(constants_CONSTANTS.MOCK_PROTOCOL)) {
                if (window.location.protocol === constants_CONSTANTS.FILE_PROTOCOL)
                  return constants_CONSTANTS.WILDCARD;
                if (!isActuallySameDomain(win))
                  throw new Error("Attempting to send messsage to mock domain " + dom + ", but window is actually cross-domain");
                return getActualDomain(win);
              }
              return 0 === dom.indexOf(constants_CONSTANTS.FILE_PROTOCOL) ? constants_CONSTANTS.WILDCARD : dom;
            }).forEach(function(dom) {
              return win.postMessage(serializedMessage, dom);
            });
          };
          var _extends = Object.assign || function(target) {
            for (var i2 = 1; i2 < arguments.length; i2++) {
              var source = arguments[i2];
              for (var key in source)
                Object.prototype.hasOwnProperty.call(source, key) && (target[key] = source[key]);
            }
            return target;
          };
          function sendMessage(win, message, domain) {
            return promise_ZalgoPromise.try(function() {
              var _jsonStringify;
              message = function(win2, message2) {
                var options = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, id2 = uniqueID(), type = function() {
                  var win3 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : window;
                  return Boolean(getOpener(win3));
                }() ? constants_CONSTANTS.WINDOW_TYPES.POPUP : function() {
                  var win3 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : window;
                  return Boolean(getParent(win3));
                }() ? constants_CONSTANTS.WINDOW_TYPES.IFRAME : constants_CONSTANTS.WINDOW_TYPES.FULLPAGE, sourceDomain = utils_getDomain(window);
                return _extends({}, message2, options, {
                  sourceDomain,
                  id: message2.id || id2,
                  windowType: type
                });
              }(win, message, {
                data: function(destination, domain2, obj) {
                  return replaceObject({
                    obj: message.data
                  }, function(item, key) {
                    return "function" == typeof item ? serializeMethod(destination, domain2, item, key.toString()) : item instanceof Error ? (err = item, {
                      __type__: constants_CONSTANTS.SERIALIZATION_TYPES.ERROR,
                      __message__: stringifyError(err),
                      __code__: err.code
                    }) : window.Promise && item instanceof window.Promise ? function(destination2, domain3, promise, name) {
                      return {
                        __type__: constants_CONSTANTS.SERIALIZATION_TYPES.PROMISE,
                        __then__: serializeMethod(destination2, domain3, function(resolve, reject) {
                          return promise.then(resolve, reject);
                        }, name + ".then")
                      };
                    }(destination, domain2, item, key.toString()) : promise_ZalgoPromise.isPromise(item) ? function(destination2, domain3, promise, name) {
                      return {
                        __type__: constants_CONSTANTS.SERIALIZATION_TYPES.ZALGO_PROMISE,
                        __then__: serializeMethod(destination2, domain3, function(resolve, reject) {
                          return promise.then(resolve, reject);
                        }, name + ".then")
                      };
                    }(destination, domain2, item, key.toString()) : util_isRegex(item) ? (regex = item, {
                      __type__: constants_CONSTANTS.SERIALIZATION_TYPES.REGEX,
                      __source__: regex.source
                    }) : void 0;
                    var err, regex;
                  }).obj;
                }(win, domain),
                domain
              });
              if (win === window && !CONFIG.ALLOW_SAME_ORIGIN)
                throw new Error("Attemping to send message to self");
              if (isWindowClosed(win))
                throw new Error("Window is closed");
              var messages = [], serializedMessage = function(obj, replacer, indent) {
                var objectToJSON = void 0, arrayToJSON = void 0;
                try {
                  if ("{}" !== JSON.stringify({})) {
                    objectToJSON = Object.prototype.toJSON;
                    delete Object.prototype.toJSON;
                  }
                  if ("{}" !== JSON.stringify({}))
                    throw new Error("Can not correctly serialize JSON objects");
                  if ("[]" !== JSON.stringify([])) {
                    arrayToJSON = Array.prototype.toJSON;
                    delete Array.prototype.toJSON;
                  }
                  if ("[]" !== JSON.stringify([]))
                    throw new Error("Can not correctly serialize JSON objects");
                } catch (err) {
                  throw new Error("Can not repair JSON.stringify: " + err.message);
                }
                var result = JSON.stringify.call(this, obj, null, 2);
                try {
                  objectToJSON && (Object.prototype.toJSON = objectToJSON);
                  arrayToJSON && (Array.prototype.toJSON = arrayToJSON);
                } catch (err) {
                  throw new Error("Can not repair JSON.stringify: " + err.message);
                }
                return result;
              }(((_jsonStringify = {})[constants_CONSTANTS.WINDOW_PROPS.POSTROBOT] = message, _jsonStringify));
              return promise_ZalgoPromise.map(Object.keys(SEND_MESSAGE_STRATEGIES), function(strategyName) {
                return promise_ZalgoPromise.try(function() {
                  if (!CONFIG.ALLOWED_POST_MESSAGE_METHODS[strategyName])
                    throw new Error("Strategy disallowed: " + strategyName);
                  return SEND_MESSAGE_STRATEGIES[strategyName](win, serializedMessage, domain);
                }).then(function() {
                  messages.push(strategyName + ": success");
                  return true;
                }, function(err) {
                  messages.push(strategyName + ": " + stringifyError(err) + "\n");
                  return false;
                });
              }).then(function(results) {
                var success = results.some(Boolean), status = message.type + " " + message.name + " " + (success ? "success" : "error") + ":\n  - " + messages.join("\n  - ") + "\n";
                if (!success)
                  throw new Error(status);
              });
            });
          }
          global2.responseListeners = global2.responseListeners || {};
          global2.requestListeners = global2.requestListeners || {};
          global2.WINDOW_WILDCARD = global2.WINDOW_WILDCARD || new function() {
          }();
          global2.erroredResponseListeners = global2.erroredResponseListeners || {};
          var _RECEIVE_MESSAGE_TYPE, __DOMAIN_REGEX__ = "__domain_regex__";
          function getResponseListener(hash) {
            return global2.responseListeners[hash];
          }
          function deleteResponseListener(hash) {
            delete global2.responseListeners[hash];
          }
          function isResponseListenerErrored(hash) {
            return Boolean(global2.erroredResponseListeners[hash]);
          }
          function getRequestListener(_ref) {
            var name = _ref.name, win = _ref.win, domain = _ref.domain;
            win === constants_CONSTANTS.WILDCARD && (win = null);
            domain === constants_CONSTANTS.WILDCARD && (domain = null);
            if (!name)
              throw new Error("Name required to get request listener");
            var nameListeners = global2.requestListeners[name];
            if (nameListeners)
              for (var _i2 = 0, _ref3 = [win, global2.WINDOW_WILDCARD], _length2 = null == _ref3 ? 0 : _ref3.length; _i2 < _length2; _i2++) {
                var winQualifier = _ref3[_i2], winListeners = winQualifier && nameListeners.get(winQualifier);
                if (winListeners) {
                  if (domain && "string" == typeof domain) {
                    if (winListeners[domain])
                      return winListeners[domain];
                    if (winListeners[__DOMAIN_REGEX__])
                      for (var _i4 = 0, _winListeners$__DOMAI2 = winListeners[__DOMAIN_REGEX__], _length4 = null == _winListeners$__DOMAI2 ? 0 : _winListeners$__DOMAI2.length; _i4 < _length4; _i4++) {
                        var _ref5 = _winListeners$__DOMAI2[_i4], regex = _ref5.regex, listener = _ref5.listener;
                        if (matchDomain(regex, domain))
                          return listener;
                      }
                  }
                  if (winListeners[constants_CONSTANTS.WILDCARD])
                    return winListeners[constants_CONSTANTS.WILDCARD];
                }
              }
          }
          var types__extends = Object.assign || function(target) {
            for (var i2 = 1; i2 < arguments.length; i2++) {
              var source = arguments[i2];
              for (var key in source)
                Object.prototype.hasOwnProperty.call(source, key) && (target[key] = source[key]);
            }
            return target;
          }, RECEIVE_MESSAGE_TYPES = ((_RECEIVE_MESSAGE_TYPE = {})[constants_CONSTANTS.POST_MESSAGE_TYPE.ACK] = function(source, origin, message) {
            if (!isResponseListenerErrored(message.hash)) {
              var options = getResponseListener(message.hash);
              if (!options)
                throw new Error("No handler found for post message ack for message: " + message.name + " from " + origin + " in " + window.location.protocol + "//" + window.location.host + window.location.pathname);
              if (!matchDomain(options.domain, origin))
                throw new Error("Ack origin " + origin + " does not match domain " + options.domain.toString());
              options.ack = true;
            }
          }, _RECEIVE_MESSAGE_TYPE[constants_CONSTANTS.POST_MESSAGE_TYPE.REQUEST] = function(source, origin, message) {
            var options = getRequestListener({
              name: message.name,
              win: source,
              domain: origin
            });
            function respond(data) {
              return message.fireAndForget || isWindowClosed(source) ? promise_ZalgoPromise.resolve() : sendMessage(source, types__extends({
                target: message.originalSource,
                hash: message.hash,
                name: message.name
              }, data), origin);
            }
            return promise_ZalgoPromise.all([respond({
              type: constants_CONSTANTS.POST_MESSAGE_TYPE.ACK
            }), promise_ZalgoPromise.try(function() {
              if (!options)
                throw new Error("No handler found for post message: " + message.name + " from " + origin + " in " + window.location.protocol + "//" + window.location.host + window.location.pathname);
              if (!matchDomain(options.domain, origin))
                throw new Error("Request origin " + origin + " does not match domain " + options.domain.toString());
              var data = message.data;
              return options.handler({
                source,
                origin,
                data
              });
            }).then(function(data) {
              return respond({
                type: constants_CONSTANTS.POST_MESSAGE_TYPE.RESPONSE,
                ack: constants_CONSTANTS.POST_MESSAGE_ACK.SUCCESS,
                data
              });
            }, function(err) {
              var error = stringifyError(err).replace(/^Error: /, ""), code = err.code;
              return respond({
                type: constants_CONSTANTS.POST_MESSAGE_TYPE.RESPONSE,
                ack: constants_CONSTANTS.POST_MESSAGE_ACK.ERROR,
                error,
                code
              });
            })]).then(lib_util_noop).catch(function(err) {
              if (options && options.handleError)
                return options.handleError(err);
              throw err;
            });
          }, _RECEIVE_MESSAGE_TYPE[constants_CONSTANTS.POST_MESSAGE_TYPE.RESPONSE] = function(source, origin, message) {
            if (!isResponseListenerErrored(message.hash)) {
              var pattern, options = getResponseListener(message.hash);
              if (!options)
                throw new Error("No handler found for post message response for message: " + message.name + " from " + origin + " in " + window.location.protocol + "//" + window.location.host + window.location.pathname);
              if (!matchDomain(options.domain, origin))
                throw new Error("Response origin " + origin + " does not match domain " + (pattern = options.domain, Array.isArray(pattern) ? "(" + pattern.join(" | ") + ")" : isRegex(pattern) ? "RegExp(" + pattern.toString() : pattern.toString()));
              deleteResponseListener(message.hash);
              if (message.ack === constants_CONSTANTS.POST_MESSAGE_ACK.ERROR) {
                var err = new Error(message.error);
                message.code && (err.code = message.code);
                return options.respond(err, null);
              }
              if (message.ack === constants_CONSTANTS.POST_MESSAGE_ACK.SUCCESS) {
                var data = message.data || message.response;
                return options.respond(null, {
                  source,
                  origin,
                  data
                });
              }
            }
          }, _RECEIVE_MESSAGE_TYPE), receive__typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(obj) {
            return typeof obj;
          } : function(obj) {
            return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
          };
          global2.receivedMessages = global2.receivedMessages || [];
          function receiveMessage(event) {
            if (window && !window.closed) {
              try {
                if (!event.source)
                  return;
              } catch (err) {
                return;
              }
              var source = event.source, origin = event.origin, message = function(message2) {
                var item, parsedMessage = void 0;
                try {
                  parsedMessage = (item = message2, JSON.parse(item));
                } catch (err) {
                  return;
                }
                if (parsedMessage && "object" === (void 0 === parsedMessage ? "undefined" : receive__typeof(parsedMessage)) && null !== parsedMessage && (parsedMessage = parsedMessage[constants_CONSTANTS.WINDOW_PROPS.POSTROBOT]) && "object" === (void 0 === parsedMessage ? "undefined" : receive__typeof(parsedMessage)) && null !== parsedMessage && parsedMessage.type && "string" == typeof parsedMessage.type && RECEIVE_MESSAGE_TYPES[parsedMessage.type])
                  return parsedMessage;
              }(event.data);
              if (message) {
                if (!message.sourceDomain || "string" != typeof message.sourceDomain)
                  throw new Error("Expected message to have sourceDomain");
                0 !== message.sourceDomain.indexOf(constants_CONSTANTS.MOCK_PROTOCOL) && 0 !== message.sourceDomain.indexOf(constants_CONSTANTS.FILE_PROTOCOL) || (origin = message.sourceDomain);
                if (-1 === global2.receivedMessages.indexOf(message.id)) {
                  global2.receivedMessages.push(message.id);
                  if (!isWindowClosed(source) || message.fireAndForget) {
                    message.data && (message.data = function(source2, origin2, obj) {
                      return replaceObject({
                        obj: message.data
                      }, function(item) {
                        if ("object" === (void 0 === item ? "undefined" : serialize__typeof(item)) && null !== item)
                          return isSerialized(item, constants_CONSTANTS.SERIALIZATION_TYPES.METHOD) ? deserializeMethod(source2, origin2, item) : isSerialized(item, constants_CONSTANTS.SERIALIZATION_TYPES.ERROR) ? function(source3, origin3, obj2) {
                            var err = new Error(obj2.__message__);
                            obj2.__code__ && (err.code = obj2.__code__);
                            return err;
                          }(0, 0, item) : isSerialized(item, constants_CONSTANTS.SERIALIZATION_TYPES.PROMISE) ? function(source3, origin3, prom) {
                            return window.Promise ? new window.Promise(function(resolve, reject) {
                              return deserializeMethod(source3, origin3, prom.__then__)(resolve, reject);
                            }) : deserializeZalgoPromise(source3, origin3, prom);
                          }(source2, origin2, item) : isSerialized(item, constants_CONSTANTS.SERIALIZATION_TYPES.ZALGO_PROMISE) ? deserializeZalgoPromise(source2, origin2, item) : isSerialized(item, constants_CONSTANTS.SERIALIZATION_TYPES.REGEX) ? function(source3, origin3, item2) {
                            return new RegExp(item2.__source__);
                          }(0, 0, item) : void 0;
                      }).obj;
                    }(source, origin));
                    RECEIVE_MESSAGE_TYPES[message.type](source, origin, message);
                  }
                }
              }
            }
          }
          function messageListener(event) {
            try {
              event.source;
            } catch (err) {
              return;
            }
            receiveMessage({
              source: event.source || event.sourceElement,
              origin: event.origin || event.originalEvent && event.originalEvent.origin,
              data: event.data
            });
          }
          global2.receiveMessage = receiveMessage;
          global2.requestPromises = global2.requestPromises || new weakmap_CrossDomainSafeWeakMap();
          function request(options) {
            return promise_ZalgoPromise.try(function() {
              if (!options.name)
                throw new Error("Expected options.name");
              var name = options.name, targetWindow = void 0, domain = void 0;
              if ("string" == typeof options.window) {
                var el = document.getElementById(options.window);
                if (!el)
                  throw new Error("Expected options.window " + Object.prototype.toString.call(options.window) + " to be a valid element id");
                if ("iframe" !== el.tagName.toLowerCase())
                  throw new Error("Expected options.window " + Object.prototype.toString.call(options.window) + " to be an iframe");
                if (!el.contentWindow)
                  throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");
                targetWindow = el.contentWindow;
              } else if (options.window instanceof HTMLIFrameElement) {
                if ("iframe" !== options.window.tagName.toLowerCase())
                  throw new Error("Expected options.window " + Object.prototype.toString.call(options.window) + " to be an iframe");
                if (options.window && !options.window.contentWindow)
                  throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");
                options.window && options.window.contentWindow && (targetWindow = options.window.contentWindow);
              } else
                targetWindow = options.window;
              if (!targetWindow)
                throw new Error("Expected options.window to be a window object, iframe, or iframe element id.");
              var win = targetWindow;
              domain = options.domain || constants_CONSTANTS.WILDCARD;
              var hash = options.name + "_" + uniqueID();
              if (isWindowClosed(win))
                throw new Error("Target window is closed");
              var hasResult = false, requestPromises = global2.requestPromises.get(win);
              if (!requestPromises) {
                requestPromises = [];
                global2.requestPromises.set(win, requestPromises);
              }
              var requestPromise = promise_ZalgoPromise.try(function() {
                if (function(parent, child) {
                  var actualParent = getAncestor(child);
                  if (actualParent)
                    return actualParent === parent;
                  if (child === parent)
                    return false;
                  if (function() {
                    var win2 = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : window;
                    try {
                      if (win2.top)
                        return win2.top;
                    } catch (err) {
                    }
                    if (getParent(win2) === win2)
                      return win2;
                    try {
                      if (isAncestorParent(window, win2) && window.top)
                        return window.top;
                    } catch (err) {
                    }
                    try {
                      if (isAncestorParent(win2, window) && window.top)
                        return window.top;
                    } catch (err) {
                    }
                    for (var _i7 = 0, _getAllChildFrames4 = function getAllChildFrames(win3) {
                      for (var result = [], _i3 = 0, _getFrames2 = getFrames(win3), _length2 = null == _getFrames2 ? 0 : _getFrames2.length; _i3 < _length2; _i3++) {
                        var frame2 = _getFrames2[_i3];
                        result.push(frame2);
                        for (var _i5 = 0, _getAllChildFrames2 = getAllChildFrames(frame2), _length4 = null == _getAllChildFrames2 ? 0 : _getAllChildFrames2.length; _i5 < _length4; _i5++) {
                          var childFrame = _getAllChildFrames2[_i5];
                          result.push(childFrame);
                        }
                      }
                      return result;
                    }(win2), _length6 = null == _getAllChildFrames4 ? 0 : _getAllChildFrames4.length; _i7 < _length6; _i7++) {
                      var frame = _getAllChildFrames4[_i7];
                      try {
                        if (frame.top)
                          return frame.top;
                      } catch (err) {
                      }
                      if (getParent(frame) === frame)
                        return frame;
                    }
                  }(child) === child)
                    return false;
                  for (var _i15 = 0, _getFrames8 = getFrames(parent), _length14 = null == _getFrames8 ? 0 : _getFrames8.length; _i15 < _length14; _i15++)
                    if (_getFrames8[_i15] === child)
                      return true;
                  return false;
                }(window, win))
                  return function(win2) {
                    var timeout = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 5e3, name2 = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "Window", promise = global2.readyPromises.get(win2);
                    if (promise)
                      return promise;
                    promise = new promise_ZalgoPromise();
                    global2.readyPromises.set(win2, promise);
                    -1 !== timeout && setTimeout(function() {
                      return promise.reject(new Error(name2 + " did not load after " + timeout + "ms"));
                    }, timeout);
                    return promise;
                  }(win, options.timeout || CONFIG.CHILD_WINDOW_TIMEOUT);
              }).then(function() {
                var origin = (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}).origin;
                if (util_isRegex(domain) && !origin)
                  return sayHello(win);
              }).then(function() {
                var origin = (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}).origin;
                if (util_isRegex(domain)) {
                  if (!matchDomain(domain, origin))
                    throw new Error("Remote window domain " + origin + " does not match regex: " + domain.toString());
                  domain = origin;
                }
                if ("string" != typeof domain && !Array.isArray(domain))
                  throw new TypeError("Expected domain to be a string or array");
                var actualDomain = domain;
                return new promise_ZalgoPromise(function(resolve, reject) {
                  var responseListener = void 0;
                  options.fireAndForget || function(hash2, listener) {
                    global2.responseListeners[hash2] = listener;
                  }(hash, responseListener = {
                    name,
                    window: win,
                    domain: actualDomain,
                    respond: function(err, result) {
                      if (!err) {
                        hasResult = true;
                        requestPromises.splice(requestPromises.indexOf(requestPromise, 1));
                      }
                      err ? reject(err) : resolve(result);
                    }
                  });
                  sendMessage(win, {
                    type: constants_CONSTANTS.POST_MESSAGE_TYPE.REQUEST,
                    hash,
                    name,
                    data: options.data,
                    fireAndForget: options.fireAndForget
                  }, actualDomain).catch(reject);
                  if (options.fireAndForget)
                    return resolve();
                  var ackTimeout = CONFIG.ACK_TIMEOUT, resTimeout = options.timeout || CONFIG.RES_TIMEOUT, cycleTime = 100;
                  setTimeout(function cycle() {
                    if (!hasResult) {
                      if (isWindowClosed(win))
                        return responseListener.ack ? reject(new Error("Window closed for " + name + " before response")) : reject(new Error("Window closed for " + name + " before ack"));
                      ackTimeout = Math.max(ackTimeout - cycleTime, 0);
                      -1 !== resTimeout && (resTimeout = Math.max(resTimeout - cycleTime, 0));
                      if (responseListener.ack) {
                        if (-1 === resTimeout)
                          return;
                        cycleTime = Math.min(resTimeout, 2e3);
                      } else {
                        if (0 === ackTimeout)
                          return reject(new Error("No ack for postMessage " + name + " in " + utils_getDomain() + " in " + CONFIG.ACK_TIMEOUT + "ms"));
                        if (0 === resTimeout)
                          return reject(new Error("No response for postMessage " + name + " in " + utils_getDomain() + " in " + (options.timeout || CONFIG.RES_TIMEOUT) + "ms"));
                      }
                      setTimeout(cycle, cycleTime);
                    }
                  }, cycleTime);
                });
              });
              requestPromise.catch(function() {
                !function(hash2) {
                  global2.erroredResponseListeners[hash2] = true;
                }(hash);
                deleteResponseListener(hash);
              });
              requestPromises.push(requestPromise);
              return requestPromise;
            });
          }
          function _send(window2, name, data, options) {
            (options = options || {}).window = window2;
            options.name = name;
            options.data = data;
            return request(options);
          }
          function sendToParent(name, data, options) {
            var win = getAncestor();
            return win ? _send(win, name, data, options) : new promise_ZalgoPromise(function(resolve, reject) {
              return reject(new Error("Window does not have a parent"));
            });
          }
          function client() {
            var options = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
            if (!options.window)
              throw new Error("Expected options.window");
            var win = options.window;
            return {
              send: function(name, data) {
                return _send(win, name, data, options);
              }
            };
          }
          global2.send = _send;
          var server__typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(obj) {
            return typeof obj;
          } : function(obj) {
            return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
          };
          function listen2(options) {
            if (!options.name)
              throw new Error("Expected options.name");
            if (!options.handler)
              throw new Error("Expected options.handler");
            var name = options.name, win = options.window, domain = options.domain, listenerOptions = {
              handler: options.handler,
              handleError: options.errorHandler || function(err) {
                throw err;
              },
              window: win,
              domain: domain || constants_CONSTANTS.WILDCARD,
              name
            }, requestListener = function addRequestListener(_ref6, listener) {
              var name2 = _ref6.name, win2 = _ref6.win, domain2 = _ref6.domain;
              if (!name2 || "string" != typeof name2)
                throw new Error("Name required to add request listener");
              if (Array.isArray(win2)) {
                for (var listenersCollection = [], _i6 = 0, _win2 = win2, _length6 = null == _win2 ? 0 : _win2.length; _i6 < _length6; _i6++) {
                  var item = _win2[_i6];
                  listenersCollection.push(addRequestListener({
                    name: name2,
                    domain: domain2,
                    win: item
                  }, listener));
                }
                return {
                  cancel: function() {
                    for (var _i8 = 0, _length8 = null == listenersCollection ? 0 : listenersCollection.length; _i8 < _length8; _i8++)
                      listenersCollection[_i8].cancel();
                  }
                };
              }
              if (Array.isArray(domain2)) {
                for (var _listenersCollection = [], _i10 = 0, _domain2 = domain2, _length10 = null == _domain2 ? 0 : _domain2.length; _i10 < _length10; _i10++) {
                  var _item = _domain2[_i10];
                  _listenersCollection.push(addRequestListener({
                    name: name2,
                    win: win2,
                    domain: _item
                  }, listener));
                }
                return {
                  cancel: function() {
                    for (var _i12 = 0, _length12 = null == _listenersCollection ? 0 : _listenersCollection.length; _i12 < _length12; _i12++)
                      _listenersCollection[_i12].cancel();
                  }
                };
              }
              var existingListener = getRequestListener({
                name: name2,
                win: win2,
                domain: domain2
              });
              win2 && win2 !== constants_CONSTANTS.WILDCARD || (win2 = global2.WINDOW_WILDCARD);
              domain2 = domain2 || constants_CONSTANTS.WILDCARD;
              if (existingListener)
                throw win2 && domain2 ? new Error("Request listener already exists for " + name2 + " on domain " + domain2.toString() + " for " + (win2 === global2.WINDOW_WILDCARD ? "wildcard" : "specified") + " window") : win2 ? new Error("Request listener already exists for " + name2 + " for " + (win2 === global2.WINDOW_WILDCARD ? "wildcard" : "specified") + " window") : domain2 ? new Error("Request listener already exists for " + name2 + " on domain " + domain2.toString()) : new Error("Request listener already exists for " + name2);
              var requestListeners = global2.requestListeners, nameListeners = requestListeners[name2];
              if (!nameListeners) {
                nameListeners = new weakmap_CrossDomainSafeWeakMap();
                requestListeners[name2] = nameListeners;
              }
              var winListeners = nameListeners.get(win2);
              if (!winListeners) {
                winListeners = {};
                nameListeners.set(win2, winListeners);
              }
              var strDomain = domain2.toString(), regexListeners = winListeners[__DOMAIN_REGEX__], regexListener = void 0;
              if (util_isRegex(domain2)) {
                if (!regexListeners) {
                  regexListeners = [];
                  winListeners[__DOMAIN_REGEX__] = regexListeners;
                }
                regexListener = {
                  regex: domain2,
                  listener
                };
                regexListeners.push(regexListener);
              } else
                winListeners[strDomain] = listener;
              return {
                cancel: function() {
                  if (winListeners) {
                    delete winListeners[strDomain];
                    win2 && 0 === Object.keys(winListeners).length && nameListeners.delete(win2);
                    regexListener && regexListeners.splice(regexListeners.indexOf(regexListener, 1));
                  }
                }
              };
            }({
              name,
              win,
              domain
            }, listenerOptions);
            if (options.once) {
              var _handler = listenerOptions.handler;
              listenerOptions.handler = once(function() {
                requestListener.cancel();
                return _handler.apply(this, arguments);
              });
            }
            if (listenerOptions.window && options.errorOnClose)
              var interval = function(method, time) {
                var timeout = void 0;
                timeout = setTimeout(function runInterval() {
                  timeout = setTimeout(runInterval, 50);
                  (function() {
                    if (win && "object" === (void 0 === win ? "undefined" : server__typeof(win)) && isWindowClosed(win)) {
                      interval.cancel();
                      listenerOptions.handleError(new Error("Post message target window is closed"));
                    }
                  }).call();
                }, 50);
                return {
                  cancel: function() {
                    clearTimeout(timeout);
                  }
                };
              }();
            return {
              cancel: function() {
                requestListener.cancel();
              }
            };
          }
          function _on(name, options, handler) {
            if ("function" == typeof options) {
              handler = options;
              options = {};
            }
            (options = options || {}).name = name;
            options.handler = handler || options.handler;
            return listen2(options);
          }
          function server_once(name) {
            var options = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, handler = arguments[2];
            if ("function" == typeof options) {
              handler = options;
              options = {};
            }
            options = options || {};
            handler = handler || options.handler;
            var errorHandler = options.errorHandler, promise = new promise_ZalgoPromise(function(resolve, reject) {
              (options = options || {}).name = name;
              options.once = true;
              options.handler = function(event) {
                resolve(event);
                if (handler)
                  return handler(event);
              };
              options.errorHandler = function(err) {
                reject(err);
                if (errorHandler)
                  return errorHandler(err);
              };
            }), onceListener = listen2(options);
            promise.cancel = onceListener.cancel;
            return promise;
          }
          function server_listener() {
            var options = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
            return {
              on: function(name, handler) {
                return _on(name, options, handler);
              }
            };
          }
          global2.on = _on;
          function disable() {
            delete window[constants_CONSTANTS.WINDOW_PROPS.POSTROBOT];
            window.removeEventListener("message", messageListener);
          }
          var public_parent = getAncestor();
          function cleanUpWindow(win) {
            var requestPromises = global2.requestPromises.get(win);
            if (requestPromises)
              for (var _i2 = 0, _length2 = null == requestPromises ? 0 : requestPromises.length; _i2 < _length2; _i2++)
                requestPromises[_i2].reject(new Error("No response from window - cleaned up"));
            global2.popupWindowsByWin && global2.popupWindowsByWin.delete(win);
            global2.remoteWindows && global2.remoteWindows.delete(win);
            global2.requestPromises.delete(win);
            global2.methods.delete(win);
            global2.readyPromises.delete(win);
          }
          var bridge = null;
          function init2() {
            if (!global2.initialized) {
              handler = messageListener, (obj = window).addEventListener ? obj.addEventListener("message", handler) : obj.attachEvent("onmessage", handler);
              !function() {
                handler2 = function(_ref3) {
                  var source = _ref3.source, origin = _ref3.origin, promise = global2.readyPromises.get(source) || new promise_ZalgoPromise();
                  promise.resolve({
                    origin
                  });
                  global2.readyPromises.set(source, promise);
                }, global2.on(constants_CONSTANTS.POST_MESSAGE_NAMES.HELLO, {
                  domain: constants_CONSTANTS.WILDCARD
                }, function(_ref) {
                  var source = _ref.source, origin = _ref.origin;
                  return handler2({
                    source,
                    origin
                  });
                });
                var handler2, parent = getAncestor();
                parent && sayHello(parent).catch(lib_util_noop);
              }();
              listenForMethods({
                on: _on,
                send: _send
              });
            }
            var obj, handler;
            global2.initialized = true;
          }
          init2();
          __webpack_require__.d(__webpack_exports__, "cleanUpWindow", function() {
            return cleanUpWindow;
          });
          __webpack_require__.d(__webpack_exports__, "Promise", function() {
            return promise_ZalgoPromise;
          });
          __webpack_require__.d(__webpack_exports__, "bridge", function() {
            return bridge;
          });
          __webpack_require__.d(__webpack_exports__, "init", function() {
            return init2;
          });
          __webpack_require__.d(__webpack_exports__, "parent", function() {
            return public_parent;
          });
          __webpack_require__.d(__webpack_exports__, "send", function() {
            return _send;
          });
          __webpack_require__.d(__webpack_exports__, "request", function() {
            return request;
          });
          __webpack_require__.d(__webpack_exports__, "sendToParent", function() {
            return sendToParent;
          });
          __webpack_require__.d(__webpack_exports__, "client", function() {
            return client;
          });
          __webpack_require__.d(__webpack_exports__, "on", function() {
            return _on;
          });
          __webpack_require__.d(__webpack_exports__, "listen", function() {
            return listen2;
          });
          __webpack_require__.d(__webpack_exports__, "once", function() {
            return server_once;
          });
          __webpack_require__.d(__webpack_exports__, "listener", function() {
            return server_listener;
          });
          __webpack_require__.d(__webpack_exports__, "CONFIG", function() {
            return CONFIG;
          });
          __webpack_require__.d(__webpack_exports__, "CONSTANTS", function() {
            return constants_CONSTANTS;
          });
          __webpack_require__.d(__webpack_exports__, "disable", function() {
            return disable;
          });
          __webpack_exports__.default = interface_namespaceObject;
        }
      });
    });
  })(postRobot$1);
  (function(module) {
    module.exports = postRobot$1.exports;
    module.exports.default = module.exports;
  })(postRobot$2);
  Object.defineProperty(cdpPluginApi, "__esModule", { value: true });
  var immutable = immutable$1.exports;
  var postRobot = postRobot$2.exports;
  function _interopDefaultLegacy$1(e) {
    return e && typeof e === "object" && "default" in e ? e : { "default": e };
  }
  var postRobot__default = /* @__PURE__ */ _interopDefaultLegacy$1(postRobot);
  var ANNOTATIONS_SERVICE = "ANNOTATIONS_SERVICE";
  var ASSET_SERVICE = "ASSET_SERVICE";
  var AUTH_SERVICE = "AUTH_SERVICE";
  var CLASS_SERVICE = "CLASS_SERVICE";
  var COMPETENCY_SERVICE = "COMPETENCY_SERVICE";
  var COURSEWARE_ITEM_SERVICE = "COURSEWARE_ITEM_SERVICE";
  var COURSEWARE_TARGET_SERVICE = "COURSEWARE_TARGET_SERVICE";
  var DEPRECATED_RESOURCE_SERVICE = "DEPRECATED_RESOURCE_SERVICE";
  var DRAG_STATE_SERVICE = "DRAG_STATE_SERVICE";
  var EDITOR_SERVICE = "EDITOR_SERVICE";
  var FEATURE_FLAG_SERVICE = "FEATURE_FLAG_SERVICE";
  var HISTORY_SERVICE = "HISTORY_SERVICE";
  var LOGGER_SERVICE = "LOGGER_SERVICE";
  var LIFECYCLE_SERVICE = "LIFECYCLE_SERVICE";
  var LTI_SERVICE = "LTI_SERVICE";
  var PLUGIN_SERVICE = "PLUGIN_SERVICE";
  var PROGRESS_SERVICE = "PROGRESS_SERVICE";
  var QUERY_SERVICE = "QUERY_SERVICE";
  var ROUTE_SERVICE = "ROUTE_SERVICE";
  var SELECTION_SERVICE = "SELECTION_SERVICE";
  var THEME_SERVICE = "THEME_SERVICE";
  var USER_SERVICE = "USER_SERVICE";
  var SCOPE_SERVICE = "SCOPE_SERVICE";
  var EVENT_SERVICE = "EVENT_SERVICE";
  var constants = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    ANNOTATIONS_SERVICE,
    ASSET_SERVICE,
    AUTH_SERVICE,
    CLASS_SERVICE,
    COMPETENCY_SERVICE,
    COURSEWARE_ITEM_SERVICE,
    COURSEWARE_TARGET_SERVICE,
    DEPRECATED_RESOURCE_SERVICE,
    DRAG_STATE_SERVICE,
    EDITOR_SERVICE,
    FEATURE_FLAG_SERVICE,
    HISTORY_SERVICE,
    LOGGER_SERVICE,
    LIFECYCLE_SERVICE,
    LTI_SERVICE,
    PLUGIN_SERVICE,
    PROGRESS_SERVICE,
    QUERY_SERVICE,
    ROUTE_SERVICE,
    SELECTION_SERVICE,
    THEME_SERVICE,
    USER_SERVICE,
    SCOPE_SERVICE,
    EVENT_SERVICE
  });
  var domains = {
    PATHWAY_BUILDER_TOOLS_LIST: "DOMAIN_PATHWAY_BUILDER_TOOLS_LIST"
  };
  var dragTypes = {
    TOOL_NEW: "DRAG_TYPE_TOOL_NEW"
  };
  var toolTypes = {
    TEXT: "TOOL_TYPE_TEXT",
    IMAGE: "TOOL_TYPE_IMAGE",
    TABLE: "TOOL_TYPE_TABLE",
    COMPONENT: "TOOL_TYPE_COMPONENT"
  };
  var events = {
    DRAGENTER: "CDPDragStateDragEnter",
    DRAGLEAVE: "CDPDragStateDragLeave",
    DROP: "CDPDragStateDrop"
  };
  var dragStateApi = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    domains,
    dragTypes,
    toolTypes,
    events
  });
  var PLATFORM_SCOPE = "PLATFORM_SCOPE";
  var PLUGIN_SCOPE = "PLUGIN_SCOPE";
  var getService = function() {
    var service;
    return function(services) {
      service = service || services.build({
        name: DRAG_STATE_SERVICE
      });
      return service;
    };
  }();
  var DragStateResource = function DragStateResource2(services) {
    return function(domainName) {
      return {
        addDraggable: function addDraggable(el, dragType, dragData, dragPreviewEl) {
          getService(services).addDraggable(el, domainName, dragType, dragData, dragPreviewEl);
        },
        removeDraggable: function removeDraggable(el) {
          getService(services).removeDraggable(el);
        }
      };
    };
  };
  function getDefaultExportFromCjs(x2) {
    return x2 && x2.__esModule && Object.prototype.hasOwnProperty.call(x2, "default") ? x2["default"] : x2;
  }
  var toConsumableArray = { exports: {} };
  var arrayWithoutHoles = { exports: {} };
  var arrayLikeToArray = { exports: {} };
  (function(module) {
    function _arrayLikeToArray2(arr, len) {
      if (len == null || len > arr.length)
        len = arr.length;
      for (var i2 = 0, arr2 = new Array(len); i2 < len; i2++) {
        arr2[i2] = arr[i2];
      }
      return arr2;
    }
    module.exports = _arrayLikeToArray2;
    module.exports["default"] = module.exports, module.exports.__esModule = true;
  })(arrayLikeToArray);
  (function(module) {
    var arrayLikeToArray$1 = arrayLikeToArray.exports;
    function _arrayWithoutHoles(arr) {
      if (Array.isArray(arr))
        return arrayLikeToArray$1(arr);
    }
    module.exports = _arrayWithoutHoles;
    module.exports["default"] = module.exports, module.exports.__esModule = true;
  })(arrayWithoutHoles);
  var iterableToArray = { exports: {} };
  (function(module) {
    function _iterableToArray(iter) {
      if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
        return Array.from(iter);
    }
    module.exports = _iterableToArray;
    module.exports["default"] = module.exports, module.exports.__esModule = true;
  })(iterableToArray);
  var unsupportedIterableToArray = { exports: {} };
  (function(module) {
    var arrayLikeToArray$1 = arrayLikeToArray.exports;
    function _unsupportedIterableToArray2(o, minLen) {
      if (!o)
        return;
      if (typeof o === "string")
        return arrayLikeToArray$1(o, minLen);
      var n2 = Object.prototype.toString.call(o).slice(8, -1);
      if (n2 === "Object" && o.constructor)
        n2 = o.constructor.name;
      if (n2 === "Map" || n2 === "Set")
        return Array.from(o);
      if (n2 === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
        return arrayLikeToArray$1(o, minLen);
    }
    module.exports = _unsupportedIterableToArray2;
    module.exports["default"] = module.exports, module.exports.__esModule = true;
  })(unsupportedIterableToArray);
  var nonIterableSpread = { exports: {} };
  (function(module) {
    function _nonIterableSpread() {
      throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }
    module.exports = _nonIterableSpread;
    module.exports["default"] = module.exports, module.exports.__esModule = true;
  })(nonIterableSpread);
  (function(module) {
    var arrayWithoutHoles$1 = arrayWithoutHoles.exports;
    var iterableToArray$1 = iterableToArray.exports;
    var unsupportedIterableToArray$1 = unsupportedIterableToArray.exports;
    var nonIterableSpread$1 = nonIterableSpread.exports;
    function _toConsumableArray2(arr) {
      return arrayWithoutHoles$1(arr) || iterableToArray$1(arr) || unsupportedIterableToArray$1(arr) || nonIterableSpread$1();
    }
    module.exports = _toConsumableArray2;
    module.exports["default"] = module.exports, module.exports.__esModule = true;
  })(toConsumableArray);
  var _toConsumableArray = /* @__PURE__ */ getDefaultExportFromCjs(toConsumableArray.exports);
  var classCallCheck = { exports: {} };
  (function(module) {
    function _classCallCheck2(instance, Constructor) {
      if (!(instance instanceof Constructor)) {
        throw new TypeError("Cannot call a class as a function");
      }
    }
    module.exports = _classCallCheck2;
    module.exports["default"] = module.exports, module.exports.__esModule = true;
  })(classCallCheck);
  var _classCallCheck = /* @__PURE__ */ getDefaultExportFromCjs(classCallCheck.exports);
  var createClass = { exports: {} };
  (function(module) {
    function _defineProperties(target, props) {
      for (var i2 = 0; i2 < props.length; i2++) {
        var descriptor = props[i2];
        descriptor.enumerable = descriptor.enumerable || false;
        descriptor.configurable = true;
        if ("value" in descriptor)
          descriptor.writable = true;
        Object.defineProperty(target, descriptor.key, descriptor);
      }
    }
    function _createClass2(Constructor, protoProps, staticProps) {
      if (protoProps)
        _defineProperties(Constructor.prototype, protoProps);
      if (staticProps)
        _defineProperties(Constructor, staticProps);
      return Constructor;
    }
    module.exports = _createClass2;
    module.exports["default"] = module.exports, module.exports.__esModule = true;
  })(createClass);
  var _createClass = /* @__PURE__ */ getDefaultExportFromCjs(createClass.exports);
  var EditorResource = /* @__PURE__ */ function() {
    function EditorResource2(services) {
      _classCallCheck(this, EditorResource2);
      this.scope = PLATFORM_SCOPE;
      this.services = services;
      this._initialize();
    }
    _createClass(EditorResource2, [{
      key: "_initialize",
      value: function _initialize() {
        this.editorServices = this.services.build({
          name: EDITOR_SERVICE
        });
      }
    }, {
      key: "_addScopeToSelection",
      value: function _addScopeToSelection(selection) {
        return {
          path: [this.scope].concat(_toConsumableArray(selection.path)),
          data: selection.data
        };
      }
    }, {
      key: "_generateCallback",
      value: function _generateCallback(callbackFn) {
        return function(selections) {
          callbackFn(selections);
        };
      }
    }, {
      key: "addToSelection",
      value: function addToSelection(selection) {
        var scopedSelection = this._addScopeToSelection(selection);
        this.editorServices.addSelection(scopedSelection);
      }
    }, {
      key: "select",
      value: function select(selection) {
        var scopedSelection = this._addScopeToSelection(selection);
        this.editorServices.clearSelection(scopedSelection.path);
        this.editorServices.addSelection(scopedSelection);
      }
    }, {
      key: "selection",
      value: function selection(_selection) {
        var _this = this;
        var scopedSelection = this._addScopeToSelection(_selection);
        return {
          subscribe: function subscribe(callbackFn) {
            return _this.editorServices.subscribeToSelection(scopedSelection, _this._generateCallback(callbackFn));
          }
        };
      }
    }]);
    return EditorResource2;
  }();
  var CDP = function CDP2(services) {
    return {
      dragState: DragStateResource(services),
      editor: function editor() {
        return new EditorResource(services);
      }
    };
  };
  var defineProperty$2 = { exports: {} };
  (function(module) {
    function _defineProperty2(obj, key, value) {
      if (key in obj) {
        Object.defineProperty(obj, key, {
          value,
          enumerable: true,
          configurable: true,
          writable: true
        });
      } else {
        obj[key] = value;
      }
      return obj;
    }
    module.exports = _defineProperty2;
    module.exports["default"] = module.exports, module.exports.__esModule = true;
  })(defineProperty$2);
  var _defineProperty$1 = /* @__PURE__ */ getDefaultExportFromCjs(defineProperty$2.exports);
  var objectWithoutProperties = { exports: {} };
  var objectWithoutPropertiesLoose = { exports: {} };
  (function(module) {
    function _objectWithoutPropertiesLoose(source, excluded) {
      if (source == null)
        return {};
      var target = {};
      var sourceKeys = Object.keys(source);
      var key, i2;
      for (i2 = 0; i2 < sourceKeys.length; i2++) {
        key = sourceKeys[i2];
        if (excluded.indexOf(key) >= 0)
          continue;
        target[key] = source[key];
      }
      return target;
    }
    module.exports = _objectWithoutPropertiesLoose;
    module.exports["default"] = module.exports, module.exports.__esModule = true;
  })(objectWithoutPropertiesLoose);
  (function(module) {
    var objectWithoutPropertiesLoose$1 = objectWithoutPropertiesLoose.exports;
    function _objectWithoutProperties2(source, excluded) {
      if (source == null)
        return {};
      var target = objectWithoutPropertiesLoose$1(source, excluded);
      var key, i2;
      if (Object.getOwnPropertySymbols) {
        var sourceSymbolKeys = Object.getOwnPropertySymbols(source);
        for (i2 = 0; i2 < sourceSymbolKeys.length; i2++) {
          key = sourceSymbolKeys[i2];
          if (excluded.indexOf(key) >= 0)
            continue;
          if (!Object.prototype.propertyIsEnumerable.call(source, key))
            continue;
          target[key] = source[key];
        }
      }
      return target;
    }
    module.exports = _objectWithoutProperties2;
    module.exports["default"] = module.exports, module.exports.__esModule = true;
  })(objectWithoutProperties);
  var _objectWithoutProperties = /* @__PURE__ */ getDefaultExportFromCjs(objectWithoutProperties.exports);
  function ownKeys$1(object, enumerableOnly) {
    var keys = Object.keys(object);
    if (Object.getOwnPropertySymbols) {
      var symbols = Object.getOwnPropertySymbols(object);
      if (enumerableOnly) {
        symbols = symbols.filter(function(sym) {
          return Object.getOwnPropertyDescriptor(object, sym).enumerable;
        });
      }
      keys.push.apply(keys, symbols);
    }
    return keys;
  }
  function _objectSpread$1(target) {
    for (var i2 = 1; i2 < arguments.length; i2++) {
      var source = arguments[i2] != null ? arguments[i2] : {};
      if (i2 % 2) {
        ownKeys$1(Object(source), true).forEach(function(key) {
          _defineProperty$1(target, key, source[key]);
        });
      } else if (Object.getOwnPropertyDescriptors) {
        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
      } else {
        ownKeys$1(Object(source)).forEach(function(key) {
          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
        });
      }
    }
    return target;
  }
  var ServiceFactory = /* @__PURE__ */ function() {
    function ServiceFactory2() {
      _classCallCheck(this, ServiceFactory2);
      this.services = {};
    }
    _createClass(ServiceFactory2, [{
      key: "add",
      value: function add(name, service) {
        var properties = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : void 0;
        this.services[name] = properties ? [service, properties] : service;
        return this;
      }
    }, {
      key: "get",
      value: function get(name) {
        return this.services[name];
      }
    }, {
      key: "build",
      value: function build(_ref) {
        var name = _ref.name, id2 = _ref.id, context = _ref.context, coursewareType = _ref.coursewareType, args = _objectWithoutProperties(_ref, ["name", "id", "context", "coursewareType"]);
        var service = this.get(name);
        if (service) {
          return Array.isArray(service) ? service[0].build(_objectSpread$1(_objectSpread$1({
            id: id2,
            context,
            coursewareType
          }, service[1]), args)) : service.build(_objectSpread$1({
            id: id2,
            context,
            coursewareType
          }, args));
        }
        throw new Error({
          type: "SERVICE_NOT_FOUND",
          message: "Service not registered",
          service: name,
          id: id2,
          context,
          coursewareType
        });
      }
    }]);
    return ServiceFactory2;
  }();
  var asyncToGenerator = { exports: {} };
  (function(module) {
    function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
      try {
        var info = gen[key](arg);
        var value = info.value;
      } catch (error) {
        reject(error);
        return;
      }
      if (info.done) {
        resolve(value);
      } else {
        Promise.resolve(value).then(_next, _throw);
      }
    }
    function _asyncToGenerator2(fn) {
      return function() {
        var self2 = this, args = arguments;
        return new Promise(function(resolve, reject) {
          var gen = fn.apply(self2, args);
          function _next(value) {
            asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
          }
          function _throw(err) {
            asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
          }
          _next(void 0);
        });
      };
    }
    module.exports = _asyncToGenerator2;
    module.exports["default"] = module.exports, module.exports.__esModule = true;
  })(asyncToGenerator);
  var _asyncToGenerator = /* @__PURE__ */ getDefaultExportFromCjs(asyncToGenerator.exports);
  var inherits = { exports: {} };
  var setPrototypeOf = { exports: {} };
  (function(module) {
    function _setPrototypeOf(o, p2) {
      module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf2(o2, p3) {
        o2.__proto__ = p3;
        return o2;
      };
      module.exports["default"] = module.exports, module.exports.__esModule = true;
      return _setPrototypeOf(o, p2);
    }
    module.exports = _setPrototypeOf;
    module.exports["default"] = module.exports, module.exports.__esModule = true;
  })(setPrototypeOf);
  (function(module) {
    var setPrototypeOf$1 = setPrototypeOf.exports;
    function _inherits2(subClass, superClass) {
      if (typeof superClass !== "function" && superClass !== null) {
        throw new TypeError("Super expression must either be null or a function");
      }
      subClass.prototype = Object.create(superClass && superClass.prototype, {
        constructor: {
          value: subClass,
          writable: true,
          configurable: true
        }
      });
      if (superClass)
        setPrototypeOf$1(subClass, superClass);
    }
    module.exports = _inherits2;
    module.exports["default"] = module.exports, module.exports.__esModule = true;
  })(inherits);
  var _inherits = /* @__PURE__ */ getDefaultExportFromCjs(inherits.exports);
  var possibleConstructorReturn = { exports: {} };
  var _typeof$1 = { exports: {} };
  (function(module) {
    function _typeof2(obj) {
      "@babel/helpers - typeof";
      if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
        module.exports = _typeof2 = function _typeof3(obj2) {
          return typeof obj2;
        };
        module.exports["default"] = module.exports, module.exports.__esModule = true;
      } else {
        module.exports = _typeof2 = function _typeof3(obj2) {
          return obj2 && typeof Symbol === "function" && obj2.constructor === Symbol && obj2 !== Symbol.prototype ? "symbol" : typeof obj2;
        };
        module.exports["default"] = module.exports, module.exports.__esModule = true;
      }
      return _typeof2(obj);
    }
    module.exports = _typeof2;
    module.exports["default"] = module.exports, module.exports.__esModule = true;
  })(_typeof$1);
  var _typeof = /* @__PURE__ */ getDefaultExportFromCjs(_typeof$1.exports);
  var assertThisInitialized = { exports: {} };
  (function(module) {
    function _assertThisInitialized(self2) {
      if (self2 === void 0) {
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      }
      return self2;
    }
    module.exports = _assertThisInitialized;
    module.exports["default"] = module.exports, module.exports.__esModule = true;
  })(assertThisInitialized);
  (function(module) {
    var _typeof2 = _typeof$1.exports["default"];
    var assertThisInitialized$1 = assertThisInitialized.exports;
    function _possibleConstructorReturn2(self2, call) {
      if (call && (_typeof2(call) === "object" || typeof call === "function")) {
        return call;
      } else if (call !== void 0) {
        throw new TypeError("Derived constructors may only return object or undefined");
      }
      return assertThisInitialized$1(self2);
    }
    module.exports = _possibleConstructorReturn2;
    module.exports["default"] = module.exports, module.exports.__esModule = true;
  })(possibleConstructorReturn);
  var _possibleConstructorReturn = /* @__PURE__ */ getDefaultExportFromCjs(possibleConstructorReturn.exports);
  var getPrototypeOf = { exports: {} };
  (function(module) {
    function _getPrototypeOf2(o) {
      module.exports = _getPrototypeOf2 = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf3(o2) {
        return o2.__proto__ || Object.getPrototypeOf(o2);
      };
      module.exports["default"] = module.exports, module.exports.__esModule = true;
      return _getPrototypeOf2(o);
    }
    module.exports = _getPrototypeOf2;
    module.exports["default"] = module.exports, module.exports.__esModule = true;
  })(getPrototypeOf);
  var _getPrototypeOf = /* @__PURE__ */ getDefaultExportFromCjs(getPrototypeOf.exports);
  var runtime = { exports: {} };
  (function(module) {
    var runtime2 = function(exports) {
      var Op = Object.prototype;
      var hasOwn = Op.hasOwnProperty;
      var undefined$1;
      var $Symbol = typeof Symbol === "function" ? Symbol : {};
      var iteratorSymbol = $Symbol.iterator || "@@iterator";
      var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";
      var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";
      function define2(obj, key, value) {
        Object.defineProperty(obj, key, {
          value,
          enumerable: true,
          configurable: true,
          writable: true
        });
        return obj[key];
      }
      try {
        define2({}, "");
      } catch (err) {
        define2 = function(obj, key, value) {
          return obj[key] = value;
        };
      }
      function wrap(innerFn, outerFn, self2, tryLocsList) {
        var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;
        var generator = Object.create(protoGenerator.prototype);
        var context = new Context(tryLocsList || []);
        generator._invoke = makeInvokeMethod(innerFn, self2, context);
        return generator;
      }
      exports.wrap = wrap;
      function tryCatch(fn, obj, arg) {
        try {
          return { type: "normal", arg: fn.call(obj, arg) };
        } catch (err) {
          return { type: "throw", arg: err };
        }
      }
      var GenStateSuspendedStart = "suspendedStart";
      var GenStateSuspendedYield = "suspendedYield";
      var GenStateExecuting = "executing";
      var GenStateCompleted = "completed";
      var ContinueSentinel = {};
      function Generator() {
      }
      function GeneratorFunction() {
      }
      function GeneratorFunctionPrototype() {
      }
      var IteratorPrototype = {};
      IteratorPrototype[iteratorSymbol] = function() {
        return this;
      };
      var getProto = Object.getPrototypeOf;
      var NativeIteratorPrototype = getProto && getProto(getProto(values([])));
      if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {
        IteratorPrototype = NativeIteratorPrototype;
      }
      var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);
      GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;
      GeneratorFunctionPrototype.constructor = GeneratorFunction;
      GeneratorFunction.displayName = define2(
        GeneratorFunctionPrototype,
        toStringTagSymbol,
        "GeneratorFunction"
      );
      function defineIteratorMethods(prototype) {
        ["next", "throw", "return"].forEach(function(method) {
          define2(prototype, method, function(arg) {
            return this._invoke(method, arg);
          });
        });
      }
      exports.isGeneratorFunction = function(genFun) {
        var ctor = typeof genFun === "function" && genFun.constructor;
        return ctor ? ctor === GeneratorFunction || (ctor.displayName || ctor.name) === "GeneratorFunction" : false;
      };
      exports.mark = function(genFun) {
        if (Object.setPrototypeOf) {
          Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);
        } else {
          genFun.__proto__ = GeneratorFunctionPrototype;
          define2(genFun, toStringTagSymbol, "GeneratorFunction");
        }
        genFun.prototype = Object.create(Gp);
        return genFun;
      };
      exports.awrap = function(arg) {
        return { __await: arg };
      };
      function AsyncIterator(generator, PromiseImpl) {
        function invoke(method, arg, resolve, reject) {
          var record = tryCatch(generator[method], generator, arg);
          if (record.type === "throw") {
            reject(record.arg);
          } else {
            var result = record.arg;
            var value = result.value;
            if (value && typeof value === "object" && hasOwn.call(value, "__await")) {
              return PromiseImpl.resolve(value.__await).then(function(value2) {
                invoke("next", value2, resolve, reject);
              }, function(err) {
                invoke("throw", err, resolve, reject);
              });
            }
            return PromiseImpl.resolve(value).then(function(unwrapped) {
              result.value = unwrapped;
              resolve(result);
            }, function(error) {
              return invoke("throw", error, resolve, reject);
            });
          }
        }
        var previousPromise;
        function enqueue(method, arg) {
          function callInvokeWithMethodAndArg() {
            return new PromiseImpl(function(resolve, reject) {
              invoke(method, arg, resolve, reject);
            });
          }
          return previousPromise = previousPromise ? previousPromise.then(
            callInvokeWithMethodAndArg,
            callInvokeWithMethodAndArg
          ) : callInvokeWithMethodAndArg();
        }
        this._invoke = enqueue;
      }
      defineIteratorMethods(AsyncIterator.prototype);
      AsyncIterator.prototype[asyncIteratorSymbol] = function() {
        return this;
      };
      exports.AsyncIterator = AsyncIterator;
      exports.async = function(innerFn, outerFn, self2, tryLocsList, PromiseImpl) {
        if (PromiseImpl === void 0)
          PromiseImpl = Promise;
        var iter = new AsyncIterator(
          wrap(innerFn, outerFn, self2, tryLocsList),
          PromiseImpl
        );
        return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function(result) {
          return result.done ? result.value : iter.next();
        });
      };
      function makeInvokeMethod(innerFn, self2, context) {
        var state = GenStateSuspendedStart;
        return function invoke(method, arg) {
          if (state === GenStateExecuting) {
            throw new Error("Generator is already running");
          }
          if (state === GenStateCompleted) {
            if (method === "throw") {
              throw arg;
            }
            return doneResult();
          }
          context.method = method;
          context.arg = arg;
          while (true) {
            var delegate = context.delegate;
            if (delegate) {
              var delegateResult = maybeInvokeDelegate(delegate, context);
              if (delegateResult) {
                if (delegateResult === ContinueSentinel)
                  continue;
                return delegateResult;
              }
            }
            if (context.method === "next") {
              context.sent = context._sent = context.arg;
            } else if (context.method === "throw") {
              if (state === GenStateSuspendedStart) {
                state = GenStateCompleted;
                throw context.arg;
              }
              context.dispatchException(context.arg);
            } else if (context.method === "return") {
              context.abrupt("return", context.arg);
            }
            state = GenStateExecuting;
            var record = tryCatch(innerFn, self2, context);
            if (record.type === "normal") {
              state = context.done ? GenStateCompleted : GenStateSuspendedYield;
              if (record.arg === ContinueSentinel) {
                continue;
              }
              return {
                value: record.arg,
                done: context.done
              };
            } else if (record.type === "throw") {
              state = GenStateCompleted;
              context.method = "throw";
              context.arg = record.arg;
            }
          }
        };
      }
      function maybeInvokeDelegate(delegate, context) {
        var method = delegate.iterator[context.method];
        if (method === undefined$1) {
          context.delegate = null;
          if (context.method === "throw") {
            if (delegate.iterator["return"]) {
              context.method = "return";
              context.arg = undefined$1;
              maybeInvokeDelegate(delegate, context);
              if (context.method === "throw") {
                return ContinueSentinel;
              }
            }
            context.method = "throw";
            context.arg = new TypeError(
              "The iterator does not provide a 'throw' method"
            );
          }
          return ContinueSentinel;
        }
        var record = tryCatch(method, delegate.iterator, context.arg);
        if (record.type === "throw") {
          context.method = "throw";
          context.arg = record.arg;
          context.delegate = null;
          return ContinueSentinel;
        }
        var info = record.arg;
        if (!info) {
          context.method = "throw";
          context.arg = new TypeError("iterator result is not an object");
          context.delegate = null;
          return ContinueSentinel;
        }
        if (info.done) {
          context[delegate.resultName] = info.value;
          context.next = delegate.nextLoc;
          if (context.method !== "return") {
            context.method = "next";
            context.arg = undefined$1;
          }
        } else {
          return info;
        }
        context.delegate = null;
        return ContinueSentinel;
      }
      defineIteratorMethods(Gp);
      define2(Gp, toStringTagSymbol, "Generator");
      Gp[iteratorSymbol] = function() {
        return this;
      };
      Gp.toString = function() {
        return "[object Generator]";
      };
      function pushTryEntry(locs) {
        var entry = { tryLoc: locs[0] };
        if (1 in locs) {
          entry.catchLoc = locs[1];
        }
        if (2 in locs) {
          entry.finallyLoc = locs[2];
          entry.afterLoc = locs[3];
        }
        this.tryEntries.push(entry);
      }
      function resetTryEntry(entry) {
        var record = entry.completion || {};
        record.type = "normal";
        delete record.arg;
        entry.completion = record;
      }
      function Context(tryLocsList) {
        this.tryEntries = [{ tryLoc: "root" }];
        tryLocsList.forEach(pushTryEntry, this);
        this.reset(true);
      }
      exports.keys = function(object) {
        var keys = [];
        for (var key in object) {
          keys.push(key);
        }
        keys.reverse();
        return function next() {
          while (keys.length) {
            var key2 = keys.pop();
            if (key2 in object) {
              next.value = key2;
              next.done = false;
              return next;
            }
          }
          next.done = true;
          return next;
        };
      };
      function values(iterable) {
        if (iterable) {
          var iteratorMethod = iterable[iteratorSymbol];
          if (iteratorMethod) {
            return iteratorMethod.call(iterable);
          }
          if (typeof iterable.next === "function") {
            return iterable;
          }
          if (!isNaN(iterable.length)) {
            var i2 = -1, next = function next2() {
              while (++i2 < iterable.length) {
                if (hasOwn.call(iterable, i2)) {
                  next2.value = iterable[i2];
                  next2.done = false;
                  return next2;
                }
              }
              next2.value = undefined$1;
              next2.done = true;
              return next2;
            };
            return next.next = next;
          }
        }
        return { next: doneResult };
      }
      exports.values = values;
      function doneResult() {
        return { value: undefined$1, done: true };
      }
      Context.prototype = {
        constructor: Context,
        reset: function(skipTempReset) {
          this.prev = 0;
          this.next = 0;
          this.sent = this._sent = undefined$1;
          this.done = false;
          this.delegate = null;
          this.method = "next";
          this.arg = undefined$1;
          this.tryEntries.forEach(resetTryEntry);
          if (!skipTempReset) {
            for (var name in this) {
              if (name.charAt(0) === "t" && hasOwn.call(this, name) && !isNaN(+name.slice(1))) {
                this[name] = undefined$1;
              }
            }
          }
        },
        stop: function() {
          this.done = true;
          var rootEntry = this.tryEntries[0];
          var rootRecord = rootEntry.completion;
          if (rootRecord.type === "throw") {
            throw rootRecord.arg;
          }
          return this.rval;
        },
        dispatchException: function(exception) {
          if (this.done) {
            throw exception;
          }
          var context = this;
          function handle(loc, caught) {
            record.type = "throw";
            record.arg = exception;
            context.next = loc;
            if (caught) {
              context.method = "next";
              context.arg = undefined$1;
            }
            return !!caught;
          }
          for (var i2 = this.tryEntries.length - 1; i2 >= 0; --i2) {
            var entry = this.tryEntries[i2];
            var record = entry.completion;
            if (entry.tryLoc === "root") {
              return handle("end");
            }
            if (entry.tryLoc <= this.prev) {
              var hasCatch = hasOwn.call(entry, "catchLoc");
              var hasFinally = hasOwn.call(entry, "finallyLoc");
              if (hasCatch && hasFinally) {
                if (this.prev < entry.catchLoc) {
                  return handle(entry.catchLoc, true);
                } else if (this.prev < entry.finallyLoc) {
                  return handle(entry.finallyLoc);
                }
              } else if (hasCatch) {
                if (this.prev < entry.catchLoc) {
                  return handle(entry.catchLoc, true);
                }
              } else if (hasFinally) {
                if (this.prev < entry.finallyLoc) {
                  return handle(entry.finallyLoc);
                }
              } else {
                throw new Error("try statement without catch or finally");
              }
            }
          }
        },
        abrupt: function(type, arg) {
          for (var i2 = this.tryEntries.length - 1; i2 >= 0; --i2) {
            var entry = this.tryEntries[i2];
            if (entry.tryLoc <= this.prev && hasOwn.call(entry, "finallyLoc") && this.prev < entry.finallyLoc) {
              var finallyEntry = entry;
              break;
            }
          }
          if (finallyEntry && (type === "break" || type === "continue") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {
            finallyEntry = null;
          }
          var record = finallyEntry ? finallyEntry.completion : {};
          record.type = type;
          record.arg = arg;
          if (finallyEntry) {
            this.method = "next";
            this.next = finallyEntry.finallyLoc;
            return ContinueSentinel;
          }
          return this.complete(record);
        },
        complete: function(record, afterLoc) {
          if (record.type === "throw") {
            throw record.arg;
          }
          if (record.type === "break" || record.type === "continue") {
            this.next = record.arg;
          } else if (record.type === "return") {
            this.rval = this.arg = record.arg;
            this.method = "return";
            this.next = "end";
          } else if (record.type === "normal" && afterLoc) {
            this.next = afterLoc;
          }
          return ContinueSentinel;
        },
        finish: function(finallyLoc) {
          for (var i2 = this.tryEntries.length - 1; i2 >= 0; --i2) {
            var entry = this.tryEntries[i2];
            if (entry.finallyLoc === finallyLoc) {
              this.complete(entry.completion, entry.afterLoc);
              resetTryEntry(entry);
              return ContinueSentinel;
            }
          }
        },
        "catch": function(tryLoc) {
          for (var i2 = this.tryEntries.length - 1; i2 >= 0; --i2) {
            var entry = this.tryEntries[i2];
            if (entry.tryLoc === tryLoc) {
              var record = entry.completion;
              if (record.type === "throw") {
                var thrown = record.arg;
                resetTryEntry(entry);
              }
              return thrown;
            }
          }
          throw new Error("illegal catch attempt");
        },
        delegateYield: function(iterable, resultName, nextLoc) {
          this.delegate = {
            iterator: values(iterable),
            resultName,
            nextLoc
          };
          if (this.method === "next") {
            this.arg = undefined$1;
          }
          return ContinueSentinel;
        }
      };
      return exports;
    }(
      module.exports
    );
    try {
      regeneratorRuntime = runtime2;
    } catch (accidentalStrictMode) {
      Function("r", "regeneratorRuntime = r")(runtime2);
    }
  })(runtime);
  var regenerator = runtime.exports;
  var ACCESS_RESOURCE = "ACCESS_RESOURCE";
  var ANNOTATIONS_RESOURCE = "ANNOTATIONS_RESOURCE";
  var ASSET_RESOURCE = "ASSET_RESOURCE";
  var AUTH_RESOURCE = "AUTH_RESOURCE";
  var CHILD_RESOURCE = "CHILD_RESOURCE";
  var CLASS_RESOURCE = "CLASS_RESOURCE";
  var COMPETENCY_RESOURCE = "COMPETENCY_RESOURCE";
  var CONTEXT_RESOURCE = "CONTEXT_RESOURCE";
  var DEPRECATED_RESOURCE = "DEPRECATED_RESOURCE";
  var DRAG_STATE_RESOURCE = "DRAG_STATE_RESOURCE";
  var EDITOR_RESOURCE = "EDITOR_RESOURCE";
  var FEATURE_FLAG_RESOURCE = "FEATURE_FLAG_RESOURCE";
  var HISTORY_RESOURCE = "HISTORY_RESOURCE";
  var LEARNER_RESOURCE = "LEARNER_RESOURCE";
  var LOGGER_RESOURCE = "LOGGER_RESOURCE";
  var LTI_RESOURCE = "LTI_RESOURCE";
  var PLUGIN_RESOURCE = "PLUGIN_RESOURCE";
  var PROGRESS_RESOURCE = "PROGRESS_RESOURCE";
  var QUERY_RESOURCE = "QUERY_RESOURCE";
  var ROUTE_RESOURCE = "ROUTE_RESOURCE";
  var SELECTION_RESOURCE = "SELECTION_RESOURCE";
  var STATE_RESOURCE = "STATE_RESOURCE";
  var THEME_RESOURCE = "THEME_RESOURCE";
  var USER_RESOURCE = "USER_RESOURCE";
  var EVENT_RESOURCE = "EVENT_RESOURCE";
  var EXECUTE_QUERY = "EXECUTE_QUERY";
  var SUBSCRIPTION = "SUBSCRIPTION";
  var SUBSCRIBE = "SUBSCRIBE";
  var SET = "SET";
  var GET = "GET";
  var GET_RAW = "GET_RAW";
  var IS = "IS";
  var INIT_CHILD = "INIT_CHILD";
  var REMOVE_CHILD = "REMOVE_CHILD";
  var CREATE_CHILD = "CREATE_CHILD";
  var DELETE_CHILD = "DELETE_CHILD";
  var SUBSCRIBE_TO_DRAGGABLES = "SUBSCRIBE_TO_DRAGGABLES";
  var UNSUBSCRIBE_FROM_DRAGGABLES = "UNSUBSCRIBE_FROM_DRAGGABLES";
  var DESELECT = "DESELECT";
  var SELECT = "SELECT";
  var SUBSCRIBE_TO_SELECTION = "SUBSCRIBE_TO_SELECTION";
  var OPEN = "OPEN";
  var CONFIRM_ACTION = "CONFIRM_ACTION";
  var UNDO_REDO_ACTION = "UNDO_REDO_ACTION";
  var EVALUATE = "EVALUATE";
  var RESTART = "RESTART";
  var GET_RESULT = "GET_RESULT";
  var SUBSCRIBE_RESULT = "SUBSCRIBE_RESULT";
  var SUBSCRIBE_TO_THEME_CSS = "SUBSCRIBE_TO_THEME_CSS";
  var PROVISION_UPLOAD = "PROVISION_UPLOAD";
  var GET_SUBSCRIPTION = "GET_SUBSCRIPTION";
  var INFORM_ASSET_USAGE = "INFORM_ASSET_USAGE";
  var ASSET_RESOLVE = "ASSET_RESOLVE";
  var ASSET_CREATE = "ASSET_CREATE";
  var ICON_ASSET_LIST = "ICON_ASSET_LIST";
  var DEPRECATED_CONTINUE = "DEPRECATED_CONTINUE";
  var DEPRECATED_SUBSCRIBE_TO_MOVE_ON = "DEPRECATED_SUBSCRIBE_TO_MOVE_ON";
  var DEPRECATED_UNSUBSCRIBE_FROM_MOVE_ON = "DEPRECATED_UNSUBSCRIBE_FROM_MOVE_ON";
  var GET_ANNOTATION = "GET_ANNOTATION";
  var SET_ANNOTATION = "SET_ANNOTATION";
  var CREATE_ANNOTATION = "CREATE_ANNOTATION";
  var RESOLVE_ANNOTATION = "RESOLVE_ANNOTATION";
  var READ_ANNOTATION = "READ_ANNOTATION";
  var UNREAD_ANNOTATION = "UNREAD_ANNOTATION";
  var DELETE_ANNOTATION = "DELETE_ANNOTATION";
  var IS_EXACT_ROUTE = "IS_EXACT_ROUTE";
  var IS_CURRENT_ROUTE = "IS_CURRENT_ROUTE";
  var ADD = "ADD";
  var LENGTH = "LENGTH";
  var REMOVE = "REMOVE";
  var CLEAR = "CLEAR";
  var IS_EXACT = "IS_EXACT";
  var IS_CURRENT = "IS_CURRENT";
  var COPY = "COPY";
  var PASTE = "PASTE";
  var GET_URL = "GET_URL";
  var LAUNCH = "LAUNCH";
  var EMBED = "EMBED";
  var SUBSCRIBE_TO_EVENT = "SUBSCRIBE_TO_EVENT";
  var PUBLISH_EVENT = "PUBLISH_EVENT";
  var SUBSCRIBE_TO_SCOPE = "SUBSCRIBE_TO_SCOPE";
  var DEBUG = "DEBUG";
  var ERROR = "ERROR";
  var INFO = "INFO";
  var WARN = "WARN";
  var ResourceProvider = function ResourceProvider2(_ref) {
    var id2 = _ref.id, context = _ref.context, gateway = _ref.gateway, iframeElToListenTo = _ref.iframeElToListenTo, services = _ref.services, coursewareType = _ref.coursewareType, targetableServiceProvider = _ref.targetableServiceProvider;
    _classCallCheck(this, ResourceProvider2);
    if (this.initialize === void 0) {
      throw new TypeError("Must override initialize");
    }
    this.id = id2;
    this.context = context;
    this.gateway = gateway;
    this.services = services;
    this.targetableServiceProvider = targetableServiceProvider;
    this.coursewareType = coursewareType;
    this.iframeElToListenTo = iframeElToListenTo;
  };
  function _createSuper$p(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$p();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$p() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var AuthResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(AuthResourceProvider2, _ResourceProvider);
    var _super = _createSuper$p(AuthResourceProvider2);
    function AuthResourceProvider2() {
      _classCallCheck(this, AuthResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(AuthResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.gateway.register(AUTH_RESOURCE).method(SET, this.set.bind(this));
      }
    }, {
      key: "getService",
      value: function getService2(selector) {
        return this.targetableServiceProvider.requestTargetable({
          name: AUTH_SERVICE,
          context: this.context,
          id: this.id,
          selector
        });
      }
    }, {
      key: "set",
      value: function() {
        var _set = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee(event) {
          var _event$data, value, id2, targetSelector, service;
          return regenerator.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  _event$data = event.data, value = _event$data.value, id2 = _event$data.id, targetSelector = _event$data.targetSelector;
                  _context.next = 3;
                  return this.getService(targetSelector || id2);
                case 3:
                  service = _context.sent;
                  return _context.abrupt("return", service.set(value));
                case 5:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, this);
        }));
        function set2(_x) {
          return _set.apply(this, arguments);
        }
        return set2;
      }()
    }]);
    return AuthResourceProvider2;
  }(ResourceProvider);
  var latestId = 0;
  function createSubscriptionId() {
    latestId++;
    return latestId.toString();
  }
  var SubscriptionIdProvider = {
    createSubscriptionId
  };
  function getPathArray(path) {
    var pathArray;
    if (typeof path === "undefined" || path === "") {
      pathArray = [];
    } else if (Array.isArray(path)) {
      pathArray = path;
    } else {
      pathArray = path.split(".");
    }
    return pathArray;
  }
  function _createSuper$o(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$o();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$o() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var StateResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(StateResourceProvider2, _ResourceProvider);
    var _super = _createSuper$o(StateResourceProvider2);
    function StateResourceProvider2() {
      _classCallCheck(this, StateResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(StateResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.gateway.register(STATE_RESOURCE).method(GET, this.get.bind(this)).method(GET_RAW, this.getRaw.bind(this)).method(SET, this.set.bind(this)).method(SUBSCRIBE, this.subscribe.bind(this));
      }
    }, {
      key: "getService",
      value: function getService2(selector, context) {
        return this.targetableServiceProvider.requestTargetable({
          name: COURSEWARE_ITEM_SERVICE,
          context: context || this.context,
          id: this.id,
          selector
        });
      }
    }, {
      key: "get",
      value: function() {
        var _get = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee(event) {
          var _event$data, path, id2, targetSelector, _event$data$localCont, context, evaluationId, pathArray, service, getInState;
          return regenerator.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  _event$data = event.data, path = _event$data.path, id2 = _event$data.id, targetSelector = _event$data.targetSelector, _event$data$localCont = _event$data.localContext;
                  _event$data$localCont = _event$data$localCont === void 0 ? {} : _event$data$localCont;
                  context = _event$data$localCont.context, evaluationId = _event$data$localCont.evaluationId;
                  pathArray = getPathArray(path);
                  _context.next = 6;
                  return this.getService(targetSelector || id2, context);
                case 6:
                  service = _context.sent;
                  getInState = (service.getInState || service.getInConfig).bind(service);
                  return _context.abrupt("return", getInState(pathArray, evaluationId));
                case 9:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, this);
        }));
        function get(_x) {
          return _get.apply(this, arguments);
        }
        return get;
      }()
    }, {
      key: "getRaw",
      value: function() {
        var _getRaw = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee2(event) {
          var _event$data2, path, id2, targetSelector, _event$data2$localCon, context, evaluationId, pathArray, service, getInRawState;
          return regenerator.wrap(function _callee2$(_context2) {
            while (1) {
              switch (_context2.prev = _context2.next) {
                case 0:
                  _event$data2 = event.data, path = _event$data2.path, id2 = _event$data2.id, targetSelector = _event$data2.targetSelector, _event$data2$localCon = _event$data2.localContext;
                  _event$data2$localCon = _event$data2$localCon === void 0 ? {} : _event$data2$localCon;
                  context = _event$data2$localCon.context, evaluationId = _event$data2$localCon.evaluationId;
                  pathArray = getPathArray(path);
                  _context2.next = 6;
                  return this.getService(targetSelector || id2, context);
                case 6:
                  service = _context2.sent;
                  getInRawState = service.getInRawState.bind(service);
                  return _context2.abrupt("return", getInRawState(pathArray, evaluationId));
                case 9:
                case "end":
                  return _context2.stop();
              }
            }
          }, _callee2, this);
        }));
        function getRaw(_x2) {
          return _getRaw.apply(this, arguments);
        }
        return getRaw;
      }()
    }, {
      key: "set",
      value: function() {
        var _set = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee3(event) {
          var _event$data3, path, value, id2, targetSelector, _event$data3$localCon, context, evaluationId, pathArray, service, setInState;
          return regenerator.wrap(function _callee3$(_context3) {
            while (1) {
              switch (_context3.prev = _context3.next) {
                case 0:
                  _event$data3 = event.data, path = _event$data3.path, value = _event$data3.value, id2 = _event$data3.id, targetSelector = _event$data3.targetSelector, _event$data3$localCon = _event$data3.localContext;
                  _event$data3$localCon = _event$data3$localCon === void 0 ? {} : _event$data3$localCon;
                  context = _event$data3$localCon.context, evaluationId = _event$data3$localCon.evaluationId;
                  pathArray = getPathArray(path);
                  if (!evaluationId) {
                    _context3.next = 6;
                    break;
                  }
                  return _context3.abrupt("return", Promise.resolve());
                case 6:
                  _context3.next = 8;
                  return this.getService(targetSelector || id2, context);
                case 8:
                  service = _context3.sent;
                  setInState = (service.setInState || service.setInConfig).bind(service);
                  return _context3.abrupt("return", setInState(pathArray, value));
                case 11:
                case "end":
                  return _context3.stop();
              }
            }
          }, _callee3, this);
        }));
        function set2(_x3) {
          return _set.apply(this, arguments);
        }
        return set2;
      }()
    }, {
      key: "subscribe",
      value: function() {
        var _subscribe = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee4(event) {
          var _this = this;
          var _event$data4, path, optionalCallbackFn, id2, targetSelector, _event$data4$localCon, context, evaluationId, pathArray, subscriptionId, service, subscribeToState, unsubscribeFn, gatewayTrackedUnsubscribeFn;
          return regenerator.wrap(function _callee4$(_context4) {
            while (1) {
              switch (_context4.prev = _context4.next) {
                case 0:
                  _event$data4 = event.data, path = _event$data4.path, optionalCallbackFn = _event$data4.optionalCallbackFn, id2 = _event$data4.id, targetSelector = _event$data4.targetSelector, _event$data4$localCon = _event$data4.localContext;
                  _event$data4$localCon = _event$data4$localCon === void 0 ? {} : _event$data4$localCon;
                  context = _event$data4$localCon.context, evaluationId = _event$data4$localCon.evaluationId;
                  pathArray = getPathArray(path);
                  subscriptionId = SubscriptionIdProvider.createSubscriptionId();
                  _context4.next = 7;
                  return this.getService(targetSelector || id2, context);
                case 7:
                  service = _context4.sent;
                  subscribeToState = (service.subscribeToState || service.subscribeToConfig).bind(service);
                  if (!optionalCallbackFn) {
                    _context4.next = 15;
                    break;
                  }
                  _context4.next = 12;
                  return subscribeToState(pathArray, function(nextValue) {
                    optionalCallbackFn(nextValue).then(function() {
                    });
                  }, evaluationId, this.id);
                case 12:
                  unsubscribeFn = _context4.sent;
                  _context4.next = 18;
                  break;
                case 15:
                  _context4.next = 17;
                  return subscribeToState(pathArray, function(nextValue) {
                    _this.gateway.notify({
                      subscriptionId,
                      payload: nextValue
                    });
                  }, evaluationId, this.id);
                case 17:
                  unsubscribeFn = _context4.sent;
                case 18:
                  gatewayTrackedUnsubscribeFn = this.gateway.addActiveSubscription(unsubscribeFn);
                  return _context4.abrupt("return", {
                    subscriptionId,
                    unsubscribe: gatewayTrackedUnsubscribeFn
                  });
                case 20:
                case "end":
                  return _context4.stop();
              }
            }
          }, _callee4, this);
        }));
        function subscribe(_x4) {
          return _subscribe.apply(this, arguments);
        }
        return subscribe;
      }()
    }]);
    return StateResourceProvider2;
  }(ResourceProvider);
  function _createSuper$n(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$n();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$n() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var EditorResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(EditorResourceProvider2, _ResourceProvider);
    var _super = _createSuper$n(EditorResourceProvider2);
    function EditorResourceProvider2() {
      _classCallCheck(this, EditorResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(EditorResourceProvider2, [{
      key: "_generateScope",
      value: function _generateScope() {
        var ancestry = this.lifecycleServices.getAncestry();
        this.scope = [PLATFORM_SCOPE, PLUGIN_SCOPE].concat(_toConsumableArray(ancestry), [this.id]);
      }
    }, {
      key: "initialize",
      value: function initialize() {
        this.editorServices = this.services.build({
          name: EDITOR_SERVICE,
          context: this.context,
          id: this.id
        });
        this.lifecycleServices = this.services.build({
          name: LIFECYCLE_SERVICE,
          context: this.context,
          id: this.id
        });
        this.gateway.register(EDITOR_RESOURCE).method(SELECT, this.select.bind(this)).method(DESELECT, this.deselect.bind(this)).method(SUBSCRIBE_TO_SELECTION, this.subscribe.bind(this)).method(OPEN, this.open.bind(this)).method(CONFIRM_ACTION, this.confirmAction.bind(this)).method(UNDO_REDO_ACTION, this.recordUndoRedoAction.bind(this));
        this._generateScope();
      }
    }, {
      key: "_addScopeToSelection",
      value: function _addScopeToSelection(selection) {
        var _this = this;
        var lastSelection = selection[selection.length - 1] || selection;
        var scopedSelection = {
          path: [].concat(_toConsumableArray(this.scope), _toConsumableArray(lastSelection.path)),
          data: lastSelection.data
        };
        if (Array.isArray(selection)) {
          var scoped = [];
          selection.forEach(function(s) {
            var item = {
              path: [].concat(_toConsumableArray(_this.scope), _toConsumableArray(s.path)),
              data: s.data
            };
            scoped.push(item);
          });
          scopedSelection = scoped;
        }
        return scopedSelection;
      }
    }, {
      key: "_cleanScopeFromSelections",
      value: function _cleanScopeFromSelections(selections) {
        var _this2 = this;
        var cleanSelections = [];
        selections.forEach(function(selection) {
          cleanSelections.push({
            path: selection.path.slice(_this2.scope.length),
            data: selection.data
          });
        });
        return cleanSelections;
      }
    }, {
      key: "_generateCallback",
      value: function _generateCallback(callbackFn) {
        var _this3 = this;
        return function(selections) {
          var cleanSelections = _this3._cleanScopeFromSelections(selections);
          callbackFn(cleanSelections);
        };
      }
    }, {
      key: "addToSelection",
      value: function addToSelection(selectRequest) {
        var selection = selectRequest.data.selection;
        var scopedSelection = this._addScopeToSelection(selection);
        this.editorServices.addSelection(scopedSelection);
      }
    }, {
      key: "deselect",
      value: function deselect(selectRequest) {
        var selection = selectRequest.data.selection;
        var scopedSelection = this._addScopeToSelection(selection);
        this.editorServices.clearSelection(scopedSelection.path);
      }
    }, {
      key: "select",
      value: function select(selectRequest) {
        var selection = selectRequest.data.selection;
        var scopedSelection = this._addScopeToSelection(selection);
        if (Array.isArray(scopedSelection)) {
          this.editorServices.clearSelection(scopedSelection);
        } else {
          this.editorServices.clearSelection(scopedSelection.path);
        }
        this.editorServices.addSelection(scopedSelection);
      }
    }, {
      key: "confirmAction",
      value: function confirmAction(actionIdentifierRequest) {
        var actionIdentifier = actionIdentifierRequest.data.actionIdentifier;
        return this.editorServices.confirmAction(actionIdentifier);
      }
    }, {
      key: "recordUndoRedoAction",
      value: function recordUndoRedoAction(actionRequest) {
        var _actionRequest$data = actionRequest.data, action = _actionRequest$data.action, stage = _actionRequest$data.stage;
        return this.editorServices.recordUndoRedoAction(action, stage);
      }
    }, {
      key: "subscribe",
      value: function subscribe(subscriptionRequest) {
        var _this4 = this;
        var subscriptionId = SubscriptionIdProvider.createSubscriptionId();
        var _subscriptionRequest$ = subscriptionRequest.data, selection = _subscriptionRequest$.selection, optionalCallbackFn = _subscriptionRequest$.optionalCallbackFn;
        var scopedSelection = this._addScopeToSelection(selection);
        if (optionalCallbackFn) {
          var _callback = this._generateCallback(optionalCallbackFn);
          var _unsubscribeFn = this.editorServices.subscribeToSelection(scopedSelection, _callback);
          var _gatewayTrackedUnsubscribeFn = this.gateway.addActiveSubscription(_unsubscribeFn);
          return {
            subscriptionId,
            unsubscribeFn: _gatewayTrackedUnsubscribeFn
          };
        }
        var callback = this._generateCallback(function(nextValue) {
          _this4.gateway.notify({
            subscriptionId,
            payload: nextValue
          });
        });
        var _this$editorServices$ = this.editorServices.subscribeToSelection(scopedSelection, callback, true), unsubscribeFn = _this$editorServices$.unsubscribeFn, initialNotifyAfterReturn = _this$editorServices$.initialNotifyAfterReturn;
        var gatewayTrackedUnsubscribeFn = this.gateway.addActiveSubscription(unsubscribeFn);
        return {
          subscriptionId,
          unsubscribeFn: gatewayTrackedUnsubscribeFn,
          initialNotifyAfterReturn
        };
      }
    }, {
      key: "open",
      value: function open(openRequest) {
        var activityId = openRequest.data.activityId;
        this.editorServices.open(activityId);
      }
    }]);
    return EditorResourceProvider2;
  }(ResourceProvider);
  function _createSuper$m(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$m();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$m() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var LearnerResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(LearnerResourceProvider2, _ResourceProvider);
    var _super = _createSuper$m(LearnerResourceProvider2);
    function LearnerResourceProvider2() {
      _classCallCheck(this, LearnerResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(LearnerResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.gateway.register(LEARNER_RESOURCE).method(EVALUATE, this.evaluate.bind(this)).method(RESTART, this.restart.bind(this)).method(GET_RESULT, this.getResult.bind(this)).method(SUBSCRIBE_RESULT, this.subscribeResult.bind(this)).method(SUBSCRIBE_TO_SCOPE, this.subscribeToScope.bind(this));
      }
    }, {
      key: "getService",
      value: function getService2(selector) {
        return this.targetableServiceProvider.requestTargetable({
          name: COURSEWARE_ITEM_SERVICE,
          context: this.context,
          id: this.id,
          selector
        });
      }
    }, {
      key: "getSelector",
      value: function() {
        var _getSelector = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee(id2) {
          var targetService, selfTarget;
          return regenerator.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  targetService = this.targetableServiceProvider.getTargetService();
                  _context.next = 3;
                  return targetService.createTarget(id2);
                case 3:
                  selfTarget = _context.sent;
                  return _context.abrupt("return", selfTarget.type === "COMPONENT" ? "parent" : "self");
                case 5:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, this);
        }));
        function getSelector(_x) {
          return _getSelector.apply(this, arguments);
        }
        return getSelector;
      }()
    }, {
      key: "evaluate",
      value: function() {
        var _evaluate = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee2() {
          var event, _ref, _ref$id, id2, targetSelector, noSelector, service, serviceId, _args2 = arguments;
          return regenerator.wrap(function _callee2$(_context2) {
            while (1) {
              switch (_context2.prev = _context2.next) {
                case 0:
                  event = _args2.length > 0 && _args2[0] !== void 0 ? _args2[0] : {};
                  _ref = event.data || {}, _ref$id = _ref.id, id2 = _ref$id === void 0 ? this.id : _ref$id, targetSelector = _ref.targetSelector;
                  _context2.next = 4;
                  return this.getSelector(id2);
                case 4:
                  noSelector = _context2.sent;
                  _context2.next = 7;
                  return this.getService(targetSelector || noSelector || id2);
                case 7:
                  service = _context2.sent;
                  serviceId = service.target ? service.target.id : service.id;
                  return _context2.abrupt("return", service.evaluate(serviceId));
                case 10:
                case "end":
                  return _context2.stop();
              }
            }
          }, _callee2, this);
        }));
        function evaluate() {
          return _evaluate.apply(this, arguments);
        }
        return evaluate;
      }()
    }, {
      key: "getResult",
      value: function() {
        var _getResult = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee3(event) {
          var _ref2, _ref2$elementId, elementId, targetSelector, noSelector, service;
          return regenerator.wrap(function _callee3$(_context3) {
            while (1) {
              switch (_context3.prev = _context3.next) {
                case 0:
                  _ref2 = event.data || {}, _ref2$elementId = _ref2.elementId, elementId = _ref2$elementId === void 0 ? this.id : _ref2$elementId, targetSelector = _ref2.targetSelector;
                  _context3.next = 3;
                  return this.getSelector(elementId);
                case 3:
                  noSelector = _context3.sent;
                  _context3.next = 6;
                  return this.getService(targetSelector || noSelector || elementId);
                case 6:
                  service = _context3.sent;
                  return _context3.abrupt("return", service.getResult(elementId));
                case 8:
                case "end":
                  return _context3.stop();
              }
            }
          }, _callee3, this);
        }));
        function getResult(_x2) {
          return _getResult.apply(this, arguments);
        }
        return getResult;
      }()
    }, {
      key: "subscribeResult",
      value: function() {
        var _subscribeResult = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee4(event) {
          var _this = this;
          var _event$data, targetSelector, elementId, optionalCallbackFn, service, subscriptionId, unsubscribeFn, gatewayTrackedUnsubscribeFn;
          return regenerator.wrap(function _callee4$(_context4) {
            while (1) {
              switch (_context4.prev = _context4.next) {
                case 0:
                  _event$data = event.data, targetSelector = _event$data.targetSelector, elementId = _event$data.elementId, optionalCallbackFn = _event$data.optionalCallbackFn;
                  _context4.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context4.sent;
                  subscriptionId = SubscriptionIdProvider.createSubscriptionId();
                  if (!optionalCallbackFn) {
                    _context4.next = 11;
                    break;
                  }
                  _context4.next = 8;
                  return service.subscribeToResult(elementId, function(nextValue) {
                    optionalCallbackFn(nextValue).then(function() {
                    });
                  });
                case 8:
                  unsubscribeFn = _context4.sent;
                  _context4.next = 14;
                  break;
                case 11:
                  _context4.next = 13;
                  return service.subscribeToResult(elementId, function(nextValue) {
                    _this.gateway.notify({
                      subscriptionId,
                      payload: nextValue
                    });
                  });
                case 13:
                  unsubscribeFn = _context4.sent;
                case 14:
                  gatewayTrackedUnsubscribeFn = this.gateway.addActiveSubscription(unsubscribeFn);
                  return _context4.abrupt("return", {
                    subscriptionId,
                    unsubscribe: gatewayTrackedUnsubscribeFn
                  });
                case 16:
                case "end":
                  return _context4.stop();
              }
            }
          }, _callee4, this);
        }));
        function subscribeResult(_x3) {
          return _subscribeResult.apply(this, arguments);
        }
        return subscribeResult;
      }()
    }, {
      key: "restart",
      value: function() {
        var _restart = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee5(event) {
          var _event$data2, _event$data2$activity, activityId, targetSelector, noSelector, service;
          return regenerator.wrap(function _callee5$(_context5) {
            while (1) {
              switch (_context5.prev = _context5.next) {
                case 0:
                  _event$data2 = event.data, _event$data2$activity = _event$data2.activityId, activityId = _event$data2$activity === void 0 ? this.id : _event$data2$activity, targetSelector = _event$data2.targetSelector;
                  _context5.next = 3;
                  return this.getSelector(activityId);
                case 3:
                  noSelector = _context5.sent;
                  _context5.next = 6;
                  return this.getService(targetSelector || noSelector || activityId);
                case 6:
                  service = _context5.sent;
                  return _context5.abrupt("return", service.restart(service.target.id));
                case 8:
                case "end":
                  return _context5.stop();
              }
            }
          }, _callee5, this);
        }));
        function restart(_x4) {
          return _restart.apply(this, arguments);
        }
        return restart;
      }()
    }, {
      key: "subscribeToScope",
      value: function() {
        var _subscribeToScope = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee6(event) {
          var _this2 = this;
          var _event$data3, _event$data3$id, id2, sourceId, context, noSelector, service, subscriptionId, unsubscribeFn, gatewayTrackedUnsubscribeFn;
          return regenerator.wrap(function _callee6$(_context6) {
            while (1) {
              switch (_context6.prev = _context6.next) {
                case 0:
                  _event$data3 = event.data, _event$data3$id = _event$data3.id, id2 = _event$data3$id === void 0 ? this.id : _event$data3$id, sourceId = _event$data3.sourceId, context = _event$data3.context;
                  _context6.next = 3;
                  return this.getSelector(id2);
                case 3:
                  noSelector = _context6.sent;
                  _context6.next = 6;
                  return this.getService(noSelector || id2);
                case 6:
                  service = _context6.sent;
                  if (service.subscribeToScope) {
                    _context6.next = 9;
                    break;
                  }
                  throw Error("Context error: subscribeToScope can not be used in ".concat(this.context, " mode"));
                case 9:
                  subscriptionId = SubscriptionIdProvider.createSubscriptionId();
                  unsubscribeFn = service.subscribeToScope({
                    sourceId,
                    context
                  }, function(data) {
                    setTimeout(function() {
                      _this2.gateway.notify({
                        subscriptionId,
                        payload: data
                      });
                    }, 0);
                  });
                  gatewayTrackedUnsubscribeFn = this.gateway.addActiveSubscription(unsubscribeFn);
                  return _context6.abrupt("return", {
                    subscriptionId,
                    unsubscribe: gatewayTrackedUnsubscribeFn
                  });
                case 13:
                case "end":
                  return _context6.stop();
              }
            }
          }, _callee6, this);
        }));
        function subscribeToScope(_x5) {
          return _subscribeToScope.apply(this, arguments);
        }
        return subscribeToScope;
      }()
    }]);
    return LearnerResourceProvider2;
  }(ResourceProvider);
  var LEARNER = "LEARNER";
  var EDITOR = "EDITOR";
  var HISTORY = "HISTORY";
  var PREVIEW = "PREVIEW";
  var ANALYTICS = "ANALYTICS";
  var ALL = [LEARNER, EDITOR, HISTORY, PREVIEW, ANALYTICS];
  function _createSuper$l(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$l();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$l() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var ChildResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(ChildResourceProvider2, _ResourceProvider);
    var _super = _createSuper$l(ChildResourceProvider2);
    function ChildResourceProvider2() {
      _classCallCheck(this, ChildResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(ChildResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.lifecycleServices = this.services.build({
          name: LIFECYCLE_SERVICE,
          context: this.context,
          id: this.id,
          coursewareType: this.coursewareType
        });
        this.gateway.register(CHILD_RESOURCE).method(INIT_CHILD, this.initChild.bind(this)).method(REMOVE_CHILD, this.removeChild.bind(this)).method(CREATE_CHILD, this.createChild.bind(this)).method(DELETE_CHILD, this.deleteChild.bind(this));
      }
    }, {
      key: "initChild",
      value: function initChild(initChildRequest) {
        var _this = this;
        var _initChildRequest$dat = initChildRequest.data, childId = _initChildRequest$dat.childId, localContext = _initChildRequest$dat.localContext;
        var context = (localContext === null || localContext === void 0 ? void 0 : localContext.context) || localContext;
        if (ALL.includes(context)) {
          this.context = context;
        }
        return new Promise(function(resolve) {
          _this.lifecycleServices.initChild(childId, _this.context, function(response) {
            return resolve(response);
          });
        });
      }
    }, {
      key: "removeChild",
      value: function removeChild(removeChildRequest) {
        var childId = removeChildRequest.data.childId;
        this.lifecycleServices.removeChild(childId);
      }
    }, {
      key: "createChild",
      value: function createChild(createChildRequest) {
        var _this2 = this;
        var createOptions = createChildRequest.data.createOptions;
        return new Promise(function(resolve) {
          _this2.lifecycleServices.createChild(createOptions.plugin.pluginId, createOptions.plugin.pluginVersion, createOptions.name, function(childInfo) {
            return resolve({
              success: childInfo
            });
          });
        });
      }
    }, {
      key: "deleteChild",
      value: function deleteChild(deleteChildRequest) {
        var childId = deleteChildRequest.data.childId;
        this.lifecycleServices.deleteChild(childId);
      }
    }]);
    return ChildResourceProvider2;
  }(ResourceProvider);
  var formatFamilesForImport = function formatFamilesForImport2(fontFamilies) {
    return fontFamilies.filter(function(f2) {
      return !!f2;
    }).join("|").split(" ").join("+");
  };
  var SYSTEM_FONTS = ["arial", "helvetica", "times new roman", "times", "courier new", "courier", "palatino", "garamond", "bookman", "avant garde", "verdana", "georgia", "comic sans ms", "trebuchet ms", "arial black", "impact", "system-ui"];
  var isSystemFont = function isSystemFont2(fontName) {
    return fontName && SYSTEM_FONTS.includes(fontName.toLowerCase());
  };
  var minifyString = function minifyString2(cssString) {
    return cssString.replace(/^\s+|\s+$/gm, "").split("\n").join("");
  };
  function themeToCSS(theme) {
    if (!theme) {
      return "";
    }
    var bodyFont = theme.bodyFont, titleFont = theme.titleFont, textColor = theme.textColor, css = theme.css, _theme$cssUrl = theme.cssUrl, cssUrl = _theme$cssUrl === void 0 ? "" : _theme$cssUrl;
    var fontImportQueryParam = formatFamilesForImport([!isSystemFont(bodyFont) && bodyFont, !isSystemFont(titleFont) && titleFont]);
    var cssString = "\n  ".concat(fontImportQueryParam ? "@import url('https://fonts.googleapis.com/css?family=".concat(fontImportQueryParam, "');") : "", "\n  ").concat(cssUrl.trim() ? "@import url('".concat(cssUrl, "');") : "", "\n  ").concat(bodyFont || textColor ? "\n      html, body {\n        ".concat(bodyFont ? "font-family: '".concat(bodyFont, "';") : "", "\n        ").concat(textColor ? "color: ".concat(textColor, ";") : "", "\n      }") : "", "\n\n    ").concat(titleFont ? "\n      h1, h2, h3, h4, h5 {\n        font-family: '".concat(titleFont, "';\n      }") : "", "\n\n    ").concat(css ? "".concat(css) : "", "\n  ");
    return minifyString(cssString);
  }
  function _createSuper$k(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$k();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$k() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var ThemeResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(ThemeResourceProvider2, _ResourceProvider);
    var _super = _createSuper$k(ThemeResourceProvider2);
    function ThemeResourceProvider2() {
      _classCallCheck(this, ThemeResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(ThemeResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.gateway.register(THEME_RESOURCE).method(GET, this.get.bind(this)).method(SUBSCRIBE, this.subscribe.bind(this)).method(SUBSCRIBE_TO_THEME_CSS, this.subscribeToCSS.bind(this));
      }
    }, {
      key: "getService",
      value: function getService2(selector) {
        return this.targetableServiceProvider.requestTargetable({
          name: THEME_SERVICE,
          context: this.context,
          id: this.id,
          selector
        });
      }
    }, {
      key: "get",
      value: function() {
        var _get = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee(event) {
          var _event$data, path, id2, targetSelector, pathArray, service;
          return regenerator.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  _event$data = event.data, path = _event$data.path, id2 = _event$data.id, targetSelector = _event$data.targetSelector;
                  pathArray = getPathArray(path);
                  _context.next = 4;
                  return this.getService(targetSelector || id2);
                case 4:
                  service = _context.sent;
                  return _context.abrupt("return", service.getInTheme(pathArray));
                case 6:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, this);
        }));
        function get(_x) {
          return _get.apply(this, arguments);
        }
        return get;
      }()
    }, {
      key: "subscribe",
      value: function() {
        var _subscribe = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee2(event, isCSSSubscription) {
          var _this = this;
          var _event$data2, path, optionalCallbackFn, id2, targetSelector, pathArray, subscriptionId, service, unsubscribeFn, gatewayTrackedUnsubscribeFn;
          return regenerator.wrap(function _callee2$(_context2) {
            while (1) {
              switch (_context2.prev = _context2.next) {
                case 0:
                  _event$data2 = event.data, path = _event$data2.path, optionalCallbackFn = _event$data2.optionalCallbackFn, id2 = _event$data2.id, targetSelector = _event$data2.targetSelector;
                  pathArray = getPathArray(path);
                  subscriptionId = SubscriptionIdProvider.createSubscriptionId();
                  _context2.next = 5;
                  return this.getService(targetSelector || id2);
                case 5:
                  service = _context2.sent;
                  if (!optionalCallbackFn) {
                    _context2.next = 12;
                    break;
                  }
                  _context2.next = 9;
                  return service.subscribeToTheme(pathArray, function(nextValue) {
                    var value = isCSSSubscription ? themeToCSS(nextValue) : nextValue;
                    optionalCallbackFn(value).then(function() {
                    });
                  }, this.id);
                case 9:
                  unsubscribeFn = _context2.sent;
                  _context2.next = 15;
                  break;
                case 12:
                  _context2.next = 14;
                  return service.subscribeToTheme(pathArray, function(nextValue) {
                    _this.gateway.notify({
                      subscriptionId,
                      payload: isCSSSubscription ? themeToCSS(nextValue) : nextValue
                    });
                  }, this.id);
                case 14:
                  unsubscribeFn = _context2.sent;
                case 15:
                  gatewayTrackedUnsubscribeFn = this.gateway.addActiveSubscription(unsubscribeFn);
                  return _context2.abrupt("return", {
                    subscriptionId,
                    unsubscribe: gatewayTrackedUnsubscribeFn
                  });
                case 17:
                case "end":
                  return _context2.stop();
              }
            }
          }, _callee2, this);
        }));
        function subscribe(_x2, _x3) {
          return _subscribe.apply(this, arguments);
        }
        return subscribe;
      }()
    }, {
      key: "subscribeToCSS",
      value: function() {
        var _subscribeToCSS = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee3(event) {
          return regenerator.wrap(function _callee3$(_context3) {
            while (1) {
              switch (_context3.prev = _context3.next) {
                case 0:
                  return _context3.abrupt("return", this.subscribe(event, true));
                case 1:
                case "end":
                  return _context3.stop();
              }
            }
          }, _callee3, this);
        }));
        function subscribeToCSS(_x4) {
          return _subscribeToCSS.apply(this, arguments);
        }
        return subscribeToCSS;
      }()
    }]);
    return ThemeResourceProvider2;
  }(ResourceProvider);
  function _createSuper$j(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$j();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$j() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var DragStateResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(DragStateResourceProvider2, _ResourceProvider);
    var _super = _createSuper$j(DragStateResourceProvider2);
    function DragStateResourceProvider2() {
      _classCallCheck(this, DragStateResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(DragStateResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.dragStateServices = this.services.build({
          name: DRAG_STATE_SERVICE,
          id: this.id,
          context: this.context,
          iframeElToListenTo: this.iframeElToListenTo
        });
        this.unsubscribeFns = {};
        this.gateway.register(DRAG_STATE_RESOURCE).method(SUBSCRIBE_TO_DRAGGABLES, this.subscribeToDraggables.bind(this)).method(UNSUBSCRIBE_FROM_DRAGGABLES, this.unsubscribeFromDraggables.bind(this));
      }
    }, {
      key: "subscribeToDraggables",
      value: function subscribeToDraggables(event) {
        var _this = this;
        var _event$data = event.data, domainName = _event$data.domainName, callbackDragStarted = _event$data.callbackDragStarted, callbackDragStopped = _event$data.callbackDragStopped;
        this.dragStateServices.subscribeToDraggables(domainName, callbackDragStarted, callbackDragStopped);
        var unsubscribeFn = function unsubscribeFn2() {
          _this.dragStateServices.unsubscribeFromDraggables(domainName);
        };
        var gatewayTrackedUnsubscribeFn = this.gateway.addActiveSubscription(unsubscribeFn);
        this.unsubscribeFns[domainName] = gatewayTrackedUnsubscribeFn;
      }
    }, {
      key: "unsubscribeFromDraggables",
      value: function unsubscribeFromDraggables(event) {
        var domainName = event.data.domainName;
        if (this.unsubscribeFns[domainName]) {
          this.unsubscribeFns[domainName]();
          delete this.unsubscribeFns[domainName];
        }
      }
    }]);
    return DragStateResourceProvider2;
  }(ResourceProvider);
  function _createSuper$i(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$i();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$i() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var DragStateResourceProviderMock = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(DragStateResourceProviderMock2, _ResourceProvider);
    var _super = _createSuper$i(DragStateResourceProviderMock2);
    function DragStateResourceProviderMock2() {
      _classCallCheck(this, DragStateResourceProviderMock2);
      return _super.apply(this, arguments);
    }
    _createClass(DragStateResourceProviderMock2, [{
      key: "initialize",
      value: function initialize() {
        this.gateway.register(DRAG_STATE_RESOURCE).method(SUBSCRIBE_TO_DRAGGABLES, this.subscribeToDraggables.bind(this)).method(UNSUBSCRIBE_FROM_DRAGGABLES, this.unsubscribeFromDraggables.bind(this));
      }
    }, {
      key: "subscribeToDraggables",
      value: function subscribeToDraggables() {
      }
    }, {
      key: "unsubscribeFromDraggables",
      value: function unsubscribeFromDraggables() {
      }
    }]);
    return DragStateResourceProviderMock2;
  }(ResourceProvider);
  function _createSuper$h(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$h();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$h() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var UserResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(UserResourceProvider2, _ResourceProvider);
    var _super = _createSuper$h(UserResourceProvider2);
    function UserResourceProvider2() {
      _classCallCheck(this, UserResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(UserResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.userServices = this.services.build({
          name: USER_SERVICE,
          context: this.context,
          id: this.id
        });
        this.gateway.register(USER_RESOURCE).method(GET, this.getUser.bind(this));
      }
    }, {
      key: "getUser",
      value: function getUser(getUserRequest) {
        var accountId = getUserRequest.data.accountId;
        return this.userServices.getUser(accountId);
      }
    }]);
    return UserResourceProvider2;
  }(ResourceProvider);
  function _createSuper$g(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$g();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$g() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var ClassResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(ClassResourceProvider2, _ResourceProvider);
    var _super = _createSuper$g(ClassResourceProvider2);
    function ClassResourceProvider2() {
      _classCallCheck(this, ClassResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(ClassResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.gateway.register(CLASS_RESOURCE).method(GET, this.get.bind(this));
      }
    }, {
      key: "getService",
      value: function getService2(selector) {
        return this.targetableServiceProvider.requestTargetable({
          name: CLASS_SERVICE,
          context: this.context,
          id: this.id,
          selector
        });
      }
    }, {
      key: "get",
      value: function() {
        var _get = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee(event) {
          var targetSelector, service;
          return regenerator.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  targetSelector = event.data.targetSelector;
                  _context.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context.sent;
                  return _context.abrupt("return", service.getCohort());
                case 5:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, this);
        }));
        function get(_x) {
          return _get.apply(this, arguments);
        }
        return get;
      }()
    }]);
    return ClassResourceProvider2;
  }(ResourceProvider);
  var accessStub = {
    locked: false,
    lockedMessage: "lesson will unlock at {{ openTs }}",
    openTs: 14848056e5,
    closeTs: void 0,
    canRestart: true,
    canReview: true,
    maximumAttempt: 4,
    extension: {
      openTs: void 0,
      closeTs: 1484807e6,
      updatedTs: 14848056067232,
      message: ""
    }
  };
  function _createSuper$f(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$f();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$f() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var ResourceProviderGenerator = function ResourceProviderGenerator2(resourceConstant, rawStubObject) {
    var immutableObject = immutable.fromJS(rawStubObject);
    return /* @__PURE__ */ function(_ResourceProvider) {
      _inherits(GeneratedResourceProvider, _ResourceProvider);
      var _super = _createSuper$f(GeneratedResourceProvider);
      function GeneratedResourceProvider() {
        _classCallCheck(this, GeneratedResourceProvider);
        return _super.apply(this, arguments);
      }
      _createClass(GeneratedResourceProvider, [{
        key: "initialize",
        value: function initialize() {
          this.gateway.register(resourceConstant).method(GET, this.get.bind(this)).method(SUBSCRIBE, this.subscribe.bind(this));
        }
      }, {
        key: "get",
        value: function get(event) {
          var path = event.data.path;
          var pathArray = getPathArray(path);
          var stub = immutableObject.getIn(pathArray) && immutableObject.getIn(pathArray) || immutableObject;
          return stub.toJS ? stub.toJS() : stub;
        }
      }, {
        key: "subscribe",
        value: function subscribe(event) {
          var _event$data = event.data, path = _event$data.path, optionalCallbackFn = _event$data.optionalCallbackFn;
          var pathArray = getPathArray(path);
          var stub = immutableObject.getIn(pathArray) && immutableObject.getIn(pathArray) || immutableObject;
          var rawStub = stub.toJS ? stub.toJS() : stub;
          var subscriptionId = SubscriptionIdProvider.createSubscriptionId();
          if (optionalCallbackFn) {
            optionalCallbackFn(rawStub);
          } else {
            this.gateway.notify({
              subscriptionId,
              payload: rawStub
            });
          }
          return subscriptionId;
        }
      }]);
      return GeneratedResourceProvider;
    }(ResourceProvider);
  };
  var AccessResourceProvider = ResourceProviderGenerator(ACCESS_RESOURCE, accessStub);
  function _createSuper$e(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$e();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$e() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var ProgressResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(ProgressResourceProvider2, _ResourceProvider);
    var _super = _createSuper$e(ProgressResourceProvider2);
    function ProgressResourceProvider2() {
      _classCallCheck(this, ProgressResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(ProgressResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.coursewareItemServices = {};
        this.gateway.register(PROGRESS_RESOURCE).method(GET, this.get.bind(this)).method(SUBSCRIBE, this.subscribe.bind(this));
      }
    }, {
      key: "getService",
      value: function getService2(selector) {
        return this.targetableServiceProvider.requestTargetable({
          name: COURSEWARE_ITEM_SERVICE,
          context: this.context,
          id: this.id,
          selector
        });
      }
    }, {
      key: "buildChildService",
      value: function buildChildService(id2) {
        this.coursewareItemServices[id2] = this.services.build({
          name: COURSEWARE_ITEM_SERVICE,
          id: id2
        });
        return Promise.resolve(this.coursewareItemServices[id2]);
      }
    }, {
      key: "getServices",
      value: function getServices(id2) {
        if (id2 && !this.coursewareItemServices[id2]) {
          return this.buildChildService(id2);
        }
        return Promise.resolve(this.coursewareItemServices[id2 || this.id]);
      }
    }, {
      key: "get",
      value: function get(event) {
        var _event$data = event.data, pathString = _event$data.path, id2 = _event$data.id, targetSelector = _event$data.targetSelector;
        var path = getPathArray(pathString);
        return this.getService(targetSelector || id2).then(function(service) {
          return service.getInProgress(path);
        });
      }
    }, {
      key: "subscribe",
      value: function() {
        var _subscribe = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee2(event) {
          var _this = this;
          var _event$data2, pathString, id2, targetSelector, optionalCallbackFn, path;
          return regenerator.wrap(function _callee2$(_context2) {
            while (1) {
              switch (_context2.prev = _context2.next) {
                case 0:
                  _event$data2 = event.data, pathString = _event$data2.path, id2 = _event$data2.id, targetSelector = _event$data2.targetSelector, optionalCallbackFn = _event$data2.optionalCallbackFn;
                  path = getPathArray(pathString);
                  _context2.next = 4;
                  return this.getService(targetSelector || id2).then(/* @__PURE__ */ function() {
                    var _ref = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee(service) {
                      var subscriptionId, unsubscribeFn, gatewayTrackedUnsubscribeFn;
                      return regenerator.wrap(function _callee$(_context) {
                        while (1) {
                          switch (_context.prev = _context.next) {
                            case 0:
                              subscriptionId = SubscriptionIdProvider.createSubscriptionId();
                              if (!optionalCallbackFn) {
                                _context.next = 7;
                                break;
                              }
                              _context.next = 4;
                              return service.subscribeToProgress(path, function(nextValue) {
                                optionalCallbackFn(nextValue).then(function() {
                                });
                              }, _this.id);
                            case 4:
                              unsubscribeFn = _context.sent;
                              _context.next = 10;
                              break;
                            case 7:
                              _context.next = 9;
                              return service.subscribeToProgress(path, function(nextValue) {
                                _this.gateway.notify({
                                  subscriptionId,
                                  payload: nextValue
                                });
                              }, _this.id);
                            case 9:
                              unsubscribeFn = _context.sent;
                            case 10:
                              gatewayTrackedUnsubscribeFn = _this.gateway.addActiveSubscription(unsubscribeFn);
                              return _context.abrupt("return", {
                                subscriptionId,
                                unsubscribe: gatewayTrackedUnsubscribeFn
                              });
                            case 12:
                            case "end":
                              return _context.stop();
                          }
                        }
                      }, _callee);
                    }));
                    return function(_x2) {
                      return _ref.apply(this, arguments);
                    };
                  }());
                case 4:
                  return _context2.abrupt("return", _context2.sent);
                case 5:
                case "end":
                  return _context2.stop();
              }
            }
          }, _callee2, this);
        }));
        function subscribe(_x) {
          return _subscribe.apply(this, arguments);
        }
        return subscribe;
      }()
    }]);
    return ProgressResourceProvider2;
  }(ResourceProvider);
  function _createSuper$d(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$d();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$d() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var ContextResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(ContextResourceProvider2, _ResourceProvider);
    var _super = _createSuper$d(ContextResourceProvider2);
    function ContextResourceProvider2() {
      _classCallCheck(this, ContextResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(ContextResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.gateway.register(CONTEXT_RESOURCE).method(GET, this.get.bind(this));
      }
    }, {
      key: "get",
      value: function get(event) {
        var localContext = event.data.localContext;
        return localContext || this.context;
      }
    }]);
    return ContextResourceProvider2;
  }(ResourceProvider);
  function _createSuper$c(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$c();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$c() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var FeatureFlagResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(FeatureFlagResourceProvider2, _ResourceProvider);
    var _super = _createSuper$c(FeatureFlagResourceProvider2);
    function FeatureFlagResourceProvider2() {
      _classCallCheck(this, FeatureFlagResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(FeatureFlagResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.gateway.register(FEATURE_FLAG_RESOURCE).method(GET, this.get.bind(this)).method(SUBSCRIBE, this.subscribe.bind(this)).method(IS, this.is.bind(this));
        this.featureFlagService = this.services.build({
          name: FEATURE_FLAG_SERVICE,
          context: this.context,
          id: this.id
        });
      }
    }, {
      key: "get",
      value: function get() {
        return this.featureFlagService.get();
      }
    }, {
      key: "is",
      value: function is(event) {
        return this.featureFlagService.is(event.data);
      }
    }, {
      key: "subscribe",
      value: function() {
        var _subscribe = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee(event) {
          var _this = this;
          var _event$data, flag, optionalCallbackFn, subscriptionId, unsubscribeFn, service, gatewayTrackedUnsubscribeFn;
          return regenerator.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  _event$data = event.data, flag = _event$data.flag, optionalCallbackFn = _event$data.optionalCallbackFn;
                  subscriptionId = SubscriptionIdProvider.createSubscriptionId();
                  service = this.featureFlagService;
                  if (optionalCallbackFn) {
                    unsubscribeFn = service.subscribe(flag, function(newValue) {
                      optionalCallbackFn(newValue).then(function() {
                      });
                    });
                  } else {
                    unsubscribeFn = service.subscribe(flag, function(newValue) {
                      _this.gateway.notify({
                        subscriptionId,
                        payload: newValue
                      });
                    });
                  }
                  gatewayTrackedUnsubscribeFn = this.gateway.addActiveSubscription(unsubscribeFn);
                  return _context.abrupt("return", {
                    subscriptionId,
                    unsubscribe: gatewayTrackedUnsubscribeFn
                  });
                case 6:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, this);
        }));
        function subscribe(_x) {
          return _subscribe.apply(this, arguments);
        }
        return subscribe;
      }()
    }]);
    return FeatureFlagResourceProvider2;
  }(ResourceProvider);
  function _createSuper$b(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$b();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$b() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var AssetResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(AssetResourceProvider2, _ResourceProvider);
    var _super = _createSuper$b(AssetResourceProvider2);
    function AssetResourceProvider2() {
      _classCallCheck(this, AssetResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(AssetResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.assetService = this.services.build({
          name: ASSET_SERVICE,
          id: this.id,
          context: this.context
        });
        this.gateway.register(ASSET_RESOURCE).method(PROVISION_UPLOAD, this.provisionUpload.bind(this)).method(GET_SUBSCRIPTION, this.getSubscription.bind(this)).method(INFORM_ASSET_USAGE, this.informAssetUsage.bind(this)).method(ASSET_RESOLVE, this.resolve.bind(this)).method(ASSET_CREATE, this.create.bind(this)).method(ICON_ASSET_LIST, this.getIconAssetList.bind(this));
      }
    }, {
      key: "provisionUpload",
      value: function provisionUpload() {
        return this.assetService.provisionUpload();
      }
    }, {
      key: "getSubscription",
      value: function getSubscription() {
        return this.assetService.getSubscription();
      }
    }, {
      key: "informAssetUsage",
      value: function informAssetUsage(event) {
        var urn = event.data;
        return this.assetService.informAssetUsage(this.id, this.coursewareType, urn);
      }
    }, {
      key: "resolve",
      value: function() {
        var _resolve = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee(event) {
          var urn;
          return regenerator.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  urn = event.data.urn;
                  return _context.abrupt("return", this.assetService.resolveAsset(urn));
                case 2:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, this);
        }));
        function resolve(_x) {
          return _resolve.apply(this, arguments);
        }
        return resolve;
      }()
    }, {
      key: "getIconAssetList",
      value: function getIconAssetList() {
        return this.assetService.getIconAssetList();
      }
    }, {
      key: "create",
      value: function() {
        var _create = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee2(event) {
          var _event$data, type, _event$data$id, id2, _event$data$coursewar, coursewareType, data;
          return regenerator.wrap(function _callee2$(_context2) {
            while (1) {
              switch (_context2.prev = _context2.next) {
                case 0:
                  _event$data = event.data, type = _event$data.type, _event$data$id = _event$data.id, id2 = _event$data$id === void 0 ? this.id : _event$data$id, _event$data$coursewar = _event$data.coursewareType, coursewareType = _event$data$coursewar === void 0 ? this.coursewareType : _event$data$coursewar, data = _event$data.data;
                  return _context2.abrupt("return", this.assetService.create(type, id2, coursewareType, data));
                case 2:
                case "end":
                  return _context2.stop();
              }
            }
          }, _callee2, this);
        }));
        function create(_x2) {
          return _create.apply(this, arguments);
        }
        return create;
      }()
    }]);
    return AssetResourceProvider2;
  }(ResourceProvider);
  function _createSuper$a(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$a();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$a() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var QueryResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(QueryResourceProvider2, _ResourceProvider);
    var _super = _createSuper$a(QueryResourceProvider2);
    function QueryResourceProvider2() {
      _classCallCheck(this, QueryResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(QueryResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.queryService = this.services.build({
          name: QUERY_SERVICE,
          context: this.context,
          id: this.id
        });
        this.gateway.register(QUERY_RESOURCE).method(EXECUTE_QUERY, this.executeQuery.bind(this));
      }
    }, {
      key: "executeQuery",
      value: function executeQuery(_ref) {
        var data = _ref.data;
        return this.queryService.executeQuery(data);
      }
    }]);
    return QueryResourceProvider2;
  }(ResourceProvider);
  function _createSuper$9(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$9();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$9() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var DeprecatedResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(DeprecatedResourceProvider2, _ResourceProvider);
    var _super = _createSuper$9(DeprecatedResourceProvider2);
    function DeprecatedResourceProvider2() {
      _classCallCheck(this, DeprecatedResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(DeprecatedResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.deprecatedResourceService = this.services.build({
          name: DEPRECATED_RESOURCE_SERVICE,
          context: this.context,
          id: this.id
        });
        this.gateway.register(DEPRECATED_RESOURCE).method(DEPRECATED_CONTINUE, this.__continue.bind(this)).method(DEPRECATED_SUBSCRIBE_TO_MOVE_ON, this.subscribeToMoveOn.bind(this)).method(DEPRECATED_UNSUBSCRIBE_FROM_MOVE_ON, this.unsubscribeFromMoveOn.bind(this));
      }
    }, {
      key: "__continue",
      value: function __continue() {
        this.deprecatedResourceService.moveOn();
      }
    }, {
      key: "subscribeToMoveOn",
      value: function subscribeToMoveOn(event) {
        if (this.deprecatedResourceService.subscribeToMoveOn && !this.subscription) {
          var _event$data = event.data, targetId = _event$data.targetId, notify = _event$data.notify;
          this.subscription = this.deprecatedResourceService.subscribeToMoveOn(targetId, notify);
        }
      }
    }, {
      key: "unsubscribeFromMoveOn",
      value: function unsubscribeFromMoveOn() {
        if (this.deprecatedResourceService.unsubscribeFromMoveOn && this.subscription) {
          this.deprecatedResourceService.unsubscribeFromMoveOn(this.subscription);
          this.subscription = void 0;
        }
      }
    }]);
    return DeprecatedResourceProvider2;
  }(ResourceProvider);
  function _createSuper$8(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$8();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$8() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var CompetencyResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(CompetencyResourceProvider2, _ResourceProvider);
    var _super = _createSuper$8(CompetencyResourceProvider2);
    function CompetencyResourceProvider2() {
      _classCallCheck(this, CompetencyResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(CompetencyResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.gateway.register(COMPETENCY_RESOURCE).method(GET, this.get.bind(this)).method(SUBSCRIBE, this.subscribe.bind(this));
      }
    }, {
      key: "getService",
      value: function getService2(selector) {
        return this.targetableServiceProvider.requestTargetable({
          name: COMPETENCY_SERVICE,
          context: this.context,
          id: this.id,
          selector
        });
      }
    }, {
      key: "get",
      value: function() {
        var _get = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee(event) {
          var _event$data, documentId, itemId, id2, targetSelector, service;
          return regenerator.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  _event$data = event.data, documentId = _event$data.documentId, itemId = _event$data.itemId, id2 = _event$data.id, targetSelector = _event$data.targetSelector;
                  _context.next = 3;
                  return this.getService(targetSelector || id2);
                case 3:
                  service = _context.sent;
                  return _context.abrupt("return", service.get(documentId, itemId));
                case 5:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, this);
        }));
        function get(_x) {
          return _get.apply(this, arguments);
        }
        return get;
      }()
    }, {
      key: "subscribe",
      value: function() {
        var _subscribe = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee2(event) {
          var _event$data2, documentId, itemId, id2, targetSelector, optionalCallbackFn, service;
          return regenerator.wrap(function _callee2$(_context2) {
            while (1) {
              switch (_context2.prev = _context2.next) {
                case 0:
                  _event$data2 = event.data, documentId = _event$data2.documentId, itemId = _event$data2.itemId, id2 = _event$data2.id, targetSelector = _event$data2.targetSelector, optionalCallbackFn = _event$data2.optionalCallbackFn;
                  _context2.next = 3;
                  return this.getService(targetSelector || id2);
                case 3:
                  service = _context2.sent;
                  return _context2.abrupt("return", service.subscribe(documentId, itemId, optionalCallbackFn));
                case 5:
                case "end":
                  return _context2.stop();
              }
            }
          }, _callee2, this);
        }));
        function subscribe(_x2) {
          return _subscribe.apply(this, arguments);
        }
        return subscribe;
      }()
    }]);
    return CompetencyResourceProvider2;
  }(ResourceProvider);
  function _createSuper$7(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$7();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$7() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var AnnotationsResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(AnnotationsResourceProvider2, _ResourceProvider);
    var _super = _createSuper$7(AnnotationsResourceProvider2);
    function AnnotationsResourceProvider2() {
      _classCallCheck(this, AnnotationsResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(AnnotationsResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.gateway.register(ANNOTATIONS_RESOURCE).method(GET, this.getAnnotations.bind(this)).method(SUBSCRIBE, this.subscribeToAnnotations.bind(this)).method(GET_ANNOTATION, this.getAnnotation.bind(this)).method(SET_ANNOTATION, this.setAnnotation.bind(this)).method(CREATE_ANNOTATION, this.createAnnotation.bind(this)).method(READ_ANNOTATION, this.readAnnotation.bind(this)).method(UNREAD_ANNOTATION, this.unreadAnnotation.bind(this)).method(RESOLVE_ANNOTATION, this.resolveAnnotation.bind(this)).method(DELETE_ANNOTATION, this.deleteAnnotation.bind(this));
      }
    }, {
      key: "getService",
      value: function getService2(selector) {
        return this.targetableServiceProvider.requestTargetable({
          name: ANNOTATIONS_SERVICE,
          context: this.context,
          id: this.id,
          selector
        });
      }
    }, {
      key: "getAnnotations",
      value: function() {
        var _getAnnotations = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee(event) {
          var _event$data, targetSelector, motivation, service;
          return regenerator.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  _event$data = event.data, targetSelector = _event$data.targetSelector, motivation = _event$data.motivation;
                  _context.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context.sent;
                  return _context.abrupt("return", service.getAnnotationsByMotivation(motivation));
                case 5:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, this);
        }));
        function getAnnotations(_x) {
          return _getAnnotations.apply(this, arguments);
        }
        return getAnnotations;
      }()
    }, {
      key: "subscribeToAnnotations",
      value: function() {
        var _subscribeToAnnotations = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee2(event) {
          var _this = this;
          var _event$data2, targetSelector, motivation, optionalCallbackFn, service, subscriptionId, unsubscribeFn, gatewayTrackedUnsubscribeFn;
          return regenerator.wrap(function _callee2$(_context2) {
            while (1) {
              switch (_context2.prev = _context2.next) {
                case 0:
                  _event$data2 = event.data, targetSelector = _event$data2.targetSelector, motivation = _event$data2.motivation, optionalCallbackFn = _event$data2.optionalCallbackFn;
                  _context2.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context2.sent;
                  subscriptionId = SubscriptionIdProvider.createSubscriptionId();
                  if (!optionalCallbackFn) {
                    _context2.next = 11;
                    break;
                  }
                  _context2.next = 8;
                  return service.subscribeToAnnotationMotivation(motivation, function(nextValue) {
                    optionalCallbackFn(nextValue).then(function() {
                    });
                  });
                case 8:
                  unsubscribeFn = _context2.sent;
                  _context2.next = 14;
                  break;
                case 11:
                  _context2.next = 13;
                  return service.subscribeToAnnotationMotivation(motivation, function(nextValue) {
                    _this.gateway.notify({
                      subscriptionId,
                      payload: nextValue
                    });
                  });
                case 13:
                  unsubscribeFn = _context2.sent;
                case 14:
                  gatewayTrackedUnsubscribeFn = this.gateway.addActiveSubscription(unsubscribeFn);
                  return _context2.abrupt("return", {
                    subscriptionId,
                    unsubscribe: gatewayTrackedUnsubscribeFn
                  });
                case 16:
                case "end":
                  return _context2.stop();
              }
            }
          }, _callee2, this);
        }));
        function subscribeToAnnotations(_x2) {
          return _subscribeToAnnotations.apply(this, arguments);
        }
        return subscribeToAnnotations;
      }()
    }, {
      key: "getAnnotation",
      value: function() {
        var _getAnnotation = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee3(event) {
          var _event$data3, targetSelector, motivation, annotationId, service;
          return regenerator.wrap(function _callee3$(_context3) {
            while (1) {
              switch (_context3.prev = _context3.next) {
                case 0:
                  _event$data3 = event.data, targetSelector = _event$data3.targetSelector, motivation = _event$data3.motivation, annotationId = _event$data3.annotationId;
                  _context3.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context3.sent;
                  return _context3.abrupt("return", service.getAnnotationById(motivation, annotationId));
                case 5:
                case "end":
                  return _context3.stop();
              }
            }
          }, _callee3, this);
        }));
        function getAnnotation(_x3) {
          return _getAnnotation.apply(this, arguments);
        }
        return getAnnotation;
      }()
    }, {
      key: "setAnnotation",
      value: function() {
        var _setAnnotation = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee4(event) {
          var _event$data4, targetSelector, annotationId, body, service;
          return regenerator.wrap(function _callee4$(_context4) {
            while (1) {
              switch (_context4.prev = _context4.next) {
                case 0:
                  _event$data4 = event.data, targetSelector = _event$data4.targetSelector, annotationId = _event$data4.annotationId, body = _event$data4.body;
                  _context4.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context4.sent;
                  return _context4.abrupt("return", service.setAnnotationBody(annotationId, body));
                case 5:
                case "end":
                  return _context4.stop();
              }
            }
          }, _callee4, this);
        }));
        function setAnnotation(_x4) {
          return _setAnnotation.apply(this, arguments);
        }
        return setAnnotation;
      }()
    }, {
      key: "createAnnotation",
      value: function() {
        var _createAnnotation = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee5(event) {
          var _event$data5, targetSelector, motivation, body, subTarget, service;
          return regenerator.wrap(function _callee5$(_context5) {
            while (1) {
              switch (_context5.prev = _context5.next) {
                case 0:
                  _event$data5 = event.data, targetSelector = _event$data5.targetSelector, motivation = _event$data5.motivation, body = _event$data5.body, subTarget = _event$data5.subTarget;
                  _context5.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context5.sent;
                  return _context5.abrupt("return", service.createAnnotation(motivation, body, subTarget));
                case 5:
                case "end":
                  return _context5.stop();
              }
            }
          }, _callee5, this);
        }));
        function createAnnotation(_x5) {
          return _createAnnotation.apply(this, arguments);
        }
        return createAnnotation;
      }()
    }, {
      key: "resolveAnnotation",
      value: function() {
        var _resolveAnnotation = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee6(event) {
          var _event$data6, targetSelector, annotationId, annotationVersion, annotations, service;
          return regenerator.wrap(function _callee6$(_context6) {
            while (1) {
              switch (_context6.prev = _context6.next) {
                case 0:
                  _event$data6 = event.data, targetSelector = _event$data6.targetSelector, annotationId = _event$data6.annotationId, annotationVersion = _event$data6.annotationVersion, annotations = _event$data6.annotations;
                  _context6.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context6.sent;
                  return _context6.abrupt("return", service.resolveAnnotation(annotationId, annotationVersion, annotations));
                case 5:
                case "end":
                  return _context6.stop();
              }
            }
          }, _callee6, this);
        }));
        function resolveAnnotation(_x6) {
          return _resolveAnnotation.apply(this, arguments);
        }
        return resolveAnnotation;
      }()
    }, {
      key: "readAnnotation",
      value: function() {
        var _readAnnotation = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee7(event) {
          var _event$data7, targetSelector, annotationIds, service;
          return regenerator.wrap(function _callee7$(_context7) {
            while (1) {
              switch (_context7.prev = _context7.next) {
                case 0:
                  _event$data7 = event.data, targetSelector = _event$data7.targetSelector, annotationIds = _event$data7.annotationIds;
                  _context7.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context7.sent;
                  return _context7.abrupt("return", service.readAnnotation(annotationIds));
                case 5:
                case "end":
                  return _context7.stop();
              }
            }
          }, _callee7, this);
        }));
        function readAnnotation(_x7) {
          return _readAnnotation.apply(this, arguments);
        }
        return readAnnotation;
      }()
    }, {
      key: "unreadAnnotation",
      value: function() {
        var _unreadAnnotation = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee8(event) {
          var _event$data8, targetSelector, annotationIds, service;
          return regenerator.wrap(function _callee8$(_context8) {
            while (1) {
              switch (_context8.prev = _context8.next) {
                case 0:
                  _event$data8 = event.data, targetSelector = _event$data8.targetSelector, annotationIds = _event$data8.annotationIds;
                  _context8.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context8.sent;
                  return _context8.abrupt("return", service.unreadAnnotation(annotationIds));
                case 5:
                case "end":
                  return _context8.stop();
              }
            }
          }, _callee8, this);
        }));
        function unreadAnnotation(_x8) {
          return _unreadAnnotation.apply(this, arguments);
        }
        return unreadAnnotation;
      }()
    }, {
      key: "deleteAnnotation",
      value: function() {
        var _deleteAnnotation = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee9(event) {
          var _event$data9, targetSelector, annotationId, service;
          return regenerator.wrap(function _callee9$(_context9) {
            while (1) {
              switch (_context9.prev = _context9.next) {
                case 0:
                  _event$data9 = event.data, targetSelector = _event$data9.targetSelector, annotationId = _event$data9.annotationId;
                  _context9.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context9.sent;
                  return _context9.abrupt("return", service.deleteAnnotation(annotationId));
                case 5:
                case "end":
                  return _context9.stop();
              }
            }
          }, _callee9, this);
        }));
        function deleteAnnotation(_x9) {
          return _deleteAnnotation.apply(this, arguments);
        }
        return deleteAnnotation;
      }()
    }]);
    return AnnotationsResourceProvider2;
  }(ResourceProvider);
  function _createSuper$6(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$6();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$6() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var HistoryResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(HistoryResourceProvider2, _ResourceProvider);
    var _super = _createSuper$6(HistoryResourceProvider2);
    function HistoryResourceProvider2() {
      _classCallCheck(this, HistoryResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(HistoryResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.gateway.register(HISTORY_RESOURCE).method(GET, this.get.bind(this)).method(SUBSCRIBE, this.subscribe.bind(this));
      }
    }, {
      key: "getService",
      value: function getService2(selector) {
        return this.targetableServiceProvider.requestTargetable({
          name: HISTORY_SERVICE,
          context: this.context,
          id: this.id,
          selector
        });
      }
    }, {
      key: "get",
      value: function() {
        var _get = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee(event) {
          var targetSelector, service;
          return regenerator.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  targetSelector = event.data.targetSelector;
                  _context.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context.sent;
                  return _context.abrupt("return", service.get());
                case 5:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, this);
        }));
        function get(_x) {
          return _get.apply(this, arguments);
        }
        return get;
      }()
    }, {
      key: "subscribe",
      value: function() {
        var _subscribe = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee2(event) {
          var _this = this;
          var _event$data, targetSelector, optionalCallbackFn, service, subscriptionId, unsubscribeFn, gatewayTrackedUnsubscribeFn;
          return regenerator.wrap(function _callee2$(_context2) {
            while (1) {
              switch (_context2.prev = _context2.next) {
                case 0:
                  _event$data = event.data, targetSelector = _event$data.targetSelector, optionalCallbackFn = _event$data.optionalCallbackFn;
                  _context2.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context2.sent;
                  subscriptionId = SubscriptionIdProvider.createSubscriptionId();
                  if (!optionalCallbackFn) {
                    _context2.next = 11;
                    break;
                  }
                  _context2.next = 8;
                  return service.subscribe(function(nextValue) {
                    optionalCallbackFn(nextValue).then(function() {
                    });
                  }, this.id);
                case 8:
                  unsubscribeFn = _context2.sent;
                  _context2.next = 14;
                  break;
                case 11:
                  _context2.next = 13;
                  return service.subscribe(function(nextValue) {
                    _this.gateway.notify({
                      subscriptionId,
                      payload: nextValue
                    });
                  }, this.id);
                case 13:
                  unsubscribeFn = _context2.sent;
                case 14:
                  gatewayTrackedUnsubscribeFn = this.gateway.addActiveSubscription(unsubscribeFn);
                  return _context2.abrupt("return", {
                    subscriptionId,
                    unsubscribe: gatewayTrackedUnsubscribeFn
                  });
                case 16:
                case "end":
                  return _context2.stop();
              }
            }
          }, _callee2, this);
        }));
        function subscribe(_x2) {
          return _subscribe.apply(this, arguments);
        }
        return subscribe;
      }()
    }]);
    return HistoryResourceProvider2;
  }(ResourceProvider);
  function _createSuper$5(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$5();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$5() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var RouteResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(RouteResourceProvider2, _ResourceProvider);
    var _super = _createSuper$5(RouteResourceProvider2);
    function RouteResourceProvider2() {
      _classCallCheck(this, RouteResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(RouteResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.gateway.register(ROUTE_RESOURCE).method(GET, this.getRoute.bind(this)).method(SET, this.setRoute.bind(this)).method(SUBSCRIBE, this.subscribeToRoute.bind(this)).method(IS_CURRENT_ROUTE, this.isCurrentRoute.bind(this)).method(IS_EXACT_ROUTE, this.isExactRoute.bind(this));
      }
    }, {
      key: "getService",
      value: function getService2(selector) {
        return this.targetableServiceProvider.requestTargetable({
          name: ROUTE_SERVICE,
          context: this.context,
          id: this.id,
          selector
        });
      }
    }, {
      key: "getRoute",
      value: function() {
        var _getRoute = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee(event) {
          var targetSelector, service;
          return regenerator.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  targetSelector = event.data.targetSelector;
                  _context.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context.sent;
                  return _context.abrupt("return", service.getRoute());
                case 5:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, this);
        }));
        function getRoute(_x) {
          return _getRoute.apply(this, arguments);
        }
        return getRoute;
      }()
    }, {
      key: "setRoute",
      value: function() {
        var _setRoute = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee2(event) {
          var _event$data, targetSelector, subTarget, service;
          return regenerator.wrap(function _callee2$(_context2) {
            while (1) {
              switch (_context2.prev = _context2.next) {
                case 0:
                  _event$data = event.data, targetSelector = _event$data.targetSelector, subTarget = _event$data.subTarget;
                  _context2.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context2.sent;
                  return _context2.abrupt("return", service.routeTo(subTarget));
                case 5:
                case "end":
                  return _context2.stop();
              }
            }
          }, _callee2, this);
        }));
        function setRoute(_x2) {
          return _setRoute.apply(this, arguments);
        }
        return setRoute;
      }()
    }, {
      key: "subscribeToRoute",
      value: function() {
        var _subscribeToRoute = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee3(event) {
          var _this = this;
          var _event$data2, targetSelector, optionalCallbackFn, service, subscriptionId, unsubscribeFn, gatewayTrackedUnsubscribeFn;
          return regenerator.wrap(function _callee3$(_context3) {
            while (1) {
              switch (_context3.prev = _context3.next) {
                case 0:
                  _event$data2 = event.data, targetSelector = _event$data2.targetSelector, optionalCallbackFn = _event$data2.optionalCallbackFn;
                  _context3.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context3.sent;
                  subscriptionId = SubscriptionIdProvider.createSubscriptionId();
                  if (optionalCallbackFn) {
                    unsubscribeFn = service.subscribeToRoute(function(nextValue) {
                      optionalCallbackFn(nextValue).then(function() {
                      });
                    }, this.id);
                  } else {
                    unsubscribeFn = service.subscribeToRoute(function(nextValue) {
                      _this.gateway.notify({
                        subscriptionId,
                        payload: nextValue
                      });
                    }, this.id);
                  }
                  gatewayTrackedUnsubscribeFn = this.gateway.addActiveSubscription(unsubscribeFn);
                  return _context3.abrupt("return", {
                    subscriptionId,
                    unsubscribe: gatewayTrackedUnsubscribeFn
                  });
                case 8:
                case "end":
                  return _context3.stop();
              }
            }
          }, _callee3, this);
        }));
        function subscribeToRoute(_x3) {
          return _subscribeToRoute.apply(this, arguments);
        }
        return subscribeToRoute;
      }()
    }, {
      key: "isCurrentRoute",
      value: function() {
        var _isCurrentRoute = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee4(event) {
          var targetSelector, service, currentRouteTarget;
          return regenerator.wrap(function _callee4$(_context4) {
            while (1) {
              switch (_context4.prev = _context4.next) {
                case 0:
                  targetSelector = event.data.targetSelector;
                  _context4.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context4.sent;
                  _context4.next = 6;
                  return service.getRoute();
                case 6:
                  currentRouteTarget = _context4.sent;
                  if (currentRouteTarget) {
                    _context4.next = 9;
                    break;
                  }
                  return _context4.abrupt("return", false);
                case 9:
                  return _context4.abrupt("return", service._target.id === currentRouteTarget.id || !!currentRouteTarget.ancestry.find(function(_ref) {
                    var elementId = _ref.elementId;
                    return elementId === service._target.id;
                  }));
                case 10:
                case "end":
                  return _context4.stop();
              }
            }
          }, _callee4, this);
        }));
        function isCurrentRoute(_x4) {
          return _isCurrentRoute.apply(this, arguments);
        }
        return isCurrentRoute;
      }()
    }, {
      key: "isExactRoute",
      value: function() {
        var _isExactRoute = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee5(event) {
          var targetSelector, service, currentRouteTarget;
          return regenerator.wrap(function _callee5$(_context5) {
            while (1) {
              switch (_context5.prev = _context5.next) {
                case 0:
                  targetSelector = event.data.targetSelector;
                  _context5.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context5.sent;
                  _context5.next = 6;
                  return service.getRoute();
                case 6:
                  currentRouteTarget = _context5.sent;
                  if (currentRouteTarget) {
                    _context5.next = 9;
                    break;
                  }
                  return _context5.abrupt("return", false);
                case 9:
                  return _context5.abrupt("return", service._target.id === currentRouteTarget.id);
                case 10:
                case "end":
                  return _context5.stop();
              }
            }
          }, _callee5, this);
        }));
        function isExactRoute(_x5) {
          return _isExactRoute.apply(this, arguments);
        }
        return isExactRoute;
      }()
    }]);
    return RouteResourceProvider2;
  }(ResourceProvider);
  function _createSuper$4(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$4();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$4() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var SelectionResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(SelectionResourceProvider2, _ResourceProvider);
    var _super = _createSuper$4(SelectionResourceProvider2);
    function SelectionResourceProvider2() {
      _classCallCheck(this, SelectionResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(SelectionResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.gateway.register(SELECTION_RESOURCE).method(GET, this.getSelection.bind(this)).method(ADD, this.addSelection.bind(this)).method(SET, this.setSelection.bind(this)).method(SUBSCRIBE, this.subscribeToSelection.bind(this)).method(LENGTH, this.lengthOfSelection.bind(this)).method(CLEAR, this.clearSelection.bind(this)).method(REMOVE, this.removeSelection.bind(this)).method(IS_CURRENT, this.isCurrentSelection.bind(this)).method(IS_EXACT, this.isExactSelection.bind(this)).method(COPY, this.copiedToClipboard.bind(this)).method(PASTE, this.pasteFromClipboard.bind(this)).method(GET_URL, this.getUrl.bind(this));
      }
    }, {
      key: "getService",
      value: function getService2(selector) {
        return this.targetableServiceProvider.requestTargetable({
          name: SELECTION_SERVICE,
          context: this.context,
          id: this.id,
          selector
        });
      }
    }, {
      key: "getSelection",
      value: function() {
        var _getSelection = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee(event) {
          var targetSelector, service;
          return regenerator.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  targetSelector = event.data.targetSelector;
                  _context.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context.sent;
                  return _context.abrupt("return", service.get());
                case 5:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, this);
        }));
        function getSelection(_x) {
          return _getSelection.apply(this, arguments);
        }
        return getSelection;
      }()
    }, {
      key: "setSelection",
      value: function() {
        var _setSelection = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee2(event) {
          var _event$data, targetSelector, subTarget, service;
          return regenerator.wrap(function _callee2$(_context2) {
            while (1) {
              switch (_context2.prev = _context2.next) {
                case 0:
                  _event$data = event.data, targetSelector = _event$data.targetSelector, subTarget = _event$data.subTarget;
                  _context2.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context2.sent;
                  return _context2.abrupt("return", service.set(subTarget));
                case 5:
                case "end":
                  return _context2.stop();
              }
            }
          }, _callee2, this);
        }));
        function setSelection(_x2) {
          return _setSelection.apply(this, arguments);
        }
        return setSelection;
      }()
    }, {
      key: "addSelection",
      value: function() {
        var _addSelection = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee3(event) {
          var _event$data2, targetSelector, subTarget, service;
          return regenerator.wrap(function _callee3$(_context3) {
            while (1) {
              switch (_context3.prev = _context3.next) {
                case 0:
                  _event$data2 = event.data, targetSelector = _event$data2.targetSelector, subTarget = _event$data2.subTarget;
                  _context3.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context3.sent;
                  return _context3.abrupt("return", service.add(subTarget));
                case 5:
                case "end":
                  return _context3.stop();
              }
            }
          }, _callee3, this);
        }));
        function addSelection(_x3) {
          return _addSelection.apply(this, arguments);
        }
        return addSelection;
      }()
    }, {
      key: "isCurrentSelection",
      value: function() {
        var _isCurrentSelection = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee4(event) {
          var targetSelector, service, coursewareTargets;
          return regenerator.wrap(function _callee4$(_context4) {
            while (1) {
              switch (_context4.prev = _context4.next) {
                case 0:
                  targetSelector = event.data.targetSelector;
                  _context4.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context4.sent;
                  coursewareTargets = service.get();
                  return _context4.abrupt("return", !!coursewareTargets.find(function(selectedTarget) {
                    return service._target.id === selectedTarget.id || !!selectedTarget.ancestry.find(function(_ref) {
                      var elementId = _ref.elementId;
                      return elementId === service._target.id;
                    });
                  }));
                case 6:
                case "end":
                  return _context4.stop();
              }
            }
          }, _callee4, this);
        }));
        function isCurrentSelection(_x4) {
          return _isCurrentSelection.apply(this, arguments);
        }
        return isCurrentSelection;
      }()
    }, {
      key: "isExactSelection",
      value: function() {
        var _isExactSelection = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee5(event) {
          var targetSelector, service, coursewareTargets;
          return regenerator.wrap(function _callee5$(_context5) {
            while (1) {
              switch (_context5.prev = _context5.next) {
                case 0:
                  targetSelector = event.data.targetSelector;
                  _context5.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context5.sent;
                  coursewareTargets = service.get();
                  return _context5.abrupt("return", !!coursewareTargets.find(function(cw) {
                    return cw.id === service._target.id;
                  }));
                case 6:
                case "end":
                  return _context5.stop();
              }
            }
          }, _callee5, this);
        }));
        function isExactSelection(_x5) {
          return _isExactSelection.apply(this, arguments);
        }
        return isExactSelection;
      }()
    }, {
      key: "subscribeToSelection",
      value: function() {
        var _subscribeToSelection = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee6(event) {
          var _this = this;
          var _event$data3, targetSelector, optionalCallbackFn, service, subscriptionId, unsubscribeFn, gatewayTrackedUnsubscribeFn;
          return regenerator.wrap(function _callee6$(_context6) {
            while (1) {
              switch (_context6.prev = _context6.next) {
                case 0:
                  _event$data3 = event.data, targetSelector = _event$data3.targetSelector, optionalCallbackFn = _event$data3.optionalCallbackFn;
                  _context6.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context6.sent;
                  subscriptionId = SubscriptionIdProvider.createSubscriptionId();
                  if (optionalCallbackFn) {
                    unsubscribeFn = service.subscribeToSelection(function(nextValue) {
                      optionalCallbackFn(nextValue).then(function() {
                      });
                    });
                  } else {
                    unsubscribeFn = service.subscribeToSelection(function(nextValue) {
                      _this.gateway.notify({
                        subscriptionId,
                        payload: nextValue
                      });
                    });
                  }
                  gatewayTrackedUnsubscribeFn = this.gateway.addActiveSubscription(unsubscribeFn);
                  return _context6.abrupt("return", {
                    subscriptionId,
                    unsubscribe: gatewayTrackedUnsubscribeFn
                  });
                case 8:
                case "end":
                  return _context6.stop();
              }
            }
          }, _callee6, this);
        }));
        function subscribeToSelection(_x6) {
          return _subscribeToSelection.apply(this, arguments);
        }
        return subscribeToSelection;
      }()
    }, {
      key: "lengthOfSelection",
      value: function() {
        var _lengthOfSelection = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee7(event) {
          var targetSelector, service;
          return regenerator.wrap(function _callee7$(_context7) {
            while (1) {
              switch (_context7.prev = _context7.next) {
                case 0:
                  targetSelector = event.data.targetSelector;
                  _context7.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context7.sent;
                  return _context7.abrupt("return", service.get().length);
                case 5:
                case "end":
                  return _context7.stop();
              }
            }
          }, _callee7, this);
        }));
        function lengthOfSelection(_x7) {
          return _lengthOfSelection.apply(this, arguments);
        }
        return lengthOfSelection;
      }()
    }, {
      key: "removeSelection",
      value: function() {
        var _removeSelection = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee8(event) {
          var _event$data4, targetSelector, subTarget, service;
          return regenerator.wrap(function _callee8$(_context8) {
            while (1) {
              switch (_context8.prev = _context8.next) {
                case 0:
                  _event$data4 = event.data, targetSelector = _event$data4.targetSelector, subTarget = _event$data4.subTarget;
                  _context8.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context8.sent;
                  return _context8.abrupt("return", service.remove(subTarget));
                case 5:
                case "end":
                  return _context8.stop();
              }
            }
          }, _callee8, this);
        }));
        function removeSelection(_x8) {
          return _removeSelection.apply(this, arguments);
        }
        return removeSelection;
      }()
    }, {
      key: "clearSelection",
      value: function() {
        var _clearSelection = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee9(event) {
          var targetSelector, service;
          return regenerator.wrap(function _callee9$(_context9) {
            while (1) {
              switch (_context9.prev = _context9.next) {
                case 0:
                  targetSelector = event.data.targetSelector;
                  _context9.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context9.sent;
                  return _context9.abrupt("return", service.clear());
                case 5:
                case "end":
                  return _context9.stop();
              }
            }
          }, _callee9, this);
        }));
        function clearSelection(_x9) {
          return _clearSelection.apply(this, arguments);
        }
        return clearSelection;
      }()
    }, {
      key: "copiedToClipboard",
      value: function() {
        var _copiedToClipboard = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee10(event) {
          var targetSelector, service;
          return regenerator.wrap(function _callee10$(_context10) {
            while (1) {
              switch (_context10.prev = _context10.next) {
                case 0:
                  targetSelector = event.data.targetSelector;
                  _context10.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context10.sent;
                  return _context10.abrupt("return", service.alertCopySuccess());
                case 5:
                case "end":
                  return _context10.stop();
              }
            }
          }, _callee10, this);
        }));
        function copiedToClipboard(_x10) {
          return _copiedToClipboard.apply(this, arguments);
        }
        return copiedToClipboard;
      }()
    }, {
      key: "getUrl",
      value: function() {
        var _getUrl = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee11(event) {
          var callback;
          return regenerator.wrap(function _callee11$(_context11) {
            while (1) {
              switch (_context11.prev = _context11.next) {
                case 0:
                  callback = event.data.callback;
                  return _context11.abrupt("return", callback(location.href));
                case 2:
                case "end":
                  return _context11.stop();
              }
            }
          }, _callee11);
        }));
        function getUrl(_x11) {
          return _getUrl.apply(this, arguments);
        }
        return getUrl;
      }()
    }, {
      key: "pasteFromClipboard",
      value: function() {
        var _pasteFromClipboard = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee12(event) {
          var _event$data5, targetSelector, value, service;
          return regenerator.wrap(function _callee12$(_context12) {
            while (1) {
              switch (_context12.prev = _context12.next) {
                case 0:
                  _event$data5 = event.data, targetSelector = _event$data5.targetSelector, value = _event$data5.value;
                  _context12.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context12.sent;
                  return _context12.abrupt("return", service.paste(value));
                case 5:
                case "end":
                  return _context12.stop();
              }
            }
          }, _callee12, this);
        }));
        function pasteFromClipboard(_x12) {
          return _pasteFromClipboard.apply(this, arguments);
        }
        return pasteFromClipboard;
      }()
    }]);
    return SelectionResourceProvider2;
  }(ResourceProvider);
  function _createSuper$3(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$3();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$3() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var PluginResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(PluginResourceProvider2, _ResourceProvider);
    var _super = _createSuper$3(PluginResourceProvider2);
    function PluginResourceProvider2() {
      _classCallCheck(this, PluginResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(PluginResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.gateway.register(PLUGIN_RESOURCE).method(GET, this.getPlugin.bind(this));
      }
    }, {
      key: "getService",
      value: function getService2(selector) {
        return this.targetableServiceProvider.requestTargetable({
          name: PLUGIN_SERVICE,
          context: this.context,
          id: this.id,
          selector
        });
      }
    }, {
      key: "getPlugin",
      value: function() {
        var _getPlugin = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee(event) {
          var targetSelector, service;
          return regenerator.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  targetSelector = event.data.targetSelector;
                  _context.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context.sent;
                  return _context.abrupt("return", service.getPlugin());
                case 5:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, this);
        }));
        function getPlugin(_x) {
          return _getPlugin.apply(this, arguments);
        }
        return getPlugin;
      }()
    }]);
    return PluginResourceProvider2;
  }(ResourceProvider);
  function _createSuper$2(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$2();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$2() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var LoggerResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(LoggerResourceProvider2, _ResourceProvider);
    var _super = _createSuper$2(LoggerResourceProvider2);
    function LoggerResourceProvider2() {
      _classCallCheck(this, LoggerResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(LoggerResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.gateway.register(LOGGER_RESOURCE).method(DEBUG, this.debug.bind(this)).method(ERROR, this.error.bind(this)).method(INFO, this.info.bind(this)).method(WARN, this.warn.bind(this));
      }
    }, {
      key: "getService",
      value: function getService2(selector) {
        return this.targetableServiceProvider.requestTargetable({
          name: LOGGER_SERVICE,
          context: this.context,
          id: this.id,
          selector
        });
      }
    }, {
      key: "debug",
      value: function() {
        var _debug = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee(event) {
          var _event$data, value, id2, targetSelector, service;
          return regenerator.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  _event$data = event.data, value = _event$data.value, id2 = _event$data.id, targetSelector = _event$data.targetSelector;
                  _context.next = 3;
                  return this.getService(targetSelector || id2);
                case 3:
                  service = _context.sent;
                  return _context.abrupt("return", service.debug(value));
                case 5:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, this);
        }));
        function debug(_x) {
          return _debug.apply(this, arguments);
        }
        return debug;
      }()
    }, {
      key: "error",
      value: function() {
        var _error = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee2(event) {
          var _event$data2, value, id2, targetSelector, service;
          return regenerator.wrap(function _callee2$(_context2) {
            while (1) {
              switch (_context2.prev = _context2.next) {
                case 0:
                  _event$data2 = event.data, value = _event$data2.value, id2 = _event$data2.id, targetSelector = _event$data2.targetSelector;
                  _context2.next = 3;
                  return this.getService(targetSelector || id2);
                case 3:
                  service = _context2.sent;
                  return _context2.abrupt("return", service.error(value));
                case 5:
                case "end":
                  return _context2.stop();
              }
            }
          }, _callee2, this);
        }));
        function error(_x2) {
          return _error.apply(this, arguments);
        }
        return error;
      }()
    }, {
      key: "info",
      value: function() {
        var _info = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee3(event) {
          var _event$data3, value, id2, targetSelector, service;
          return regenerator.wrap(function _callee3$(_context3) {
            while (1) {
              switch (_context3.prev = _context3.next) {
                case 0:
                  _event$data3 = event.data, value = _event$data3.value, id2 = _event$data3.id, targetSelector = _event$data3.targetSelector;
                  _context3.next = 3;
                  return this.getService(targetSelector || id2);
                case 3:
                  service = _context3.sent;
                  return _context3.abrupt("return", service.info(value));
                case 5:
                case "end":
                  return _context3.stop();
              }
            }
          }, _callee3, this);
        }));
        function info(_x3) {
          return _info.apply(this, arguments);
        }
        return info;
      }()
    }, {
      key: "warn",
      value: function() {
        var _warn = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee4(event) {
          var _event$data4, value, id2, targetSelector, service;
          return regenerator.wrap(function _callee4$(_context4) {
            while (1) {
              switch (_context4.prev = _context4.next) {
                case 0:
                  _event$data4 = event.data, value = _event$data4.value, id2 = _event$data4.id, targetSelector = _event$data4.targetSelector;
                  _context4.next = 3;
                  return this.getService(targetSelector || id2);
                case 3:
                  service = _context4.sent;
                  return _context4.abrupt("return", service.warn(value));
                case 5:
                case "end":
                  return _context4.stop();
              }
            }
          }, _callee4, this);
        }));
        function warn(_x4) {
          return _warn.apply(this, arguments);
        }
        return warn;
      }()
    }]);
    return LoggerResourceProvider2;
  }(ResourceProvider);
  function _createSuper$1(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct$1();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct$1() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var LTIResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(LTIResourceProvider2, _ResourceProvider);
    var _super = _createSuper$1(LTIResourceProvider2);
    function LTIResourceProvider2() {
      _classCallCheck(this, LTIResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(LTIResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.gateway.register(LTI_RESOURCE).method(LAUNCH, this.launch.bind(this)).method(EMBED, this.embed.bind(this));
      }
    }, {
      key: "getService",
      value: function getService2(selector) {
        return this.targetableServiceProvider.requestTargetable({
          name: LTI_SERVICE,
          context: this.context,
          id: this.id,
          selector
        });
      }
    }, {
      key: "launch",
      value: function() {
        var _launch = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee(event) {
          var _event$data, url, key, params, targetSelector, mode, service;
          return regenerator.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  _event$data = event.data, url = _event$data.url, key = _event$data.key, params = _event$data.params, targetSelector = _event$data.targetSelector, mode = _event$data.mode;
                  _context.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context.sent;
                  return _context.abrupt("return", service.launch({
                    url,
                    key,
                    params,
                    mode
                  }));
                case 5:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, this);
        }));
        function launch(_x) {
          return _launch.apply(this, arguments);
        }
        return launch;
      }()
    }, {
      key: "embed",
      value: function() {
        var _embed = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee2(event) {
          var _event$data2, url, key, params, targetSelector, service;
          return regenerator.wrap(function _callee2$(_context2) {
            while (1) {
              switch (_context2.prev = _context2.next) {
                case 0:
                  _event$data2 = event.data, url = _event$data2.url, key = _event$data2.key, params = _event$data2.params, targetSelector = _event$data2.targetSelector;
                  _context2.next = 3;
                  return this.getService(targetSelector);
                case 3:
                  service = _context2.sent;
                  return _context2.abrupt("return", service.embed({
                    url,
                    key,
                    params
                  }));
                case 5:
                case "end":
                  return _context2.stop();
              }
            }
          }, _callee2, this);
        }));
        function embed(_x2) {
          return _embed.apply(this, arguments);
        }
        return embed;
      }()
    }]);
    return LTIResourceProvider2;
  }(ResourceProvider);
  function _createSuper(Derived) {
    var hasNativeReflectConstruct = _isNativeReflectConstruct();
    return function _createSuperInternal() {
      var Super = _getPrototypeOf(Derived), result;
      if (hasNativeReflectConstruct) {
        var NewTarget = _getPrototypeOf(this).constructor;
        result = Reflect.construct(Super, arguments, NewTarget);
      } else {
        result = Super.apply(this, arguments);
      }
      return _possibleConstructorReturn(this, result);
    };
  }
  function _isNativeReflectConstruct() {
    if (typeof Reflect === "undefined" || !Reflect.construct)
      return false;
    if (Reflect.construct.sham)
      return false;
    if (typeof Proxy === "function")
      return true;
    try {
      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
      }));
      return true;
    } catch (e) {
      return false;
    }
  }
  var EventResourceProvider = /* @__PURE__ */ function(_ResourceProvider) {
    _inherits(EventResourceProvider2, _ResourceProvider);
    var _super = _createSuper(EventResourceProvider2);
    function EventResourceProvider2() {
      _classCallCheck(this, EventResourceProvider2);
      return _super.apply(this, arguments);
    }
    _createClass(EventResourceProvider2, [{
      key: "initialize",
      value: function initialize() {
        this.gateway.register(EVENT_RESOURCE).method(PUBLISH_EVENT, this.publish.bind(this)).method(SUBSCRIBE_TO_EVENT, this.subscribe.bind(this));
        this.eventService = this.services.build({
          name: EVENT_SERVICE,
          context: this.context,
          id: this.id
        });
      }
    }, {
      key: "publish",
      value: function publish(payload) {
        var _payload$data = payload.data, event = _payload$data.event, data = _payload$data.data;
        var metadata = {
          coursewareId: this.id
        };
        this.eventService.publish(event, data, metadata);
      }
    }, {
      key: "subscribe",
      value: function() {
        var _subscribe = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee(payload) {
          var _this = this;
          var event, subscriptionId, unsubscribeFn, gatewayTrackedUnsubscribeFn;
          return regenerator.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  event = payload.data.event;
                  subscriptionId = SubscriptionIdProvider.createSubscriptionId();
                  unsubscribeFn = this.eventService.subscribe(event, function(data) {
                    _this.gateway.notify({
                      subscriptionId,
                      payload: data
                    });
                  }, this.id);
                  gatewayTrackedUnsubscribeFn = this.gateway.addActiveSubscription(unsubscribeFn);
                  return _context.abrupt("return", {
                    subscriptionId,
                    unsubscribe: gatewayTrackedUnsubscribeFn
                  });
                case 5:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, this);
        }));
        function subscribe(_x) {
          return _subscribe.apply(this, arguments);
        }
        return subscribe;
      }()
    }]);
    return EventResourceProvider2;
  }(ResourceProvider);
  var index = /* @__PURE__ */ Object.freeze({
    __proto__: null,
    AuthResourceProvider,
    StateResourceProvider,
    EditorResourceProvider,
    LearnerResourceProvider,
    ChildResourceProvider,
    ThemeResourceProvider,
    DragStateResourceProvider,
    DragStateResourceProviderMock,
    UserResourceProvider,
    ClassResourceProvider,
    AccessResourceProvider,
    ProgressResourceProvider,
    ContextResourceProvider,
    FeatureFlagResourceProvider,
    AssetResourceProvider,
    QueryResourceProvider,
    DeprecatedResourceProvider,
    CompetencyResourceProvider,
    AnnotationsResourceProvider,
    HistoryResourceProvider,
    RouteResourceProvider,
    SelectionResourceProvider,
    PluginResourceProvider,
    LoggerResourceProvider,
    LTIResourceProvider,
    EventResourceProvider
  });
  var buildName = function buildName2(resource, fnName) {
    return resource ? "".concat(resource, ".").concat(fnName) : fnName;
  };
  var clean = function clean2() {
    postRobot__default["default"].cleanUpWindow(window);
  };
  var listen = function listen2(_ref) {
    var resource = _ref.resource, fnName = _ref.fnName, window2 = _ref.window, callback = _ref.callback;
    return postRobot__default["default"].on(buildName(resource, fnName), {
      window: window2
    }, callback);
  };
  var listenOnce = function listenOnce2(_ref2) {
    var fullName = _ref2.fullName, window2 = _ref2.window, callback = _ref2.callback;
    return postRobot__default["default"].once(fullName, {
      window: window2
    }, callback);
  };
  var listenOnceGlobal = function listenOnceGlobal2(_ref3) {
    var resource = _ref3.resource, fnName = _ref3.fnName, callback = _ref3.callback;
    return postRobot__default["default"].once(buildName(resource, fnName), callback);
  };
  var send = function send2(_ref4) {
    var resource = _ref4.resource, fnName = _ref4.fnName, window2 = _ref4.window, payload = _ref4.payload;
    return postRobot__default["default"].send(window2, buildName(resource, fnName), payload);
  };
  var PluginGateway = {
    clean,
    listen,
    listenOnce,
    listenOnceGlobal,
    send
  };
  function _createForOfIteratorHelper(o, allowArrayLike) {
    var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
    if (!it) {
      if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {
        if (it)
          o = it;
        var i2 = 0;
        var F2 = function F3() {
        };
        return { s: F2, n: function n2() {
          if (i2 >= o.length)
            return { done: true };
          return { done: false, value: o[i2++] };
        }, e: function e(_e) {
          throw _e;
        }, f: F2 };
      }
      throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }
    var normalCompletion = true, didErr = false, err;
    return { s: function s() {
      it = it.call(o);
    }, n: function n2() {
      var step = it.next();
      normalCompletion = step.done;
      return step;
    }, e: function e(_e2) {
      didErr = true;
      err = _e2;
    }, f: function f2() {
      try {
        if (!normalCompletion && it.return != null)
          it.return();
      } finally {
        if (didErr)
          throw err;
      }
    } };
  }
  function _unsupportedIterableToArray(o, minLen) {
    if (!o)
      return;
    if (typeof o === "string")
      return _arrayLikeToArray(o, minLen);
    var n2 = Object.prototype.toString.call(o).slice(8, -1);
    if (n2 === "Object" && o.constructor)
      n2 = o.constructor.name;
    if (n2 === "Map" || n2 === "Set")
      return Array.from(o);
    if (n2 === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
      return _arrayLikeToArray(o, minLen);
  }
  function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length)
      len = arr.length;
    for (var i2 = 0, arr2 = new Array(len); i2 < len; i2++) {
      arr2[i2] = arr[i2];
    }
    return arr2;
  }
  var ManagedGateway = /* @__PURE__ */ function() {
    function ManagedGateway2(windowToListenTo, gateway) {
      var subscriptionsCallback2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : function() {
      };
      _classCallCheck(this, ManagedGateway2);
      this.listeners = [];
      this.activeSubscriptions = {};
      this.latestActiveSubscriptionId = 0;
      this.windowToListenTo = windowToListenTo;
      this.gateway = gateway;
      this.subscriptionsCallback = subscriptionsCallback2;
      this.register = this.register.bind(this);
      this.method = this.method.bind(this);
      this.notify = this.notify.bind(this);
      this.addActiveSubscription = this.addActiveSubscription.bind(this);
      this.cancelListenersAndSubscriptions = this.cancelListenersAndSubscriptions.bind(this);
    }
    _createClass(ManagedGateway2, [{
      key: "_extendedSessionWithCallback",
      value: function _extendedSessionWithCallback(callback) {
        return function() {
          if (window.piSession && window.piSession.recordUserActivity) {
            window.piSession.recordUserActivity();
          }
          return callback.apply(void 0, arguments);
        };
      }
    }, {
      key: "register",
      value: function register(resourceName) {
        this.resourceName = resourceName;
        return this;
      }
    }, {
      key: "method",
      value: function method(fnName, callback) {
        var listener = this.gateway.listen({
          resource: this.resourceName,
          fnName,
          window: this.windowToListenTo,
          callback: this._extendedSessionWithCallback(callback)
        });
        this.listeners.push(listener);
        return this;
      }
    }, {
      key: "notify",
      value: function notify(_ref) {
        var subscriptionId = _ref.subscriptionId, payload = _ref.payload;
        return this.gateway.send({
          resource: SUBSCRIPTION,
          fnName: subscriptionId,
          window: this.windowToListenTo,
          payload
        });
      }
    }, {
      key: "addActiveSubscription",
      value: function addActiveSubscription(unsubscribeFn) {
        var _this = this;
        var subscriptionId = String(this.latestActiveSubscriptionId++);
        this.activeSubscriptions[subscriptionId] = unsubscribeFn;
        this.subscriptionsCallback(this.activeSubscriptions);
        var gatewayTrackedUnsubscribeFn = function gatewayTrackedUnsubscribeFn2() {
          delete _this.activeSubscriptions[subscriptionId];
          unsubscribeFn.apply(void 0, arguments);
        };
        return gatewayTrackedUnsubscribeFn;
      }
    }, {
      key: "cancelListenersAndSubscriptions",
      value: function cancelListenersAndSubscriptions() {
        var _iterator = _createForOfIteratorHelper(this.listeners), _step;
        try {
          for (_iterator.s(); !(_step = _iterator.n()).done; ) {
            var listener = _step.value;
            listener.cancel();
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
        for (var _i = 0, _Object$values = Object.values(this.activeSubscriptions); _i < _Object$values.length; _i++) {
          var unsubscribeFn = _Object$values[_i];
          if (typeof unsubscribeFn === "function") {
            unsubscribeFn();
          } else if (typeof (unsubscribeFn === null || unsubscribeFn === void 0 ? void 0 : unsubscribeFn.unsubscribe) === "function") {
            unsubscribeFn.unsubscribe();
          }
        }
        return this;
      }
    }]);
    return ManagedGateway2;
  }();
  var createDriver = function createDriver2(initialRegisterListener, gateway) {
    return {
      cancelListenersAndSubscriptions: function cancelListenersAndSubscriptions() {
        initialRegisterListener.cancel();
        if (gateway) {
          gateway.cancelListenersAndSubscriptions();
        }
      }
    };
  };
  var ApiDriver = /* @__PURE__ */ function() {
    function ApiDriver2(_ref) {
      var services = _ref.services, context = _ref.context, targetableServiceProvider = _ref.targetableServiceProvider, _ref$featureResources = _ref.featureResources, featureResources = _ref$featureResources === void 0 ? {} : _ref$featureResources;
      _classCallCheck(this, ApiDriver2);
      this.services = services;
      this.targetableServiceProvider = targetableServiceProvider;
      this.pluginGateway = PluginGateway;
      this.context = context;
      this.featureResources = featureResources;
    }
    _createClass(ApiDriver2, [{
      key: "listenForIframeConnections",
      value: function listenForIframeConnections(windowToListenTo, connectionCallback) {
        return this.pluginGateway.listenOnce({
          fullName: "REGISTER",
          window: windowToListenTo,
          callback: connectionCallback
        });
      }
    }, {
      key: "listenForNonce",
      value: function listenForNonce(nonce, connectionCallback) {
        return this.pluginGateway.listenOnceGlobal({
          resource: "REGISTER",
          fnName: nonce,
          callback: function callback(event) {
            return connectionCallback(event.source);
          }
        });
      }
    }, {
      key: "listenForConnections",
      value: function listenForConnections(_ref2, callback) {
        var _this = this;
        var id2 = _ref2.id, windowToListenTo = _ref2.windowToListenTo, coursewareType = _ref2.coursewareType, subscriptionsCallback2 = _ref2.subscriptionsCallback;
        var _ref3 = windowToListenTo || {}, contentWindow = _ref3.contentWindow;
        var gateway = new ManagedGateway(contentWindow, PluginGateway, subscriptionsCallback2);
        var connectionCallback = function connectionCallback2() {
          callback({
            id: id2,
            gateway,
            context: _this.context,
            coursewareType,
            iframeElToListenTo: windowToListenTo,
            services: _this.services,
            targetableServiceProvider: _this.targetableServiceProvider,
            featureResources: _this.featureResources
          });
          return {
            featureResources: _this.featureResources,
            context: _this.context
          };
        };
        var initialRegisterListener = this.listenForIframeConnections(contentWindow, connectionCallback);
        return createDriver(initialRegisterListener, gateway);
      }
    }, {
      key: "listenForConnectionNonce",
      value: function listenForConnectionNonce(_ref4, callback) {
        var _this2 = this;
        var id2 = _ref4.id, nonce = _ref4.nonce, coursewareType = _ref4.coursewareType;
        var gateway;
        var connectionCallback = function connectionCallback2(windowToListenTo) {
          gateway = new ManagedGateway(windowToListenTo, PluginGateway);
          callback({
            id: id2,
            gateway,
            context: _this2.context,
            coursewareType,
            services: _this2.services,
            targetableServiceProvider: _this2.targetableServiceProvider,
            featureResources: _this2.featureResources
          });
          return {
            featureResources: _this2.featureResources,
            context: _this2.context
          };
        };
        var initialRegisterListener = this.listenForNonce(nonce, connectionCallback);
        return {
          cancelListenersAndSubscriptions: function cancelListenersAndSubscriptions() {
            initialRegisterListener.cancel();
            if (gateway) {
              gateway.cancelListenersAndSubscriptions();
            }
          }
        };
      }
    }]);
    return ApiDriver2;
  }();
  var ACTIVITY = "ACTIVITY";
  var PATHWAY = "PATHWAY";
  function ownKeys(object, enumerableOnly) {
    var keys = Object.keys(object);
    if (Object.getOwnPropertySymbols) {
      var symbols = Object.getOwnPropertySymbols(object);
      if (enumerableOnly) {
        symbols = symbols.filter(function(sym) {
          return Object.getOwnPropertyDescriptor(object, sym).enumerable;
        });
      }
      keys.push.apply(keys, symbols);
    }
    return keys;
  }
  function _objectSpread(target) {
    for (var i2 = 1; i2 < arguments.length; i2++) {
      var source = arguments[i2] != null ? arguments[i2] : {};
      if (i2 % 2) {
        ownKeys(Object(source), true).forEach(function(key) {
          _defineProperty$1(target, key, source[key]);
        });
      } else if (Object.getOwnPropertyDescriptors) {
        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
      } else {
        ownKeys(Object(source)).forEach(function(key) {
          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
        });
      }
    }
    return target;
  }
  var isCoursewareId = function isCoursewareId2(string) {
    return string.length === 36;
  };
  var TargetableServiceProvider = /* @__PURE__ */ function() {
    function TargetableServiceProvider2(_ref) {
      var services = _ref.services;
      _classCallCheck(this, TargetableServiceProvider2);
      this.requested = {};
      this.services = services;
      this.requestTargetable = this.requestTargetable.bind(this);
      this.getTargetService = this.getTargetService.bind(this);
      this.selectTargetIdViaCallerTarget = this.selectTargetIdViaCallerTarget.bind(this);
    }
    _createClass(TargetableServiceProvider2, [{
      key: "getTargetService",
      value: function getTargetService() {
        if (!this._targetService) {
          this._targetService = this.services.build({
            name: COURSEWARE_TARGET_SERVICE
          });
        }
        return this._targetService;
      }
    }, {
      key: "requestTargetable",
      value: function() {
        var _requestTargetable = _asyncToGenerator(/* @__PURE__ */ regenerator.mark(function _callee(_ref2) {
          var name, id2, selector, context, args, requestKey, requestedService, targetService, target, selectedTargetId;
          return regenerator.wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  name = _ref2.name, id2 = _ref2.id, selector = _ref2.selector, context = _ref2.context, args = _objectWithoutProperties(_ref2, ["name", "id", "selector", "context"]);
                  requestKey = [id2, selector || "self", name, context || "default"].join("-");
                  requestedService = this.requested[requestKey];
                  if (!requestedService) {
                    _context.next = 5;
                    break;
                  }
                  return _context.abrupt("return", requestedService);
                case 5:
                  targetService = this.getTargetService();
                  _context.next = 8;
                  return targetService.createTarget(id2);
                case 8:
                  target = _context.sent;
                  if (!selector) {
                    _context.next = 14;
                    break;
                  }
                  selectedTargetId = this.selectTargetIdViaCallerTarget(target, selector);
                  _context.next = 13;
                  return targetService.createTarget(selectedTargetId);
                case 13:
                  target = _context.sent;
                case 14:
                  requestedService = this.services.build(_objectSpread(_objectSpread({}, args), {}, {
                    name,
                    target,
                    context,
                    id: id2
                  }));
                  this.requested[requestKey] = requestedService;
                  return _context.abrupt("return", requestedService);
                case 17:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, this);
        }));
        function requestTargetable(_x) {
          return _requestTargetable.apply(this, arguments);
        }
        return requestTargetable;
      }()
    }, {
      key: "selectTargetIdViaCallerTarget",
      value: function selectTargetIdViaCallerTarget(callerTarget, selector) {
        if (!selector) {
          return callerTarget.id;
        }
        if (typeof selector !== "string") {
          throw new Error("Invalid selector ".concat(selector, ". Expecting a string, received ").concat(_typeof(selector), "."));
        }
        if (isCoursewareId(selector)) {
          return selector;
        }
        var callerId = callerTarget.id;
        var ancestry = callerTarget.ancestry || [];
        var firstPathway = ancestry.find(function(ancestor) {
          return ancestor.elementType === PATHWAY;
        });
        var firstActivity = ancestry.find(function(ancestor) {
          return ancestor.elementType === ACTIVITY;
        });
        var firstNonPathway = ancestry.find(function(ancestor) {
          return ancestor.elementType !== PATHWAY;
        });
        var rootElement = ancestry.slice(-1)[0];
        var targetId = {
          self: callerId,
          this: callerId,
          pathway: firstPathway ? firstPathway.elementId : void 0,
          activity: firstActivity ? firstActivity.elementId : callerId,
          parent: firstNonPathway ? firstNonPathway.elementId : callerId,
          root: rootElement ? rootElement.elementId : callerId,
          top: rootElement ? rootElement.elementId : callerId
        }[selector.toLowerCase()];
        if (!targetId) {
          throw new Error("Unable to determine target from ".concat(callerTarget.id, " selecting ").concat(selector));
        }
        return targetId;
      }
    }]);
    return TargetableServiceProvider2;
  }();
  var legacy = function legacy2(services, targetableServiceProvider) {
    var baseResourceProviders = [EditorResourceProvider, ContextResourceProvider, StateResourceProvider, ChildResourceProvider, ThemeResourceProvider, UserResourceProvider, ProgressResourceProvider, LearnerResourceProvider, AccessResourceProvider, RouteResourceProvider, AnnotationsResourceProvider, PluginResourceProvider, LoggerResourceProvider, LTIResourceProvider, AssetResourceProvider, EventResourceProvider, FeatureFlagResourceProvider];
    var workspaceProviders = [].concat(baseResourceProviders, [SelectionResourceProvider, DeprecatedResourceProvider, HistoryResourceProvider]);
    var rootWorkspaceProviders = [].concat(_toConsumableArray(workspaceProviders), [DragStateResourceProvider]);
    var learnspaceProviders = [].concat(baseResourceProviders, [AuthResourceProvider, QueryResourceProvider, ClassResourceProvider, CompetencyResourceProvider, HistoryResourceProvider, DragStateResourceProviderMock, DeprecatedResourceProvider]);
    var buildLegacyApi = function buildLegacyApi2(context, connectionProviders, nonceProviders) {
      var apiDriver = new ApiDriver({
        services,
        context,
        targetableServiceProvider
      });
      var initProviders = function initProviders2(providerClazzes) {
        return function(props) {
          return providerClazzes.map(function(Provider) {
            var _provider = new Provider(props);
            _provider.initialize();
            return _provider;
          });
        };
      };
      return [
        function(id2, windowToListenTo, _context, coursewareType) {
          var subscriptionsCallback2 = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : function() {
          };
          return apiDriver.listenForConnections({
            id: id2,
            windowToListenTo,
            context,
            coursewareType,
            subscriptionsCallback: subscriptionsCallback2
          }, initProviders(connectionProviders));
        },
        function(id2, nonce, _context, coursewareType) {
          return apiDriver.listenForConnectionNonce({
            id: id2,
            nonce,
            context,
            coursewareType
          }, initProviders(nonceProviders));
        }
      ];
    };
    var api = {};
    var _ref = [].concat(_toConsumableArray(buildLegacyApi("EDITOR", rootWorkspaceProviders, workspaceProviders)), _toConsumableArray(buildLegacyApi("LEARNER", learnspaceProviders, learnspaceProviders)));
    api.listenForConnectionsInWorkspace = _ref[0];
    api.listenForNonceInWorkspace = _ref[1];
    api.listenForConnectionsInLearnspace = _ref[2];
    api.listenForNonceInLearnspace = _ref[3];
    return api;
  };
  var legacyApi = function() {
    var _services;
    var _targetableServiceProvider;
    var _driver;
    var _cdpFrontend;
    var defaults = {
      get services() {
        _services = _services || new ServiceFactory();
        return _services;
      },
      get targetableServiceProvider() {
        _targetableServiceProvider = _targetableServiceProvider || new TargetableServiceProvider({
          services: defaults.services
        });
        return _targetableServiceProvider;
      },
      get ApiDriver() {
        _driver = _driver || legacy(defaults.services, defaults.targetableServiceProvider);
        return _driver;
      },
      get CDP() {
        _cdpFrontend = _cdpFrontend || CDP(defaults.services);
        return _cdpFrontend;
      }
    };
    return function() {
      return defaults;
    };
  }();
  cdpPluginApi.ApiDriver = ApiDriver;
  cdpPluginApi.CDP = CDP;
  cdpPluginApi.Services = ServiceFactory;
  cdpPluginApi.TargetableServiceProvider = TargetableServiceProvider;
  var constants_1 = cdpPluginApi.constants = constants;
  cdpPluginApi.dragStateConstants = dragStateApi;
  var getDefault = cdpPluginApi.getDefault = legacyApi;
  cdpPluginApi.resourceProviders = index;
  var getRandomValues;
  var rnds8 = new Uint8Array(16);
  function rng() {
    if (!getRandomValues) {
      getRandomValues = typeof crypto !== "undefined" && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== "undefined" && typeof msCrypto.getRandomValues === "function" && msCrypto.getRandomValues.bind(msCrypto);
      if (!getRandomValues) {
        throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");
      }
    }
    return getRandomValues(rnds8);
  }
  var REGEX = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;
  function validate(uuid) {
    return typeof uuid === "string" && REGEX.test(uuid);
  }
  var byteToHex = [];
  for (var i = 0; i < 256; ++i) {
    byteToHex.push((i + 256).toString(16).substr(1));
  }
  function stringify(arr) {
    var offset = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
    var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + "-" + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + "-" + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + "-" + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + "-" + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();
    if (!validate(uuid)) {
      throw TypeError("Stringified UUID is invalid");
    }
    return uuid;
  }
  function v4(options, buf, offset) {
    options = options || {};
    var rnds = options.random || (options.rng || rng)();
    rnds[6] = rnds[6] & 15 | 64;
    rnds[8] = rnds[8] & 63 | 128;
    if (buf) {
      offset = offset || 0;
      for (var i2 = 0; i2 < 16; ++i2) {
        buf[offset + i2] = rnds[i2];
      }
      return buf;
    }
    return stringify(rnds);
  }
  function deepFreeze(o) {
    Object.values(o).forEach((v2) => Object.isFrozen(v2) || deepFreeze(v2));
    return Object.freeze(o);
  }
  class Globals {
    constructor() {
      __publicField(this, "isForcedOffline");
      __publicField(this, "theme");
      __publicField(this, "_ambrosiaJson");
      __publicField(this, "_cohortId");
      __publicField(this, "_tocMap");
      __publicField(this, "_currentInteractive");
      __publicField(this, "getContent");
      __publicField(this, "_deploymentId");
      __publicField(this, "_offlinePackagePath");
      __publicField(this, "_featureFlagObj", []);
      this.isForcedOffline = false;
      this._offlinePackagePath = "";
      this._cohortId = "";
      this._deploymentId = "";
      this._ambrosiaJson = {
        $ambrosia: "",
        $id: "",
        $projectId: "",
        $workspaceId: "",
        configSchemaVersion: "",
        config: {},
        toc: {
          id: "",
          type: "",
          title: "",
          children: []
        },
        activityTheme: {
          bodyFont: "",
          titleFont: "",
          textColor: "",
          primaryColor: "",
          surfaceColor: "",
          backgroundColor: "",
          successColor: "",
          errorColor: ""
        },
        selectedThemePayload: {
          id: "",
          name: "",
          themeVariants: [
            {
              themeId: "",
              variantId: "",
              variantName: "",
              config: ""
            }
          ]
        },
        scenarios: [{}],
        pluginPayload: {
          pluginRepositoryPath: "",
          summary: {
            pluginId: "",
            name: "",
            description: "",
            type: "",
            latestVersion: "",
            subscriptionId: "",
            createdAt: "",
            updatedAt: "",
            tags: [],
            publishMode: ""
          }
        }
      };
      this._currentInteractive = null;
      this._tocMap = /* @__PURE__ */ new Map();
      this.getContent = (fileName) => Promise.resolve(fileName);
    }
    get cohortId() {
      return this._cohortId;
    }
    set cohortId(value) {
      if (this._cohortId === "") {
        this._cohortId = value;
      } else {
        throw new Error("Cohort ID is already set");
      }
    }
    get deploymentId() {
      return this._deploymentId;
    }
    set deploymentId(value) {
      if (this._deploymentId === "") {
        this._deploymentId = value;
      } else {
        throw new Error("Deployment ID is already set");
      }
    }
    get ambrosiaJson() {
      return this._ambrosiaJson;
    }
    set ambrosiaJson(value) {
      var _a;
      if (this._ambrosiaJson.$ambrosia === "") {
        this._ambrosiaJson = value;
        const tocMapBuilder = (chapters) => {
          chapters.forEach((chapter) => {
            var _a2, _b;
            this._tocMap.set(chapter.id, ((_b = (_a2 = chapter.children[0]) == null ? void 0 : _a2.children[0]) == null ? void 0 : _b.id) || "");
            chapter.children.forEach((lesson) => {
              var _a3;
              this._tocMap.set(lesson.id, (_a3 = lesson.children[0]) == null ? void 0 : _a3.id);
              lesson.children.forEach((screen) => {
                this._tocMap.set(screen.id, screen.id);
              });
            });
          });
        };
        tocMapBuilder(((_a = this._ambrosiaJson.toc) == null ? void 0 : _a.children) || []);
        deepFreeze(this._ambrosiaJson);
      }
    }
    get offlinePackagePath() {
      return this._offlinePackagePath;
    }
    set offlinePackagePath(value) {
      if (this._offlinePackagePath === "") {
        this._offlinePackagePath = value;
      }
    }
    get featureFlagData() {
      return this._featureFlagObj;
    }
    set featureFlagData(data) {
      if (this._featureFlagObj.length === 0) {
        this._featureFlagObj = data;
      }
    }
    get tocMap() {
      return this._tocMap;
    }
    get currentInteractive() {
      return this._currentInteractive;
    }
    set currentInteractive(data) {
      this._currentInteractive = data;
    }
  }
  var Globals$1 = new Globals();
  var freeGlobal$1 = typeof commonjsGlobal == "object" && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;
  var _freeGlobal = freeGlobal$1;
  var freeGlobal = _freeGlobal;
  var freeSelf = typeof self == "object" && self && self.Object === Object && self;
  var root$3 = freeGlobal || freeSelf || Function("return this")();
  var _root = root$3;
  var root$2 = _root;
  var Symbol$4 = root$2.Symbol;
  var _Symbol = Symbol$4;
  var Symbol$3 = _Symbol;
  var objectProto$5 = Object.prototype;
  var hasOwnProperty$4 = objectProto$5.hasOwnProperty;
  var nativeObjectToString$1 = objectProto$5.toString;
  var symToStringTag$1 = Symbol$3 ? Symbol$3.toStringTag : void 0;
  function getRawTag$1(value) {
    var isOwn = hasOwnProperty$4.call(value, symToStringTag$1), tag = value[symToStringTag$1];
    try {
      value[symToStringTag$1] = void 0;
      var unmasked = true;
    } catch (e) {
    }
    var result = nativeObjectToString$1.call(value);
    if (unmasked) {
      if (isOwn) {
        value[symToStringTag$1] = tag;
      } else {
        delete value[symToStringTag$1];
      }
    }
    return result;
  }
  var _getRawTag = getRawTag$1;
  var objectProto$4 = Object.prototype;
  var nativeObjectToString = objectProto$4.toString;
  function objectToString$1(value) {
    return nativeObjectToString.call(value);
  }
  var _objectToString = objectToString$1;
  var Symbol$2 = _Symbol, getRawTag = _getRawTag, objectToString = _objectToString;
  var nullTag = "[object Null]", undefinedTag = "[object Undefined]";
  var symToStringTag = Symbol$2 ? Symbol$2.toStringTag : void 0;
  function baseGetTag$2(value) {
    if (value == null) {
      return value === void 0 ? undefinedTag : nullTag;
    }
    return symToStringTag && symToStringTag in Object(value) ? getRawTag(value) : objectToString(value);
  }
  var _baseGetTag = baseGetTag$2;
  function isObject$3(value) {
    var type = typeof value;
    return value != null && (type == "object" || type == "function");
  }
  var isObject_1 = isObject$3;
  var baseGetTag$1 = _baseGetTag, isObject$2 = isObject_1;
  var asyncTag = "[object AsyncFunction]", funcTag = "[object Function]", genTag = "[object GeneratorFunction]", proxyTag = "[object Proxy]";
  function isFunction$1(value) {
    if (!isObject$2(value)) {
      return false;
    }
    var tag = baseGetTag$1(value);
    return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;
  }
  var isFunction_1 = isFunction$1;
  var root$1 = _root;
  var coreJsData$1 = root$1["__core-js_shared__"];
  var _coreJsData = coreJsData$1;
  var coreJsData = _coreJsData;
  var maskSrcKey = function() {
    var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || "");
    return uid ? "Symbol(src)_1." + uid : "";
  }();
  function isMasked$1(func) {
    return !!maskSrcKey && maskSrcKey in func;
  }
  var _isMasked = isMasked$1;
  var funcProto$1 = Function.prototype;
  var funcToString$1 = funcProto$1.toString;
  function toSource$1(func) {
    if (func != null) {
      try {
        return funcToString$1.call(func);
      } catch (e) {
      }
      try {
        return func + "";
      } catch (e) {
      }
    }
    return "";
  }
  var _toSource = toSource$1;
  var isFunction = isFunction_1, isMasked = _isMasked, isObject$1 = isObject_1, toSource = _toSource;
  var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;
  var reIsHostCtor = /^\[object .+?Constructor\]$/;
  var funcProto = Function.prototype, objectProto$3 = Object.prototype;
  var funcToString = funcProto.toString;
  var hasOwnProperty$3 = objectProto$3.hasOwnProperty;
  var reIsNative = RegExp(
    "^" + funcToString.call(hasOwnProperty$3).replace(reRegExpChar, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
  );
  function baseIsNative$1(value) {
    if (!isObject$1(value) || isMasked(value)) {
      return false;
    }
    var pattern = isFunction(value) ? reIsNative : reIsHostCtor;
    return pattern.test(toSource(value));
  }
  var _baseIsNative = baseIsNative$1;
  function getValue$1(object, key) {
    return object == null ? void 0 : object[key];
  }
  var _getValue = getValue$1;
  var baseIsNative = _baseIsNative, getValue = _getValue;
  function getNative$3(object, key) {
    var value = getValue(object, key);
    return baseIsNative(value) ? value : void 0;
  }
  var _getNative = getNative$3;
  var getNative$2 = _getNative;
  var defineProperty$1 = function() {
    try {
      var func = getNative$2(Object, "defineProperty");
      func({}, "", {});
      return func;
    } catch (e) {
    }
  }();
  var _defineProperty = defineProperty$1;
  var defineProperty = _defineProperty;
  function baseAssignValue$1(object, key, value) {
    if (key == "__proto__" && defineProperty) {
      defineProperty(object, key, {
        "configurable": true,
        "enumerable": true,
        "value": value,
        "writable": true
      });
    } else {
      object[key] = value;
    }
  }
  var _baseAssignValue = baseAssignValue$1;
  function eq$2(value, other) {
    return value === other || value !== value && other !== other;
  }
  var eq_1 = eq$2;
  var baseAssignValue = _baseAssignValue, eq$1 = eq_1;
  var objectProto$2 = Object.prototype;
  var hasOwnProperty$2 = objectProto$2.hasOwnProperty;
  function assignValue$1(object, key, value) {
    var objValue = object[key];
    if (!(hasOwnProperty$2.call(object, key) && eq$1(objValue, value)) || value === void 0 && !(key in object)) {
      baseAssignValue(object, key, value);
    }
  }
  var _assignValue = assignValue$1;
  var isArray$3 = Array.isArray;
  var isArray_1 = isArray$3;
  function isObjectLike$1(value) {
    return value != null && typeof value == "object";
  }
  var isObjectLike_1 = isObjectLike$1;
  var baseGetTag = _baseGetTag, isObjectLike = isObjectLike_1;
  var symbolTag = "[object Symbol]";
  function isSymbol$3(value) {
    return typeof value == "symbol" || isObjectLike(value) && baseGetTag(value) == symbolTag;
  }
  var isSymbol_1 = isSymbol$3;
  var isArray$2 = isArray_1, isSymbol$2 = isSymbol_1;
  var reIsDeepProp = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, reIsPlainProp = /^\w*$/;
  function isKey$1(value, object) {
    if (isArray$2(value)) {
      return false;
    }
    var type = typeof value;
    if (type == "number" || type == "symbol" || type == "boolean" || value == null || isSymbol$2(value)) {
      return true;
    }
    return reIsPlainProp.test(value) || !reIsDeepProp.test(value) || object != null && value in Object(object);
  }
  var _isKey = isKey$1;
  var getNative$1 = _getNative;
  var nativeCreate$4 = getNative$1(Object, "create");
  var _nativeCreate = nativeCreate$4;
  var nativeCreate$3 = _nativeCreate;
  function hashClear$1() {
    this.__data__ = nativeCreate$3 ? nativeCreate$3(null) : {};
    this.size = 0;
  }
  var _hashClear = hashClear$1;
  function hashDelete$1(key) {
    var result = this.has(key) && delete this.__data__[key];
    this.size -= result ? 1 : 0;
    return result;
  }
  var _hashDelete = hashDelete$1;
  var nativeCreate$2 = _nativeCreate;
  var HASH_UNDEFINED$1 = "__lodash_hash_undefined__";
  var objectProto$1 = Object.prototype;
  var hasOwnProperty$1 = objectProto$1.hasOwnProperty;
  function hashGet$1(key) {
    var data = this.__data__;
    if (nativeCreate$2) {
      var result = data[key];
      return result === HASH_UNDEFINED$1 ? void 0 : result;
    }
    return hasOwnProperty$1.call(data, key) ? data[key] : void 0;
  }
  var _hashGet = hashGet$1;
  var nativeCreate$1 = _nativeCreate;
  var objectProto = Object.prototype;
  var hasOwnProperty = objectProto.hasOwnProperty;
  function hashHas$1(key) {
    var data = this.__data__;
    return nativeCreate$1 ? data[key] !== void 0 : hasOwnProperty.call(data, key);
  }
  var _hashHas = hashHas$1;
  var nativeCreate = _nativeCreate;
  var HASH_UNDEFINED = "__lodash_hash_undefined__";
  function hashSet$1(key, value) {
    var data = this.__data__;
    this.size += this.has(key) ? 0 : 1;
    data[key] = nativeCreate && value === void 0 ? HASH_UNDEFINED : value;
    return this;
  }
  var _hashSet = hashSet$1;
  var hashClear = _hashClear, hashDelete = _hashDelete, hashGet = _hashGet, hashHas = _hashHas, hashSet = _hashSet;
  function Hash$1(entries) {
    var index2 = -1, length = entries == null ? 0 : entries.length;
    this.clear();
    while (++index2 < length) {
      var entry = entries[index2];
      this.set(entry[0], entry[1]);
    }
  }
  Hash$1.prototype.clear = hashClear;
  Hash$1.prototype["delete"] = hashDelete;
  Hash$1.prototype.get = hashGet;
  Hash$1.prototype.has = hashHas;
  Hash$1.prototype.set = hashSet;
  var _Hash = Hash$1;
  function listCacheClear$1() {
    this.__data__ = [];
    this.size = 0;
  }
  var _listCacheClear = listCacheClear$1;
  var eq = eq_1;
  function assocIndexOf$4(array, key) {
    var length = array.length;
    while (length--) {
      if (eq(array[length][0], key)) {
        return length;
      }
    }
    return -1;
  }
  var _assocIndexOf = assocIndexOf$4;
  var assocIndexOf$3 = _assocIndexOf;
  var arrayProto = Array.prototype;
  var splice = arrayProto.splice;
  function listCacheDelete$1(key) {
    var data = this.__data__, index2 = assocIndexOf$3(data, key);
    if (index2 < 0) {
      return false;
    }
    var lastIndex = data.length - 1;
    if (index2 == lastIndex) {
      data.pop();
    } else {
      splice.call(data, index2, 1);
    }
    --this.size;
    return true;
  }
  var _listCacheDelete = listCacheDelete$1;
  var assocIndexOf$2 = _assocIndexOf;
  function listCacheGet$1(key) {
    var data = this.__data__, index2 = assocIndexOf$2(data, key);
    return index2 < 0 ? void 0 : data[index2][1];
  }
  var _listCacheGet = listCacheGet$1;
  var assocIndexOf$1 = _assocIndexOf;
  function listCacheHas$1(key) {
    return assocIndexOf$1(this.__data__, key) > -1;
  }
  var _listCacheHas = listCacheHas$1;
  var assocIndexOf = _assocIndexOf;
  function listCacheSet$1(key, value) {
    var data = this.__data__, index2 = assocIndexOf(data, key);
    if (index2 < 0) {
      ++this.size;
      data.push([key, value]);
    } else {
      data[index2][1] = value;
    }
    return this;
  }
  var _listCacheSet = listCacheSet$1;
  var listCacheClear = _listCacheClear, listCacheDelete = _listCacheDelete, listCacheGet = _listCacheGet, listCacheHas = _listCacheHas, listCacheSet = _listCacheSet;
  function ListCache$1(entries) {
    var index2 = -1, length = entries == null ? 0 : entries.length;
    this.clear();
    while (++index2 < length) {
      var entry = entries[index2];
      this.set(entry[0], entry[1]);
    }
  }
  ListCache$1.prototype.clear = listCacheClear;
  ListCache$1.prototype["delete"] = listCacheDelete;
  ListCache$1.prototype.get = listCacheGet;
  ListCache$1.prototype.has = listCacheHas;
  ListCache$1.prototype.set = listCacheSet;
  var _ListCache = ListCache$1;
  var getNative = _getNative, root = _root;
  var Map$2 = getNative(root, "Map");
  var _Map = Map$2;
  var Hash = _Hash, ListCache = _ListCache, Map$1 = _Map;
  function mapCacheClear$1() {
    this.size = 0;
    this.__data__ = {
      "hash": new Hash(),
      "map": new (Map$1 || ListCache)(),
      "string": new Hash()
    };
  }
  var _mapCacheClear = mapCacheClear$1;
  function isKeyable$1(value) {
    var type = typeof value;
    return type == "string" || type == "number" || type == "symbol" || type == "boolean" ? value !== "__proto__" : value === null;
  }
  var _isKeyable = isKeyable$1;
  var isKeyable = _isKeyable;
  function getMapData$4(map, key) {
    var data = map.__data__;
    return isKeyable(key) ? data[typeof key == "string" ? "string" : "hash"] : data.map;
  }
  var _getMapData = getMapData$4;
  var getMapData$3 = _getMapData;
  function mapCacheDelete$1(key) {
    var result = getMapData$3(this, key)["delete"](key);
    this.size -= result ? 1 : 0;
    return result;
  }
  var _mapCacheDelete = mapCacheDelete$1;
  var getMapData$2 = _getMapData;
  function mapCacheGet$1(key) {
    return getMapData$2(this, key).get(key);
  }
  var _mapCacheGet = mapCacheGet$1;
  var getMapData$1 = _getMapData;
  function mapCacheHas$1(key) {
    return getMapData$1(this, key).has(key);
  }
  var _mapCacheHas = mapCacheHas$1;
  var getMapData = _getMapData;
  function mapCacheSet$1(key, value) {
    var data = getMapData(this, key), size = data.size;
    data.set(key, value);
    this.size += data.size == size ? 0 : 1;
    return this;
  }
  var _mapCacheSet = mapCacheSet$1;
  var mapCacheClear = _mapCacheClear, mapCacheDelete = _mapCacheDelete, mapCacheGet = _mapCacheGet, mapCacheHas = _mapCacheHas, mapCacheSet = _mapCacheSet;
  function MapCache$1(entries) {
    var index2 = -1, length = entries == null ? 0 : entries.length;
    this.clear();
    while (++index2 < length) {
      var entry = entries[index2];
      this.set(entry[0], entry[1]);
    }
  }
  MapCache$1.prototype.clear = mapCacheClear;
  MapCache$1.prototype["delete"] = mapCacheDelete;
  MapCache$1.prototype.get = mapCacheGet;
  MapCache$1.prototype.has = mapCacheHas;
  MapCache$1.prototype.set = mapCacheSet;
  var _MapCache = MapCache$1;
  var MapCache = _MapCache;
  var FUNC_ERROR_TEXT = "Expected a function";
  function memoize$1(func, resolver) {
    if (typeof func != "function" || resolver != null && typeof resolver != "function") {
      throw new TypeError(FUNC_ERROR_TEXT);
    }
    var memoized = function() {
      var args = arguments, key = resolver ? resolver.apply(this, args) : args[0], cache = memoized.cache;
      if (cache.has(key)) {
        return cache.get(key);
      }
      var result = func.apply(this, args);
      memoized.cache = cache.set(key, result) || cache;
      return result;
    };
    memoized.cache = new (memoize$1.Cache || MapCache)();
    return memoized;
  }
  memoize$1.Cache = MapCache;
  var memoize_1 = memoize$1;
  var memoize = memoize_1;
  var MAX_MEMOIZE_SIZE = 500;
  function memoizeCapped$1(func) {
    var result = memoize(func, function(key) {
      if (cache.size === MAX_MEMOIZE_SIZE) {
        cache.clear();
      }
      return key;
    });
    var cache = result.cache;
    return result;
  }
  var _memoizeCapped = memoizeCapped$1;
  var memoizeCapped = _memoizeCapped;
  var rePropName = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;
  var reEscapeChar = /\\(\\)?/g;
  var stringToPath$1 = memoizeCapped(function(string) {
    var result = [];
    if (string.charCodeAt(0) === 46) {
      result.push("");
    }
    string.replace(rePropName, function(match, number, quote, subString) {
      result.push(quote ? subString.replace(reEscapeChar, "$1") : number || match);
    });
    return result;
  });
  var _stringToPath = stringToPath$1;
  function arrayMap$1(array, iteratee) {
    var index2 = -1, length = array == null ? 0 : array.length, result = Array(length);
    while (++index2 < length) {
      result[index2] = iteratee(array[index2], index2, array);
    }
    return result;
  }
  var _arrayMap = arrayMap$1;
  var Symbol$1 = _Symbol, arrayMap = _arrayMap, isArray$1 = isArray_1, isSymbol$1 = isSymbol_1;
  var INFINITY$1 = 1 / 0;
  var symbolProto = Symbol$1 ? Symbol$1.prototype : void 0, symbolToString = symbolProto ? symbolProto.toString : void 0;
  function baseToString$1(value) {
    if (typeof value == "string") {
      return value;
    }
    if (isArray$1(value)) {
      return arrayMap(value, baseToString$1) + "";
    }
    if (isSymbol$1(value)) {
      return symbolToString ? symbolToString.call(value) : "";
    }
    var result = value + "";
    return result == "0" && 1 / value == -INFINITY$1 ? "-0" : result;
  }
  var _baseToString = baseToString$1;
  var baseToString = _baseToString;
  function toString$1(value) {
    return value == null ? "" : baseToString(value);
  }
  var toString_1 = toString$1;
  var isArray = isArray_1, isKey = _isKey, stringToPath = _stringToPath, toString = toString_1;
  function castPath$1(value, object) {
    if (isArray(value)) {
      return value;
    }
    return isKey(value, object) ? [value] : stringToPath(toString(value));
  }
  var _castPath = castPath$1;
  var MAX_SAFE_INTEGER = 9007199254740991;
  var reIsUint = /^(?:0|[1-9]\d*)$/;
  function isIndex$1(value, length) {
    var type = typeof value;
    length = length == null ? MAX_SAFE_INTEGER : length;
    return !!length && (type == "number" || type != "symbol" && reIsUint.test(value)) && (value > -1 && value % 1 == 0 && value < length);
  }
  var _isIndex = isIndex$1;
  var isSymbol = isSymbol_1;
  var INFINITY = 1 / 0;
  function toKey$1(value) {
    if (typeof value == "string" || isSymbol(value)) {
      return value;
    }
    var result = value + "";
    return result == "0" && 1 / value == -INFINITY ? "-0" : result;
  }
  var _toKey = toKey$1;
  var assignValue = _assignValue, castPath = _castPath, isIndex = _isIndex, isObject = isObject_1, toKey = _toKey;
  function baseSet$1(object, path, value, customizer) {
    if (!isObject(object)) {
      return object;
    }
    path = castPath(path, object);
    var index2 = -1, length = path.length, lastIndex = length - 1, nested = object;
    while (nested != null && ++index2 < length) {
      var key = toKey(path[index2]), newValue = value;
      if (key === "__proto__" || key === "constructor" || key === "prototype") {
        return object;
      }
      if (index2 != lastIndex) {
        var objValue = nested[key];
        newValue = customizer ? customizer(objValue, key, nested) : void 0;
        if (newValue === void 0) {
          newValue = isObject(objValue) ? objValue : isIndex(path[index2 + 1]) ? [] : {};
        }
      }
      assignValue(nested, key, newValue);
      nested = nested[key];
    }
    return object;
  }
  var _baseSet = baseSet$1;
  var baseSet = _baseSet;
  function set(object, path, value) {
    return object == null ? object : baseSet(object, path, value);
  }
  var set_1 = set;
  const formatStateValue = (stateValue) => {
    let newState = JSON.parse(JSON.stringify(stateValue));
    let formatted = false;
    if (newState) {
      const formattedStageElements = formatStageElements(newState);
      if (formattedStageElements.formatted)
        newState = formattedStageElements.stateValue;
      const formattedImageUrls = formatImageUrls(newState);
      if (formattedImageUrls.formatted)
        newState = formattedImageUrls.stateValue;
      formatted = formattedStageElements.formatted || formattedImageUrls.formatted;
    }
    return { stateValue: newState, formatted };
  };
  const formatStageElements = (stateValue) => {
    var _a, _b;
    let formatted = false;
    if ((_a = stateValue == null ? void 0 : stateValue.stage) == null ? void 0 : _a.sections) {
      ((_b = stateValue == null ? void 0 : stateValue.stage) == null ? void 0 : _b.sections).forEach((section) => {
        if (Array.isArray(section.rows)) {
          section.rows.forEach((row) => {
            if (Array.isArray(row.columns)) {
              row.columns.forEach((column) => {
                if (Array.isArray(column.stageElements)) {
                  column.stageElements.forEach((stageElement) => {
                    if (hasImageElementWithoutFormat(stageElement)) {
                      stageElement = formatImageStageElement(stageElement);
                      formatted = true;
                    }
                    if (hasMathMLWithoutFormat(stageElement)) {
                      stageElement = formatMathMLStageElement(stageElement);
                      formatted = true;
                    }
                  });
                }
              });
            }
          });
        }
      });
    }
    return { stateValue, formatted };
  };
  const formatMathMLStageElement = (stageElement) => {
    var _a;
    if (!((_a = stageElement == null ? void 0 : stageElement.config) == null ? void 0 : _a.pluginConfigs))
      return stageElement;
    Object.keys(stageElement.config.pluginConfigs).forEach((key) => {
      var _a2, _b, _c, _d;
      const val = stageElement.config.pluginConfigs[key];
      if (typeof val.mathML !== "string" && ((_b = (_a2 = val.mathML) == null ? void 0 : _a2.asset) == null ? void 0 : _b.asset)) {
        stageElement.config.pluginConfigs[key] = {
          ...val,
          ...(_d = (_c = val.mathML) == null ? void 0 : _c.asset) == null ? void 0 : _d.asset
        };
      }
    });
    return stageElement;
  };
  const formatImageStageElement = (stageElement) => {
    var _a, _b;
    if ((_a = stageElement.config) == null ? void 0 : _a.url) {
      const source = (_b = stageElement.config.url.asset) == null ? void 0 : _b.source;
      if (source)
        stageElement.config.url["source"] = {
          ...source
        };
    }
    return stageElement;
  };
  const hasMathMLWithoutFormat = (stageElement) => {
    var _a, _b;
    let contains = false;
    if ((_a = stageElement.config) == null ? void 0 : _a.pluginConfigs) {
      Object.keys((_b = stageElement.config) == null ? void 0 : _b.pluginConfigs).forEach((key) => {
        var _a2, _b2, _c;
        const val = ((_a2 = stageElement.config) == null ? void 0 : _a2.pluginConfigs)[key];
        if (typeof val.mathML !== "string" && ((_c = (_b2 = val.mathML) == null ? void 0 : _b2.asset) == null ? void 0 : _c.asset)) {
          contains = true;
        }
      });
    }
    return contains;
  };
  const hasImageElementWithoutFormat = (stageElement) => {
    var _a;
    return (stageElement == null ? void 0 : stageElement.type) === "stage-element-image" && !((_a = stageElement.config) == null ? void 0 : _a.url).source;
  };
  const isImgUrl = (url) => {
    if (!url || url.length === 0) {
      return false;
    }
    return url.match(/^(\.\/|http)[^?]*\.(jpg|jpeg|gif|png|tiff|bmp|svg)(\?(.*))?$/gim) !== null;
  };
  const isAssetUrn = (urn) => {
    if (!urn || typeof urn !== "string" || urn.length === 0) {
      return false;
    }
    const result = urn.match(/^urn:/gim) !== null;
    return result;
  };
  const getProperties = (path, stateValue, propertyValidation) => {
    let keyPath = [];
    let assetInfo = [];
    stateValue && Object.entries(stateValue).forEach(([key, val]) => {
      keyPath = path.concat([key]);
      if (typeof val === "string" && propertyValidation(val)) {
        assetInfo.push({ path: keyPath, value: val });
      } else {
        if (Array.isArray(val) || typeof val === "object") {
          assetInfo = assetInfo.concat(getProperties(keyPath, val, propertyValidation));
        }
      }
    });
    return assetInfo;
  };
  const formatImageUrls = (stateValue) => {
    const assets = getProperties([], stateValue, isImgUrl);
    let formatted = false;
    assets.forEach((asset) => {
      const keyPath = asset.path.join(".");
      const actualUrl = asset.value;
      formatted = true;
      const newUrl = `${getPackagePath()}/assets/images/original/${actualUrl.substring(
        actualUrl.lastIndexOf("/") + 1
      )}`;
      set_1(stateValue, keyPath, newUrl);
    });
    return { stateValue, formatted };
  };
  const getPackagePath = () => {
    const relativePath = window.location.pathname.substring(0, window.location.pathname.lastIndexOf("/") + 1) + Globals$1.offlinePackagePath;
    return Globals$1.offlinePackagePath.startsWith("/") || Globals$1.offlinePackagePath.startsWith("http") || Globals$1.offlinePackagePath.startsWith("file") ? Globals$1.offlinePackagePath : relativePath;
  };
  const createAmbrosiaCoursewareItem = (ambrosiaJson) => {
    const activityTheme = ambrosiaJson["activityTheme"];
    return {
      $id: ambrosiaJson["$id"],
      $ambrosia: ambrosiaJson["$ambrosia"],
      $workspaceId: ambrosiaJson["$workspaceId"],
      $projectId: ambrosiaJson["$projectId"],
      toc: ambrosiaJson["toc"],
      activityTheme: {
        backgroundColor: activityTheme["backgroundColor"],
        bodyFont: activityTheme["bodyFont"],
        errorColor: activityTheme["errorColor"],
        primaryColor: activityTheme["primaryColor"],
        successColor: activityTheme["successColor"],
        surfaceColor: activityTheme["surfaceColor"],
        textColor: activityTheme["textColor"],
        titleFont: activityTheme["titleFont"]
      },
      configSchemaVersion: ambrosiaJson["configSchemaVersion"],
      config: ambrosiaJson["config"],
      pluginPayload: ambrosiaJson["pluginPayload"],
      scenarios: ambrosiaJson["scenarios"],
      selectedThemePayload: ambrosiaJson["selectedThemePayload"]
    };
  };
  const _AssetService = class {
    constructor() {
      __publicField(this, "resolveAsset", async (urn) => Promise.resolve(__privateGet(_AssetService, _assets).get(urn)));
    }
    static registerAssets(assets) {
      assets.forEach((asset) => {
        const stateValue = JSON.parse(JSON.stringify(asset));
        const formattedAsset = JSON.parse(JSON.stringify(formatImageUrls(stateValue).stateValue));
        if (!__privateGet(_AssetService, _assets).has(asset.urn)) {
          __privateGet(_AssetService, _assets).set(asset.urn, formattedAsset);
        }
      });
    }
    static build() {
      return new _AssetService();
    }
  };
  let AssetService = _AssetService;
  _assets = new WeakMap();
  __privateAdd(AssetService, _assets, /* @__PURE__ */ new Map());
  var MOTIVATIONS = /* @__PURE__ */ ((MOTIVATIONS2) => {
    MOTIVATIONS2["MOTIVATION_ASSESSING"] = "assessing";
    MOTIVATIONS2["MOTIVATION_BOOKMARKING"] = "bookmarking";
    MOTIVATIONS2["MOTIVATION_CLASSIFYING"] = "classifying";
    MOTIVATIONS2["MOTIVATION_COMMENTING"] = "commenting";
    MOTIVATIONS2["MOTIVATION_DESCRIBING"] = "describing";
    MOTIVATIONS2["MOTIVATION_EDITING"] = "editing";
    MOTIVATIONS2["MOTIVATION_HIGHLIGHTING"] = "highlighting";
    MOTIVATIONS2["MOTIVATION_IDENTIFYING"] = "identifying";
    MOTIVATIONS2["MOTIVATION_LINKING"] = "linking";
    MOTIVATIONS2["MOTIVATION_MODERATING"] = "moderating";
    MOTIVATIONS2["MOTIVATION_QUESTIONING"] = "questioning";
    MOTIVATIONS2["MOTIVATION_REPLYING"] = "replying";
    MOTIVATIONS2["MOTIVATION_TAGGING"] = "tagging";
    return MOTIVATIONS2;
  })(MOTIVATIONS || {});
  var IMAGE_SOURCE_TYPES = /* @__PURE__ */ ((IMAGE_SOURCE_TYPES2) => {
    IMAGE_SOURCE_TYPES2["EXTRA_LARGE"] = "extra_large";
    IMAGE_SOURCE_TYPES2["LARGE"] = "large";
    IMAGE_SOURCE_TYPES2["ORIGINAL"] = "original";
    IMAGE_SOURCE_TYPES2["MEDIUM"] = "medium";
    IMAGE_SOURCE_TYPES2["SMALL"] = "small";
    IMAGE_SOURCE_TYPES2["THUMB"] = "thumb";
    return IMAGE_SOURCE_TYPES2;
  })(IMAGE_SOURCE_TYPES || {});
  function updateV1Asset(current, parent, key) {
    var _a, _b;
    if (current instanceof Object) {
      if (((_a = current.asset) == null ? void 0 : _a.source) && key) {
        const assetUrl = (_b = getAssetUrl(current.asset)) != null ? _b : "";
        parent[key] = assetUrl;
      }
      for (const key2 in current) {
        if (current.hasOwnProperty(key2)) {
          updateV1Asset(current[key2], current, key2);
        }
      }
    }
  }
  function getAssetUrl(asset) {
    var _a;
    const source = asset.source;
    if (source) {
      const imageSourceTypes = Object.values(IMAGE_SOURCE_TYPES);
      for (const imageSourceType of imageSourceTypes) {
        if (source[imageSourceType]) {
          return (_a = source[imageSourceType]) == null ? void 0 : _a.url;
        }
      }
    }
    return "";
  }
  const processImageUrnAssets = (stateValue) => {
    const assetService = AssetService.build();
    const properties = getProperties([], stateValue, isAssetUrn);
    const newState = JSON.parse(JSON.stringify(stateValue));
    properties.forEach((property) => {
      const keyPath = property.path.join(".");
      const urn = property.value;
      assetService.resolveAsset(urn).then((resource) => {
        if (resource) {
          set_1(newState, keyPath, { ...resource, ...resource.source });
        }
      });
    });
    return newState;
  };
  const _CoursewareItemServices = class {
    constructor({ target, context, id: id2, initialState }) {
      __publicField(this, "context");
      __publicField(this, "id");
      __publicField(this, "target");
      __publicField(this, "state");
      this.context = context;
      this.id = id2;
      this.target = target || { id: id2 };
      this.state = typeof initialState === "object" ? initialState : JSON.parse(initialState);
    }
    static async setState(coursewareId, value, path = []) {
      if (Globals$1.isForcedOffline) {
        if (value && (Array.isArray(value) || typeof value === "object")) {
          const newState2 = Array.isArray(value) ? [...value] : { ...value };
          const formatResult = formatStateValue(newState2);
          if (formatResult.formatted) {
            value = formatResult.stateValue;
            _CoursewareItemServices.notifySubscribers(
              coursewareId,
              path,
              value
            );
          }
        }
        const currentState = await _CoursewareItemServices.getState(coursewareId);
        if (path.length) {
          if (!Array.isArray(path)) {
            path = path.split(".");
          }
          if (path.length === 1) {
            value = { [path[0]]: value };
          } else if (path.length === 2) {
            const newParent = { ...currentState[path[0]] };
            newParent[path[1]] = value;
            value = { [path[0]]: newParent };
          }
        }
        if (typeof value === "string" && !path.length) {
          value = JSON.parse(value);
        }
        const newState = { ...currentState, ...value };
        __privateGet(_CoursewareItemServices, _stateMap).set(coursewareId, newState);
        _CoursewareItemServices.triggerBindingSubscriptions(coursewareId);
        _CoursewareItemServices.notifySubscribers(
          coursewareId,
          path,
          path.length ? { ...value } : newState
        );
      }
    }
    static getSegment(path, value) {
      let segment = { title: "" };
      if (value && (path == null ? void 0 : path.length)) {
        if (!Array.isArray(path)) {
          path = path.split(".");
        }
        segment = { ...value };
        path.forEach((key) => {
          if (typeof segment[key] === "object") {
            segment = { ...segment[key] };
          } else {
            segment = segment[key];
          }
        });
      }
      return segment;
    }
    static getState(coursewareId, path = []) {
      var _a, _b, _c;
      let stateValue = { ...__privateGet(_CoursewareItemServices, _stateMap).get(coursewareId) };
      if ((_a = stateValue == null ? void 0 : stateValue.chapters) == null ? void 0 : _a.children) {
        stateValue.chapters.children.forEach((chapter) => {
          __privateGet(_CoursewareItemServices, _stateMap).set(chapter.$id, chapter.config);
        });
      }
      if ((_b = stateValue == null ? void 0 : stateValue.lessons) == null ? void 0 : _b.children) {
        stateValue.lessons.children.forEach((lesson) => {
          __privateGet(_CoursewareItemServices, _stateMap).set(lesson.$id, lesson.config);
        });
      }
      if ((_c = stateValue == null ? void 0 : stateValue.pathway) == null ? void 0 : _c.children) {
        stateValue.pathway.children.forEach((screen) => {
          console.info("getting screen config for ", screen.$id);
          if (!screen.config) {
            console.warn("Screen config not available");
            return;
          }
          __privateGet(_CoursewareItemServices, _stateMap).set(screen.$id, screen.config);
        });
      }
      if (stateValue.components) {
        _CoursewareItemServices.updateComponentConfigSchema(
          stateValue.components
        );
      }
      if (stateValue.stage) {
        stateValue = processImageUrnAssets(stateValue);
      }
      if (path.length) {
        if (!Array.isArray(path)) {
          path = path.split(".");
        }
        if (path.length === 1) {
          stateValue = stateValue[path[0]];
        } else if (path.length === 2) {
          stateValue = stateValue[path[0]][path[1]];
        }
      }
      stateValue && Object.entries(stateValue).forEach(([key, val]) => {
        var _a2;
        if ((_a2 = val.$ambrosia) == null ? void 0 : _a2.includes("pathway")) {
          const childrenPathwayObjects = val.children.map((child) => ({
            itemId: child.$id,
            itemType: "ACTIVITY"
          }));
          stateValue[key] = childrenPathwayObjects;
        }
      });
      let components;
      if (path[0] === "components") {
        components = stateValue && stateValue.map((value) => ({
          itemId: value.$id,
          localRef: value.localRef
        }));
      }
      _CoursewareItemServices.checkStateBindings(coursewareId, stateValue);
      return Promise.resolve(components != null ? components : stateValue);
    }
    static checkStateBindings(coursewareId, stateValue) {
      _CoursewareItemServices.getBindingInfo([], stateValue).forEach((bindingInfo) => {
        var _a, _b;
        if (!__privateGet(_CoursewareItemServices, _bindings).has(bindingInfo.sourceId))
          __privateGet(_CoursewareItemServices, _bindings).set(bindingInfo.sourceId, []);
        const binding = {
          coursewareId,
          path: bindingInfo.path,
          subscriptionPath: bindingInfo.context
        };
        const index2 = (_a = __privateGet(_CoursewareItemServices, _bindings).get(bindingInfo.sourceId)) == null ? void 0 : _a.findIndex((bindingSubscription) => {
          return bindingSubscription.path.join("") === binding.path.join("") && bindingSubscription.subscriptionPath.join("") === binding.subscriptionPath.join(".") && bindingSubscription.coursewareId === binding.coursewareId;
        });
        if (index2 === -1) {
          (_b = __privateGet(_CoursewareItemServices, _bindings).get(bindingInfo.sourceId)) == null ? void 0 : _b.push(binding);
        }
      });
    }
    static getBindingInfo(path, stateValue) {
      let keyPath = [];
      let bindingInfo = [];
      stateValue && Object.entries(stateValue).forEach(([key, val]) => {
        keyPath = path.concat([key]);
        if (typeof val.isBindingInvalid !== "undefined") {
          bindingInfo.push({ path: keyPath, sourceId: val.sourceId, context: val.context });
        } else {
          if (Array.isArray(val) || typeof val === "object") {
            bindingInfo = bindingInfo.concat(_CoursewareItemServices.getBindingInfo(keyPath, val));
          }
        }
      });
      return bindingInfo;
    }
    static triggerBindingSubscriptions(coursewareId) {
      var _a;
      if (__privateGet(_CoursewareItemServices, _bindings).has(coursewareId)) {
        (_a = __privateGet(_CoursewareItemServices, _bindings).get(coursewareId)) == null ? void 0 : _a.forEach((bindingSubscription) => {
          const currentState = __privateGet(_CoursewareItemServices, _stateMap).get(coursewareId);
          const currentValue = _CoursewareItemServices.getSegment(
            bindingSubscription.subscriptionPath,
            currentState
          );
          if (currentValue) {
            _CoursewareItemServices.setState(
              bindingSubscription.coursewareId,
              currentValue,
              bindingSubscription.path[0]
            ).then(() => {
              let rawState = __privateGet(_CoursewareItemServices, _stateMap).get(
                bindingSubscription.coursewareId
              );
              if (rawState.stage) {
                rawState = processImageUrnAssets(rawState);
              }
              _CoursewareItemServices.notifySubscribers(
                bindingSubscription.coursewareId,
                [],
                rawState
              );
            });
          }
        });
      }
    }
    static notifySubscribers(coursewareId, path, state) {
      const subscriptionKey = getKey(coursewareId, path);
      if (__privateGet(_CoursewareItemServices, _subscriptions).has(subscriptionKey)) {
        Object.values(
          __privateGet(_CoursewareItemServices, _subscriptions).get(subscriptionKey)
        ).forEach((subscriptionCallback) => {
          if (state.stage) {
            state = processImageUrnAssets(state);
          }
          subscriptionCallback(state);
        });
      }
    }
    static async subscribe(coursewareId, callback, path = []) {
      const subscriptionId = v4();
      const subscriptionKey = getKey(coursewareId, path);
      __privateGet(_CoursewareItemServices, _subscriptions).set(subscriptionKey, {
        ...__privateGet(_CoursewareItemServices, _subscriptions).get(subscriptionKey),
        ...{ [subscriptionId]: callback }
      });
      const state = await _CoursewareItemServices.getState(coursewareId, path);
      callback(state);
      return {
        subscriptionId,
        unsubscribe: () => {
          var _a;
          return (_a = __privateGet(_CoursewareItemServices, _subscriptions).get(getKey(coursewareId, path))) == null ? true : delete _a[subscriptionId];
        }
      };
    }
    static runEvaluate(_coursewareId) {
      return true;
    }
    getInState(path) {
      return _CoursewareItemServices.getState(this.target.id, path);
    }
    setInConfig(path, value) {
      return _CoursewareItemServices.setState(this.target.id, value, path);
    }
    subscribeToState(path, fn) {
      return Promise.resolve(_CoursewareItemServices.subscribe(this.target.id, fn, path));
    }
    evaluate(_event = {}) {
      return Promise.resolve(_CoursewareItemServices.runEvaluate(this.target.id));
    }
    static async build(args) {
      const argsWithPlugin = {
        ...args,
        ...{ initialState: await _CoursewareItemServices.getState(args.id) }
      };
      return new _CoursewareItemServices(argsWithPlugin);
    }
    static updateComponentConfigSchema(components) {
      components.forEach((component) => {
        if (component.configSchemaVersion === "/pluginGenericSchema/v1") {
          updateV1Asset(component.config);
        }
      });
    }
  };
  let CoursewareItemServices = _CoursewareItemServices;
  _stateMap = new WeakMap();
  _subscriptions = new WeakMap();
  _bindings = new WeakMap();
  __privateAdd(CoursewareItemServices, _stateMap, /* @__PURE__ */ new Map());
  __privateAdd(CoursewareItemServices, _subscriptions, /* @__PURE__ */ new Map());
  __privateAdd(CoursewareItemServices, _bindings, /* @__PURE__ */ new Map());
  function getKey(coursewareId, path) {
    if (!Array.isArray(path)) {
      path = path.split(".");
    }
    return JSON.stringify({ coursewareId, path });
  }
  const getAncestry = (id2) => {
    var _a, _b;
    const ancestry = [];
    if ((_b = (_a = Globals$1.ambrosiaJson.config) == null ? void 0 : _a.chapters) == null ? void 0 : _b.children) {
      const isInteractiveInChapter = Globals$1.ambrosiaJson.config.chapters.children.some((chapter) => {
        var _a2, _b2, _c;
        const isInteractiveInLesson = (_c = (_b2 = (_a2 = chapter.config) == null ? void 0 : _a2.lessons) == null ? void 0 : _b2.children) == null ? void 0 : _c.some((lesson) => {
          var _a3, _b3, _c2;
          const isInteractiveInPathway = (_c2 = (_b3 = (_a3 = lesson.config) == null ? void 0 : _a3.pathway) == null ? void 0 : _b3.children) == null ? void 0 : _c2.some((interactive) => {
            return interactive.$id === id2;
          });
          if (isInteractiveInPathway) {
            ancestry.push({
              elementId: lesson.$id,
              elementType: lesson.$ambrosia.split(":")[1].toUpperCase()
            });
            return true;
          }
          return false;
        });
        if (isInteractiveInLesson) {
          ancestry.push({
            elementId: chapter.$id,
            elementType: chapter.$ambrosia.split(":")[1].toUpperCase()
          });
          return true;
        }
        return false;
      });
      if (isInteractiveInChapter) {
        ancestry.push({
          elementId: Globals$1.ambrosiaJson.$id,
          elementType: Globals$1.ambrosiaJson.$ambrosia.split(":")[1].toUpperCase()
        });
      }
    }
    return ancestry;
  };
  class CoursewareTargetServices {
    constructor(data) {
      __publicField(this, "id");
      this.id = data.id;
    }
    static getTarget(id2) {
      return new CoursewareTargetServices({ id: id2 });
    }
    createTarget(id2) {
      const ancestry = getAncestry(id2);
      const type = "INTERACTIVE";
      return {
        type,
        ancestry,
        id: id2,
        deploymentId: Globals$1.deploymentId,
        cohortId: Globals$1.cohortId
      };
    }
    static build(args) {
      return new CoursewareTargetServices(args);
    }
  }
  class FakeService {
    static build(_args) {
      return new FakeService();
    }
  }
  const _EventServices = class {
    subscribe(event, callback) {
      return _EventServices.createSubscription(event, callback);
    }
    publish(event, data, metadata = {}) {
      return _EventServices.publishEvent(event, data, metadata);
    }
    static createSubscription(event, callback) {
      var _a, _b;
      const subscriptionId = v4();
      ((_b = (_a = __privateGet(_EventServices, _subscriptions2))[event]) != null ? _b : _a[event] = {})[subscriptionId] = callback;
      return Promise.resolve({
        queue: [],
        unsubscribeFn: () => delete __privateGet(_EventServices, _subscriptions2)[event][subscriptionId],
        waiting: []
      });
    }
    static publishEvent(event, data, metadata = {}) {
      var _a;
      if (__privateGet(_EventServices, _subscriptions2)[event] && ((_a = Object.values(__privateGet(_EventServices, _subscriptions2)[event])) == null ? void 0 : _a.length)) {
        Object.values(__privateGet(_EventServices, _subscriptions2)[event]).forEach(
          (callback) => callback(data, metadata)
        );
      }
    }
    static build() {
      return new _EventServices();
    }
  };
  let EventServices = _EventServices;
  _subscriptions2 = new WeakMap();
  __privateAdd(EventServices, _subscriptions2, {});
  const loadScript = (resource, callback) => {
    const script = document.createElement("script");
    script.type = "text/javascript";
    script.src = resource + "?t=" + new Date().getTime();
    if (callback) {
      script.onload = () => callback(script);
      script.onerror = () => {
        throw new Error("failed to load script file " + resource);
      };
    }
    document.body.appendChild(script);
  };
  const NONCE_BITS = 32;
  function generateNonce() {
    const nonce = Math.floor(Math.random() * Math.pow(2, NONCE_BITS));
    const hexNonce = nonce.toString(16);
    return hexNonce;
  }
  class LifecycleServices {
    constructor({ id: id2 }) {
      __publicField(this, "id");
      __publicField(this, "activePlugins", /* @__PURE__ */ new Map());
      this.id = id2;
    }
    async initChild(childId, _childContext, respondToInitChildCallback) {
      var _a, _b, _c;
      const loadContent = (pluginData2) => {
        const { pluginId } = pluginData2.pluginPayload.summary;
        loadScript(
          `${Globals$1.offlinePackagePath}/plugins/${pluginId}/manifest.js`,
          (scriptTag) => {
            var _a2, _b2, _c2;
            const { ApiDriver: ApiDriver2 } = getDefault();
            if (this.activePlugins.has(childId)) {
              throw new Error(`courseware ${childId} already initialized`);
            }
            const { publicDir, entryPoint, contentType } = (_c2 = (_b2 = (_a2 = window.manifest) == null ? void 0 : _a2.views) == null ? void 0 : _b2.EDITOR) != null ? _c2 : window.manifest.views.LEARNER;
            const { name } = window.manifest;
            const { config, assets } = pluginData2;
            if (assets) {
              AssetService.registerAssets(assets);
            }
            CoursewareItemServices.setState(childId, config);
            const title = config.title;
            const nonce = generateNonce();
            const driver = ApiDriver2.listenForNonceInLearnspace(childId, nonce, "LEARNER", "");
            this.activePlugins.set(childId, { nonce, driver });
            document.body.removeChild(scriptTag);
            respondToInitChildCallback({
              nonce,
              name,
              title,
              entryPoint: {
                contentType,
                entryPoint: `../../${pluginId}/${publicDir}/${entryPoint}`
              }
            });
          }
        );
      };
      const elementId = Globals$1.tocMap.get(childId);
      if (elementId) {
        const screenData = await Globals$1.getContent(
          `${Globals$1.offlinePackagePath}/data/${elementId}.json`
        );
        Globals$1.currentInteractive = screenData;
        loadContent(screenData);
        return;
      }
      const pluginData = (_c = (_b = (_a = Globals$1.currentInteractive) == null ? void 0 : _a.config) == null ? void 0 : _b.components) == null ? void 0 : _c.find(
        (c) => c.$id === childId
      );
      if (!pluginData) {
        console.error("Cannot find the element to render; elementId = ", childId);
        return;
      }
      console.log("loading component inside screen id = ", childId);
      loadContent(pluginData);
    }
    async createChild() {
      return Promise.reject(new Error("No child creation on the Bronte Viewer"));
    }
    async deleteChild() {
      return Promise.reject(new Error("No child deletion on the Bronte Viewer"));
    }
    removeChild(childId) {
      const { driver } = this.activePlugins.get(childId);
      if (driver) {
        EventServices.publishEvent("removePlugin", {
          detail: {
            instanceId: childId
          }
        });
        driver.cancelListenersAndSubscriptions();
      }
      this.activePlugins.delete(childId);
    }
    getAncestry() {
      return [this.id];
    }
    static build(args) {
      return new LifecycleServices(args);
    }
  }
  const _PluginServices = class {
    constructor({ id: id2, target }) {
      __publicField(this, "id");
      __publicField(this, "source");
      this.id = target && target.id ? target.id : id2;
      this.source = Globals$1.ambrosiaJson;
    }
    async getPlugin(id2) {
      var _a;
      id2 != null ? id2 : id2 = this.id;
      if (!this.source) {
        return new Error("No source found!");
      }
      const pluginId = (_a = _PluginServices.pluginMap.get(id2)) != null ? _a : await this.getPluginId(this.source, id2);
      if (!pluginId) {
        return new Error(`Unable to find the plugin id: ${id2}`);
      }
      try {
        return new Promise((resolve) => {
          loadScript(
            `${Globals$1.offlinePackagePath}/plugins/${pluginId}/manifest.js`,
            (scriptTag) => {
              _PluginServices.pluginMap.set(id2, pluginId);
              const manifest = window.manifest;
              document.body.removeChild(scriptTag);
              resolve(manifest);
            }
          );
        });
      } catch (error) {
        _PluginServices.pluginMap.set(id2, null);
        return new Error(`Not able to load ${id2} plugin data: ${error}`);
      }
    }
    static build(args) {
      return new _PluginServices(args);
    }
    async getPluginId(ambrosia, elementId) {
      let pluginData = null;
      if (ambrosia) {
        JSON.stringify(ambrosia, (_, node) => {
          if (node && node.$id === elementId) {
            pluginData = node;
          }
          return node;
        });
        if (pluginData) {
          if (!pluginData.pluginPayload) {
            console.warn("Fetching plugin data from screen file = ", elementId);
            const data = new Promise((resolve) => {
              Globals$1.getContent(`${Globals$1.offlinePackagePath}/data/${elementId}.json`).then(
                (data2) => {
                  resolve(data2);
                }
              );
            });
            pluginData = await data;
          }
          return pluginData.pluginPayload.summary.pluginId;
        }
      }
      return null;
    }
  };
  let PluginServices = _PluginServices;
  __publicField(PluginServices, "pluginMap", /* @__PURE__ */ new Map());
  function getAmbrosiaProperty(data, target) {
    if (Object.keys(data).length) {
      const newData = { ...data };
      if (newData[target]) {
        return newData[target];
      }
      throw new Error("No target field found");
    }
    throw new Error("No source data found");
  }
  var lodash = { exports: {} };
  /**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   */
  (function(module, exports) {
    (function() {
      var undefined$1;
      var VERSION = "4.17.21";
      var LARGE_ARRAY_SIZE = 200;
      var CORE_ERROR_TEXT = "Unsupported core-js use. Try https://npms.io/search?q=ponyfill.", FUNC_ERROR_TEXT2 = "Expected a function", INVALID_TEMPL_VAR_ERROR_TEXT = "Invalid `variable` option passed into `_.template`";
      var HASH_UNDEFINED2 = "__lodash_hash_undefined__";
      var MAX_MEMOIZE_SIZE2 = 500;
      var PLACEHOLDER = "__lodash_placeholder__";
      var CLONE_DEEP_FLAG = 1, CLONE_FLAT_FLAG = 2, CLONE_SYMBOLS_FLAG = 4;
      var COMPARE_PARTIAL_FLAG = 1, COMPARE_UNORDERED_FLAG = 2;
      var WRAP_BIND_FLAG = 1, WRAP_BIND_KEY_FLAG = 2, WRAP_CURRY_BOUND_FLAG = 4, WRAP_CURRY_FLAG = 8, WRAP_CURRY_RIGHT_FLAG = 16, WRAP_PARTIAL_FLAG = 32, WRAP_PARTIAL_RIGHT_FLAG = 64, WRAP_ARY_FLAG = 128, WRAP_REARG_FLAG = 256, WRAP_FLIP_FLAG = 512;
      var DEFAULT_TRUNC_LENGTH = 30, DEFAULT_TRUNC_OMISSION = "...";
      var HOT_COUNT = 800, HOT_SPAN = 16;
      var LAZY_FILTER_FLAG = 1, LAZY_MAP_FLAG = 2, LAZY_WHILE_FLAG = 3;
      var INFINITY2 = 1 / 0, MAX_SAFE_INTEGER2 = 9007199254740991, MAX_INTEGER = 17976931348623157e292, NAN = 0 / 0;
      var MAX_ARRAY_LENGTH = 4294967295, MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1, HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;
      var wrapFlags = [
        ["ary", WRAP_ARY_FLAG],
        ["bind", WRAP_BIND_FLAG],
        ["bindKey", WRAP_BIND_KEY_FLAG],
        ["curry", WRAP_CURRY_FLAG],
        ["curryRight", WRAP_CURRY_RIGHT_FLAG],
        ["flip", WRAP_FLIP_FLAG],
        ["partial", WRAP_PARTIAL_FLAG],
        ["partialRight", WRAP_PARTIAL_RIGHT_FLAG],
        ["rearg", WRAP_REARG_FLAG]
      ];
      var argsTag = "[object Arguments]", arrayTag = "[object Array]", asyncTag2 = "[object AsyncFunction]", boolTag = "[object Boolean]", dateTag = "[object Date]", domExcTag = "[object DOMException]", errorTag = "[object Error]", funcTag2 = "[object Function]", genTag2 = "[object GeneratorFunction]", mapTag = "[object Map]", numberTag = "[object Number]", nullTag2 = "[object Null]", objectTag = "[object Object]", promiseTag = "[object Promise]", proxyTag2 = "[object Proxy]", regexpTag = "[object RegExp]", setTag = "[object Set]", stringTag = "[object String]", symbolTag2 = "[object Symbol]", undefinedTag2 = "[object Undefined]", weakMapTag = "[object WeakMap]", weakSetTag = "[object WeakSet]";
      var arrayBufferTag = "[object ArrayBuffer]", dataViewTag = "[object DataView]", float32Tag = "[object Float32Array]", float64Tag = "[object Float64Array]", int8Tag = "[object Int8Array]", int16Tag = "[object Int16Array]", int32Tag = "[object Int32Array]", uint8Tag = "[object Uint8Array]", uint8ClampedTag = "[object Uint8ClampedArray]", uint16Tag = "[object Uint16Array]", uint32Tag = "[object Uint32Array]";
      var reEmptyStringLeading = /\b__p \+= '';/g, reEmptyStringMiddle = /\b(__p \+=) '' \+/g, reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;
      var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g, reUnescapedHtml = /[&<>"']/g, reHasEscapedHtml = RegExp(reEscapedHtml.source), reHasUnescapedHtml = RegExp(reUnescapedHtml.source);
      var reEscape = /<%-([\s\S]+?)%>/g, reEvaluate = /<%([\s\S]+?)%>/g, reInterpolate = /<%=([\s\S]+?)%>/g;
      var reIsDeepProp2 = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, reIsPlainProp2 = /^\w*$/, rePropName2 = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;
      var reRegExpChar2 = /[\\^$.*+?()[\]{}|]/g, reHasRegExpChar = RegExp(reRegExpChar2.source);
      var reTrimStart = /^\s+/;
      var reWhitespace = /\s/;
      var reWrapComment = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/, reWrapDetails = /\{\n\/\* \[wrapped with (.+)\] \*/, reSplitDetails = /,? & /;
      var reAsciiWord = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;
      var reForbiddenIdentifierChars = /[()=,{}\[\]\/\s]/;
      var reEscapeChar2 = /\\(\\)?/g;
      var reEsTemplate = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;
      var reFlags = /\w*$/;
      var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;
      var reIsBinary = /^0b[01]+$/i;
      var reIsHostCtor2 = /^\[object .+?Constructor\]$/;
      var reIsOctal = /^0o[0-7]+$/i;
      var reIsUint2 = /^(?:0|[1-9]\d*)$/;
      var reLatin = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;
      var reNoMatch = /($^)/;
      var reUnescapedString = /['\n\r\u2028\u2029\\]/g;
      var rsAstralRange = "\\ud800-\\udfff", rsComboMarksRange = "\\u0300-\\u036f", reComboHalfMarksRange = "\\ufe20-\\ufe2f", rsComboSymbolsRange = "\\u20d0-\\u20ff", rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange, rsDingbatRange = "\\u2700-\\u27bf", rsLowerRange = "a-z\\xdf-\\xf6\\xf8-\\xff", rsMathOpRange = "\\xac\\xb1\\xd7\\xf7", rsNonCharRange = "\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf", rsPunctuationRange = "\\u2000-\\u206f", rsSpaceRange = " \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000", rsUpperRange = "A-Z\\xc0-\\xd6\\xd8-\\xde", rsVarRange = "\\ufe0e\\ufe0f", rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;
      var rsApos = "['\u2019]", rsAstral = "[" + rsAstralRange + "]", rsBreak = "[" + rsBreakRange + "]", rsCombo = "[" + rsComboRange + "]", rsDigits = "\\d+", rsDingbat = "[" + rsDingbatRange + "]", rsLower = "[" + rsLowerRange + "]", rsMisc = "[^" + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + "]", rsFitz = "\\ud83c[\\udffb-\\udfff]", rsModifier = "(?:" + rsCombo + "|" + rsFitz + ")", rsNonAstral = "[^" + rsAstralRange + "]", rsRegional = "(?:\\ud83c[\\udde6-\\uddff]){2}", rsSurrPair = "[\\ud800-\\udbff][\\udc00-\\udfff]", rsUpper = "[" + rsUpperRange + "]", rsZWJ = "\\u200d";
      var rsMiscLower = "(?:" + rsLower + "|" + rsMisc + ")", rsMiscUpper = "(?:" + rsUpper + "|" + rsMisc + ")", rsOptContrLower = "(?:" + rsApos + "(?:d|ll|m|re|s|t|ve))?", rsOptContrUpper = "(?:" + rsApos + "(?:D|LL|M|RE|S|T|VE))?", reOptMod = rsModifier + "?", rsOptVar = "[" + rsVarRange + "]?", rsOptJoin = "(?:" + rsZWJ + "(?:" + [rsNonAstral, rsRegional, rsSurrPair].join("|") + ")" + rsOptVar + reOptMod + ")*", rsOrdLower = "\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])", rsOrdUpper = "\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])", rsSeq = rsOptVar + reOptMod + rsOptJoin, rsEmoji = "(?:" + [rsDingbat, rsRegional, rsSurrPair].join("|") + ")" + rsSeq, rsSymbol = "(?:" + [rsNonAstral + rsCombo + "?", rsCombo, rsRegional, rsSurrPair, rsAstral].join("|") + ")";
      var reApos = RegExp(rsApos, "g");
      var reComboMark = RegExp(rsCombo, "g");
      var reUnicode = RegExp(rsFitz + "(?=" + rsFitz + ")|" + rsSymbol + rsSeq, "g");
      var reUnicodeWord = RegExp([
        rsUpper + "?" + rsLower + "+" + rsOptContrLower + "(?=" + [rsBreak, rsUpper, "$"].join("|") + ")",
        rsMiscUpper + "+" + rsOptContrUpper + "(?=" + [rsBreak, rsUpper + rsMiscLower, "$"].join("|") + ")",
        rsUpper + "?" + rsMiscLower + "+" + rsOptContrLower,
        rsUpper + "+" + rsOptContrUpper,
        rsOrdUpper,
        rsOrdLower,
        rsDigits,
        rsEmoji
      ].join("|"), "g");
      var reHasUnicode = RegExp("[" + rsZWJ + rsAstralRange + rsComboRange + rsVarRange + "]");
      var reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;
      var contextProps = [
        "Array",
        "Buffer",
        "DataView",
        "Date",
        "Error",
        "Float32Array",
        "Float64Array",
        "Function",
        "Int8Array",
        "Int16Array",
        "Int32Array",
        "Map",
        "Math",
        "Object",
        "Promise",
        "RegExp",
        "Set",
        "String",
        "Symbol",
        "TypeError",
        "Uint8Array",
        "Uint8ClampedArray",
        "Uint16Array",
        "Uint32Array",
        "WeakMap",
        "_",
        "clearTimeout",
        "isFinite",
        "parseInt",
        "setTimeout"
      ];
      var templateCounter = -1;
      var typedArrayTags = {};
      typedArrayTags[float32Tag] = typedArrayTags[float64Tag] = typedArrayTags[int8Tag] = typedArrayTags[int16Tag] = typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] = typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] = typedArrayTags[uint32Tag] = true;
      typedArrayTags[argsTag] = typedArrayTags[arrayTag] = typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] = typedArrayTags[dataViewTag] = typedArrayTags[dateTag] = typedArrayTags[errorTag] = typedArrayTags[funcTag2] = typedArrayTags[mapTag] = typedArrayTags[numberTag] = typedArrayTags[objectTag] = typedArrayTags[regexpTag] = typedArrayTags[setTag] = typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;
      var cloneableTags = {};
      cloneableTags[argsTag] = cloneableTags[arrayTag] = cloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] = cloneableTags[boolTag] = cloneableTags[dateTag] = cloneableTags[float32Tag] = cloneableTags[float64Tag] = cloneableTags[int8Tag] = cloneableTags[int16Tag] = cloneableTags[int32Tag] = cloneableTags[mapTag] = cloneableTags[numberTag] = cloneableTags[objectTag] = cloneableTags[regexpTag] = cloneableTags[setTag] = cloneableTags[stringTag] = cloneableTags[symbolTag2] = cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] = cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;
      cloneableTags[errorTag] = cloneableTags[funcTag2] = cloneableTags[weakMapTag] = false;
      var deburredLetters = {
        "\xC0": "A",
        "\xC1": "A",
        "\xC2": "A",
        "\xC3": "A",
        "\xC4": "A",
        "\xC5": "A",
        "\xE0": "a",
        "\xE1": "a",
        "\xE2": "a",
        "\xE3": "a",
        "\xE4": "a",
        "\xE5": "a",
        "\xC7": "C",
        "\xE7": "c",
        "\xD0": "D",
        "\xF0": "d",
        "\xC8": "E",
        "\xC9": "E",
        "\xCA": "E",
        "\xCB": "E",
        "\xE8": "e",
        "\xE9": "e",
        "\xEA": "e",
        "\xEB": "e",
        "\xCC": "I",
        "\xCD": "I",
        "\xCE": "I",
        "\xCF": "I",
        "\xEC": "i",
        "\xED": "i",
        "\xEE": "i",
        "\xEF": "i",
        "\xD1": "N",
        "\xF1": "n",
        "\xD2": "O",
        "\xD3": "O",
        "\xD4": "O",
        "\xD5": "O",
        "\xD6": "O",
        "\xD8": "O",
        "\xF2": "o",
        "\xF3": "o",
        "\xF4": "o",
        "\xF5": "o",
        "\xF6": "o",
        "\xF8": "o",
        "\xD9": "U",
        "\xDA": "U",
        "\xDB": "U",
        "\xDC": "U",
        "\xF9": "u",
        "\xFA": "u",
        "\xFB": "u",
        "\xFC": "u",
        "\xDD": "Y",
        "\xFD": "y",
        "\xFF": "y",
        "\xC6": "Ae",
        "\xE6": "ae",
        "\xDE": "Th",
        "\xFE": "th",
        "\xDF": "ss",
        "\u0100": "A",
        "\u0102": "A",
        "\u0104": "A",
        "\u0101": "a",
        "\u0103": "a",
        "\u0105": "a",
        "\u0106": "C",
        "\u0108": "C",
        "\u010A": "C",
        "\u010C": "C",
        "\u0107": "c",
        "\u0109": "c",
        "\u010B": "c",
        "\u010D": "c",
        "\u010E": "D",
        "\u0110": "D",
        "\u010F": "d",
        "\u0111": "d",
        "\u0112": "E",
        "\u0114": "E",
        "\u0116": "E",
        "\u0118": "E",
        "\u011A": "E",
        "\u0113": "e",
        "\u0115": "e",
        "\u0117": "e",
        "\u0119": "e",
        "\u011B": "e",
        "\u011C": "G",
        "\u011E": "G",
        "\u0120": "G",
        "\u0122": "G",
        "\u011D": "g",
        "\u011F": "g",
        "\u0121": "g",
        "\u0123": "g",
        "\u0124": "H",
        "\u0126": "H",
        "\u0125": "h",
        "\u0127": "h",
        "\u0128": "I",
        "\u012A": "I",
        "\u012C": "I",
        "\u012E": "I",
        "\u0130": "I",
        "\u0129": "i",
        "\u012B": "i",
        "\u012D": "i",
        "\u012F": "i",
        "\u0131": "i",
        "\u0134": "J",
        "\u0135": "j",
        "\u0136": "K",
        "\u0137": "k",
        "\u0138": "k",
        "\u0139": "L",
        "\u013B": "L",
        "\u013D": "L",
        "\u013F": "L",
        "\u0141": "L",
        "\u013A": "l",
        "\u013C": "l",
        "\u013E": "l",
        "\u0140": "l",
        "\u0142": "l",
        "\u0143": "N",
        "\u0145": "N",
        "\u0147": "N",
        "\u014A": "N",
        "\u0144": "n",
        "\u0146": "n",
        "\u0148": "n",
        "\u014B": "n",
        "\u014C": "O",
        "\u014E": "O",
        "\u0150": "O",
        "\u014D": "o",
        "\u014F": "o",
        "\u0151": "o",
        "\u0154": "R",
        "\u0156": "R",
        "\u0158": "R",
        "\u0155": "r",
        "\u0157": "r",
        "\u0159": "r",
        "\u015A": "S",
        "\u015C": "S",
        "\u015E": "S",
        "\u0160": "S",
        "\u015B": "s",
        "\u015D": "s",
        "\u015F": "s",
        "\u0161": "s",
        "\u0162": "T",
        "\u0164": "T",
        "\u0166": "T",
        "\u0163": "t",
        "\u0165": "t",
        "\u0167": "t",
        "\u0168": "U",
        "\u016A": "U",
        "\u016C": "U",
        "\u016E": "U",
        "\u0170": "U",
        "\u0172": "U",
        "\u0169": "u",
        "\u016B": "u",
        "\u016D": "u",
        "\u016F": "u",
        "\u0171": "u",
        "\u0173": "u",
        "\u0174": "W",
        "\u0175": "w",
        "\u0176": "Y",
        "\u0177": "y",
        "\u0178": "Y",
        "\u0179": "Z",
        "\u017B": "Z",
        "\u017D": "Z",
        "\u017A": "z",
        "\u017C": "z",
        "\u017E": "z",
        "\u0132": "IJ",
        "\u0133": "ij",
        "\u0152": "Oe",
        "\u0153": "oe",
        "\u0149": "'n",
        "\u017F": "s"
      };
      var htmlEscapes = {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#39;"
      };
      var htmlUnescapes = {
        "&amp;": "&",
        "&lt;": "<",
        "&gt;": ">",
        "&quot;": '"',
        "&#39;": "'"
      };
      var stringEscapes = {
        "\\": "\\",
        "'": "'",
        "\n": "n",
        "\r": "r",
        "\u2028": "u2028",
        "\u2029": "u2029"
      };
      var freeParseFloat = parseFloat, freeParseInt = parseInt;
      var freeGlobal2 = typeof commonjsGlobal == "object" && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;
      var freeSelf2 = typeof self == "object" && self && self.Object === Object && self;
      var root2 = freeGlobal2 || freeSelf2 || Function("return this")();
      var freeExports = exports && !exports.nodeType && exports;
      var freeModule = freeExports && true && module && !module.nodeType && module;
      var moduleExports = freeModule && freeModule.exports === freeExports;
      var freeProcess = moduleExports && freeGlobal2.process;
      var nodeUtil = function() {
        try {
          var types = freeModule && freeModule.require && freeModule.require("util").types;
          if (types) {
            return types;
          }
          return freeProcess && freeProcess.binding && freeProcess.binding("util");
        } catch (e) {
        }
      }();
      var nodeIsArrayBuffer = nodeUtil && nodeUtil.isArrayBuffer, nodeIsDate = nodeUtil && nodeUtil.isDate, nodeIsMap = nodeUtil && nodeUtil.isMap, nodeIsRegExp = nodeUtil && nodeUtil.isRegExp, nodeIsSet = nodeUtil && nodeUtil.isSet, nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;
      function apply(func, thisArg, args) {
        switch (args.length) {
          case 0:
            return func.call(thisArg);
          case 1:
            return func.call(thisArg, args[0]);
          case 2:
            return func.call(thisArg, args[0], args[1]);
          case 3:
            return func.call(thisArg, args[0], args[1], args[2]);
        }
        return func.apply(thisArg, args);
      }
      function arrayAggregator(array, setter, iteratee, accumulator) {
        var index2 = -1, length = array == null ? 0 : array.length;
        while (++index2 < length) {
          var value = array[index2];
          setter(accumulator, value, iteratee(value), array);
        }
        return accumulator;
      }
      function arrayEach(array, iteratee) {
        var index2 = -1, length = array == null ? 0 : array.length;
        while (++index2 < length) {
          if (iteratee(array[index2], index2, array) === false) {
            break;
          }
        }
        return array;
      }
      function arrayEachRight(array, iteratee) {
        var length = array == null ? 0 : array.length;
        while (length--) {
          if (iteratee(array[length], length, array) === false) {
            break;
          }
        }
        return array;
      }
      function arrayEvery(array, predicate) {
        var index2 = -1, length = array == null ? 0 : array.length;
        while (++index2 < length) {
          if (!predicate(array[index2], index2, array)) {
            return false;
          }
        }
        return true;
      }
      function arrayFilter(array, predicate) {
        var index2 = -1, length = array == null ? 0 : array.length, resIndex = 0, result = [];
        while (++index2 < length) {
          var value = array[index2];
          if (predicate(value, index2, array)) {
            result[resIndex++] = value;
          }
        }
        return result;
      }
      function arrayIncludes(array, value) {
        var length = array == null ? 0 : array.length;
        return !!length && baseIndexOf(array, value, 0) > -1;
      }
      function arrayIncludesWith(array, value, comparator) {
        var index2 = -1, length = array == null ? 0 : array.length;
        while (++index2 < length) {
          if (comparator(value, array[index2])) {
            return true;
          }
        }
        return false;
      }
      function arrayMap2(array, iteratee) {
        var index2 = -1, length = array == null ? 0 : array.length, result = Array(length);
        while (++index2 < length) {
          result[index2] = iteratee(array[index2], index2, array);
        }
        return result;
      }
      function arrayPush(array, values) {
        var index2 = -1, length = values.length, offset = array.length;
        while (++index2 < length) {
          array[offset + index2] = values[index2];
        }
        return array;
      }
      function arrayReduce(array, iteratee, accumulator, initAccum) {
        var index2 = -1, length = array == null ? 0 : array.length;
        if (initAccum && length) {
          accumulator = array[++index2];
        }
        while (++index2 < length) {
          accumulator = iteratee(accumulator, array[index2], index2, array);
        }
        return accumulator;
      }
      function arrayReduceRight(array, iteratee, accumulator, initAccum) {
        var length = array == null ? 0 : array.length;
        if (initAccum && length) {
          accumulator = array[--length];
        }
        while (length--) {
          accumulator = iteratee(accumulator, array[length], length, array);
        }
        return accumulator;
      }
      function arraySome(array, predicate) {
        var index2 = -1, length = array == null ? 0 : array.length;
        while (++index2 < length) {
          if (predicate(array[index2], index2, array)) {
            return true;
          }
        }
        return false;
      }
      var asciiSize = baseProperty("length");
      function asciiToArray(string) {
        return string.split("");
      }
      function asciiWords(string) {
        return string.match(reAsciiWord) || [];
      }
      function baseFindKey(collection, predicate, eachFunc) {
        var result;
        eachFunc(collection, function(value, key, collection2) {
          if (predicate(value, key, collection2)) {
            result = key;
            return false;
          }
        });
        return result;
      }
      function baseFindIndex(array, predicate, fromIndex, fromRight) {
        var length = array.length, index2 = fromIndex + (fromRight ? 1 : -1);
        while (fromRight ? index2-- : ++index2 < length) {
          if (predicate(array[index2], index2, array)) {
            return index2;
          }
        }
        return -1;
      }
      function baseIndexOf(array, value, fromIndex) {
        return value === value ? strictIndexOf(array, value, fromIndex) : baseFindIndex(array, baseIsNaN, fromIndex);
      }
      function baseIndexOfWith(array, value, fromIndex, comparator) {
        var index2 = fromIndex - 1, length = array.length;
        while (++index2 < length) {
          if (comparator(array[index2], value)) {
            return index2;
          }
        }
        return -1;
      }
      function baseIsNaN(value) {
        return value !== value;
      }
      function baseMean(array, iteratee) {
        var length = array == null ? 0 : array.length;
        return length ? baseSum(array, iteratee) / length : NAN;
      }
      function baseProperty(key) {
        return function(object) {
          return object == null ? undefined$1 : object[key];
        };
      }
      function basePropertyOf(object) {
        return function(key) {
          return object == null ? undefined$1 : object[key];
        };
      }
      function baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {
        eachFunc(collection, function(value, index2, collection2) {
          accumulator = initAccum ? (initAccum = false, value) : iteratee(accumulator, value, index2, collection2);
        });
        return accumulator;
      }
      function baseSortBy(array, comparer) {
        var length = array.length;
        array.sort(comparer);
        while (length--) {
          array[length] = array[length].value;
        }
        return array;
      }
      function baseSum(array, iteratee) {
        var result, index2 = -1, length = array.length;
        while (++index2 < length) {
          var current = iteratee(array[index2]);
          if (current !== undefined$1) {
            result = result === undefined$1 ? current : result + current;
          }
        }
        return result;
      }
      function baseTimes(n2, iteratee) {
        var index2 = -1, result = Array(n2);
        while (++index2 < n2) {
          result[index2] = iteratee(index2);
        }
        return result;
      }
      function baseToPairs(object, props) {
        return arrayMap2(props, function(key) {
          return [key, object[key]];
        });
      }
      function baseTrim(string) {
        return string ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, "") : string;
      }
      function baseUnary(func) {
        return function(value) {
          return func(value);
        };
      }
      function baseValues(object, props) {
        return arrayMap2(props, function(key) {
          return object[key];
        });
      }
      function cacheHas(cache, key) {
        return cache.has(key);
      }
      function charsStartIndex(strSymbols, chrSymbols) {
        var index2 = -1, length = strSymbols.length;
        while (++index2 < length && baseIndexOf(chrSymbols, strSymbols[index2], 0) > -1) {
        }
        return index2;
      }
      function charsEndIndex(strSymbols, chrSymbols) {
        var index2 = strSymbols.length;
        while (index2-- && baseIndexOf(chrSymbols, strSymbols[index2], 0) > -1) {
        }
        return index2;
      }
      function countHolders(array, placeholder) {
        var length = array.length, result = 0;
        while (length--) {
          if (array[length] === placeholder) {
            ++result;
          }
        }
        return result;
      }
      var deburrLetter = basePropertyOf(deburredLetters);
      var escapeHtmlChar = basePropertyOf(htmlEscapes);
      function escapeStringChar(chr) {
        return "\\" + stringEscapes[chr];
      }
      function getValue2(object, key) {
        return object == null ? undefined$1 : object[key];
      }
      function hasUnicode(string) {
        return reHasUnicode.test(string);
      }
      function hasUnicodeWord(string) {
        return reHasUnicodeWord.test(string);
      }
      function iteratorToArray(iterator) {
        var data, result = [];
        while (!(data = iterator.next()).done) {
          result.push(data.value);
        }
        return result;
      }
      function mapToArray(map) {
        var index2 = -1, result = Array(map.size);
        map.forEach(function(value, key) {
          result[++index2] = [key, value];
        });
        return result;
      }
      function overArg(func, transform) {
        return function(arg) {
          return func(transform(arg));
        };
      }
      function replaceHolders(array, placeholder) {
        var index2 = -1, length = array.length, resIndex = 0, result = [];
        while (++index2 < length) {
          var value = array[index2];
          if (value === placeholder || value === PLACEHOLDER) {
            array[index2] = PLACEHOLDER;
            result[resIndex++] = index2;
          }
        }
        return result;
      }
      function setToArray(set2) {
        var index2 = -1, result = Array(set2.size);
        set2.forEach(function(value) {
          result[++index2] = value;
        });
        return result;
      }
      function setToPairs(set2) {
        var index2 = -1, result = Array(set2.size);
        set2.forEach(function(value) {
          result[++index2] = [value, value];
        });
        return result;
      }
      function strictIndexOf(array, value, fromIndex) {
        var index2 = fromIndex - 1, length = array.length;
        while (++index2 < length) {
          if (array[index2] === value) {
            return index2;
          }
        }
        return -1;
      }
      function strictLastIndexOf(array, value, fromIndex) {
        var index2 = fromIndex + 1;
        while (index2--) {
          if (array[index2] === value) {
            return index2;
          }
        }
        return index2;
      }
      function stringSize(string) {
        return hasUnicode(string) ? unicodeSize(string) : asciiSize(string);
      }
      function stringToArray(string) {
        return hasUnicode(string) ? unicodeToArray(string) : asciiToArray(string);
      }
      function trimmedEndIndex(string) {
        var index2 = string.length;
        while (index2-- && reWhitespace.test(string.charAt(index2))) {
        }
        return index2;
      }
      var unescapeHtmlChar = basePropertyOf(htmlUnescapes);
      function unicodeSize(string) {
        var result = reUnicode.lastIndex = 0;
        while (reUnicode.test(string)) {
          ++result;
        }
        return result;
      }
      function unicodeToArray(string) {
        return string.match(reUnicode) || [];
      }
      function unicodeWords(string) {
        return string.match(reUnicodeWord) || [];
      }
      var runInContext = function runInContext2(context) {
        context = context == null ? root2 : _.defaults(root2.Object(), context, _.pick(root2, contextProps));
        var Array2 = context.Array, Date2 = context.Date, Error2 = context.Error, Function2 = context.Function, Math2 = context.Math, Object2 = context.Object, RegExp2 = context.RegExp, String2 = context.String, TypeError2 = context.TypeError;
        var arrayProto2 = Array2.prototype, funcProto2 = Function2.prototype, objectProto2 = Object2.prototype;
        var coreJsData2 = context["__core-js_shared__"];
        var funcToString2 = funcProto2.toString;
        var hasOwnProperty2 = objectProto2.hasOwnProperty;
        var idCounter = 0;
        var maskSrcKey2 = function() {
          var uid = /[^.]+$/.exec(coreJsData2 && coreJsData2.keys && coreJsData2.keys.IE_PROTO || "");
          return uid ? "Symbol(src)_1." + uid : "";
        }();
        var nativeObjectToString2 = objectProto2.toString;
        var objectCtorString = funcToString2.call(Object2);
        var oldDash = root2._;
        var reIsNative2 = RegExp2(
          "^" + funcToString2.call(hasOwnProperty2).replace(reRegExpChar2, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
        );
        var Buffer2 = moduleExports ? context.Buffer : undefined$1, Symbol2 = context.Symbol, Uint8Array2 = context.Uint8Array, allocUnsafe = Buffer2 ? Buffer2.allocUnsafe : undefined$1, getPrototype = overArg(Object2.getPrototypeOf, Object2), objectCreate = Object2.create, propertyIsEnumerable = objectProto2.propertyIsEnumerable, splice2 = arrayProto2.splice, spreadableSymbol = Symbol2 ? Symbol2.isConcatSpreadable : undefined$1, symIterator = Symbol2 ? Symbol2.iterator : undefined$1, symToStringTag2 = Symbol2 ? Symbol2.toStringTag : undefined$1;
        var defineProperty2 = function() {
          try {
            var func = getNative2(Object2, "defineProperty");
            func({}, "", {});
            return func;
          } catch (e) {
          }
        }();
        var ctxClearTimeout = context.clearTimeout !== root2.clearTimeout && context.clearTimeout, ctxNow = Date2 && Date2.now !== root2.Date.now && Date2.now, ctxSetTimeout = context.setTimeout !== root2.setTimeout && context.setTimeout;
        var nativeCeil = Math2.ceil, nativeFloor = Math2.floor, nativeGetSymbols = Object2.getOwnPropertySymbols, nativeIsBuffer = Buffer2 ? Buffer2.isBuffer : undefined$1, nativeIsFinite = context.isFinite, nativeJoin = arrayProto2.join, nativeKeys = overArg(Object2.keys, Object2), nativeMax = Math2.max, nativeMin = Math2.min, nativeNow = Date2.now, nativeParseInt = context.parseInt, nativeRandom = Math2.random, nativeReverse = arrayProto2.reverse;
        var DataView = getNative2(context, "DataView"), Map2 = getNative2(context, "Map"), Promise2 = getNative2(context, "Promise"), Set2 = getNative2(context, "Set"), WeakMap2 = getNative2(context, "WeakMap"), nativeCreate2 = getNative2(Object2, "create");
        var metaMap = WeakMap2 && new WeakMap2();
        var realNames = {};
        var dataViewCtorString = toSource2(DataView), mapCtorString = toSource2(Map2), promiseCtorString = toSource2(Promise2), setCtorString = toSource2(Set2), weakMapCtorString = toSource2(WeakMap2);
        var symbolProto2 = Symbol2 ? Symbol2.prototype : undefined$1, symbolValueOf = symbolProto2 ? symbolProto2.valueOf : undefined$1, symbolToString2 = symbolProto2 ? symbolProto2.toString : undefined$1;
        function lodash2(value) {
          if (isObjectLike2(value) && !isArray2(value) && !(value instanceof LazyWrapper)) {
            if (value instanceof LodashWrapper) {
              return value;
            }
            if (hasOwnProperty2.call(value, "__wrapped__")) {
              return wrapperClone(value);
            }
          }
          return new LodashWrapper(value);
        }
        var baseCreate = function() {
          function object() {
          }
          return function(proto) {
            if (!isObject2(proto)) {
              return {};
            }
            if (objectCreate) {
              return objectCreate(proto);
            }
            object.prototype = proto;
            var result2 = new object();
            object.prototype = undefined$1;
            return result2;
          };
        }();
        function baseLodash() {
        }
        function LodashWrapper(value, chainAll) {
          this.__wrapped__ = value;
          this.__actions__ = [];
          this.__chain__ = !!chainAll;
          this.__index__ = 0;
          this.__values__ = undefined$1;
        }
        lodash2.templateSettings = {
          "escape": reEscape,
          "evaluate": reEvaluate,
          "interpolate": reInterpolate,
          "variable": "",
          "imports": {
            "_": lodash2
          }
        };
        lodash2.prototype = baseLodash.prototype;
        lodash2.prototype.constructor = lodash2;
        LodashWrapper.prototype = baseCreate(baseLodash.prototype);
        LodashWrapper.prototype.constructor = LodashWrapper;
        function LazyWrapper(value) {
          this.__wrapped__ = value;
          this.__actions__ = [];
          this.__dir__ = 1;
          this.__filtered__ = false;
          this.__iteratees__ = [];
          this.__takeCount__ = MAX_ARRAY_LENGTH;
          this.__views__ = [];
        }
        function lazyClone() {
          var result2 = new LazyWrapper(this.__wrapped__);
          result2.__actions__ = copyArray(this.__actions__);
          result2.__dir__ = this.__dir__;
          result2.__filtered__ = this.__filtered__;
          result2.__iteratees__ = copyArray(this.__iteratees__);
          result2.__takeCount__ = this.__takeCount__;
          result2.__views__ = copyArray(this.__views__);
          return result2;
        }
        function lazyReverse() {
          if (this.__filtered__) {
            var result2 = new LazyWrapper(this);
            result2.__dir__ = -1;
            result2.__filtered__ = true;
          } else {
            result2 = this.clone();
            result2.__dir__ *= -1;
          }
          return result2;
        }
        function lazyValue() {
          var array = this.__wrapped__.value(), dir = this.__dir__, isArr = isArray2(array), isRight = dir < 0, arrLength = isArr ? array.length : 0, view = getView(0, arrLength, this.__views__), start = view.start, end = view.end, length = end - start, index2 = isRight ? end : start - 1, iteratees = this.__iteratees__, iterLength = iteratees.length, resIndex = 0, takeCount = nativeMin(length, this.__takeCount__);
          if (!isArr || !isRight && arrLength == length && takeCount == length) {
            return baseWrapperValue(array, this.__actions__);
          }
          var result2 = [];
          outer:
            while (length-- && resIndex < takeCount) {
              index2 += dir;
              var iterIndex = -1, value = array[index2];
              while (++iterIndex < iterLength) {
                var data = iteratees[iterIndex], iteratee2 = data.iteratee, type = data.type, computed = iteratee2(value);
                if (type == LAZY_MAP_FLAG) {
                  value = computed;
                } else if (!computed) {
                  if (type == LAZY_FILTER_FLAG) {
                    continue outer;
                  } else {
                    break outer;
                  }
                }
              }
              result2[resIndex++] = value;
            }
          return result2;
        }
        LazyWrapper.prototype = baseCreate(baseLodash.prototype);
        LazyWrapper.prototype.constructor = LazyWrapper;
        function Hash2(entries) {
          var index2 = -1, length = entries == null ? 0 : entries.length;
          this.clear();
          while (++index2 < length) {
            var entry = entries[index2];
            this.set(entry[0], entry[1]);
          }
        }
        function hashClear2() {
          this.__data__ = nativeCreate2 ? nativeCreate2(null) : {};
          this.size = 0;
        }
        function hashDelete2(key) {
          var result2 = this.has(key) && delete this.__data__[key];
          this.size -= result2 ? 1 : 0;
          return result2;
        }
        function hashGet2(key) {
          var data = this.__data__;
          if (nativeCreate2) {
            var result2 = data[key];
            return result2 === HASH_UNDEFINED2 ? undefined$1 : result2;
          }
          return hasOwnProperty2.call(data, key) ? data[key] : undefined$1;
        }
        function hashHas2(key) {
          var data = this.__data__;
          return nativeCreate2 ? data[key] !== undefined$1 : hasOwnProperty2.call(data, key);
        }
        function hashSet2(key, value) {
          var data = this.__data__;
          this.size += this.has(key) ? 0 : 1;
          data[key] = nativeCreate2 && value === undefined$1 ? HASH_UNDEFINED2 : value;
          return this;
        }
        Hash2.prototype.clear = hashClear2;
        Hash2.prototype["delete"] = hashDelete2;
        Hash2.prototype.get = hashGet2;
        Hash2.prototype.has = hashHas2;
        Hash2.prototype.set = hashSet2;
        function ListCache2(entries) {
          var index2 = -1, length = entries == null ? 0 : entries.length;
          this.clear();
          while (++index2 < length) {
            var entry = entries[index2];
            this.set(entry[0], entry[1]);
          }
        }
        function listCacheClear2() {
          this.__data__ = [];
          this.size = 0;
        }
        function listCacheDelete2(key) {
          var data = this.__data__, index2 = assocIndexOf2(data, key);
          if (index2 < 0) {
            return false;
          }
          var lastIndex = data.length - 1;
          if (index2 == lastIndex) {
            data.pop();
          } else {
            splice2.call(data, index2, 1);
          }
          --this.size;
          return true;
        }
        function listCacheGet2(key) {
          var data = this.__data__, index2 = assocIndexOf2(data, key);
          return index2 < 0 ? undefined$1 : data[index2][1];
        }
        function listCacheHas2(key) {
          return assocIndexOf2(this.__data__, key) > -1;
        }
        function listCacheSet2(key, value) {
          var data = this.__data__, index2 = assocIndexOf2(data, key);
          if (index2 < 0) {
            ++this.size;
            data.push([key, value]);
          } else {
            data[index2][1] = value;
          }
          return this;
        }
        ListCache2.prototype.clear = listCacheClear2;
        ListCache2.prototype["delete"] = listCacheDelete2;
        ListCache2.prototype.get = listCacheGet2;
        ListCache2.prototype.has = listCacheHas2;
        ListCache2.prototype.set = listCacheSet2;
        function MapCache2(entries) {
          var index2 = -1, length = entries == null ? 0 : entries.length;
          this.clear();
          while (++index2 < length) {
            var entry = entries[index2];
            this.set(entry[0], entry[1]);
          }
        }
        function mapCacheClear2() {
          this.size = 0;
          this.__data__ = {
            "hash": new Hash2(),
            "map": new (Map2 || ListCache2)(),
            "string": new Hash2()
          };
        }
        function mapCacheDelete2(key) {
          var result2 = getMapData2(this, key)["delete"](key);
          this.size -= result2 ? 1 : 0;
          return result2;
        }
        function mapCacheGet2(key) {
          return getMapData2(this, key).get(key);
        }
        function mapCacheHas2(key) {
          return getMapData2(this, key).has(key);
        }
        function mapCacheSet2(key, value) {
          var data = getMapData2(this, key), size2 = data.size;
          data.set(key, value);
          this.size += data.size == size2 ? 0 : 1;
          return this;
        }
        MapCache2.prototype.clear = mapCacheClear2;
        MapCache2.prototype["delete"] = mapCacheDelete2;
        MapCache2.prototype.get = mapCacheGet2;
        MapCache2.prototype.has = mapCacheHas2;
        MapCache2.prototype.set = mapCacheSet2;
        function SetCache(values2) {
          var index2 = -1, length = values2 == null ? 0 : values2.length;
          this.__data__ = new MapCache2();
          while (++index2 < length) {
            this.add(values2[index2]);
          }
        }
        function setCacheAdd(value) {
          this.__data__.set(value, HASH_UNDEFINED2);
          return this;
        }
        function setCacheHas(value) {
          return this.__data__.has(value);
        }
        SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;
        SetCache.prototype.has = setCacheHas;
        function Stack(entries) {
          var data = this.__data__ = new ListCache2(entries);
          this.size = data.size;
        }
        function stackClear() {
          this.__data__ = new ListCache2();
          this.size = 0;
        }
        function stackDelete(key) {
          var data = this.__data__, result2 = data["delete"](key);
          this.size = data.size;
          return result2;
        }
        function stackGet(key) {
          return this.__data__.get(key);
        }
        function stackHas(key) {
          return this.__data__.has(key);
        }
        function stackSet(key, value) {
          var data = this.__data__;
          if (data instanceof ListCache2) {
            var pairs = data.__data__;
            if (!Map2 || pairs.length < LARGE_ARRAY_SIZE - 1) {
              pairs.push([key, value]);
              this.size = ++data.size;
              return this;
            }
            data = this.__data__ = new MapCache2(pairs);
          }
          data.set(key, value);
          this.size = data.size;
          return this;
        }
        Stack.prototype.clear = stackClear;
        Stack.prototype["delete"] = stackDelete;
        Stack.prototype.get = stackGet;
        Stack.prototype.has = stackHas;
        Stack.prototype.set = stackSet;
        function arrayLikeKeys(value, inherited) {
          var isArr = isArray2(value), isArg = !isArr && isArguments(value), isBuff = !isArr && !isArg && isBuffer(value), isType = !isArr && !isArg && !isBuff && isTypedArray(value), skipIndexes = isArr || isArg || isBuff || isType, result2 = skipIndexes ? baseTimes(value.length, String2) : [], length = result2.length;
          for (var key in value) {
            if ((inherited || hasOwnProperty2.call(value, key)) && !(skipIndexes && (key == "length" || isBuff && (key == "offset" || key == "parent") || isType && (key == "buffer" || key == "byteLength" || key == "byteOffset") || isIndex2(key, length)))) {
              result2.push(key);
            }
          }
          return result2;
        }
        function arraySample(array) {
          var length = array.length;
          return length ? array[baseRandom(0, length - 1)] : undefined$1;
        }
        function arraySampleSize(array, n2) {
          return shuffleSelf(copyArray(array), baseClamp(n2, 0, array.length));
        }
        function arrayShuffle(array) {
          return shuffleSelf(copyArray(array));
        }
        function assignMergeValue(object, key, value) {
          if (value !== undefined$1 && !eq2(object[key], value) || value === undefined$1 && !(key in object)) {
            baseAssignValue2(object, key, value);
          }
        }
        function assignValue2(object, key, value) {
          var objValue = object[key];
          if (!(hasOwnProperty2.call(object, key) && eq2(objValue, value)) || value === undefined$1 && !(key in object)) {
            baseAssignValue2(object, key, value);
          }
        }
        function assocIndexOf2(array, key) {
          var length = array.length;
          while (length--) {
            if (eq2(array[length][0], key)) {
              return length;
            }
          }
          return -1;
        }
        function baseAggregator(collection, setter, iteratee2, accumulator) {
          baseEach(collection, function(value, key, collection2) {
            setter(accumulator, value, iteratee2(value), collection2);
          });
          return accumulator;
        }
        function baseAssign(object, source) {
          return object && copyObject(source, keys(source), object);
        }
        function baseAssignIn(object, source) {
          return object && copyObject(source, keysIn(source), object);
        }
        function baseAssignValue2(object, key, value) {
          if (key == "__proto__" && defineProperty2) {
            defineProperty2(object, key, {
              "configurable": true,
              "enumerable": true,
              "value": value,
              "writable": true
            });
          } else {
            object[key] = value;
          }
        }
        function baseAt(object, paths) {
          var index2 = -1, length = paths.length, result2 = Array2(length), skip = object == null;
          while (++index2 < length) {
            result2[index2] = skip ? undefined$1 : get(object, paths[index2]);
          }
          return result2;
        }
        function baseClamp(number, lower, upper) {
          if (number === number) {
            if (upper !== undefined$1) {
              number = number <= upper ? number : upper;
            }
            if (lower !== undefined$1) {
              number = number >= lower ? number : lower;
            }
          }
          return number;
        }
        function baseClone(value, bitmask, customizer, key, object, stack) {
          var result2, isDeep = bitmask & CLONE_DEEP_FLAG, isFlat = bitmask & CLONE_FLAT_FLAG, isFull = bitmask & CLONE_SYMBOLS_FLAG;
          if (customizer) {
            result2 = object ? customizer(value, key, object, stack) : customizer(value);
          }
          if (result2 !== undefined$1) {
            return result2;
          }
          if (!isObject2(value)) {
            return value;
          }
          var isArr = isArray2(value);
          if (isArr) {
            result2 = initCloneArray(value);
            if (!isDeep) {
              return copyArray(value, result2);
            }
          } else {
            var tag = getTag(value), isFunc = tag == funcTag2 || tag == genTag2;
            if (isBuffer(value)) {
              return cloneBuffer(value, isDeep);
            }
            if (tag == objectTag || tag == argsTag || isFunc && !object) {
              result2 = isFlat || isFunc ? {} : initCloneObject(value);
              if (!isDeep) {
                return isFlat ? copySymbolsIn(value, baseAssignIn(result2, value)) : copySymbols(value, baseAssign(result2, value));
              }
            } else {
              if (!cloneableTags[tag]) {
                return object ? value : {};
              }
              result2 = initCloneByTag(value, tag, isDeep);
            }
          }
          stack || (stack = new Stack());
          var stacked = stack.get(value);
          if (stacked) {
            return stacked;
          }
          stack.set(value, result2);
          if (isSet(value)) {
            value.forEach(function(subValue) {
              result2.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));
            });
          } else if (isMap(value)) {
            value.forEach(function(subValue, key2) {
              result2.set(key2, baseClone(subValue, bitmask, customizer, key2, value, stack));
            });
          }
          var keysFunc = isFull ? isFlat ? getAllKeysIn : getAllKeys : isFlat ? keysIn : keys;
          var props = isArr ? undefined$1 : keysFunc(value);
          arrayEach(props || value, function(subValue, key2) {
            if (props) {
              key2 = subValue;
              subValue = value[key2];
            }
            assignValue2(result2, key2, baseClone(subValue, bitmask, customizer, key2, value, stack));
          });
          return result2;
        }
        function baseConforms(source) {
          var props = keys(source);
          return function(object) {
            return baseConformsTo(object, source, props);
          };
        }
        function baseConformsTo(object, source, props) {
          var length = props.length;
          if (object == null) {
            return !length;
          }
          object = Object2(object);
          while (length--) {
            var key = props[length], predicate = source[key], value = object[key];
            if (value === undefined$1 && !(key in object) || !predicate(value)) {
              return false;
            }
          }
          return true;
        }
        function baseDelay(func, wait, args) {
          if (typeof func != "function") {
            throw new TypeError2(FUNC_ERROR_TEXT2);
          }
          return setTimeout2(function() {
            func.apply(undefined$1, args);
          }, wait);
        }
        function baseDifference(array, values2, iteratee2, comparator) {
          var index2 = -1, includes2 = arrayIncludes, isCommon = true, length = array.length, result2 = [], valuesLength = values2.length;
          if (!length) {
            return result2;
          }
          if (iteratee2) {
            values2 = arrayMap2(values2, baseUnary(iteratee2));
          }
          if (comparator) {
            includes2 = arrayIncludesWith;
            isCommon = false;
          } else if (values2.length >= LARGE_ARRAY_SIZE) {
            includes2 = cacheHas;
            isCommon = false;
            values2 = new SetCache(values2);
          }
          outer:
            while (++index2 < length) {
              var value = array[index2], computed = iteratee2 == null ? value : iteratee2(value);
              value = comparator || value !== 0 ? value : 0;
              if (isCommon && computed === computed) {
                var valuesIndex = valuesLength;
                while (valuesIndex--) {
                  if (values2[valuesIndex] === computed) {
                    continue outer;
                  }
                }
                result2.push(value);
              } else if (!includes2(values2, computed, comparator)) {
                result2.push(value);
              }
            }
          return result2;
        }
        var baseEach = createBaseEach(baseForOwn);
        var baseEachRight = createBaseEach(baseForOwnRight, true);
        function baseEvery(collection, predicate) {
          var result2 = true;
          baseEach(collection, function(value, index2, collection2) {
            result2 = !!predicate(value, index2, collection2);
            return result2;
          });
          return result2;
        }
        function baseExtremum(array, iteratee2, comparator) {
          var index2 = -1, length = array.length;
          while (++index2 < length) {
            var value = array[index2], current = iteratee2(value);
            if (current != null && (computed === undefined$1 ? current === current && !isSymbol2(current) : comparator(current, computed))) {
              var computed = current, result2 = value;
            }
          }
          return result2;
        }
        function baseFill(array, value, start, end) {
          var length = array.length;
          start = toInteger(start);
          if (start < 0) {
            start = -start > length ? 0 : length + start;
          }
          end = end === undefined$1 || end > length ? length : toInteger(end);
          if (end < 0) {
            end += length;
          }
          end = start > end ? 0 : toLength(end);
          while (start < end) {
            array[start++] = value;
          }
          return array;
        }
        function baseFilter(collection, predicate) {
          var result2 = [];
          baseEach(collection, function(value, index2, collection2) {
            if (predicate(value, index2, collection2)) {
              result2.push(value);
            }
          });
          return result2;
        }
        function baseFlatten(array, depth, predicate, isStrict, result2) {
          var index2 = -1, length = array.length;
          predicate || (predicate = isFlattenable);
          result2 || (result2 = []);
          while (++index2 < length) {
            var value = array[index2];
            if (depth > 0 && predicate(value)) {
              if (depth > 1) {
                baseFlatten(value, depth - 1, predicate, isStrict, result2);
              } else {
                arrayPush(result2, value);
              }
            } else if (!isStrict) {
              result2[result2.length] = value;
            }
          }
          return result2;
        }
        var baseFor = createBaseFor();
        var baseForRight = createBaseFor(true);
        function baseForOwn(object, iteratee2) {
          return object && baseFor(object, iteratee2, keys);
        }
        function baseForOwnRight(object, iteratee2) {
          return object && baseForRight(object, iteratee2, keys);
        }
        function baseFunctions(object, props) {
          return arrayFilter(props, function(key) {
            return isFunction2(object[key]);
          });
        }
        function baseGet(object, path) {
          path = castPath2(path, object);
          var index2 = 0, length = path.length;
          while (object != null && index2 < length) {
            object = object[toKey2(path[index2++])];
          }
          return index2 && index2 == length ? object : undefined$1;
        }
        function baseGetAllKeys(object, keysFunc, symbolsFunc) {
          var result2 = keysFunc(object);
          return isArray2(object) ? result2 : arrayPush(result2, symbolsFunc(object));
        }
        function baseGetTag2(value) {
          if (value == null) {
            return value === undefined$1 ? undefinedTag2 : nullTag2;
          }
          return symToStringTag2 && symToStringTag2 in Object2(value) ? getRawTag2(value) : objectToString2(value);
        }
        function baseGt(value, other) {
          return value > other;
        }
        function baseHas(object, key) {
          return object != null && hasOwnProperty2.call(object, key);
        }
        function baseHasIn(object, key) {
          return object != null && key in Object2(object);
        }
        function baseInRange(number, start, end) {
          return number >= nativeMin(start, end) && number < nativeMax(start, end);
        }
        function baseIntersection(arrays, iteratee2, comparator) {
          var includes2 = comparator ? arrayIncludesWith : arrayIncludes, length = arrays[0].length, othLength = arrays.length, othIndex = othLength, caches = Array2(othLength), maxLength = Infinity, result2 = [];
          while (othIndex--) {
            var array = arrays[othIndex];
            if (othIndex && iteratee2) {
              array = arrayMap2(array, baseUnary(iteratee2));
            }
            maxLength = nativeMin(array.length, maxLength);
            caches[othIndex] = !comparator && (iteratee2 || length >= 120 && array.length >= 120) ? new SetCache(othIndex && array) : undefined$1;
          }
          array = arrays[0];
          var index2 = -1, seen2 = caches[0];
          outer:
            while (++index2 < length && result2.length < maxLength) {
              var value = array[index2], computed = iteratee2 ? iteratee2(value) : value;
              value = comparator || value !== 0 ? value : 0;
              if (!(seen2 ? cacheHas(seen2, computed) : includes2(result2, computed, comparator))) {
                othIndex = othLength;
                while (--othIndex) {
                  var cache = caches[othIndex];
                  if (!(cache ? cacheHas(cache, computed) : includes2(arrays[othIndex], computed, comparator))) {
                    continue outer;
                  }
                }
                if (seen2) {
                  seen2.push(computed);
                }
                result2.push(value);
              }
            }
          return result2;
        }
        function baseInverter(object, setter, iteratee2, accumulator) {
          baseForOwn(object, function(value, key, object2) {
            setter(accumulator, iteratee2(value), key, object2);
          });
          return accumulator;
        }
        function baseInvoke(object, path, args) {
          path = castPath2(path, object);
          object = parent(object, path);
          var func = object == null ? object : object[toKey2(last(path))];
          return func == null ? undefined$1 : apply(func, object, args);
        }
        function baseIsArguments(value) {
          return isObjectLike2(value) && baseGetTag2(value) == argsTag;
        }
        function baseIsArrayBuffer(value) {
          return isObjectLike2(value) && baseGetTag2(value) == arrayBufferTag;
        }
        function baseIsDate(value) {
          return isObjectLike2(value) && baseGetTag2(value) == dateTag;
        }
        function baseIsEqual(value, other, bitmask, customizer, stack) {
          if (value === other) {
            return true;
          }
          if (value == null || other == null || !isObjectLike2(value) && !isObjectLike2(other)) {
            return value !== value && other !== other;
          }
          return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);
        }
        function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {
          var objIsArr = isArray2(object), othIsArr = isArray2(other), objTag = objIsArr ? arrayTag : getTag(object), othTag = othIsArr ? arrayTag : getTag(other);
          objTag = objTag == argsTag ? objectTag : objTag;
          othTag = othTag == argsTag ? objectTag : othTag;
          var objIsObj = objTag == objectTag, othIsObj = othTag == objectTag, isSameTag = objTag == othTag;
          if (isSameTag && isBuffer(object)) {
            if (!isBuffer(other)) {
              return false;
            }
            objIsArr = true;
            objIsObj = false;
          }
          if (isSameTag && !objIsObj) {
            stack || (stack = new Stack());
            return objIsArr || isTypedArray(object) ? equalArrays(object, other, bitmask, customizer, equalFunc, stack) : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);
          }
          if (!(bitmask & COMPARE_PARTIAL_FLAG)) {
            var objIsWrapped = objIsObj && hasOwnProperty2.call(object, "__wrapped__"), othIsWrapped = othIsObj && hasOwnProperty2.call(other, "__wrapped__");
            if (objIsWrapped || othIsWrapped) {
              var objUnwrapped = objIsWrapped ? object.value() : object, othUnwrapped = othIsWrapped ? other.value() : other;
              stack || (stack = new Stack());
              return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);
            }
          }
          if (!isSameTag) {
            return false;
          }
          stack || (stack = new Stack());
          return equalObjects(object, other, bitmask, customizer, equalFunc, stack);
        }
        function baseIsMap(value) {
          return isObjectLike2(value) && getTag(value) == mapTag;
        }
        function baseIsMatch(object, source, matchData, customizer) {
          var index2 = matchData.length, length = index2, noCustomizer = !customizer;
          if (object == null) {
            return !length;
          }
          object = Object2(object);
          while (index2--) {
            var data = matchData[index2];
            if (noCustomizer && data[2] ? data[1] !== object[data[0]] : !(data[0] in object)) {
              return false;
            }
          }
          while (++index2 < length) {
            data = matchData[index2];
            var key = data[0], objValue = object[key], srcValue = data[1];
            if (noCustomizer && data[2]) {
              if (objValue === undefined$1 && !(key in object)) {
                return false;
              }
            } else {
              var stack = new Stack();
              if (customizer) {
                var result2 = customizer(objValue, srcValue, key, object, source, stack);
              }
              if (!(result2 === undefined$1 ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack) : result2)) {
                return false;
              }
            }
          }
          return true;
        }
        function baseIsNative2(value) {
          if (!isObject2(value) || isMasked2(value)) {
            return false;
          }
          var pattern = isFunction2(value) ? reIsNative2 : reIsHostCtor2;
          return pattern.test(toSource2(value));
        }
        function baseIsRegExp(value) {
          return isObjectLike2(value) && baseGetTag2(value) == regexpTag;
        }
        function baseIsSet(value) {
          return isObjectLike2(value) && getTag(value) == setTag;
        }
        function baseIsTypedArray(value) {
          return isObjectLike2(value) && isLength(value.length) && !!typedArrayTags[baseGetTag2(value)];
        }
        function baseIteratee(value) {
          if (typeof value == "function") {
            return value;
          }
          if (value == null) {
            return identity;
          }
          if (typeof value == "object") {
            return isArray2(value) ? baseMatchesProperty(value[0], value[1]) : baseMatches(value);
          }
          return property(value);
        }
        function baseKeys(object) {
          if (!isPrototype(object)) {
            return nativeKeys(object);
          }
          var result2 = [];
          for (var key in Object2(object)) {
            if (hasOwnProperty2.call(object, key) && key != "constructor") {
              result2.push(key);
            }
          }
          return result2;
        }
        function baseKeysIn(object) {
          if (!isObject2(object)) {
            return nativeKeysIn(object);
          }
          var isProto = isPrototype(object), result2 = [];
          for (var key in object) {
            if (!(key == "constructor" && (isProto || !hasOwnProperty2.call(object, key)))) {
              result2.push(key);
            }
          }
          return result2;
        }
        function baseLt(value, other) {
          return value < other;
        }
        function baseMap(collection, iteratee2) {
          var index2 = -1, result2 = isArrayLike(collection) ? Array2(collection.length) : [];
          baseEach(collection, function(value, key, collection2) {
            result2[++index2] = iteratee2(value, key, collection2);
          });
          return result2;
        }
        function baseMatches(source) {
          var matchData = getMatchData(source);
          if (matchData.length == 1 && matchData[0][2]) {
            return matchesStrictComparable(matchData[0][0], matchData[0][1]);
          }
          return function(object) {
            return object === source || baseIsMatch(object, source, matchData);
          };
        }
        function baseMatchesProperty(path, srcValue) {
          if (isKey2(path) && isStrictComparable(srcValue)) {
            return matchesStrictComparable(toKey2(path), srcValue);
          }
          return function(object) {
            var objValue = get(object, path);
            return objValue === undefined$1 && objValue === srcValue ? hasIn(object, path) : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);
          };
        }
        function baseMerge(object, source, srcIndex, customizer, stack) {
          if (object === source) {
            return;
          }
          baseFor(source, function(srcValue, key) {
            stack || (stack = new Stack());
            if (isObject2(srcValue)) {
              baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);
            } else {
              var newValue = customizer ? customizer(safeGet(object, key), srcValue, key + "", object, source, stack) : undefined$1;
              if (newValue === undefined$1) {
                newValue = srcValue;
              }
              assignMergeValue(object, key, newValue);
            }
          }, keysIn);
        }
        function baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {
          var objValue = safeGet(object, key), srcValue = safeGet(source, key), stacked = stack.get(srcValue);
          if (stacked) {
            assignMergeValue(object, key, stacked);
            return;
          }
          var newValue = customizer ? customizer(objValue, srcValue, key + "", object, source, stack) : undefined$1;
          var isCommon = newValue === undefined$1;
          if (isCommon) {
            var isArr = isArray2(srcValue), isBuff = !isArr && isBuffer(srcValue), isTyped = !isArr && !isBuff && isTypedArray(srcValue);
            newValue = srcValue;
            if (isArr || isBuff || isTyped) {
              if (isArray2(objValue)) {
                newValue = objValue;
              } else if (isArrayLikeObject(objValue)) {
                newValue = copyArray(objValue);
              } else if (isBuff) {
                isCommon = false;
                newValue = cloneBuffer(srcValue, true);
              } else if (isTyped) {
                isCommon = false;
                newValue = cloneTypedArray(srcValue, true);
              } else {
                newValue = [];
              }
            } else if (isPlainObject(srcValue) || isArguments(srcValue)) {
              newValue = objValue;
              if (isArguments(objValue)) {
                newValue = toPlainObject(objValue);
              } else if (!isObject2(objValue) || isFunction2(objValue)) {
                newValue = initCloneObject(srcValue);
              }
            } else {
              isCommon = false;
            }
          }
          if (isCommon) {
            stack.set(srcValue, newValue);
            mergeFunc(newValue, srcValue, srcIndex, customizer, stack);
            stack["delete"](srcValue);
          }
          assignMergeValue(object, key, newValue);
        }
        function baseNth(array, n2) {
          var length = array.length;
          if (!length) {
            return;
          }
          n2 += n2 < 0 ? length : 0;
          return isIndex2(n2, length) ? array[n2] : undefined$1;
        }
        function baseOrderBy(collection, iteratees, orders) {
          if (iteratees.length) {
            iteratees = arrayMap2(iteratees, function(iteratee2) {
              if (isArray2(iteratee2)) {
                return function(value) {
                  return baseGet(value, iteratee2.length === 1 ? iteratee2[0] : iteratee2);
                };
              }
              return iteratee2;
            });
          } else {
            iteratees = [identity];
          }
          var index2 = -1;
          iteratees = arrayMap2(iteratees, baseUnary(getIteratee()));
          var result2 = baseMap(collection, function(value, key, collection2) {
            var criteria = arrayMap2(iteratees, function(iteratee2) {
              return iteratee2(value);
            });
            return { "criteria": criteria, "index": ++index2, "value": value };
          });
          return baseSortBy(result2, function(object, other) {
            return compareMultiple(object, other, orders);
          });
        }
        function basePick(object, paths) {
          return basePickBy(object, paths, function(value, path) {
            return hasIn(object, path);
          });
        }
        function basePickBy(object, paths, predicate) {
          var index2 = -1, length = paths.length, result2 = {};
          while (++index2 < length) {
            var path = paths[index2], value = baseGet(object, path);
            if (predicate(value, path)) {
              baseSet2(result2, castPath2(path, object), value);
            }
          }
          return result2;
        }
        function basePropertyDeep(path) {
          return function(object) {
            return baseGet(object, path);
          };
        }
        function basePullAll(array, values2, iteratee2, comparator) {
          var indexOf2 = comparator ? baseIndexOfWith : baseIndexOf, index2 = -1, length = values2.length, seen2 = array;
          if (array === values2) {
            values2 = copyArray(values2);
          }
          if (iteratee2) {
            seen2 = arrayMap2(array, baseUnary(iteratee2));
          }
          while (++index2 < length) {
            var fromIndex = 0, value = values2[index2], computed = iteratee2 ? iteratee2(value) : value;
            while ((fromIndex = indexOf2(seen2, computed, fromIndex, comparator)) > -1) {
              if (seen2 !== array) {
                splice2.call(seen2, fromIndex, 1);
              }
              splice2.call(array, fromIndex, 1);
            }
          }
          return array;
        }
        function basePullAt(array, indexes) {
          var length = array ? indexes.length : 0, lastIndex = length - 1;
          while (length--) {
            var index2 = indexes[length];
            if (length == lastIndex || index2 !== previous) {
              var previous = index2;
              if (isIndex2(index2)) {
                splice2.call(array, index2, 1);
              } else {
                baseUnset(array, index2);
              }
            }
          }
          return array;
        }
        function baseRandom(lower, upper) {
          return lower + nativeFloor(nativeRandom() * (upper - lower + 1));
        }
        function baseRange(start, end, step, fromRight) {
          var index2 = -1, length = nativeMax(nativeCeil((end - start) / (step || 1)), 0), result2 = Array2(length);
          while (length--) {
            result2[fromRight ? length : ++index2] = start;
            start += step;
          }
          return result2;
        }
        function baseRepeat(string, n2) {
          var result2 = "";
          if (!string || n2 < 1 || n2 > MAX_SAFE_INTEGER2) {
            return result2;
          }
          do {
            if (n2 % 2) {
              result2 += string;
            }
            n2 = nativeFloor(n2 / 2);
            if (n2) {
              string += string;
            }
          } while (n2);
          return result2;
        }
        function baseRest(func, start) {
          return setToString(overRest(func, start, identity), func + "");
        }
        function baseSample(collection) {
          return arraySample(values(collection));
        }
        function baseSampleSize(collection, n2) {
          var array = values(collection);
          return shuffleSelf(array, baseClamp(n2, 0, array.length));
        }
        function baseSet2(object, path, value, customizer) {
          if (!isObject2(object)) {
            return object;
          }
          path = castPath2(path, object);
          var index2 = -1, length = path.length, lastIndex = length - 1, nested = object;
          while (nested != null && ++index2 < length) {
            var key = toKey2(path[index2]), newValue = value;
            if (key === "__proto__" || key === "constructor" || key === "prototype") {
              return object;
            }
            if (index2 != lastIndex) {
              var objValue = nested[key];
              newValue = customizer ? customizer(objValue, key, nested) : undefined$1;
              if (newValue === undefined$1) {
                newValue = isObject2(objValue) ? objValue : isIndex2(path[index2 + 1]) ? [] : {};
              }
            }
            assignValue2(nested, key, newValue);
            nested = nested[key];
          }
          return object;
        }
        var baseSetData = !metaMap ? identity : function(func, data) {
          metaMap.set(func, data);
          return func;
        };
        var baseSetToString = !defineProperty2 ? identity : function(func, string) {
          return defineProperty2(func, "toString", {
            "configurable": true,
            "enumerable": false,
            "value": constant(string),
            "writable": true
          });
        };
        function baseShuffle(collection) {
          return shuffleSelf(values(collection));
        }
        function baseSlice(array, start, end) {
          var index2 = -1, length = array.length;
          if (start < 0) {
            start = -start > length ? 0 : length + start;
          }
          end = end > length ? length : end;
          if (end < 0) {
            end += length;
          }
          length = start > end ? 0 : end - start >>> 0;
          start >>>= 0;
          var result2 = Array2(length);
          while (++index2 < length) {
            result2[index2] = array[index2 + start];
          }
          return result2;
        }
        function baseSome(collection, predicate) {
          var result2;
          baseEach(collection, function(value, index2, collection2) {
            result2 = predicate(value, index2, collection2);
            return !result2;
          });
          return !!result2;
        }
        function baseSortedIndex(array, value, retHighest) {
          var low = 0, high = array == null ? low : array.length;
          if (typeof value == "number" && value === value && high <= HALF_MAX_ARRAY_LENGTH) {
            while (low < high) {
              var mid = low + high >>> 1, computed = array[mid];
              if (computed !== null && !isSymbol2(computed) && (retHighest ? computed <= value : computed < value)) {
                low = mid + 1;
              } else {
                high = mid;
              }
            }
            return high;
          }
          return baseSortedIndexBy(array, value, identity, retHighest);
        }
        function baseSortedIndexBy(array, value, iteratee2, retHighest) {
          var low = 0, high = array == null ? 0 : array.length;
          if (high === 0) {
            return 0;
          }
          value = iteratee2(value);
          var valIsNaN = value !== value, valIsNull = value === null, valIsSymbol = isSymbol2(value), valIsUndefined = value === undefined$1;
          while (low < high) {
            var mid = nativeFloor((low + high) / 2), computed = iteratee2(array[mid]), othIsDefined = computed !== undefined$1, othIsNull = computed === null, othIsReflexive = computed === computed, othIsSymbol = isSymbol2(computed);
            if (valIsNaN) {
              var setLow = retHighest || othIsReflexive;
            } else if (valIsUndefined) {
              setLow = othIsReflexive && (retHighest || othIsDefined);
            } else if (valIsNull) {
              setLow = othIsReflexive && othIsDefined && (retHighest || !othIsNull);
            } else if (valIsSymbol) {
              setLow = othIsReflexive && othIsDefined && !othIsNull && (retHighest || !othIsSymbol);
            } else if (othIsNull || othIsSymbol) {
              setLow = false;
            } else {
              setLow = retHighest ? computed <= value : computed < value;
            }
            if (setLow) {
              low = mid + 1;
            } else {
              high = mid;
            }
          }
          return nativeMin(high, MAX_ARRAY_INDEX);
        }
        function baseSortedUniq(array, iteratee2) {
          var index2 = -1, length = array.length, resIndex = 0, result2 = [];
          while (++index2 < length) {
            var value = array[index2], computed = iteratee2 ? iteratee2(value) : value;
            if (!index2 || !eq2(computed, seen2)) {
              var seen2 = computed;
              result2[resIndex++] = value === 0 ? 0 : value;
            }
          }
          return result2;
        }
        function baseToNumber(value) {
          if (typeof value == "number") {
            return value;
          }
          if (isSymbol2(value)) {
            return NAN;
          }
          return +value;
        }
        function baseToString2(value) {
          if (typeof value == "string") {
            return value;
          }
          if (isArray2(value)) {
            return arrayMap2(value, baseToString2) + "";
          }
          if (isSymbol2(value)) {
            return symbolToString2 ? symbolToString2.call(value) : "";
          }
          var result2 = value + "";
          return result2 == "0" && 1 / value == -INFINITY2 ? "-0" : result2;
        }
        function baseUniq(array, iteratee2, comparator) {
          var index2 = -1, includes2 = arrayIncludes, length = array.length, isCommon = true, result2 = [], seen2 = result2;
          if (comparator) {
            isCommon = false;
            includes2 = arrayIncludesWith;
          } else if (length >= LARGE_ARRAY_SIZE) {
            var set3 = iteratee2 ? null : createSet(array);
            if (set3) {
              return setToArray(set3);
            }
            isCommon = false;
            includes2 = cacheHas;
            seen2 = new SetCache();
          } else {
            seen2 = iteratee2 ? [] : result2;
          }
          outer:
            while (++index2 < length) {
              var value = array[index2], computed = iteratee2 ? iteratee2(value) : value;
              value = comparator || value !== 0 ? value : 0;
              if (isCommon && computed === computed) {
                var seenIndex = seen2.length;
                while (seenIndex--) {
                  if (seen2[seenIndex] === computed) {
                    continue outer;
                  }
                }
                if (iteratee2) {
                  seen2.push(computed);
                }
                result2.push(value);
              } else if (!includes2(seen2, computed, comparator)) {
                if (seen2 !== result2) {
                  seen2.push(computed);
                }
                result2.push(value);
              }
            }
          return result2;
        }
        function baseUnset(object, path) {
          path = castPath2(path, object);
          object = parent(object, path);
          return object == null || delete object[toKey2(last(path))];
        }
        function baseUpdate(object, path, updater, customizer) {
          return baseSet2(object, path, updater(baseGet(object, path)), customizer);
        }
        function baseWhile(array, predicate, isDrop, fromRight) {
          var length = array.length, index2 = fromRight ? length : -1;
          while ((fromRight ? index2-- : ++index2 < length) && predicate(array[index2], index2, array)) {
          }
          return isDrop ? baseSlice(array, fromRight ? 0 : index2, fromRight ? index2 + 1 : length) : baseSlice(array, fromRight ? index2 + 1 : 0, fromRight ? length : index2);
        }
        function baseWrapperValue(value, actions) {
          var result2 = value;
          if (result2 instanceof LazyWrapper) {
            result2 = result2.value();
          }
          return arrayReduce(actions, function(result3, action) {
            return action.func.apply(action.thisArg, arrayPush([result3], action.args));
          }, result2);
        }
        function baseXor(arrays, iteratee2, comparator) {
          var length = arrays.length;
          if (length < 2) {
            return length ? baseUniq(arrays[0]) : [];
          }
          var index2 = -1, result2 = Array2(length);
          while (++index2 < length) {
            var array = arrays[index2], othIndex = -1;
            while (++othIndex < length) {
              if (othIndex != index2) {
                result2[index2] = baseDifference(result2[index2] || array, arrays[othIndex], iteratee2, comparator);
              }
            }
          }
          return baseUniq(baseFlatten(result2, 1), iteratee2, comparator);
        }
        function baseZipObject(props, values2, assignFunc) {
          var index2 = -1, length = props.length, valsLength = values2.length, result2 = {};
          while (++index2 < length) {
            var value = index2 < valsLength ? values2[index2] : undefined$1;
            assignFunc(result2, props[index2], value);
          }
          return result2;
        }
        function castArrayLikeObject(value) {
          return isArrayLikeObject(value) ? value : [];
        }
        function castFunction(value) {
          return typeof value == "function" ? value : identity;
        }
        function castPath2(value, object) {
          if (isArray2(value)) {
            return value;
          }
          return isKey2(value, object) ? [value] : stringToPath2(toString2(value));
        }
        var castRest = baseRest;
        function castSlice(array, start, end) {
          var length = array.length;
          end = end === undefined$1 ? length : end;
          return !start && end >= length ? array : baseSlice(array, start, end);
        }
        var clearTimeout2 = ctxClearTimeout || function(id2) {
          return root2.clearTimeout(id2);
        };
        function cloneBuffer(buffer, isDeep) {
          if (isDeep) {
            return buffer.slice();
          }
          var length = buffer.length, result2 = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);
          buffer.copy(result2);
          return result2;
        }
        function cloneArrayBuffer(arrayBuffer) {
          var result2 = new arrayBuffer.constructor(arrayBuffer.byteLength);
          new Uint8Array2(result2).set(new Uint8Array2(arrayBuffer));
          return result2;
        }
        function cloneDataView(dataView, isDeep) {
          var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;
          return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);
        }
        function cloneRegExp(regexp) {
          var result2 = new regexp.constructor(regexp.source, reFlags.exec(regexp));
          result2.lastIndex = regexp.lastIndex;
          return result2;
        }
        function cloneSymbol(symbol) {
          return symbolValueOf ? Object2(symbolValueOf.call(symbol)) : {};
        }
        function cloneTypedArray(typedArray, isDeep) {
          var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;
          return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);
        }
        function compareAscending(value, other) {
          if (value !== other) {
            var valIsDefined = value !== undefined$1, valIsNull = value === null, valIsReflexive = value === value, valIsSymbol = isSymbol2(value);
            var othIsDefined = other !== undefined$1, othIsNull = other === null, othIsReflexive = other === other, othIsSymbol = isSymbol2(other);
            if (!othIsNull && !othIsSymbol && !valIsSymbol && value > other || valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol || valIsNull && othIsDefined && othIsReflexive || !valIsDefined && othIsReflexive || !valIsReflexive) {
              return 1;
            }
            if (!valIsNull && !valIsSymbol && !othIsSymbol && value < other || othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol || othIsNull && valIsDefined && valIsReflexive || !othIsDefined && valIsReflexive || !othIsReflexive) {
              return -1;
            }
          }
          return 0;
        }
        function compareMultiple(object, other, orders) {
          var index2 = -1, objCriteria = object.criteria, othCriteria = other.criteria, length = objCriteria.length, ordersLength = orders.length;
          while (++index2 < length) {
            var result2 = compareAscending(objCriteria[index2], othCriteria[index2]);
            if (result2) {
              if (index2 >= ordersLength) {
                return result2;
              }
              var order = orders[index2];
              return result2 * (order == "desc" ? -1 : 1);
            }
          }
          return object.index - other.index;
        }
        function composeArgs(args, partials, holders, isCurried) {
          var argsIndex = -1, argsLength = args.length, holdersLength = holders.length, leftIndex = -1, leftLength = partials.length, rangeLength = nativeMax(argsLength - holdersLength, 0), result2 = Array2(leftLength + rangeLength), isUncurried = !isCurried;
          while (++leftIndex < leftLength) {
            result2[leftIndex] = partials[leftIndex];
          }
          while (++argsIndex < holdersLength) {
            if (isUncurried || argsIndex < argsLength) {
              result2[holders[argsIndex]] = args[argsIndex];
            }
          }
          while (rangeLength--) {
            result2[leftIndex++] = args[argsIndex++];
          }
          return result2;
        }
        function composeArgsRight(args, partials, holders, isCurried) {
          var argsIndex = -1, argsLength = args.length, holdersIndex = -1, holdersLength = holders.length, rightIndex = -1, rightLength = partials.length, rangeLength = nativeMax(argsLength - holdersLength, 0), result2 = Array2(rangeLength + rightLength), isUncurried = !isCurried;
          while (++argsIndex < rangeLength) {
            result2[argsIndex] = args[argsIndex];
          }
          var offset = argsIndex;
          while (++rightIndex < rightLength) {
            result2[offset + rightIndex] = partials[rightIndex];
          }
          while (++holdersIndex < holdersLength) {
            if (isUncurried || argsIndex < argsLength) {
              result2[offset + holders[holdersIndex]] = args[argsIndex++];
            }
          }
          return result2;
        }
        function copyArray(source, array) {
          var index2 = -1, length = source.length;
          array || (array = Array2(length));
          while (++index2 < length) {
            array[index2] = source[index2];
          }
          return array;
        }
        function copyObject(source, props, object, customizer) {
          var isNew = !object;
          object || (object = {});
          var index2 = -1, length = props.length;
          while (++index2 < length) {
            var key = props[index2];
            var newValue = customizer ? customizer(object[key], source[key], key, object, source) : undefined$1;
            if (newValue === undefined$1) {
              newValue = source[key];
            }
            if (isNew) {
              baseAssignValue2(object, key, newValue);
            } else {
              assignValue2(object, key, newValue);
            }
          }
          return object;
        }
        function copySymbols(source, object) {
          return copyObject(source, getSymbols(source), object);
        }
        function copySymbolsIn(source, object) {
          return copyObject(source, getSymbolsIn(source), object);
        }
        function createAggregator(setter, initializer) {
          return function(collection, iteratee2) {
            var func = isArray2(collection) ? arrayAggregator : baseAggregator, accumulator = initializer ? initializer() : {};
            return func(collection, setter, getIteratee(iteratee2, 2), accumulator);
          };
        }
        function createAssigner(assigner) {
          return baseRest(function(object, sources) {
            var index2 = -1, length = sources.length, customizer = length > 1 ? sources[length - 1] : undefined$1, guard = length > 2 ? sources[2] : undefined$1;
            customizer = assigner.length > 3 && typeof customizer == "function" ? (length--, customizer) : undefined$1;
            if (guard && isIterateeCall(sources[0], sources[1], guard)) {
              customizer = length < 3 ? undefined$1 : customizer;
              length = 1;
            }
            object = Object2(object);
            while (++index2 < length) {
              var source = sources[index2];
              if (source) {
                assigner(object, source, index2, customizer);
              }
            }
            return object;
          });
        }
        function createBaseEach(eachFunc, fromRight) {
          return function(collection, iteratee2) {
            if (collection == null) {
              return collection;
            }
            if (!isArrayLike(collection)) {
              return eachFunc(collection, iteratee2);
            }
            var length = collection.length, index2 = fromRight ? length : -1, iterable = Object2(collection);
            while (fromRight ? index2-- : ++index2 < length) {
              if (iteratee2(iterable[index2], index2, iterable) === false) {
                break;
              }
            }
            return collection;
          };
        }
        function createBaseFor(fromRight) {
          return function(object, iteratee2, keysFunc) {
            var index2 = -1, iterable = Object2(object), props = keysFunc(object), length = props.length;
            while (length--) {
              var key = props[fromRight ? length : ++index2];
              if (iteratee2(iterable[key], key, iterable) === false) {
                break;
              }
            }
            return object;
          };
        }
        function createBind(func, bitmask, thisArg) {
          var isBind = bitmask & WRAP_BIND_FLAG, Ctor = createCtor(func);
          function wrapper() {
            var fn = this && this !== root2 && this instanceof wrapper ? Ctor : func;
            return fn.apply(isBind ? thisArg : this, arguments);
          }
          return wrapper;
        }
        function createCaseFirst(methodName) {
          return function(string) {
            string = toString2(string);
            var strSymbols = hasUnicode(string) ? stringToArray(string) : undefined$1;
            var chr = strSymbols ? strSymbols[0] : string.charAt(0);
            var trailing = strSymbols ? castSlice(strSymbols, 1).join("") : string.slice(1);
            return chr[methodName]() + trailing;
          };
        }
        function createCompounder(callback) {
          return function(string) {
            return arrayReduce(words(deburr(string).replace(reApos, "")), callback, "");
          };
        }
        function createCtor(Ctor) {
          return function() {
            var args = arguments;
            switch (args.length) {
              case 0:
                return new Ctor();
              case 1:
                return new Ctor(args[0]);
              case 2:
                return new Ctor(args[0], args[1]);
              case 3:
                return new Ctor(args[0], args[1], args[2]);
              case 4:
                return new Ctor(args[0], args[1], args[2], args[3]);
              case 5:
                return new Ctor(args[0], args[1], args[2], args[3], args[4]);
              case 6:
                return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);
              case 7:
                return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);
            }
            var thisBinding = baseCreate(Ctor.prototype), result2 = Ctor.apply(thisBinding, args);
            return isObject2(result2) ? result2 : thisBinding;
          };
        }
        function createCurry(func, bitmask, arity) {
          var Ctor = createCtor(func);
          function wrapper() {
            var length = arguments.length, args = Array2(length), index2 = length, placeholder = getHolder(wrapper);
            while (index2--) {
              args[index2] = arguments[index2];
            }
            var holders = length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder ? [] : replaceHolders(args, placeholder);
            length -= holders.length;
            if (length < arity) {
              return createRecurry(
                func,
                bitmask,
                createHybrid,
                wrapper.placeholder,
                undefined$1,
                args,
                holders,
                undefined$1,
                undefined$1,
                arity - length
              );
            }
            var fn = this && this !== root2 && this instanceof wrapper ? Ctor : func;
            return apply(fn, this, args);
          }
          return wrapper;
        }
        function createFind(findIndexFunc) {
          return function(collection, predicate, fromIndex) {
            var iterable = Object2(collection);
            if (!isArrayLike(collection)) {
              var iteratee2 = getIteratee(predicate, 3);
              collection = keys(collection);
              predicate = function(key) {
                return iteratee2(iterable[key], key, iterable);
              };
            }
            var index2 = findIndexFunc(collection, predicate, fromIndex);
            return index2 > -1 ? iterable[iteratee2 ? collection[index2] : index2] : undefined$1;
          };
        }
        function createFlow(fromRight) {
          return flatRest(function(funcs) {
            var length = funcs.length, index2 = length, prereq = LodashWrapper.prototype.thru;
            if (fromRight) {
              funcs.reverse();
            }
            while (index2--) {
              var func = funcs[index2];
              if (typeof func != "function") {
                throw new TypeError2(FUNC_ERROR_TEXT2);
              }
              if (prereq && !wrapper && getFuncName(func) == "wrapper") {
                var wrapper = new LodashWrapper([], true);
              }
            }
            index2 = wrapper ? index2 : length;
            while (++index2 < length) {
              func = funcs[index2];
              var funcName = getFuncName(func), data = funcName == "wrapper" ? getData(func) : undefined$1;
              if (data && isLaziable(data[0]) && data[1] == (WRAP_ARY_FLAG | WRAP_CURRY_FLAG | WRAP_PARTIAL_FLAG | WRAP_REARG_FLAG) && !data[4].length && data[9] == 1) {
                wrapper = wrapper[getFuncName(data[0])].apply(wrapper, data[3]);
              } else {
                wrapper = func.length == 1 && isLaziable(func) ? wrapper[funcName]() : wrapper.thru(func);
              }
            }
            return function() {
              var args = arguments, value = args[0];
              if (wrapper && args.length == 1 && isArray2(value)) {
                return wrapper.plant(value).value();
              }
              var index3 = 0, result2 = length ? funcs[index3].apply(this, args) : value;
              while (++index3 < length) {
                result2 = funcs[index3].call(this, result2);
              }
              return result2;
            };
          });
        }
        function createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary2, arity) {
          var isAry = bitmask & WRAP_ARY_FLAG, isBind = bitmask & WRAP_BIND_FLAG, isBindKey = bitmask & WRAP_BIND_KEY_FLAG, isCurried = bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG), isFlip = bitmask & WRAP_FLIP_FLAG, Ctor = isBindKey ? undefined$1 : createCtor(func);
          function wrapper() {
            var length = arguments.length, args = Array2(length), index2 = length;
            while (index2--) {
              args[index2] = arguments[index2];
            }
            if (isCurried) {
              var placeholder = getHolder(wrapper), holdersCount = countHolders(args, placeholder);
            }
            if (partials) {
              args = composeArgs(args, partials, holders, isCurried);
            }
            if (partialsRight) {
              args = composeArgsRight(args, partialsRight, holdersRight, isCurried);
            }
            length -= holdersCount;
            if (isCurried && length < arity) {
              var newHolders = replaceHolders(args, placeholder);
              return createRecurry(
                func,
                bitmask,
                createHybrid,
                wrapper.placeholder,
                thisArg,
                args,
                newHolders,
                argPos,
                ary2,
                arity - length
              );
            }
            var thisBinding = isBind ? thisArg : this, fn = isBindKey ? thisBinding[func] : func;
            length = args.length;
            if (argPos) {
              args = reorder(args, argPos);
            } else if (isFlip && length > 1) {
              args.reverse();
            }
            if (isAry && ary2 < length) {
              args.length = ary2;
            }
            if (this && this !== root2 && this instanceof wrapper) {
              fn = Ctor || createCtor(fn);
            }
            return fn.apply(thisBinding, args);
          }
          return wrapper;
        }
        function createInverter(setter, toIteratee) {
          return function(object, iteratee2) {
            return baseInverter(object, setter, toIteratee(iteratee2), {});
          };
        }
        function createMathOperation(operator, defaultValue) {
          return function(value, other) {
            var result2;
            if (value === undefined$1 && other === undefined$1) {
              return defaultValue;
            }
            if (value !== undefined$1) {
              result2 = value;
            }
            if (other !== undefined$1) {
              if (result2 === undefined$1) {
                return other;
              }
              if (typeof value == "string" || typeof other == "string") {
                value = baseToString2(value);
                other = baseToString2(other);
              } else {
                value = baseToNumber(value);
                other = baseToNumber(other);
              }
              result2 = operator(value, other);
            }
            return result2;
          };
        }
        function createOver(arrayFunc) {
          return flatRest(function(iteratees) {
            iteratees = arrayMap2(iteratees, baseUnary(getIteratee()));
            return baseRest(function(args) {
              var thisArg = this;
              return arrayFunc(iteratees, function(iteratee2) {
                return apply(iteratee2, thisArg, args);
              });
            });
          });
        }
        function createPadding(length, chars) {
          chars = chars === undefined$1 ? " " : baseToString2(chars);
          var charsLength = chars.length;
          if (charsLength < 2) {
            return charsLength ? baseRepeat(chars, length) : chars;
          }
          var result2 = baseRepeat(chars, nativeCeil(length / stringSize(chars)));
          return hasUnicode(chars) ? castSlice(stringToArray(result2), 0, length).join("") : result2.slice(0, length);
        }
        function createPartial(func, bitmask, thisArg, partials) {
          var isBind = bitmask & WRAP_BIND_FLAG, Ctor = createCtor(func);
          function wrapper() {
            var argsIndex = -1, argsLength = arguments.length, leftIndex = -1, leftLength = partials.length, args = Array2(leftLength + argsLength), fn = this && this !== root2 && this instanceof wrapper ? Ctor : func;
            while (++leftIndex < leftLength) {
              args[leftIndex] = partials[leftIndex];
            }
            while (argsLength--) {
              args[leftIndex++] = arguments[++argsIndex];
            }
            return apply(fn, isBind ? thisArg : this, args);
          }
          return wrapper;
        }
        function createRange(fromRight) {
          return function(start, end, step) {
            if (step && typeof step != "number" && isIterateeCall(start, end, step)) {
              end = step = undefined$1;
            }
            start = toFinite(start);
            if (end === undefined$1) {
              end = start;
              start = 0;
            } else {
              end = toFinite(end);
            }
            step = step === undefined$1 ? start < end ? 1 : -1 : toFinite(step);
            return baseRange(start, end, step, fromRight);
          };
        }
        function createRelationalOperation(operator) {
          return function(value, other) {
            if (!(typeof value == "string" && typeof other == "string")) {
              value = toNumber(value);
              other = toNumber(other);
            }
            return operator(value, other);
          };
        }
        function createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary2, arity) {
          var isCurry = bitmask & WRAP_CURRY_FLAG, newHolders = isCurry ? holders : undefined$1, newHoldersRight = isCurry ? undefined$1 : holders, newPartials = isCurry ? partials : undefined$1, newPartialsRight = isCurry ? undefined$1 : partials;
          bitmask |= isCurry ? WRAP_PARTIAL_FLAG : WRAP_PARTIAL_RIGHT_FLAG;
          bitmask &= ~(isCurry ? WRAP_PARTIAL_RIGHT_FLAG : WRAP_PARTIAL_FLAG);
          if (!(bitmask & WRAP_CURRY_BOUND_FLAG)) {
            bitmask &= ~(WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG);
          }
          var newData = [
            func,
            bitmask,
            thisArg,
            newPartials,
            newHolders,
            newPartialsRight,
            newHoldersRight,
            argPos,
            ary2,
            arity
          ];
          var result2 = wrapFunc.apply(undefined$1, newData);
          if (isLaziable(func)) {
            setData(result2, newData);
          }
          result2.placeholder = placeholder;
          return setWrapToString(result2, func, bitmask);
        }
        function createRound(methodName) {
          var func = Math2[methodName];
          return function(number, precision) {
            number = toNumber(number);
            precision = precision == null ? 0 : nativeMin(toInteger(precision), 292);
            if (precision && nativeIsFinite(number)) {
              var pair = (toString2(number) + "e").split("e"), value = func(pair[0] + "e" + (+pair[1] + precision));
              pair = (toString2(value) + "e").split("e");
              return +(pair[0] + "e" + (+pair[1] - precision));
            }
            return func(number);
          };
        }
        var createSet = !(Set2 && 1 / setToArray(new Set2([, -0]))[1] == INFINITY2) ? noop : function(values2) {
          return new Set2(values2);
        };
        function createToPairs(keysFunc) {
          return function(object) {
            var tag = getTag(object);
            if (tag == mapTag) {
              return mapToArray(object);
            }
            if (tag == setTag) {
              return setToPairs(object);
            }
            return baseToPairs(object, keysFunc(object));
          };
        }
        function createWrap(func, bitmask, thisArg, partials, holders, argPos, ary2, arity) {
          var isBindKey = bitmask & WRAP_BIND_KEY_FLAG;
          if (!isBindKey && typeof func != "function") {
            throw new TypeError2(FUNC_ERROR_TEXT2);
          }
          var length = partials ? partials.length : 0;
          if (!length) {
            bitmask &= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);
            partials = holders = undefined$1;
          }
          ary2 = ary2 === undefined$1 ? ary2 : nativeMax(toInteger(ary2), 0);
          arity = arity === undefined$1 ? arity : toInteger(arity);
          length -= holders ? holders.length : 0;
          if (bitmask & WRAP_PARTIAL_RIGHT_FLAG) {
            var partialsRight = partials, holdersRight = holders;
            partials = holders = undefined$1;
          }
          var data = isBindKey ? undefined$1 : getData(func);
          var newData = [
            func,
            bitmask,
            thisArg,
            partials,
            holders,
            partialsRight,
            holdersRight,
            argPos,
            ary2,
            arity
          ];
          if (data) {
            mergeData(newData, data);
          }
          func = newData[0];
          bitmask = newData[1];
          thisArg = newData[2];
          partials = newData[3];
          holders = newData[4];
          arity = newData[9] = newData[9] === undefined$1 ? isBindKey ? 0 : func.length : nativeMax(newData[9] - length, 0);
          if (!arity && bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {
            bitmask &= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);
          }
          if (!bitmask || bitmask == WRAP_BIND_FLAG) {
            var result2 = createBind(func, bitmask, thisArg);
          } else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {
            result2 = createCurry(func, bitmask, arity);
          } else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) && !holders.length) {
            result2 = createPartial(func, bitmask, thisArg, partials);
          } else {
            result2 = createHybrid.apply(undefined$1, newData);
          }
          var setter = data ? baseSetData : setData;
          return setWrapToString(setter(result2, newData), func, bitmask);
        }
        function customDefaultsAssignIn(objValue, srcValue, key, object) {
          if (objValue === undefined$1 || eq2(objValue, objectProto2[key]) && !hasOwnProperty2.call(object, key)) {
            return srcValue;
          }
          return objValue;
        }
        function customDefaultsMerge(objValue, srcValue, key, object, source, stack) {
          if (isObject2(objValue) && isObject2(srcValue)) {
            stack.set(srcValue, objValue);
            baseMerge(objValue, srcValue, undefined$1, customDefaultsMerge, stack);
            stack["delete"](srcValue);
          }
          return objValue;
        }
        function customOmitClone(value) {
          return isPlainObject(value) ? undefined$1 : value;
        }
        function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {
          var isPartial = bitmask & COMPARE_PARTIAL_FLAG, arrLength = array.length, othLength = other.length;
          if (arrLength != othLength && !(isPartial && othLength > arrLength)) {
            return false;
          }
          var arrStacked = stack.get(array);
          var othStacked = stack.get(other);
          if (arrStacked && othStacked) {
            return arrStacked == other && othStacked == array;
          }
          var index2 = -1, result2 = true, seen2 = bitmask & COMPARE_UNORDERED_FLAG ? new SetCache() : undefined$1;
          stack.set(array, other);
          stack.set(other, array);
          while (++index2 < arrLength) {
            var arrValue = array[index2], othValue = other[index2];
            if (customizer) {
              var compared = isPartial ? customizer(othValue, arrValue, index2, other, array, stack) : customizer(arrValue, othValue, index2, array, other, stack);
            }
            if (compared !== undefined$1) {
              if (compared) {
                continue;
              }
              result2 = false;
              break;
            }
            if (seen2) {
              if (!arraySome(other, function(othValue2, othIndex) {
                if (!cacheHas(seen2, othIndex) && (arrValue === othValue2 || equalFunc(arrValue, othValue2, bitmask, customizer, stack))) {
                  return seen2.push(othIndex);
                }
              })) {
                result2 = false;
                break;
              }
            } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {
              result2 = false;
              break;
            }
          }
          stack["delete"](array);
          stack["delete"](other);
          return result2;
        }
        function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {
          switch (tag) {
            case dataViewTag:
              if (object.byteLength != other.byteLength || object.byteOffset != other.byteOffset) {
                return false;
              }
              object = object.buffer;
              other = other.buffer;
            case arrayBufferTag:
              if (object.byteLength != other.byteLength || !equalFunc(new Uint8Array2(object), new Uint8Array2(other))) {
                return false;
              }
              return true;
            case boolTag:
            case dateTag:
            case numberTag:
              return eq2(+object, +other);
            case errorTag:
              return object.name == other.name && object.message == other.message;
            case regexpTag:
            case stringTag:
              return object == other + "";
            case mapTag:
              var convert = mapToArray;
            case setTag:
              var isPartial = bitmask & COMPARE_PARTIAL_FLAG;
              convert || (convert = setToArray);
              if (object.size != other.size && !isPartial) {
                return false;
              }
              var stacked = stack.get(object);
              if (stacked) {
                return stacked == other;
              }
              bitmask |= COMPARE_UNORDERED_FLAG;
              stack.set(object, other);
              var result2 = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);
              stack["delete"](object);
              return result2;
            case symbolTag2:
              if (symbolValueOf) {
                return symbolValueOf.call(object) == symbolValueOf.call(other);
              }
          }
          return false;
        }
        function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {
          var isPartial = bitmask & COMPARE_PARTIAL_FLAG, objProps = getAllKeys(object), objLength = objProps.length, othProps = getAllKeys(other), othLength = othProps.length;
          if (objLength != othLength && !isPartial) {
            return false;
          }
          var index2 = objLength;
          while (index2--) {
            var key = objProps[index2];
            if (!(isPartial ? key in other : hasOwnProperty2.call(other, key))) {
              return false;
            }
          }
          var objStacked = stack.get(object);
          var othStacked = stack.get(other);
          if (objStacked && othStacked) {
            return objStacked == other && othStacked == object;
          }
          var result2 = true;
          stack.set(object, other);
          stack.set(other, object);
          var skipCtor = isPartial;
          while (++index2 < objLength) {
            key = objProps[index2];
            var objValue = object[key], othValue = other[key];
            if (customizer) {
              var compared = isPartial ? customizer(othValue, objValue, key, other, object, stack) : customizer(objValue, othValue, key, object, other, stack);
            }
            if (!(compared === undefined$1 ? objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack) : compared)) {
              result2 = false;
              break;
            }
            skipCtor || (skipCtor = key == "constructor");
          }
          if (result2 && !skipCtor) {
            var objCtor = object.constructor, othCtor = other.constructor;
            if (objCtor != othCtor && ("constructor" in object && "constructor" in other) && !(typeof objCtor == "function" && objCtor instanceof objCtor && typeof othCtor == "function" && othCtor instanceof othCtor)) {
              result2 = false;
            }
          }
          stack["delete"](object);
          stack["delete"](other);
          return result2;
        }
        function flatRest(func) {
          return setToString(overRest(func, undefined$1, flatten), func + "");
        }
        function getAllKeys(object) {
          return baseGetAllKeys(object, keys, getSymbols);
        }
        function getAllKeysIn(object) {
          return baseGetAllKeys(object, keysIn, getSymbolsIn);
        }
        var getData = !metaMap ? noop : function(func) {
          return metaMap.get(func);
        };
        function getFuncName(func) {
          var result2 = func.name + "", array = realNames[result2], length = hasOwnProperty2.call(realNames, result2) ? array.length : 0;
          while (length--) {
            var data = array[length], otherFunc = data.func;
            if (otherFunc == null || otherFunc == func) {
              return data.name;
            }
          }
          return result2;
        }
        function getHolder(func) {
          var object = hasOwnProperty2.call(lodash2, "placeholder") ? lodash2 : func;
          return object.placeholder;
        }
        function getIteratee() {
          var result2 = lodash2.iteratee || iteratee;
          result2 = result2 === iteratee ? baseIteratee : result2;
          return arguments.length ? result2(arguments[0], arguments[1]) : result2;
        }
        function getMapData2(map2, key) {
          var data = map2.__data__;
          return isKeyable2(key) ? data[typeof key == "string" ? "string" : "hash"] : data.map;
        }
        function getMatchData(object) {
          var result2 = keys(object), length = result2.length;
          while (length--) {
            var key = result2[length], value = object[key];
            result2[length] = [key, value, isStrictComparable(value)];
          }
          return result2;
        }
        function getNative2(object, key) {
          var value = getValue2(object, key);
          return baseIsNative2(value) ? value : undefined$1;
        }
        function getRawTag2(value) {
          var isOwn = hasOwnProperty2.call(value, symToStringTag2), tag = value[symToStringTag2];
          try {
            value[symToStringTag2] = undefined$1;
            var unmasked = true;
          } catch (e) {
          }
          var result2 = nativeObjectToString2.call(value);
          if (unmasked) {
            if (isOwn) {
              value[symToStringTag2] = tag;
            } else {
              delete value[symToStringTag2];
            }
          }
          return result2;
        }
        var getSymbols = !nativeGetSymbols ? stubArray : function(object) {
          if (object == null) {
            return [];
          }
          object = Object2(object);
          return arrayFilter(nativeGetSymbols(object), function(symbol) {
            return propertyIsEnumerable.call(object, symbol);
          });
        };
        var getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {
          var result2 = [];
          while (object) {
            arrayPush(result2, getSymbols(object));
            object = getPrototype(object);
          }
          return result2;
        };
        var getTag = baseGetTag2;
        if (DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag || Map2 && getTag(new Map2()) != mapTag || Promise2 && getTag(Promise2.resolve()) != promiseTag || Set2 && getTag(new Set2()) != setTag || WeakMap2 && getTag(new WeakMap2()) != weakMapTag) {
          getTag = function(value) {
            var result2 = baseGetTag2(value), Ctor = result2 == objectTag ? value.constructor : undefined$1, ctorString = Ctor ? toSource2(Ctor) : "";
            if (ctorString) {
              switch (ctorString) {
                case dataViewCtorString:
                  return dataViewTag;
                case mapCtorString:
                  return mapTag;
                case promiseCtorString:
                  return promiseTag;
                case setCtorString:
                  return setTag;
                case weakMapCtorString:
                  return weakMapTag;
              }
            }
            return result2;
          };
        }
        function getView(start, end, transforms) {
          var index2 = -1, length = transforms.length;
          while (++index2 < length) {
            var data = transforms[index2], size2 = data.size;
            switch (data.type) {
              case "drop":
                start += size2;
                break;
              case "dropRight":
                end -= size2;
                break;
              case "take":
                end = nativeMin(end, start + size2);
                break;
              case "takeRight":
                start = nativeMax(start, end - size2);
                break;
            }
          }
          return { "start": start, "end": end };
        }
        function getWrapDetails(source) {
          var match = source.match(reWrapDetails);
          return match ? match[1].split(reSplitDetails) : [];
        }
        function hasPath(object, path, hasFunc) {
          path = castPath2(path, object);
          var index2 = -1, length = path.length, result2 = false;
          while (++index2 < length) {
            var key = toKey2(path[index2]);
            if (!(result2 = object != null && hasFunc(object, key))) {
              break;
            }
            object = object[key];
          }
          if (result2 || ++index2 != length) {
            return result2;
          }
          length = object == null ? 0 : object.length;
          return !!length && isLength(length) && isIndex2(key, length) && (isArray2(object) || isArguments(object));
        }
        function initCloneArray(array) {
          var length = array.length, result2 = new array.constructor(length);
          if (length && typeof array[0] == "string" && hasOwnProperty2.call(array, "index")) {
            result2.index = array.index;
            result2.input = array.input;
          }
          return result2;
        }
        function initCloneObject(object) {
          return typeof object.constructor == "function" && !isPrototype(object) ? baseCreate(getPrototype(object)) : {};
        }
        function initCloneByTag(object, tag, isDeep) {
          var Ctor = object.constructor;
          switch (tag) {
            case arrayBufferTag:
              return cloneArrayBuffer(object);
            case boolTag:
            case dateTag:
              return new Ctor(+object);
            case dataViewTag:
              return cloneDataView(object, isDeep);
            case float32Tag:
            case float64Tag:
            case int8Tag:
            case int16Tag:
            case int32Tag:
            case uint8Tag:
            case uint8ClampedTag:
            case uint16Tag:
            case uint32Tag:
              return cloneTypedArray(object, isDeep);
            case mapTag:
              return new Ctor();
            case numberTag:
            case stringTag:
              return new Ctor(object);
            case regexpTag:
              return cloneRegExp(object);
            case setTag:
              return new Ctor();
            case symbolTag2:
              return cloneSymbol(object);
          }
        }
        function insertWrapDetails(source, details) {
          var length = details.length;
          if (!length) {
            return source;
          }
          var lastIndex = length - 1;
          details[lastIndex] = (length > 1 ? "& " : "") + details[lastIndex];
          details = details.join(length > 2 ? ", " : " ");
          return source.replace(reWrapComment, "{\n/* [wrapped with " + details + "] */\n");
        }
        function isFlattenable(value) {
          return isArray2(value) || isArguments(value) || !!(spreadableSymbol && value && value[spreadableSymbol]);
        }
        function isIndex2(value, length) {
          var type = typeof value;
          length = length == null ? MAX_SAFE_INTEGER2 : length;
          return !!length && (type == "number" || type != "symbol" && reIsUint2.test(value)) && (value > -1 && value % 1 == 0 && value < length);
        }
        function isIterateeCall(value, index2, object) {
          if (!isObject2(object)) {
            return false;
          }
          var type = typeof index2;
          if (type == "number" ? isArrayLike(object) && isIndex2(index2, object.length) : type == "string" && index2 in object) {
            return eq2(object[index2], value);
          }
          return false;
        }
        function isKey2(value, object) {
          if (isArray2(value)) {
            return false;
          }
          var type = typeof value;
          if (type == "number" || type == "symbol" || type == "boolean" || value == null || isSymbol2(value)) {
            return true;
          }
          return reIsPlainProp2.test(value) || !reIsDeepProp2.test(value) || object != null && value in Object2(object);
        }
        function isKeyable2(value) {
          var type = typeof value;
          return type == "string" || type == "number" || type == "symbol" || type == "boolean" ? value !== "__proto__" : value === null;
        }
        function isLaziable(func) {
          var funcName = getFuncName(func), other = lodash2[funcName];
          if (typeof other != "function" || !(funcName in LazyWrapper.prototype)) {
            return false;
          }
          if (func === other) {
            return true;
          }
          var data = getData(other);
          return !!data && func === data[0];
        }
        function isMasked2(func) {
          return !!maskSrcKey2 && maskSrcKey2 in func;
        }
        var isMaskable = coreJsData2 ? isFunction2 : stubFalse;
        function isPrototype(value) {
          var Ctor = value && value.constructor, proto = typeof Ctor == "function" && Ctor.prototype || objectProto2;
          return value === proto;
        }
        function isStrictComparable(value) {
          return value === value && !isObject2(value);
        }
        function matchesStrictComparable(key, srcValue) {
          return function(object) {
            if (object == null) {
              return false;
            }
            return object[key] === srcValue && (srcValue !== undefined$1 || key in Object2(object));
          };
        }
        function memoizeCapped2(func) {
          var result2 = memoize2(func, function(key) {
            if (cache.size === MAX_MEMOIZE_SIZE2) {
              cache.clear();
            }
            return key;
          });
          var cache = result2.cache;
          return result2;
        }
        function mergeData(data, source) {
          var bitmask = data[1], srcBitmask = source[1], newBitmask = bitmask | srcBitmask, isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);
          var isCombo = srcBitmask == WRAP_ARY_FLAG && bitmask == WRAP_CURRY_FLAG || srcBitmask == WRAP_ARY_FLAG && bitmask == WRAP_REARG_FLAG && data[7].length <= source[8] || srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG) && source[7].length <= source[8] && bitmask == WRAP_CURRY_FLAG;
          if (!(isCommon || isCombo)) {
            return data;
          }
          if (srcBitmask & WRAP_BIND_FLAG) {
            data[2] = source[2];
            newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;
          }
          var value = source[3];
          if (value) {
            var partials = data[3];
            data[3] = partials ? composeArgs(partials, value, source[4]) : value;
            data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : source[4];
          }
          value = source[5];
          if (value) {
            partials = data[5];
            data[5] = partials ? composeArgsRight(partials, value, source[6]) : value;
            data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : source[6];
          }
          value = source[7];
          if (value) {
            data[7] = value;
          }
          if (srcBitmask & WRAP_ARY_FLAG) {
            data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);
          }
          if (data[9] == null) {
            data[9] = source[9];
          }
          data[0] = source[0];
          data[1] = newBitmask;
          return data;
        }
        function nativeKeysIn(object) {
          var result2 = [];
          if (object != null) {
            for (var key in Object2(object)) {
              result2.push(key);
            }
          }
          return result2;
        }
        function objectToString2(value) {
          return nativeObjectToString2.call(value);
        }
        function overRest(func, start, transform2) {
          start = nativeMax(start === undefined$1 ? func.length - 1 : start, 0);
          return function() {
            var args = arguments, index2 = -1, length = nativeMax(args.length - start, 0), array = Array2(length);
            while (++index2 < length) {
              array[index2] = args[start + index2];
            }
            index2 = -1;
            var otherArgs = Array2(start + 1);
            while (++index2 < start) {
              otherArgs[index2] = args[index2];
            }
            otherArgs[start] = transform2(array);
            return apply(func, this, otherArgs);
          };
        }
        function parent(object, path) {
          return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));
        }
        function reorder(array, indexes) {
          var arrLength = array.length, length = nativeMin(indexes.length, arrLength), oldArray = copyArray(array);
          while (length--) {
            var index2 = indexes[length];
            array[length] = isIndex2(index2, arrLength) ? oldArray[index2] : undefined$1;
          }
          return array;
        }
        function safeGet(object, key) {
          if (key === "constructor" && typeof object[key] === "function") {
            return;
          }
          if (key == "__proto__") {
            return;
          }
          return object[key];
        }
        var setData = shortOut(baseSetData);
        var setTimeout2 = ctxSetTimeout || function(func, wait) {
          return root2.setTimeout(func, wait);
        };
        var setToString = shortOut(baseSetToString);
        function setWrapToString(wrapper, reference, bitmask) {
          var source = reference + "";
          return setToString(wrapper, insertWrapDetails(source, updateWrapDetails(getWrapDetails(source), bitmask)));
        }
        function shortOut(func) {
          var count = 0, lastCalled = 0;
          return function() {
            var stamp = nativeNow(), remaining = HOT_SPAN - (stamp - lastCalled);
            lastCalled = stamp;
            if (remaining > 0) {
              if (++count >= HOT_COUNT) {
                return arguments[0];
              }
            } else {
              count = 0;
            }
            return func.apply(undefined$1, arguments);
          };
        }
        function shuffleSelf(array, size2) {
          var index2 = -1, length = array.length, lastIndex = length - 1;
          size2 = size2 === undefined$1 ? length : size2;
          while (++index2 < size2) {
            var rand = baseRandom(index2, lastIndex), value = array[rand];
            array[rand] = array[index2];
            array[index2] = value;
          }
          array.length = size2;
          return array;
        }
        var stringToPath2 = memoizeCapped2(function(string) {
          var result2 = [];
          if (string.charCodeAt(0) === 46) {
            result2.push("");
          }
          string.replace(rePropName2, function(match, number, quote, subString) {
            result2.push(quote ? subString.replace(reEscapeChar2, "$1") : number || match);
          });
          return result2;
        });
        function toKey2(value) {
          if (typeof value == "string" || isSymbol2(value)) {
            return value;
          }
          var result2 = value + "";
          return result2 == "0" && 1 / value == -INFINITY2 ? "-0" : result2;
        }
        function toSource2(func) {
          if (func != null) {
            try {
              return funcToString2.call(func);
            } catch (e) {
            }
            try {
              return func + "";
            } catch (e) {
            }
          }
          return "";
        }
        function updateWrapDetails(details, bitmask) {
          arrayEach(wrapFlags, function(pair) {
            var value = "_." + pair[0];
            if (bitmask & pair[1] && !arrayIncludes(details, value)) {
              details.push(value);
            }
          });
          return details.sort();
        }
        function wrapperClone(wrapper) {
          if (wrapper instanceof LazyWrapper) {
            return wrapper.clone();
          }
          var result2 = new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__);
          result2.__actions__ = copyArray(wrapper.__actions__);
          result2.__index__ = wrapper.__index__;
          result2.__values__ = wrapper.__values__;
          return result2;
        }
        function chunk(array, size2, guard) {
          if (guard ? isIterateeCall(array, size2, guard) : size2 === undefined$1) {
            size2 = 1;
          } else {
            size2 = nativeMax(toInteger(size2), 0);
          }
          var length = array == null ? 0 : array.length;
          if (!length || size2 < 1) {
            return [];
          }
          var index2 = 0, resIndex = 0, result2 = Array2(nativeCeil(length / size2));
          while (index2 < length) {
            result2[resIndex++] = baseSlice(array, index2, index2 += size2);
          }
          return result2;
        }
        function compact(array) {
          var index2 = -1, length = array == null ? 0 : array.length, resIndex = 0, result2 = [];
          while (++index2 < length) {
            var value = array[index2];
            if (value) {
              result2[resIndex++] = value;
            }
          }
          return result2;
        }
        function concat() {
          var length = arguments.length;
          if (!length) {
            return [];
          }
          var args = Array2(length - 1), array = arguments[0], index2 = length;
          while (index2--) {
            args[index2 - 1] = arguments[index2];
          }
          return arrayPush(isArray2(array) ? copyArray(array) : [array], baseFlatten(args, 1));
        }
        var difference = baseRest(function(array, values2) {
          return isArrayLikeObject(array) ? baseDifference(array, baseFlatten(values2, 1, isArrayLikeObject, true)) : [];
        });
        var differenceBy = baseRest(function(array, values2) {
          var iteratee2 = last(values2);
          if (isArrayLikeObject(iteratee2)) {
            iteratee2 = undefined$1;
          }
          return isArrayLikeObject(array) ? baseDifference(array, baseFlatten(values2, 1, isArrayLikeObject, true), getIteratee(iteratee2, 2)) : [];
        });
        var differenceWith = baseRest(function(array, values2) {
          var comparator = last(values2);
          if (isArrayLikeObject(comparator)) {
            comparator = undefined$1;
          }
          return isArrayLikeObject(array) ? baseDifference(array, baseFlatten(values2, 1, isArrayLikeObject, true), undefined$1, comparator) : [];
        });
        function drop(array, n2, guard) {
          var length = array == null ? 0 : array.length;
          if (!length) {
            return [];
          }
          n2 = guard || n2 === undefined$1 ? 1 : toInteger(n2);
          return baseSlice(array, n2 < 0 ? 0 : n2, length);
        }
        function dropRight(array, n2, guard) {
          var length = array == null ? 0 : array.length;
          if (!length) {
            return [];
          }
          n2 = guard || n2 === undefined$1 ? 1 : toInteger(n2);
          n2 = length - n2;
          return baseSlice(array, 0, n2 < 0 ? 0 : n2);
        }
        function dropRightWhile(array, predicate) {
          return array && array.length ? baseWhile(array, getIteratee(predicate, 3), true, true) : [];
        }
        function dropWhile(array, predicate) {
          return array && array.length ? baseWhile(array, getIteratee(predicate, 3), true) : [];
        }
        function fill(array, value, start, end) {
          var length = array == null ? 0 : array.length;
          if (!length) {
            return [];
          }
          if (start && typeof start != "number" && isIterateeCall(array, value, start)) {
            start = 0;
            end = length;
          }
          return baseFill(array, value, start, end);
        }
        function findIndex(array, predicate, fromIndex) {
          var length = array == null ? 0 : array.length;
          if (!length) {
            return -1;
          }
          var index2 = fromIndex == null ? 0 : toInteger(fromIndex);
          if (index2 < 0) {
            index2 = nativeMax(length + index2, 0);
          }
          return baseFindIndex(array, getIteratee(predicate, 3), index2);
        }
        function findLastIndex(array, predicate, fromIndex) {
          var length = array == null ? 0 : array.length;
          if (!length) {
            return -1;
          }
          var index2 = length - 1;
          if (fromIndex !== undefined$1) {
            index2 = toInteger(fromIndex);
            index2 = fromIndex < 0 ? nativeMax(length + index2, 0) : nativeMin(index2, length - 1);
          }
          return baseFindIndex(array, getIteratee(predicate, 3), index2, true);
        }
        function flatten(array) {
          var length = array == null ? 0 : array.length;
          return length ? baseFlatten(array, 1) : [];
        }
        function flattenDeep(array) {
          var length = array == null ? 0 : array.length;
          return length ? baseFlatten(array, INFINITY2) : [];
        }
        function flattenDepth(array, depth) {
          var length = array == null ? 0 : array.length;
          if (!length) {
            return [];
          }
          depth = depth === undefined$1 ? 1 : toInteger(depth);
          return baseFlatten(array, depth);
        }
        function fromPairs(pairs) {
          var index2 = -1, length = pairs == null ? 0 : pairs.length, result2 = {};
          while (++index2 < length) {
            var pair = pairs[index2];
            result2[pair[0]] = pair[1];
          }
          return result2;
        }
        function head(array) {
          return array && array.length ? array[0] : undefined$1;
        }
        function indexOf(array, value, fromIndex) {
          var length = array == null ? 0 : array.length;
          if (!length) {
            return -1;
          }
          var index2 = fromIndex == null ? 0 : toInteger(fromIndex);
          if (index2 < 0) {
            index2 = nativeMax(length + index2, 0);
          }
          return baseIndexOf(array, value, index2);
        }
        function initial(array) {
          var length = array == null ? 0 : array.length;
          return length ? baseSlice(array, 0, -1) : [];
        }
        var intersection = baseRest(function(arrays) {
          var mapped = arrayMap2(arrays, castArrayLikeObject);
          return mapped.length && mapped[0] === arrays[0] ? baseIntersection(mapped) : [];
        });
        var intersectionBy = baseRest(function(arrays) {
          var iteratee2 = last(arrays), mapped = arrayMap2(arrays, castArrayLikeObject);
          if (iteratee2 === last(mapped)) {
            iteratee2 = undefined$1;
          } else {
            mapped.pop();
          }
          return mapped.length && mapped[0] === arrays[0] ? baseIntersection(mapped, getIteratee(iteratee2, 2)) : [];
        });
        var intersectionWith = baseRest(function(arrays) {
          var comparator = last(arrays), mapped = arrayMap2(arrays, castArrayLikeObject);
          comparator = typeof comparator == "function" ? comparator : undefined$1;
          if (comparator) {
            mapped.pop();
          }
          return mapped.length && mapped[0] === arrays[0] ? baseIntersection(mapped, undefined$1, comparator) : [];
        });
        function join(array, separator) {
          return array == null ? "" : nativeJoin.call(array, separator);
        }
        function last(array) {
          var length = array == null ? 0 : array.length;
          return length ? array[length - 1] : undefined$1;
        }
        function lastIndexOf(array, value, fromIndex) {
          var length = array == null ? 0 : array.length;
          if (!length) {
            return -1;
          }
          var index2 = length;
          if (fromIndex !== undefined$1) {
            index2 = toInteger(fromIndex);
            index2 = index2 < 0 ? nativeMax(length + index2, 0) : nativeMin(index2, length - 1);
          }
          return value === value ? strictLastIndexOf(array, value, index2) : baseFindIndex(array, baseIsNaN, index2, true);
        }
        function nth(array, n2) {
          return array && array.length ? baseNth(array, toInteger(n2)) : undefined$1;
        }
        var pull = baseRest(pullAll);
        function pullAll(array, values2) {
          return array && array.length && values2 && values2.length ? basePullAll(array, values2) : array;
        }
        function pullAllBy(array, values2, iteratee2) {
          return array && array.length && values2 && values2.length ? basePullAll(array, values2, getIteratee(iteratee2, 2)) : array;
        }
        function pullAllWith(array, values2, comparator) {
          return array && array.length && values2 && values2.length ? basePullAll(array, values2, undefined$1, comparator) : array;
        }
        var pullAt = flatRest(function(array, indexes) {
          var length = array == null ? 0 : array.length, result2 = baseAt(array, indexes);
          basePullAt(array, arrayMap2(indexes, function(index2) {
            return isIndex2(index2, length) ? +index2 : index2;
          }).sort(compareAscending));
          return result2;
        });
        function remove(array, predicate) {
          var result2 = [];
          if (!(array && array.length)) {
            return result2;
          }
          var index2 = -1, indexes = [], length = array.length;
          predicate = getIteratee(predicate, 3);
          while (++index2 < length) {
            var value = array[index2];
            if (predicate(value, index2, array)) {
              result2.push(value);
              indexes.push(index2);
            }
          }
          basePullAt(array, indexes);
          return result2;
        }
        function reverse(array) {
          return array == null ? array : nativeReverse.call(array);
        }
        function slice(array, start, end) {
          var length = array == null ? 0 : array.length;
          if (!length) {
            return [];
          }
          if (end && typeof end != "number" && isIterateeCall(array, start, end)) {
            start = 0;
            end = length;
          } else {
            start = start == null ? 0 : toInteger(start);
            end = end === undefined$1 ? length : toInteger(end);
          }
          return baseSlice(array, start, end);
        }
        function sortedIndex(array, value) {
          return baseSortedIndex(array, value);
        }
        function sortedIndexBy(array, value, iteratee2) {
          return baseSortedIndexBy(array, value, getIteratee(iteratee2, 2));
        }
        function sortedIndexOf(array, value) {
          var length = array == null ? 0 : array.length;
          if (length) {
            var index2 = baseSortedIndex(array, value);
            if (index2 < length && eq2(array[index2], value)) {
              return index2;
            }
          }
          return -1;
        }
        function sortedLastIndex(array, value) {
          return baseSortedIndex(array, value, true);
        }
        function sortedLastIndexBy(array, value, iteratee2) {
          return baseSortedIndexBy(array, value, getIteratee(iteratee2, 2), true);
        }
        function sortedLastIndexOf(array, value) {
          var length = array == null ? 0 : array.length;
          if (length) {
            var index2 = baseSortedIndex(array, value, true) - 1;
            if (eq2(array[index2], value)) {
              return index2;
            }
          }
          return -1;
        }
        function sortedUniq(array) {
          return array && array.length ? baseSortedUniq(array) : [];
        }
        function sortedUniqBy(array, iteratee2) {
          return array && array.length ? baseSortedUniq(array, getIteratee(iteratee2, 2)) : [];
        }
        function tail(array) {
          var length = array == null ? 0 : array.length;
          return length ? baseSlice(array, 1, length) : [];
        }
        function take(array, n2, guard) {
          if (!(array && array.length)) {
            return [];
          }
          n2 = guard || n2 === undefined$1 ? 1 : toInteger(n2);
          return baseSlice(array, 0, n2 < 0 ? 0 : n2);
        }
        function takeRight(array, n2, guard) {
          var length = array == null ? 0 : array.length;
          if (!length) {
            return [];
          }
          n2 = guard || n2 === undefined$1 ? 1 : toInteger(n2);
          n2 = length - n2;
          return baseSlice(array, n2 < 0 ? 0 : n2, length);
        }
        function takeRightWhile(array, predicate) {
          return array && array.length ? baseWhile(array, getIteratee(predicate, 3), false, true) : [];
        }
        function takeWhile(array, predicate) {
          return array && array.length ? baseWhile(array, getIteratee(predicate, 3)) : [];
        }
        var union = baseRest(function(arrays) {
          return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));
        });
        var unionBy = baseRest(function(arrays) {
          var iteratee2 = last(arrays);
          if (isArrayLikeObject(iteratee2)) {
            iteratee2 = undefined$1;
          }
          return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), getIteratee(iteratee2, 2));
        });
        var unionWith = baseRest(function(arrays) {
          var comparator = last(arrays);
          comparator = typeof comparator == "function" ? comparator : undefined$1;
          return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), undefined$1, comparator);
        });
        function uniq(array) {
          return array && array.length ? baseUniq(array) : [];
        }
        function uniqBy(array, iteratee2) {
          return array && array.length ? baseUniq(array, getIteratee(iteratee2, 2)) : [];
        }
        function uniqWith(array, comparator) {
          comparator = typeof comparator == "function" ? comparator : undefined$1;
          return array && array.length ? baseUniq(array, undefined$1, comparator) : [];
        }
        function unzip(array) {
          if (!(array && array.length)) {
            return [];
          }
          var length = 0;
          array = arrayFilter(array, function(group) {
            if (isArrayLikeObject(group)) {
              length = nativeMax(group.length, length);
              return true;
            }
          });
          return baseTimes(length, function(index2) {
            return arrayMap2(array, baseProperty(index2));
          });
        }
        function unzipWith(array, iteratee2) {
          if (!(array && array.length)) {
            return [];
          }
          var result2 = unzip(array);
          if (iteratee2 == null) {
            return result2;
          }
          return arrayMap2(result2, function(group) {
            return apply(iteratee2, undefined$1, group);
          });
        }
        var without = baseRest(function(array, values2) {
          return isArrayLikeObject(array) ? baseDifference(array, values2) : [];
        });
        var xor = baseRest(function(arrays) {
          return baseXor(arrayFilter(arrays, isArrayLikeObject));
        });
        var xorBy = baseRest(function(arrays) {
          var iteratee2 = last(arrays);
          if (isArrayLikeObject(iteratee2)) {
            iteratee2 = undefined$1;
          }
          return baseXor(arrayFilter(arrays, isArrayLikeObject), getIteratee(iteratee2, 2));
        });
        var xorWith = baseRest(function(arrays) {
          var comparator = last(arrays);
          comparator = typeof comparator == "function" ? comparator : undefined$1;
          return baseXor(arrayFilter(arrays, isArrayLikeObject), undefined$1, comparator);
        });
        var zip = baseRest(unzip);
        function zipObject(props, values2) {
          return baseZipObject(props || [], values2 || [], assignValue2);
        }
        function zipObjectDeep(props, values2) {
          return baseZipObject(props || [], values2 || [], baseSet2);
        }
        var zipWith = baseRest(function(arrays) {
          var length = arrays.length, iteratee2 = length > 1 ? arrays[length - 1] : undefined$1;
          iteratee2 = typeof iteratee2 == "function" ? (arrays.pop(), iteratee2) : undefined$1;
          return unzipWith(arrays, iteratee2);
        });
        function chain(value) {
          var result2 = lodash2(value);
          result2.__chain__ = true;
          return result2;
        }
        function tap(value, interceptor) {
          interceptor(value);
          return value;
        }
        function thru(value, interceptor) {
          return interceptor(value);
        }
        var wrapperAt = flatRest(function(paths) {
          var length = paths.length, start = length ? paths[0] : 0, value = this.__wrapped__, interceptor = function(object) {
            return baseAt(object, paths);
          };
          if (length > 1 || this.__actions__.length || !(value instanceof LazyWrapper) || !isIndex2(start)) {
            return this.thru(interceptor);
          }
          value = value.slice(start, +start + (length ? 1 : 0));
          value.__actions__.push({
            "func": thru,
            "args": [interceptor],
            "thisArg": undefined$1
          });
          return new LodashWrapper(value, this.__chain__).thru(function(array) {
            if (length && !array.length) {
              array.push(undefined$1);
            }
            return array;
          });
        });
        function wrapperChain() {
          return chain(this);
        }
        function wrapperCommit() {
          return new LodashWrapper(this.value(), this.__chain__);
        }
        function wrapperNext() {
          if (this.__values__ === undefined$1) {
            this.__values__ = toArray(this.value());
          }
          var done = this.__index__ >= this.__values__.length, value = done ? undefined$1 : this.__values__[this.__index__++];
          return { "done": done, "value": value };
        }
        function wrapperToIterator() {
          return this;
        }
        function wrapperPlant(value) {
          var result2, parent2 = this;
          while (parent2 instanceof baseLodash) {
            var clone2 = wrapperClone(parent2);
            clone2.__index__ = 0;
            clone2.__values__ = undefined$1;
            if (result2) {
              previous.__wrapped__ = clone2;
            } else {
              result2 = clone2;
            }
            var previous = clone2;
            parent2 = parent2.__wrapped__;
          }
          previous.__wrapped__ = value;
          return result2;
        }
        function wrapperReverse() {
          var value = this.__wrapped__;
          if (value instanceof LazyWrapper) {
            var wrapped = value;
            if (this.__actions__.length) {
              wrapped = new LazyWrapper(this);
            }
            wrapped = wrapped.reverse();
            wrapped.__actions__.push({
              "func": thru,
              "args": [reverse],
              "thisArg": undefined$1
            });
            return new LodashWrapper(wrapped, this.__chain__);
          }
          return this.thru(reverse);
        }
        function wrapperValue() {
          return baseWrapperValue(this.__wrapped__, this.__actions__);
        }
        var countBy = createAggregator(function(result2, value, key) {
          if (hasOwnProperty2.call(result2, key)) {
            ++result2[key];
          } else {
            baseAssignValue2(result2, key, 1);
          }
        });
        function every(collection, predicate, guard) {
          var func = isArray2(collection) ? arrayEvery : baseEvery;
          if (guard && isIterateeCall(collection, predicate, guard)) {
            predicate = undefined$1;
          }
          return func(collection, getIteratee(predicate, 3));
        }
        function filter(collection, predicate) {
          var func = isArray2(collection) ? arrayFilter : baseFilter;
          return func(collection, getIteratee(predicate, 3));
        }
        var find = createFind(findIndex);
        var findLast = createFind(findLastIndex);
        function flatMap(collection, iteratee2) {
          return baseFlatten(map(collection, iteratee2), 1);
        }
        function flatMapDeep(collection, iteratee2) {
          return baseFlatten(map(collection, iteratee2), INFINITY2);
        }
        function flatMapDepth(collection, iteratee2, depth) {
          depth = depth === undefined$1 ? 1 : toInteger(depth);
          return baseFlatten(map(collection, iteratee2), depth);
        }
        function forEach(collection, iteratee2) {
          var func = isArray2(collection) ? arrayEach : baseEach;
          return func(collection, getIteratee(iteratee2, 3));
        }
        function forEachRight(collection, iteratee2) {
          var func = isArray2(collection) ? arrayEachRight : baseEachRight;
          return func(collection, getIteratee(iteratee2, 3));
        }
        var groupBy = createAggregator(function(result2, value, key) {
          if (hasOwnProperty2.call(result2, key)) {
            result2[key].push(value);
          } else {
            baseAssignValue2(result2, key, [value]);
          }
        });
        function includes(collection, value, fromIndex, guard) {
          collection = isArrayLike(collection) ? collection : values(collection);
          fromIndex = fromIndex && !guard ? toInteger(fromIndex) : 0;
          var length = collection.length;
          if (fromIndex < 0) {
            fromIndex = nativeMax(length + fromIndex, 0);
          }
          return isString(collection) ? fromIndex <= length && collection.indexOf(value, fromIndex) > -1 : !!length && baseIndexOf(collection, value, fromIndex) > -1;
        }
        var invokeMap = baseRest(function(collection, path, args) {
          var index2 = -1, isFunc = typeof path == "function", result2 = isArrayLike(collection) ? Array2(collection.length) : [];
          baseEach(collection, function(value) {
            result2[++index2] = isFunc ? apply(path, value, args) : baseInvoke(value, path, args);
          });
          return result2;
        });
        var keyBy = createAggregator(function(result2, value, key) {
          baseAssignValue2(result2, key, value);
        });
        function map(collection, iteratee2) {
          var func = isArray2(collection) ? arrayMap2 : baseMap;
          return func(collection, getIteratee(iteratee2, 3));
        }
        function orderBy(collection, iteratees, orders, guard) {
          if (collection == null) {
            return [];
          }
          if (!isArray2(iteratees)) {
            iteratees = iteratees == null ? [] : [iteratees];
          }
          orders = guard ? undefined$1 : orders;
          if (!isArray2(orders)) {
            orders = orders == null ? [] : [orders];
          }
          return baseOrderBy(collection, iteratees, orders);
        }
        var partition = createAggregator(function(result2, value, key) {
          result2[key ? 0 : 1].push(value);
        }, function() {
          return [[], []];
        });
        function reduce(collection, iteratee2, accumulator) {
          var func = isArray2(collection) ? arrayReduce : baseReduce, initAccum = arguments.length < 3;
          return func(collection, getIteratee(iteratee2, 4), accumulator, initAccum, baseEach);
        }
        function reduceRight(collection, iteratee2, accumulator) {
          var func = isArray2(collection) ? arrayReduceRight : baseReduce, initAccum = arguments.length < 3;
          return func(collection, getIteratee(iteratee2, 4), accumulator, initAccum, baseEachRight);
        }
        function reject(collection, predicate) {
          var func = isArray2(collection) ? arrayFilter : baseFilter;
          return func(collection, negate(getIteratee(predicate, 3)));
        }
        function sample(collection) {
          var func = isArray2(collection) ? arraySample : baseSample;
          return func(collection);
        }
        function sampleSize(collection, n2, guard) {
          if (guard ? isIterateeCall(collection, n2, guard) : n2 === undefined$1) {
            n2 = 1;
          } else {
            n2 = toInteger(n2);
          }
          var func = isArray2(collection) ? arraySampleSize : baseSampleSize;
          return func(collection, n2);
        }
        function shuffle(collection) {
          var func = isArray2(collection) ? arrayShuffle : baseShuffle;
          return func(collection);
        }
        function size(collection) {
          if (collection == null) {
            return 0;
          }
          if (isArrayLike(collection)) {
            return isString(collection) ? stringSize(collection) : collection.length;
          }
          var tag = getTag(collection);
          if (tag == mapTag || tag == setTag) {
            return collection.size;
          }
          return baseKeys(collection).length;
        }
        function some(collection, predicate, guard) {
          var func = isArray2(collection) ? arraySome : baseSome;
          if (guard && isIterateeCall(collection, predicate, guard)) {
            predicate = undefined$1;
          }
          return func(collection, getIteratee(predicate, 3));
        }
        var sortBy = baseRest(function(collection, iteratees) {
          if (collection == null) {
            return [];
          }
          var length = iteratees.length;
          if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {
            iteratees = [];
          } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {
            iteratees = [iteratees[0]];
          }
          return baseOrderBy(collection, baseFlatten(iteratees, 1), []);
        });
        var now = ctxNow || function() {
          return root2.Date.now();
        };
        function after(n2, func) {
          if (typeof func != "function") {
            throw new TypeError2(FUNC_ERROR_TEXT2);
          }
          n2 = toInteger(n2);
          return function() {
            if (--n2 < 1) {
              return func.apply(this, arguments);
            }
          };
        }
        function ary(func, n2, guard) {
          n2 = guard ? undefined$1 : n2;
          n2 = func && n2 == null ? func.length : n2;
          return createWrap(func, WRAP_ARY_FLAG, undefined$1, undefined$1, undefined$1, undefined$1, n2);
        }
        function before(n2, func) {
          var result2;
          if (typeof func != "function") {
            throw new TypeError2(FUNC_ERROR_TEXT2);
          }
          n2 = toInteger(n2);
          return function() {
            if (--n2 > 0) {
              result2 = func.apply(this, arguments);
            }
            if (n2 <= 1) {
              func = undefined$1;
            }
            return result2;
          };
        }
        var bind = baseRest(function(func, thisArg, partials) {
          var bitmask = WRAP_BIND_FLAG;
          if (partials.length) {
            var holders = replaceHolders(partials, getHolder(bind));
            bitmask |= WRAP_PARTIAL_FLAG;
          }
          return createWrap(func, bitmask, thisArg, partials, holders);
        });
        var bindKey = baseRest(function(object, key, partials) {
          var bitmask = WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG;
          if (partials.length) {
            var holders = replaceHolders(partials, getHolder(bindKey));
            bitmask |= WRAP_PARTIAL_FLAG;
          }
          return createWrap(key, bitmask, object, partials, holders);
        });
        function curry(func, arity, guard) {
          arity = guard ? undefined$1 : arity;
          var result2 = createWrap(func, WRAP_CURRY_FLAG, undefined$1, undefined$1, undefined$1, undefined$1, undefined$1, arity);
          result2.placeholder = curry.placeholder;
          return result2;
        }
        function curryRight(func, arity, guard) {
          arity = guard ? undefined$1 : arity;
          var result2 = createWrap(func, WRAP_CURRY_RIGHT_FLAG, undefined$1, undefined$1, undefined$1, undefined$1, undefined$1, arity);
          result2.placeholder = curryRight.placeholder;
          return result2;
        }
        function debounce(func, wait, options) {
          var lastArgs, lastThis, maxWait, result2, timerId, lastCallTime, lastInvokeTime = 0, leading = false, maxing = false, trailing = true;
          if (typeof func != "function") {
            throw new TypeError2(FUNC_ERROR_TEXT2);
          }
          wait = toNumber(wait) || 0;
          if (isObject2(options)) {
            leading = !!options.leading;
            maxing = "maxWait" in options;
            maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
            trailing = "trailing" in options ? !!options.trailing : trailing;
          }
          function invokeFunc(time) {
            var args = lastArgs, thisArg = lastThis;
            lastArgs = lastThis = undefined$1;
            lastInvokeTime = time;
            result2 = func.apply(thisArg, args);
            return result2;
          }
          function leadingEdge(time) {
            lastInvokeTime = time;
            timerId = setTimeout2(timerExpired, wait);
            return leading ? invokeFunc(time) : result2;
          }
          function remainingWait(time) {
            var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime, timeWaiting = wait - timeSinceLastCall;
            return maxing ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;
          }
          function shouldInvoke(time) {
            var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime;
            return lastCallTime === undefined$1 || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;
          }
          function timerExpired() {
            var time = now();
            if (shouldInvoke(time)) {
              return trailingEdge(time);
            }
            timerId = setTimeout2(timerExpired, remainingWait(time));
          }
          function trailingEdge(time) {
            timerId = undefined$1;
            if (trailing && lastArgs) {
              return invokeFunc(time);
            }
            lastArgs = lastThis = undefined$1;
            return result2;
          }
          function cancel() {
            if (timerId !== undefined$1) {
              clearTimeout2(timerId);
            }
            lastInvokeTime = 0;
            lastArgs = lastCallTime = lastThis = timerId = undefined$1;
          }
          function flush() {
            return timerId === undefined$1 ? result2 : trailingEdge(now());
          }
          function debounced() {
            var time = now(), isInvoking = shouldInvoke(time);
            lastArgs = arguments;
            lastThis = this;
            lastCallTime = time;
            if (isInvoking) {
              if (timerId === undefined$1) {
                return leadingEdge(lastCallTime);
              }
              if (maxing) {
                clearTimeout2(timerId);
                timerId = setTimeout2(timerExpired, wait);
                return invokeFunc(lastCallTime);
              }
            }
            if (timerId === undefined$1) {
              timerId = setTimeout2(timerExpired, wait);
            }
            return result2;
          }
          debounced.cancel = cancel;
          debounced.flush = flush;
          return debounced;
        }
        var defer = baseRest(function(func, args) {
          return baseDelay(func, 1, args);
        });
        var delay = baseRest(function(func, wait, args) {
          return baseDelay(func, toNumber(wait) || 0, args);
        });
        function flip(func) {
          return createWrap(func, WRAP_FLIP_FLAG);
        }
        function memoize2(func, resolver) {
          if (typeof func != "function" || resolver != null && typeof resolver != "function") {
            throw new TypeError2(FUNC_ERROR_TEXT2);
          }
          var memoized = function() {
            var args = arguments, key = resolver ? resolver.apply(this, args) : args[0], cache = memoized.cache;
            if (cache.has(key)) {
              return cache.get(key);
            }
            var result2 = func.apply(this, args);
            memoized.cache = cache.set(key, result2) || cache;
            return result2;
          };
          memoized.cache = new (memoize2.Cache || MapCache2)();
          return memoized;
        }
        memoize2.Cache = MapCache2;
        function negate(predicate) {
          if (typeof predicate != "function") {
            throw new TypeError2(FUNC_ERROR_TEXT2);
          }
          return function() {
            var args = arguments;
            switch (args.length) {
              case 0:
                return !predicate.call(this);
              case 1:
                return !predicate.call(this, args[0]);
              case 2:
                return !predicate.call(this, args[0], args[1]);
              case 3:
                return !predicate.call(this, args[0], args[1], args[2]);
            }
            return !predicate.apply(this, args);
          };
        }
        function once(func) {
          return before(2, func);
        }
        var overArgs = castRest(function(func, transforms) {
          transforms = transforms.length == 1 && isArray2(transforms[0]) ? arrayMap2(transforms[0], baseUnary(getIteratee())) : arrayMap2(baseFlatten(transforms, 1), baseUnary(getIteratee()));
          var funcsLength = transforms.length;
          return baseRest(function(args) {
            var index2 = -1, length = nativeMin(args.length, funcsLength);
            while (++index2 < length) {
              args[index2] = transforms[index2].call(this, args[index2]);
            }
            return apply(func, this, args);
          });
        });
        var partial = baseRest(function(func, partials) {
          var holders = replaceHolders(partials, getHolder(partial));
          return createWrap(func, WRAP_PARTIAL_FLAG, undefined$1, partials, holders);
        });
        var partialRight = baseRest(function(func, partials) {
          var holders = replaceHolders(partials, getHolder(partialRight));
          return createWrap(func, WRAP_PARTIAL_RIGHT_FLAG, undefined$1, partials, holders);
        });
        var rearg = flatRest(function(func, indexes) {
          return createWrap(func, WRAP_REARG_FLAG, undefined$1, undefined$1, undefined$1, indexes);
        });
        function rest(func, start) {
          if (typeof func != "function") {
            throw new TypeError2(FUNC_ERROR_TEXT2);
          }
          start = start === undefined$1 ? start : toInteger(start);
          return baseRest(func, start);
        }
        function spread(func, start) {
          if (typeof func != "function") {
            throw new TypeError2(FUNC_ERROR_TEXT2);
          }
          start = start == null ? 0 : nativeMax(toInteger(start), 0);
          return baseRest(function(args) {
            var array = args[start], otherArgs = castSlice(args, 0, start);
            if (array) {
              arrayPush(otherArgs, array);
            }
            return apply(func, this, otherArgs);
          });
        }
        function throttle(func, wait, options) {
          var leading = true, trailing = true;
          if (typeof func != "function") {
            throw new TypeError2(FUNC_ERROR_TEXT2);
          }
          if (isObject2(options)) {
            leading = "leading" in options ? !!options.leading : leading;
            trailing = "trailing" in options ? !!options.trailing : trailing;
          }
          return debounce(func, wait, {
            "leading": leading,
            "maxWait": wait,
            "trailing": trailing
          });
        }
        function unary(func) {
          return ary(func, 1);
        }
        function wrap(value, wrapper) {
          return partial(castFunction(wrapper), value);
        }
        function castArray() {
          if (!arguments.length) {
            return [];
          }
          var value = arguments[0];
          return isArray2(value) ? value : [value];
        }
        function clone(value) {
          return baseClone(value, CLONE_SYMBOLS_FLAG);
        }
        function cloneWith(value, customizer) {
          customizer = typeof customizer == "function" ? customizer : undefined$1;
          return baseClone(value, CLONE_SYMBOLS_FLAG, customizer);
        }
        function cloneDeep(value) {
          return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);
        }
        function cloneDeepWith(value, customizer) {
          customizer = typeof customizer == "function" ? customizer : undefined$1;
          return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG, customizer);
        }
        function conformsTo(object, source) {
          return source == null || baseConformsTo(object, source, keys(source));
        }
        function eq2(value, other) {
          return value === other || value !== value && other !== other;
        }
        var gt = createRelationalOperation(baseGt);
        var gte = createRelationalOperation(function(value, other) {
          return value >= other;
        });
        var isArguments = baseIsArguments(function() {
          return arguments;
        }()) ? baseIsArguments : function(value) {
          return isObjectLike2(value) && hasOwnProperty2.call(value, "callee") && !propertyIsEnumerable.call(value, "callee");
        };
        var isArray2 = Array2.isArray;
        var isArrayBuffer = nodeIsArrayBuffer ? baseUnary(nodeIsArrayBuffer) : baseIsArrayBuffer;
        function isArrayLike(value) {
          return value != null && isLength(value.length) && !isFunction2(value);
        }
        function isArrayLikeObject(value) {
          return isObjectLike2(value) && isArrayLike(value);
        }
        function isBoolean(value) {
          return value === true || value === false || isObjectLike2(value) && baseGetTag2(value) == boolTag;
        }
        var isBuffer = nativeIsBuffer || stubFalse;
        var isDate = nodeIsDate ? baseUnary(nodeIsDate) : baseIsDate;
        function isElement(value) {
          return isObjectLike2(value) && value.nodeType === 1 && !isPlainObject(value);
        }
        function isEmpty(value) {
          if (value == null) {
            return true;
          }
          if (isArrayLike(value) && (isArray2(value) || typeof value == "string" || typeof value.splice == "function" || isBuffer(value) || isTypedArray(value) || isArguments(value))) {
            return !value.length;
          }
          var tag = getTag(value);
          if (tag == mapTag || tag == setTag) {
            return !value.size;
          }
          if (isPrototype(value)) {
            return !baseKeys(value).length;
          }
          for (var key in value) {
            if (hasOwnProperty2.call(value, key)) {
              return false;
            }
          }
          return true;
        }
        function isEqual(value, other) {
          return baseIsEqual(value, other);
        }
        function isEqualWith(value, other, customizer) {
          customizer = typeof customizer == "function" ? customizer : undefined$1;
          var result2 = customizer ? customizer(value, other) : undefined$1;
          return result2 === undefined$1 ? baseIsEqual(value, other, undefined$1, customizer) : !!result2;
        }
        function isError(value) {
          if (!isObjectLike2(value)) {
            return false;
          }
          var tag = baseGetTag2(value);
          return tag == errorTag || tag == domExcTag || typeof value.message == "string" && typeof value.name == "string" && !isPlainObject(value);
        }
        function isFinite(value) {
          return typeof value == "number" && nativeIsFinite(value);
        }
        function isFunction2(value) {
          if (!isObject2(value)) {
            return false;
          }
          var tag = baseGetTag2(value);
          return tag == funcTag2 || tag == genTag2 || tag == asyncTag2 || tag == proxyTag2;
        }
        function isInteger(value) {
          return typeof value == "number" && value == toInteger(value);
        }
        function isLength(value) {
          return typeof value == "number" && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER2;
        }
        function isObject2(value) {
          var type = typeof value;
          return value != null && (type == "object" || type == "function");
        }
        function isObjectLike2(value) {
          return value != null && typeof value == "object";
        }
        var isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;
        function isMatch(object, source) {
          return object === source || baseIsMatch(object, source, getMatchData(source));
        }
        function isMatchWith(object, source, customizer) {
          customizer = typeof customizer == "function" ? customizer : undefined$1;
          return baseIsMatch(object, source, getMatchData(source), customizer);
        }
        function isNaN2(value) {
          return isNumber(value) && value != +value;
        }
        function isNative(value) {
          if (isMaskable(value)) {
            throw new Error2(CORE_ERROR_TEXT);
          }
          return baseIsNative2(value);
        }
        function isNull(value) {
          return value === null;
        }
        function isNil(value) {
          return value == null;
        }
        function isNumber(value) {
          return typeof value == "number" || isObjectLike2(value) && baseGetTag2(value) == numberTag;
        }
        function isPlainObject(value) {
          if (!isObjectLike2(value) || baseGetTag2(value) != objectTag) {
            return false;
          }
          var proto = getPrototype(value);
          if (proto === null) {
            return true;
          }
          var Ctor = hasOwnProperty2.call(proto, "constructor") && proto.constructor;
          return typeof Ctor == "function" && Ctor instanceof Ctor && funcToString2.call(Ctor) == objectCtorString;
        }
        var isRegExp = nodeIsRegExp ? baseUnary(nodeIsRegExp) : baseIsRegExp;
        function isSafeInteger(value) {
          return isInteger(value) && value >= -MAX_SAFE_INTEGER2 && value <= MAX_SAFE_INTEGER2;
        }
        var isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;
        function isString(value) {
          return typeof value == "string" || !isArray2(value) && isObjectLike2(value) && baseGetTag2(value) == stringTag;
        }
        function isSymbol2(value) {
          return typeof value == "symbol" || isObjectLike2(value) && baseGetTag2(value) == symbolTag2;
        }
        var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;
        function isUndefined(value) {
          return value === undefined$1;
        }
        function isWeakMap(value) {
          return isObjectLike2(value) && getTag(value) == weakMapTag;
        }
        function isWeakSet(value) {
          return isObjectLike2(value) && baseGetTag2(value) == weakSetTag;
        }
        var lt = createRelationalOperation(baseLt);
        var lte = createRelationalOperation(function(value, other) {
          return value <= other;
        });
        function toArray(value) {
          if (!value) {
            return [];
          }
          if (isArrayLike(value)) {
            return isString(value) ? stringToArray(value) : copyArray(value);
          }
          if (symIterator && value[symIterator]) {
            return iteratorToArray(value[symIterator]());
          }
          var tag = getTag(value), func = tag == mapTag ? mapToArray : tag == setTag ? setToArray : values;
          return func(value);
        }
        function toFinite(value) {
          if (!value) {
            return value === 0 ? value : 0;
          }
          value = toNumber(value);
          if (value === INFINITY2 || value === -INFINITY2) {
            var sign = value < 0 ? -1 : 1;
            return sign * MAX_INTEGER;
          }
          return value === value ? value : 0;
        }
        function toInteger(value) {
          var result2 = toFinite(value), remainder = result2 % 1;
          return result2 === result2 ? remainder ? result2 - remainder : result2 : 0;
        }
        function toLength(value) {
          return value ? baseClamp(toInteger(value), 0, MAX_ARRAY_LENGTH) : 0;
        }
        function toNumber(value) {
          if (typeof value == "number") {
            return value;
          }
          if (isSymbol2(value)) {
            return NAN;
          }
          if (isObject2(value)) {
            var other = typeof value.valueOf == "function" ? value.valueOf() : value;
            value = isObject2(other) ? other + "" : other;
          }
          if (typeof value != "string") {
            return value === 0 ? value : +value;
          }
          value = baseTrim(value);
          var isBinary = reIsBinary.test(value);
          return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;
        }
        function toPlainObject(value) {
          return copyObject(value, keysIn(value));
        }
        function toSafeInteger(value) {
          return value ? baseClamp(toInteger(value), -MAX_SAFE_INTEGER2, MAX_SAFE_INTEGER2) : value === 0 ? value : 0;
        }
        function toString2(value) {
          return value == null ? "" : baseToString2(value);
        }
        var assign = createAssigner(function(object, source) {
          if (isPrototype(source) || isArrayLike(source)) {
            copyObject(source, keys(source), object);
            return;
          }
          for (var key in source) {
            if (hasOwnProperty2.call(source, key)) {
              assignValue2(object, key, source[key]);
            }
          }
        });
        var assignIn = createAssigner(function(object, source) {
          copyObject(source, keysIn(source), object);
        });
        var assignInWith = createAssigner(function(object, source, srcIndex, customizer) {
          copyObject(source, keysIn(source), object, customizer);
        });
        var assignWith = createAssigner(function(object, source, srcIndex, customizer) {
          copyObject(source, keys(source), object, customizer);
        });
        var at = flatRest(baseAt);
        function create(prototype, properties) {
          var result2 = baseCreate(prototype);
          return properties == null ? result2 : baseAssign(result2, properties);
        }
        var defaults = baseRest(function(object, sources) {
          object = Object2(object);
          var index2 = -1;
          var length = sources.length;
          var guard = length > 2 ? sources[2] : undefined$1;
          if (guard && isIterateeCall(sources[0], sources[1], guard)) {
            length = 1;
          }
          while (++index2 < length) {
            var source = sources[index2];
            var props = keysIn(source);
            var propsIndex = -1;
            var propsLength = props.length;
            while (++propsIndex < propsLength) {
              var key = props[propsIndex];
              var value = object[key];
              if (value === undefined$1 || eq2(value, objectProto2[key]) && !hasOwnProperty2.call(object, key)) {
                object[key] = source[key];
              }
            }
          }
          return object;
        });
        var defaultsDeep = baseRest(function(args) {
          args.push(undefined$1, customDefaultsMerge);
          return apply(mergeWith, undefined$1, args);
        });
        function findKey(object, predicate) {
          return baseFindKey(object, getIteratee(predicate, 3), baseForOwn);
        }
        function findLastKey(object, predicate) {
          return baseFindKey(object, getIteratee(predicate, 3), baseForOwnRight);
        }
        function forIn(object, iteratee2) {
          return object == null ? object : baseFor(object, getIteratee(iteratee2, 3), keysIn);
        }
        function forInRight(object, iteratee2) {
          return object == null ? object : baseForRight(object, getIteratee(iteratee2, 3), keysIn);
        }
        function forOwn(object, iteratee2) {
          return object && baseForOwn(object, getIteratee(iteratee2, 3));
        }
        function forOwnRight(object, iteratee2) {
          return object && baseForOwnRight(object, getIteratee(iteratee2, 3));
        }
        function functions(object) {
          return object == null ? [] : baseFunctions(object, keys(object));
        }
        function functionsIn(object) {
          return object == null ? [] : baseFunctions(object, keysIn(object));
        }
        function get(object, path, defaultValue) {
          var result2 = object == null ? undefined$1 : baseGet(object, path);
          return result2 === undefined$1 ? defaultValue : result2;
        }
        function has(object, path) {
          return object != null && hasPath(object, path, baseHas);
        }
        function hasIn(object, path) {
          return object != null && hasPath(object, path, baseHasIn);
        }
        var invert = createInverter(function(result2, value, key) {
          if (value != null && typeof value.toString != "function") {
            value = nativeObjectToString2.call(value);
          }
          result2[value] = key;
        }, constant(identity));
        var invertBy = createInverter(function(result2, value, key) {
          if (value != null && typeof value.toString != "function") {
            value = nativeObjectToString2.call(value);
          }
          if (hasOwnProperty2.call(result2, value)) {
            result2[value].push(key);
          } else {
            result2[value] = [key];
          }
        }, getIteratee);
        var invoke = baseRest(baseInvoke);
        function keys(object) {
          return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);
        }
        function keysIn(object) {
          return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);
        }
        function mapKeys(object, iteratee2) {
          var result2 = {};
          iteratee2 = getIteratee(iteratee2, 3);
          baseForOwn(object, function(value, key, object2) {
            baseAssignValue2(result2, iteratee2(value, key, object2), value);
          });
          return result2;
        }
        function mapValues(object, iteratee2) {
          var result2 = {};
          iteratee2 = getIteratee(iteratee2, 3);
          baseForOwn(object, function(value, key, object2) {
            baseAssignValue2(result2, key, iteratee2(value, key, object2));
          });
          return result2;
        }
        var merge = createAssigner(function(object, source, srcIndex) {
          baseMerge(object, source, srcIndex);
        });
        var mergeWith = createAssigner(function(object, source, srcIndex, customizer) {
          baseMerge(object, source, srcIndex, customizer);
        });
        var omit = flatRest(function(object, paths) {
          var result2 = {};
          if (object == null) {
            return result2;
          }
          var isDeep = false;
          paths = arrayMap2(paths, function(path) {
            path = castPath2(path, object);
            isDeep || (isDeep = path.length > 1);
            return path;
          });
          copyObject(object, getAllKeysIn(object), result2);
          if (isDeep) {
            result2 = baseClone(result2, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);
          }
          var length = paths.length;
          while (length--) {
            baseUnset(result2, paths[length]);
          }
          return result2;
        });
        function omitBy(object, predicate) {
          return pickBy(object, negate(getIteratee(predicate)));
        }
        var pick = flatRest(function(object, paths) {
          return object == null ? {} : basePick(object, paths);
        });
        function pickBy(object, predicate) {
          if (object == null) {
            return {};
          }
          var props = arrayMap2(getAllKeysIn(object), function(prop) {
            return [prop];
          });
          predicate = getIteratee(predicate);
          return basePickBy(object, props, function(value, path) {
            return predicate(value, path[0]);
          });
        }
        function result(object, path, defaultValue) {
          path = castPath2(path, object);
          var index2 = -1, length = path.length;
          if (!length) {
            length = 1;
            object = undefined$1;
          }
          while (++index2 < length) {
            var value = object == null ? undefined$1 : object[toKey2(path[index2])];
            if (value === undefined$1) {
              index2 = length;
              value = defaultValue;
            }
            object = isFunction2(value) ? value.call(object) : value;
          }
          return object;
        }
        function set2(object, path, value) {
          return object == null ? object : baseSet2(object, path, value);
        }
        function setWith(object, path, value, customizer) {
          customizer = typeof customizer == "function" ? customizer : undefined$1;
          return object == null ? object : baseSet2(object, path, value, customizer);
        }
        var toPairs = createToPairs(keys);
        var toPairsIn = createToPairs(keysIn);
        function transform(object, iteratee2, accumulator) {
          var isArr = isArray2(object), isArrLike = isArr || isBuffer(object) || isTypedArray(object);
          iteratee2 = getIteratee(iteratee2, 4);
          if (accumulator == null) {
            var Ctor = object && object.constructor;
            if (isArrLike) {
              accumulator = isArr ? new Ctor() : [];
            } else if (isObject2(object)) {
              accumulator = isFunction2(Ctor) ? baseCreate(getPrototype(object)) : {};
            } else {
              accumulator = {};
            }
          }
          (isArrLike ? arrayEach : baseForOwn)(object, function(value, index2, object2) {
            return iteratee2(accumulator, value, index2, object2);
          });
          return accumulator;
        }
        function unset(object, path) {
          return object == null ? true : baseUnset(object, path);
        }
        function update(object, path, updater) {
          return object == null ? object : baseUpdate(object, path, castFunction(updater));
        }
        function updateWith(object, path, updater, customizer) {
          customizer = typeof customizer == "function" ? customizer : undefined$1;
          return object == null ? object : baseUpdate(object, path, castFunction(updater), customizer);
        }
        function values(object) {
          return object == null ? [] : baseValues(object, keys(object));
        }
        function valuesIn(object) {
          return object == null ? [] : baseValues(object, keysIn(object));
        }
        function clamp(number, lower, upper) {
          if (upper === undefined$1) {
            upper = lower;
            lower = undefined$1;
          }
          if (upper !== undefined$1) {
            upper = toNumber(upper);
            upper = upper === upper ? upper : 0;
          }
          if (lower !== undefined$1) {
            lower = toNumber(lower);
            lower = lower === lower ? lower : 0;
          }
          return baseClamp(toNumber(number), lower, upper);
        }
        function inRange(number, start, end) {
          start = toFinite(start);
          if (end === undefined$1) {
            end = start;
            start = 0;
          } else {
            end = toFinite(end);
          }
          number = toNumber(number);
          return baseInRange(number, start, end);
        }
        function random(lower, upper, floating) {
          if (floating && typeof floating != "boolean" && isIterateeCall(lower, upper, floating)) {
            upper = floating = undefined$1;
          }
          if (floating === undefined$1) {
            if (typeof upper == "boolean") {
              floating = upper;
              upper = undefined$1;
            } else if (typeof lower == "boolean") {
              floating = lower;
              lower = undefined$1;
            }
          }
          if (lower === undefined$1 && upper === undefined$1) {
            lower = 0;
            upper = 1;
          } else {
            lower = toFinite(lower);
            if (upper === undefined$1) {
              upper = lower;
              lower = 0;
            } else {
              upper = toFinite(upper);
            }
          }
          if (lower > upper) {
            var temp = lower;
            lower = upper;
            upper = temp;
          }
          if (floating || lower % 1 || upper % 1) {
            var rand = nativeRandom();
            return nativeMin(lower + rand * (upper - lower + freeParseFloat("1e-" + ((rand + "").length - 1))), upper);
          }
          return baseRandom(lower, upper);
        }
        var camelCase = createCompounder(function(result2, word, index2) {
          word = word.toLowerCase();
          return result2 + (index2 ? capitalize(word) : word);
        });
        function capitalize(string) {
          return upperFirst(toString2(string).toLowerCase());
        }
        function deburr(string) {
          string = toString2(string);
          return string && string.replace(reLatin, deburrLetter).replace(reComboMark, "");
        }
        function endsWith(string, target, position) {
          string = toString2(string);
          target = baseToString2(target);
          var length = string.length;
          position = position === undefined$1 ? length : baseClamp(toInteger(position), 0, length);
          var end = position;
          position -= target.length;
          return position >= 0 && string.slice(position, end) == target;
        }
        function escape2(string) {
          string = toString2(string);
          return string && reHasUnescapedHtml.test(string) ? string.replace(reUnescapedHtml, escapeHtmlChar) : string;
        }
        function escapeRegExp(string) {
          string = toString2(string);
          return string && reHasRegExpChar.test(string) ? string.replace(reRegExpChar2, "\\$&") : string;
        }
        var kebabCase = createCompounder(function(result2, word, index2) {
          return result2 + (index2 ? "-" : "") + word.toLowerCase();
        });
        var lowerCase = createCompounder(function(result2, word, index2) {
          return result2 + (index2 ? " " : "") + word.toLowerCase();
        });
        var lowerFirst = createCaseFirst("toLowerCase");
        function pad(string, length, chars) {
          string = toString2(string);
          length = toInteger(length);
          var strLength = length ? stringSize(string) : 0;
          if (!length || strLength >= length) {
            return string;
          }
          var mid = (length - strLength) / 2;
          return createPadding(nativeFloor(mid), chars) + string + createPadding(nativeCeil(mid), chars);
        }
        function padEnd(string, length, chars) {
          string = toString2(string);
          length = toInteger(length);
          var strLength = length ? stringSize(string) : 0;
          return length && strLength < length ? string + createPadding(length - strLength, chars) : string;
        }
        function padStart(string, length, chars) {
          string = toString2(string);
          length = toInteger(length);
          var strLength = length ? stringSize(string) : 0;
          return length && strLength < length ? createPadding(length - strLength, chars) + string : string;
        }
        function parseInt2(string, radix, guard) {
          if (guard || radix == null) {
            radix = 0;
          } else if (radix) {
            radix = +radix;
          }
          return nativeParseInt(toString2(string).replace(reTrimStart, ""), radix || 0);
        }
        function repeat(string, n2, guard) {
          if (guard ? isIterateeCall(string, n2, guard) : n2 === undefined$1) {
            n2 = 1;
          } else {
            n2 = toInteger(n2);
          }
          return baseRepeat(toString2(string), n2);
        }
        function replace() {
          var args = arguments, string = toString2(args[0]);
          return args.length < 3 ? string : string.replace(args[1], args[2]);
        }
        var snakeCase = createCompounder(function(result2, word, index2) {
          return result2 + (index2 ? "_" : "") + word.toLowerCase();
        });
        function split(string, separator, limit) {
          if (limit && typeof limit != "number" && isIterateeCall(string, separator, limit)) {
            separator = limit = undefined$1;
          }
          limit = limit === undefined$1 ? MAX_ARRAY_LENGTH : limit >>> 0;
          if (!limit) {
            return [];
          }
          string = toString2(string);
          if (string && (typeof separator == "string" || separator != null && !isRegExp(separator))) {
            separator = baseToString2(separator);
            if (!separator && hasUnicode(string)) {
              return castSlice(stringToArray(string), 0, limit);
            }
          }
          return string.split(separator, limit);
        }
        var startCase = createCompounder(function(result2, word, index2) {
          return result2 + (index2 ? " " : "") + upperFirst(word);
        });
        function startsWith(string, target, position) {
          string = toString2(string);
          position = position == null ? 0 : baseClamp(toInteger(position), 0, string.length);
          target = baseToString2(target);
          return string.slice(position, position + target.length) == target;
        }
        function template(string, options, guard) {
          var settings = lodash2.templateSettings;
          if (guard && isIterateeCall(string, options, guard)) {
            options = undefined$1;
          }
          string = toString2(string);
          options = assignInWith({}, options, settings, customDefaultsAssignIn);
          var imports = assignInWith({}, options.imports, settings.imports, customDefaultsAssignIn), importsKeys = keys(imports), importsValues = baseValues(imports, importsKeys);
          var isEscaping, isEvaluating, index2 = 0, interpolate = options.interpolate || reNoMatch, source = "__p += '";
          var reDelimiters = RegExp2(
            (options.escape || reNoMatch).source + "|" + interpolate.source + "|" + (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + "|" + (options.evaluate || reNoMatch).source + "|$",
            "g"
          );
          var sourceURL = "//# sourceURL=" + (hasOwnProperty2.call(options, "sourceURL") ? (options.sourceURL + "").replace(/\s/g, " ") : "lodash.templateSources[" + ++templateCounter + "]") + "\n";
          string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {
            interpolateValue || (interpolateValue = esTemplateValue);
            source += string.slice(index2, offset).replace(reUnescapedString, escapeStringChar);
            if (escapeValue) {
              isEscaping = true;
              source += "' +\n__e(" + escapeValue + ") +\n'";
            }
            if (evaluateValue) {
              isEvaluating = true;
              source += "';\n" + evaluateValue + ";\n__p += '";
            }
            if (interpolateValue) {
              source += "' +\n((__t = (" + interpolateValue + ")) == null ? '' : __t) +\n'";
            }
            index2 = offset + match.length;
            return match;
          });
          source += "';\n";
          var variable = hasOwnProperty2.call(options, "variable") && options.variable;
          if (!variable) {
            source = "with (obj) {\n" + source + "\n}\n";
          } else if (reForbiddenIdentifierChars.test(variable)) {
            throw new Error2(INVALID_TEMPL_VAR_ERROR_TEXT);
          }
          source = (isEvaluating ? source.replace(reEmptyStringLeading, "") : source).replace(reEmptyStringMiddle, "$1").replace(reEmptyStringTrailing, "$1;");
          source = "function(" + (variable || "obj") + ") {\n" + (variable ? "" : "obj || (obj = {});\n") + "var __t, __p = ''" + (isEscaping ? ", __e = _.escape" : "") + (isEvaluating ? ", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n" : ";\n") + source + "return __p\n}";
          var result2 = attempt(function() {
            return Function2(importsKeys, sourceURL + "return " + source).apply(undefined$1, importsValues);
          });
          result2.source = source;
          if (isError(result2)) {
            throw result2;
          }
          return result2;
        }
        function toLower(value) {
          return toString2(value).toLowerCase();
        }
        function toUpper(value) {
          return toString2(value).toUpperCase();
        }
        function trim(string, chars, guard) {
          string = toString2(string);
          if (string && (guard || chars === undefined$1)) {
            return baseTrim(string);
          }
          if (!string || !(chars = baseToString2(chars))) {
            return string;
          }
          var strSymbols = stringToArray(string), chrSymbols = stringToArray(chars), start = charsStartIndex(strSymbols, chrSymbols), end = charsEndIndex(strSymbols, chrSymbols) + 1;
          return castSlice(strSymbols, start, end).join("");
        }
        function trimEnd(string, chars, guard) {
          string = toString2(string);
          if (string && (guard || chars === undefined$1)) {
            return string.slice(0, trimmedEndIndex(string) + 1);
          }
          if (!string || !(chars = baseToString2(chars))) {
            return string;
          }
          var strSymbols = stringToArray(string), end = charsEndIndex(strSymbols, stringToArray(chars)) + 1;
          return castSlice(strSymbols, 0, end).join("");
        }
        function trimStart(string, chars, guard) {
          string = toString2(string);
          if (string && (guard || chars === undefined$1)) {
            return string.replace(reTrimStart, "");
          }
          if (!string || !(chars = baseToString2(chars))) {
            return string;
          }
          var strSymbols = stringToArray(string), start = charsStartIndex(strSymbols, stringToArray(chars));
          return castSlice(strSymbols, start).join("");
        }
        function truncate(string, options) {
          var length = DEFAULT_TRUNC_LENGTH, omission = DEFAULT_TRUNC_OMISSION;
          if (isObject2(options)) {
            var separator = "separator" in options ? options.separator : separator;
            length = "length" in options ? toInteger(options.length) : length;
            omission = "omission" in options ? baseToString2(options.omission) : omission;
          }
          string = toString2(string);
          var strLength = string.length;
          if (hasUnicode(string)) {
            var strSymbols = stringToArray(string);
            strLength = strSymbols.length;
          }
          if (length >= strLength) {
            return string;
          }
          var end = length - stringSize(omission);
          if (end < 1) {
            return omission;
          }
          var result2 = strSymbols ? castSlice(strSymbols, 0, end).join("") : string.slice(0, end);
          if (separator === undefined$1) {
            return result2 + omission;
          }
          if (strSymbols) {
            end += result2.length - end;
          }
          if (isRegExp(separator)) {
            if (string.slice(end).search(separator)) {
              var match, substring = result2;
              if (!separator.global) {
                separator = RegExp2(separator.source, toString2(reFlags.exec(separator)) + "g");
              }
              separator.lastIndex = 0;
              while (match = separator.exec(substring)) {
                var newEnd = match.index;
              }
              result2 = result2.slice(0, newEnd === undefined$1 ? end : newEnd);
            }
          } else if (string.indexOf(baseToString2(separator), end) != end) {
            var index2 = result2.lastIndexOf(separator);
            if (index2 > -1) {
              result2 = result2.slice(0, index2);
            }
          }
          return result2 + omission;
        }
        function unescape(string) {
          string = toString2(string);
          return string && reHasEscapedHtml.test(string) ? string.replace(reEscapedHtml, unescapeHtmlChar) : string;
        }
        var upperCase = createCompounder(function(result2, word, index2) {
          return result2 + (index2 ? " " : "") + word.toUpperCase();
        });
        var upperFirst = createCaseFirst("toUpperCase");
        function words(string, pattern, guard) {
          string = toString2(string);
          pattern = guard ? undefined$1 : pattern;
          if (pattern === undefined$1) {
            return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);
          }
          return string.match(pattern) || [];
        }
        var attempt = baseRest(function(func, args) {
          try {
            return apply(func, undefined$1, args);
          } catch (e) {
            return isError(e) ? e : new Error2(e);
          }
        });
        var bindAll = flatRest(function(object, methodNames) {
          arrayEach(methodNames, function(key) {
            key = toKey2(key);
            baseAssignValue2(object, key, bind(object[key], object));
          });
          return object;
        });
        function cond(pairs) {
          var length = pairs == null ? 0 : pairs.length, toIteratee = getIteratee();
          pairs = !length ? [] : arrayMap2(pairs, function(pair) {
            if (typeof pair[1] != "function") {
              throw new TypeError2(FUNC_ERROR_TEXT2);
            }
            return [toIteratee(pair[0]), pair[1]];
          });
          return baseRest(function(args) {
            var index2 = -1;
            while (++index2 < length) {
              var pair = pairs[index2];
              if (apply(pair[0], this, args)) {
                return apply(pair[1], this, args);
              }
            }
          });
        }
        function conforms(source) {
          return baseConforms(baseClone(source, CLONE_DEEP_FLAG));
        }
        function constant(value) {
          return function() {
            return value;
          };
        }
        function defaultTo(value, defaultValue) {
          return value == null || value !== value ? defaultValue : value;
        }
        var flow = createFlow();
        var flowRight = createFlow(true);
        function identity(value) {
          return value;
        }
        function iteratee(func) {
          return baseIteratee(typeof func == "function" ? func : baseClone(func, CLONE_DEEP_FLAG));
        }
        function matches(source) {
          return baseMatches(baseClone(source, CLONE_DEEP_FLAG));
        }
        function matchesProperty(path, srcValue) {
          return baseMatchesProperty(path, baseClone(srcValue, CLONE_DEEP_FLAG));
        }
        var method = baseRest(function(path, args) {
          return function(object) {
            return baseInvoke(object, path, args);
          };
        });
        var methodOf = baseRest(function(object, args) {
          return function(path) {
            return baseInvoke(object, path, args);
          };
        });
        function mixin(object, source, options) {
          var props = keys(source), methodNames = baseFunctions(source, props);
          if (options == null && !(isObject2(source) && (methodNames.length || !props.length))) {
            options = source;
            source = object;
            object = this;
            methodNames = baseFunctions(source, keys(source));
          }
          var chain2 = !(isObject2(options) && "chain" in options) || !!options.chain, isFunc = isFunction2(object);
          arrayEach(methodNames, function(methodName) {
            var func = source[methodName];
            object[methodName] = func;
            if (isFunc) {
              object.prototype[methodName] = function() {
                var chainAll = this.__chain__;
                if (chain2 || chainAll) {
                  var result2 = object(this.__wrapped__), actions = result2.__actions__ = copyArray(this.__actions__);
                  actions.push({ "func": func, "args": arguments, "thisArg": object });
                  result2.__chain__ = chainAll;
                  return result2;
                }
                return func.apply(object, arrayPush([this.value()], arguments));
              };
            }
          });
          return object;
        }
        function noConflict() {
          if (root2._ === this) {
            root2._ = oldDash;
          }
          return this;
        }
        function noop() {
        }
        function nthArg(n2) {
          n2 = toInteger(n2);
          return baseRest(function(args) {
            return baseNth(args, n2);
          });
        }
        var over = createOver(arrayMap2);
        var overEvery = createOver(arrayEvery);
        var overSome = createOver(arraySome);
        function property(path) {
          return isKey2(path) ? baseProperty(toKey2(path)) : basePropertyDeep(path);
        }
        function propertyOf(object) {
          return function(path) {
            return object == null ? undefined$1 : baseGet(object, path);
          };
        }
        var range = createRange();
        var rangeRight = createRange(true);
        function stubArray() {
          return [];
        }
        function stubFalse() {
          return false;
        }
        function stubObject() {
          return {};
        }
        function stubString() {
          return "";
        }
        function stubTrue() {
          return true;
        }
        function times(n2, iteratee2) {
          n2 = toInteger(n2);
          if (n2 < 1 || n2 > MAX_SAFE_INTEGER2) {
            return [];
          }
          var index2 = MAX_ARRAY_LENGTH, length = nativeMin(n2, MAX_ARRAY_LENGTH);
          iteratee2 = getIteratee(iteratee2);
          n2 -= MAX_ARRAY_LENGTH;
          var result2 = baseTimes(length, iteratee2);
          while (++index2 < n2) {
            iteratee2(index2);
          }
          return result2;
        }
        function toPath(value) {
          if (isArray2(value)) {
            return arrayMap2(value, toKey2);
          }
          return isSymbol2(value) ? [value] : copyArray(stringToPath2(toString2(value)));
        }
        function uniqueId(prefix) {
          var id2 = ++idCounter;
          return toString2(prefix) + id2;
        }
        var add = createMathOperation(function(augend, addend) {
          return augend + addend;
        }, 0);
        var ceil = createRound("ceil");
        var divide = createMathOperation(function(dividend, divisor) {
          return dividend / divisor;
        }, 1);
        var floor = createRound("floor");
        function max(array) {
          return array && array.length ? baseExtremum(array, identity, baseGt) : undefined$1;
        }
        function maxBy(array, iteratee2) {
          return array && array.length ? baseExtremum(array, getIteratee(iteratee2, 2), baseGt) : undefined$1;
        }
        function mean(array) {
          return baseMean(array, identity);
        }
        function meanBy(array, iteratee2) {
          return baseMean(array, getIteratee(iteratee2, 2));
        }
        function min(array) {
          return array && array.length ? baseExtremum(array, identity, baseLt) : undefined$1;
        }
        function minBy(array, iteratee2) {
          return array && array.length ? baseExtremum(array, getIteratee(iteratee2, 2), baseLt) : undefined$1;
        }
        var multiply = createMathOperation(function(multiplier, multiplicand) {
          return multiplier * multiplicand;
        }, 1);
        var round = createRound("round");
        var subtract = createMathOperation(function(minuend, subtrahend) {
          return minuend - subtrahend;
        }, 0);
        function sum(array) {
          return array && array.length ? baseSum(array, identity) : 0;
        }
        function sumBy(array, iteratee2) {
          return array && array.length ? baseSum(array, getIteratee(iteratee2, 2)) : 0;
        }
        lodash2.after = after;
        lodash2.ary = ary;
        lodash2.assign = assign;
        lodash2.assignIn = assignIn;
        lodash2.assignInWith = assignInWith;
        lodash2.assignWith = assignWith;
        lodash2.at = at;
        lodash2.before = before;
        lodash2.bind = bind;
        lodash2.bindAll = bindAll;
        lodash2.bindKey = bindKey;
        lodash2.castArray = castArray;
        lodash2.chain = chain;
        lodash2.chunk = chunk;
        lodash2.compact = compact;
        lodash2.concat = concat;
        lodash2.cond = cond;
        lodash2.conforms = conforms;
        lodash2.constant = constant;
        lodash2.countBy = countBy;
        lodash2.create = create;
        lodash2.curry = curry;
        lodash2.curryRight = curryRight;
        lodash2.debounce = debounce;
        lodash2.defaults = defaults;
        lodash2.defaultsDeep = defaultsDeep;
        lodash2.defer = defer;
        lodash2.delay = delay;
        lodash2.difference = difference;
        lodash2.differenceBy = differenceBy;
        lodash2.differenceWith = differenceWith;
        lodash2.drop = drop;
        lodash2.dropRight = dropRight;
        lodash2.dropRightWhile = dropRightWhile;
        lodash2.dropWhile = dropWhile;
        lodash2.fill = fill;
        lodash2.filter = filter;
        lodash2.flatMap = flatMap;
        lodash2.flatMapDeep = flatMapDeep;
        lodash2.flatMapDepth = flatMapDepth;
        lodash2.flatten = flatten;
        lodash2.flattenDeep = flattenDeep;
        lodash2.flattenDepth = flattenDepth;
        lodash2.flip = flip;
        lodash2.flow = flow;
        lodash2.flowRight = flowRight;
        lodash2.fromPairs = fromPairs;
        lodash2.functions = functions;
        lodash2.functionsIn = functionsIn;
        lodash2.groupBy = groupBy;
        lodash2.initial = initial;
        lodash2.intersection = intersection;
        lodash2.intersectionBy = intersectionBy;
        lodash2.intersectionWith = intersectionWith;
        lodash2.invert = invert;
        lodash2.invertBy = invertBy;
        lodash2.invokeMap = invokeMap;
        lodash2.iteratee = iteratee;
        lodash2.keyBy = keyBy;
        lodash2.keys = keys;
        lodash2.keysIn = keysIn;
        lodash2.map = map;
        lodash2.mapKeys = mapKeys;
        lodash2.mapValues = mapValues;
        lodash2.matches = matches;
        lodash2.matchesProperty = matchesProperty;
        lodash2.memoize = memoize2;
        lodash2.merge = merge;
        lodash2.mergeWith = mergeWith;
        lodash2.method = method;
        lodash2.methodOf = methodOf;
        lodash2.mixin = mixin;
        lodash2.negate = negate;
        lodash2.nthArg = nthArg;
        lodash2.omit = omit;
        lodash2.omitBy = omitBy;
        lodash2.once = once;
        lodash2.orderBy = orderBy;
        lodash2.over = over;
        lodash2.overArgs = overArgs;
        lodash2.overEvery = overEvery;
        lodash2.overSome = overSome;
        lodash2.partial = partial;
        lodash2.partialRight = partialRight;
        lodash2.partition = partition;
        lodash2.pick = pick;
        lodash2.pickBy = pickBy;
        lodash2.property = property;
        lodash2.propertyOf = propertyOf;
        lodash2.pull = pull;
        lodash2.pullAll = pullAll;
        lodash2.pullAllBy = pullAllBy;
        lodash2.pullAllWith = pullAllWith;
        lodash2.pullAt = pullAt;
        lodash2.range = range;
        lodash2.rangeRight = rangeRight;
        lodash2.rearg = rearg;
        lodash2.reject = reject;
        lodash2.remove = remove;
        lodash2.rest = rest;
        lodash2.reverse = reverse;
        lodash2.sampleSize = sampleSize;
        lodash2.set = set2;
        lodash2.setWith = setWith;
        lodash2.shuffle = shuffle;
        lodash2.slice = slice;
        lodash2.sortBy = sortBy;
        lodash2.sortedUniq = sortedUniq;
        lodash2.sortedUniqBy = sortedUniqBy;
        lodash2.split = split;
        lodash2.spread = spread;
        lodash2.tail = tail;
        lodash2.take = take;
        lodash2.takeRight = takeRight;
        lodash2.takeRightWhile = takeRightWhile;
        lodash2.takeWhile = takeWhile;
        lodash2.tap = tap;
        lodash2.throttle = throttle;
        lodash2.thru = thru;
        lodash2.toArray = toArray;
        lodash2.toPairs = toPairs;
        lodash2.toPairsIn = toPairsIn;
        lodash2.toPath = toPath;
        lodash2.toPlainObject = toPlainObject;
        lodash2.transform = transform;
        lodash2.unary = unary;
        lodash2.union = union;
        lodash2.unionBy = unionBy;
        lodash2.unionWith = unionWith;
        lodash2.uniq = uniq;
        lodash2.uniqBy = uniqBy;
        lodash2.uniqWith = uniqWith;
        lodash2.unset = unset;
        lodash2.unzip = unzip;
        lodash2.unzipWith = unzipWith;
        lodash2.update = update;
        lodash2.updateWith = updateWith;
        lodash2.values = values;
        lodash2.valuesIn = valuesIn;
        lodash2.without = without;
        lodash2.words = words;
        lodash2.wrap = wrap;
        lodash2.xor = xor;
        lodash2.xorBy = xorBy;
        lodash2.xorWith = xorWith;
        lodash2.zip = zip;
        lodash2.zipObject = zipObject;
        lodash2.zipObjectDeep = zipObjectDeep;
        lodash2.zipWith = zipWith;
        lodash2.entries = toPairs;
        lodash2.entriesIn = toPairsIn;
        lodash2.extend = assignIn;
        lodash2.extendWith = assignInWith;
        mixin(lodash2, lodash2);
        lodash2.add = add;
        lodash2.attempt = attempt;
        lodash2.camelCase = camelCase;
        lodash2.capitalize = capitalize;
        lodash2.ceil = ceil;
        lodash2.clamp = clamp;
        lodash2.clone = clone;
        lodash2.cloneDeep = cloneDeep;
        lodash2.cloneDeepWith = cloneDeepWith;
        lodash2.cloneWith = cloneWith;
        lodash2.conformsTo = conformsTo;
        lodash2.deburr = deburr;
        lodash2.defaultTo = defaultTo;
        lodash2.divide = divide;
        lodash2.endsWith = endsWith;
        lodash2.eq = eq2;
        lodash2.escape = escape2;
        lodash2.escapeRegExp = escapeRegExp;
        lodash2.every = every;
        lodash2.find = find;
        lodash2.findIndex = findIndex;
        lodash2.findKey = findKey;
        lodash2.findLast = findLast;
        lodash2.findLastIndex = findLastIndex;
        lodash2.findLastKey = findLastKey;
        lodash2.floor = floor;
        lodash2.forEach = forEach;
        lodash2.forEachRight = forEachRight;
        lodash2.forIn = forIn;
        lodash2.forInRight = forInRight;
        lodash2.forOwn = forOwn;
        lodash2.forOwnRight = forOwnRight;
        lodash2.get = get;
        lodash2.gt = gt;
        lodash2.gte = gte;
        lodash2.has = has;
        lodash2.hasIn = hasIn;
        lodash2.head = head;
        lodash2.identity = identity;
        lodash2.includes = includes;
        lodash2.indexOf = indexOf;
        lodash2.inRange = inRange;
        lodash2.invoke = invoke;
        lodash2.isArguments = isArguments;
        lodash2.isArray = isArray2;
        lodash2.isArrayBuffer = isArrayBuffer;
        lodash2.isArrayLike = isArrayLike;
        lodash2.isArrayLikeObject = isArrayLikeObject;
        lodash2.isBoolean = isBoolean;
        lodash2.isBuffer = isBuffer;
        lodash2.isDate = isDate;
        lodash2.isElement = isElement;
        lodash2.isEmpty = isEmpty;
        lodash2.isEqual = isEqual;
        lodash2.isEqualWith = isEqualWith;
        lodash2.isError = isError;
        lodash2.isFinite = isFinite;
        lodash2.isFunction = isFunction2;
        lodash2.isInteger = isInteger;
        lodash2.isLength = isLength;
        lodash2.isMap = isMap;
        lodash2.isMatch = isMatch;
        lodash2.isMatchWith = isMatchWith;
        lodash2.isNaN = isNaN2;
        lodash2.isNative = isNative;
        lodash2.isNil = isNil;
        lodash2.isNull = isNull;
        lodash2.isNumber = isNumber;
        lodash2.isObject = isObject2;
        lodash2.isObjectLike = isObjectLike2;
        lodash2.isPlainObject = isPlainObject;
        lodash2.isRegExp = isRegExp;
        lodash2.isSafeInteger = isSafeInteger;
        lodash2.isSet = isSet;
        lodash2.isString = isString;
        lodash2.isSymbol = isSymbol2;
        lodash2.isTypedArray = isTypedArray;
        lodash2.isUndefined = isUndefined;
        lodash2.isWeakMap = isWeakMap;
        lodash2.isWeakSet = isWeakSet;
        lodash2.join = join;
        lodash2.kebabCase = kebabCase;
        lodash2.last = last;
        lodash2.lastIndexOf = lastIndexOf;
        lodash2.lowerCase = lowerCase;
        lodash2.lowerFirst = lowerFirst;
        lodash2.lt = lt;
        lodash2.lte = lte;
        lodash2.max = max;
        lodash2.maxBy = maxBy;
        lodash2.mean = mean;
        lodash2.meanBy = meanBy;
        lodash2.min = min;
        lodash2.minBy = minBy;
        lodash2.stubArray = stubArray;
        lodash2.stubFalse = stubFalse;
        lodash2.stubObject = stubObject;
        lodash2.stubString = stubString;
        lodash2.stubTrue = stubTrue;
        lodash2.multiply = multiply;
        lodash2.nth = nth;
        lodash2.noConflict = noConflict;
        lodash2.noop = noop;
        lodash2.now = now;
        lodash2.pad = pad;
        lodash2.padEnd = padEnd;
        lodash2.padStart = padStart;
        lodash2.parseInt = parseInt2;
        lodash2.random = random;
        lodash2.reduce = reduce;
        lodash2.reduceRight = reduceRight;
        lodash2.repeat = repeat;
        lodash2.replace = replace;
        lodash2.result = result;
        lodash2.round = round;
        lodash2.runInContext = runInContext2;
        lodash2.sample = sample;
        lodash2.size = size;
        lodash2.snakeCase = snakeCase;
        lodash2.some = some;
        lodash2.sortedIndex = sortedIndex;
        lodash2.sortedIndexBy = sortedIndexBy;
        lodash2.sortedIndexOf = sortedIndexOf;
        lodash2.sortedLastIndex = sortedLastIndex;
        lodash2.sortedLastIndexBy = sortedLastIndexBy;
        lodash2.sortedLastIndexOf = sortedLastIndexOf;
        lodash2.startCase = startCase;
        lodash2.startsWith = startsWith;
        lodash2.subtract = subtract;
        lodash2.sum = sum;
        lodash2.sumBy = sumBy;
        lodash2.template = template;
        lodash2.times = times;
        lodash2.toFinite = toFinite;
        lodash2.toInteger = toInteger;
        lodash2.toLength = toLength;
        lodash2.toLower = toLower;
        lodash2.toNumber = toNumber;
        lodash2.toSafeInteger = toSafeInteger;
        lodash2.toString = toString2;
        lodash2.toUpper = toUpper;
        lodash2.trim = trim;
        lodash2.trimEnd = trimEnd;
        lodash2.trimStart = trimStart;
        lodash2.truncate = truncate;
        lodash2.unescape = unescape;
        lodash2.uniqueId = uniqueId;
        lodash2.upperCase = upperCase;
        lodash2.upperFirst = upperFirst;
        lodash2.each = forEach;
        lodash2.eachRight = forEachRight;
        lodash2.first = head;
        mixin(lodash2, function() {
          var source = {};
          baseForOwn(lodash2, function(func, methodName) {
            if (!hasOwnProperty2.call(lodash2.prototype, methodName)) {
              source[methodName] = func;
            }
          });
          return source;
        }(), { "chain": false });
        lodash2.VERSION = VERSION;
        arrayEach(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], function(methodName) {
          lodash2[methodName].placeholder = lodash2;
        });
        arrayEach(["drop", "take"], function(methodName, index2) {
          LazyWrapper.prototype[methodName] = function(n2) {
            n2 = n2 === undefined$1 ? 1 : nativeMax(toInteger(n2), 0);
            var result2 = this.__filtered__ && !index2 ? new LazyWrapper(this) : this.clone();
            if (result2.__filtered__) {
              result2.__takeCount__ = nativeMin(n2, result2.__takeCount__);
            } else {
              result2.__views__.push({
                "size": nativeMin(n2, MAX_ARRAY_LENGTH),
                "type": methodName + (result2.__dir__ < 0 ? "Right" : "")
              });
            }
            return result2;
          };
          LazyWrapper.prototype[methodName + "Right"] = function(n2) {
            return this.reverse()[methodName](n2).reverse();
          };
        });
        arrayEach(["filter", "map", "takeWhile"], function(methodName, index2) {
          var type = index2 + 1, isFilter = type == LAZY_FILTER_FLAG || type == LAZY_WHILE_FLAG;
          LazyWrapper.prototype[methodName] = function(iteratee2) {
            var result2 = this.clone();
            result2.__iteratees__.push({
              "iteratee": getIteratee(iteratee2, 3),
              "type": type
            });
            result2.__filtered__ = result2.__filtered__ || isFilter;
            return result2;
          };
        });
        arrayEach(["head", "last"], function(methodName, index2) {
          var takeName = "take" + (index2 ? "Right" : "");
          LazyWrapper.prototype[methodName] = function() {
            return this[takeName](1).value()[0];
          };
        });
        arrayEach(["initial", "tail"], function(methodName, index2) {
          var dropName = "drop" + (index2 ? "" : "Right");
          LazyWrapper.prototype[methodName] = function() {
            return this.__filtered__ ? new LazyWrapper(this) : this[dropName](1);
          };
        });
        LazyWrapper.prototype.compact = function() {
          return this.filter(identity);
        };
        LazyWrapper.prototype.find = function(predicate) {
          return this.filter(predicate).head();
        };
        LazyWrapper.prototype.findLast = function(predicate) {
          return this.reverse().find(predicate);
        };
        LazyWrapper.prototype.invokeMap = baseRest(function(path, args) {
          if (typeof path == "function") {
            return new LazyWrapper(this);
          }
          return this.map(function(value) {
            return baseInvoke(value, path, args);
          });
        });
        LazyWrapper.prototype.reject = function(predicate) {
          return this.filter(negate(getIteratee(predicate)));
        };
        LazyWrapper.prototype.slice = function(start, end) {
          start = toInteger(start);
          var result2 = this;
          if (result2.__filtered__ && (start > 0 || end < 0)) {
            return new LazyWrapper(result2);
          }
          if (start < 0) {
            result2 = result2.takeRight(-start);
          } else if (start) {
            result2 = result2.drop(start);
          }
          if (end !== undefined$1) {
            end = toInteger(end);
            result2 = end < 0 ? result2.dropRight(-end) : result2.take(end - start);
          }
          return result2;
        };
        LazyWrapper.prototype.takeRightWhile = function(predicate) {
          return this.reverse().takeWhile(predicate).reverse();
        };
        LazyWrapper.prototype.toArray = function() {
          return this.take(MAX_ARRAY_LENGTH);
        };
        baseForOwn(LazyWrapper.prototype, function(func, methodName) {
          var checkIteratee = /^(?:filter|find|map|reject)|While$/.test(methodName), isTaker = /^(?:head|last)$/.test(methodName), lodashFunc = lodash2[isTaker ? "take" + (methodName == "last" ? "Right" : "") : methodName], retUnwrapped = isTaker || /^find/.test(methodName);
          if (!lodashFunc) {
            return;
          }
          lodash2.prototype[methodName] = function() {
            var value = this.__wrapped__, args = isTaker ? [1] : arguments, isLazy = value instanceof LazyWrapper, iteratee2 = args[0], useLazy = isLazy || isArray2(value);
            var interceptor = function(value2) {
              var result3 = lodashFunc.apply(lodash2, arrayPush([value2], args));
              return isTaker && chainAll ? result3[0] : result3;
            };
            if (useLazy && checkIteratee && typeof iteratee2 == "function" && iteratee2.length != 1) {
              isLazy = useLazy = false;
            }
            var chainAll = this.__chain__, isHybrid = !!this.__actions__.length, isUnwrapped = retUnwrapped && !chainAll, onlyLazy = isLazy && !isHybrid;
            if (!retUnwrapped && useLazy) {
              value = onlyLazy ? value : new LazyWrapper(this);
              var result2 = func.apply(value, args);
              result2.__actions__.push({ "func": thru, "args": [interceptor], "thisArg": undefined$1 });
              return new LodashWrapper(result2, chainAll);
            }
            if (isUnwrapped && onlyLazy) {
              return func.apply(this, args);
            }
            result2 = this.thru(interceptor);
            return isUnwrapped ? isTaker ? result2.value()[0] : result2.value() : result2;
          };
        });
        arrayEach(["pop", "push", "shift", "sort", "splice", "unshift"], function(methodName) {
          var func = arrayProto2[methodName], chainName = /^(?:push|sort|unshift)$/.test(methodName) ? "tap" : "thru", retUnwrapped = /^(?:pop|shift)$/.test(methodName);
          lodash2.prototype[methodName] = function() {
            var args = arguments;
            if (retUnwrapped && !this.__chain__) {
              var value = this.value();
              return func.apply(isArray2(value) ? value : [], args);
            }
            return this[chainName](function(value2) {
              return func.apply(isArray2(value2) ? value2 : [], args);
            });
          };
        });
        baseForOwn(LazyWrapper.prototype, function(func, methodName) {
          var lodashFunc = lodash2[methodName];
          if (lodashFunc) {
            var key = lodashFunc.name + "";
            if (!hasOwnProperty2.call(realNames, key)) {
              realNames[key] = [];
            }
            realNames[key].push({ "name": methodName, "func": lodashFunc });
          }
        });
        realNames[createHybrid(undefined$1, WRAP_BIND_KEY_FLAG).name] = [{
          "name": "wrapper",
          "func": undefined$1
        }];
        LazyWrapper.prototype.clone = lazyClone;
        LazyWrapper.prototype.reverse = lazyReverse;
        LazyWrapper.prototype.value = lazyValue;
        lodash2.prototype.at = wrapperAt;
        lodash2.prototype.chain = wrapperChain;
        lodash2.prototype.commit = wrapperCommit;
        lodash2.prototype.next = wrapperNext;
        lodash2.prototype.plant = wrapperPlant;
        lodash2.prototype.reverse = wrapperReverse;
        lodash2.prototype.toJSON = lodash2.prototype.valueOf = lodash2.prototype.value = wrapperValue;
        lodash2.prototype.first = lodash2.prototype.head;
        if (symIterator) {
          lodash2.prototype[symIterator] = wrapperToIterator;
        }
        return lodash2;
      };
      var _ = runInContext();
      if (freeModule) {
        (freeModule.exports = _)._ = _;
        freeExports._ = _;
      } else {
        root2._ = _;
      }
    }).call(commonjsGlobal);
  })(lodash, lodash.exports);
  const _ThemeServices = class {
    constructor(targetId) {
      __publicField(this, "_targetId");
      __publicField(this, "selectedThemePayload");
      __publicField(this, "notifySubscribers", (path, theme) => {
        var _a;
        if (!theme)
          return;
        if (!path)
          path = [];
        const key = lodash.exports.isArray(path) ? path.join(".") : path;
        if (_ThemeServices.subscriptions.has(key)) {
          (_a = _ThemeServices.subscriptions.get(key)) == null ? void 0 : _a.forEach((subscriptions) => {
            subscriptions.forEach((listener) => listener(theme));
          });
        }
      });
      __publicField(this, "getThemeVariants", () => Promise.resolve(this.selectedThemePayload));
      __publicField(this, "getThemeVariant", (variantId) => {
        var _a;
        return (_a = this.selectedThemePayload.themeVariants) == null ? void 0 : _a.find(
          (themeVariant) => themeVariant.variantId === variantId
        );
      });
      var _a, _b;
      this.selectedThemePayload = getAmbrosiaProperty(
        Globals$1.ambrosiaJson,
        "selectedThemePayload"
      );
      const selectedVariant = ((_b = (_a = this.selectedThemePayload) == null ? void 0 : _a.themeVariants) == null ? void 0 : _b.find(
        (variant) => variant.state === "DEFAULT"
      )) || {};
      if (!Globals$1.theme) {
        Globals$1.theme = Object.keys(selectedVariant).length ? JSON.parse(selectedVariant.config || "{}") : getAmbrosiaProperty(Globals$1.ambrosiaJson, "activityTheme");
      }
      this._targetId = targetId;
      EventServices.createSubscription("removePlugin", (event) => {
        _ThemeServices.cleanPluginSubscriptions(event.detail.instanceId);
      });
    }
    async getInTheme(path) {
      if (path) {
        let key = "";
        if (Array.isArray(path)) {
          if (path.length === 0) {
            return Globals$1.theme;
          }
          if (path.length === 1) {
            key = path[0];
          }
        }
        if (typeof path === "string") {
          key = path;
        }
        return Globals$1.theme[key] ? Globals$1.theme[key] : {};
      }
      return Globals$1.theme;
    }
    async subscribeToTheme(path, callback, coursewareId) {
      var _a, _b, _c, _d;
      if (!path)
        path = [];
      const key = lodash.exports.isArray(path) ? path.join(".") : path;
      if (!_ThemeServices.subscriptions.has(key))
        _ThemeServices.subscriptions.set(
          key,
          /* @__PURE__ */ new Map()
        );
      if (!((_a = _ThemeServices.subscriptions.get(key)) == null ? void 0 : _a.get(coursewareId))) {
        (_b = _ThemeServices.subscriptions.get(key)) == null ? void 0 : _b.set(coursewareId, [callback]);
      } else {
        (_d = (_c = _ThemeServices.subscriptions.get(key)) == null ? void 0 : _c.get(coursewareId)) == null ? void 0 : _d.push(callback);
      }
      const themePart = await this.getInTheme(path);
      if (themePart !== void 0 && themePart !== null) {
        callback(themePart);
      }
      return {
        type: constants_1.THEME_SERVICE,
        unsubscribe: () => {
          var _a2, _b2, _c2, _d2, _e, _f, _g, _h;
          const listenerIndex = (_b2 = (_a2 = _ThemeServices.subscriptions.get(key)) == null ? void 0 : _a2.get(coursewareId)) == null ? void 0 : _b2.findIndex((listener) => listener === callback);
          if (listenerIndex !== 0 && !listenerIndex || listenerIndex === -1)
            return;
          (_d2 = (_c2 = _ThemeServices.subscriptions.get(key)) == null ? void 0 : _c2.get(coursewareId)) == null ? void 0 : _d2.splice(listenerIndex, 1);
          if (((_f = (_e = _ThemeServices.subscriptions.get(key)) == null ? void 0 : _e.get(coursewareId)) == null ? void 0 : _f.length) === 0)
            (_g = _ThemeServices.subscriptions.get(key)) == null ? void 0 : _g.delete(coursewareId);
          if (((_h = _ThemeServices.subscriptions.get(key)) == null ? void 0 : _h.size) === 0)
            _ThemeServices.subscriptions.delete(key);
        }
      };
    }
    async setInTheme(theme, path) {
      if (!path)
        path = [];
      if (!theme || !Object.keys(theme).length)
        return;
      if (path && path.length > 0) {
        const keyPath = Array.isArray(path) ? path.join(".") : path;
        set_1(Globals$1.theme, keyPath, theme);
      } else {
        Globals$1.theme = theme;
      }
      this.notifySubscribers(path, theme);
    }
    static build(args) {
      return new _ThemeServices(args);
    }
  };
  let ThemeServices = _ThemeServices;
  __publicField(ThemeServices, "subscriptions", /* @__PURE__ */ new Map());
  __publicField(ThemeServices, "cleanPluginSubscriptions", (coursewareId) => {
    _ThemeServices.subscriptions.forEach((subscription) => {
      if (subscription.has(coursewareId)) {
        subscription.delete(coursewareId);
      }
    });
  });
  class DeprecatedServices {
    constructor({ id: id2 }) {
      __publicField(this, "id");
      __publicField(this, "subscriptions", /* @__PURE__ */ new Map());
      this.id = id2;
    }
    moveOn() {
      this.subscriptions.forEach((notifyFn) => {
        notifyFn();
      });
    }
    subscribeToMoveOn(_targetId, notify) {
      const uuid = v4();
      this.subscriptions.set(uuid, notify);
      return uuid;
    }
    unsubscribeFromMoveOn(subscription) {
      this.subscriptions.delete(subscription);
    }
    static build(args) {
      return new DeprecatedServices(args);
    }
  }
  class FeatureFlagServices {
    constructor(data) {
      __publicField(this, "featureFlags");
      __publicField(this, "subscriptions", []);
      data = data != null ? data : Globals$1.featureFlagData;
      this.featureFlags = data.reduce(
        (obj, item) => (obj[item.key] = item.active, obj),
        {}
      );
    }
    get() {
      return this.featureFlags;
    }
    is(name) {
      return this.featureFlags[name];
    }
    set(data) {
      this.featureFlags[data.name] = data.isSet;
      this.notifyListeners(data.name);
      return this.featureFlags[data.name];
    }
    notifyListeners(featureFlagThatChanged) {
      var _a;
      (_a = this.subscriptions) == null ? void 0 : _a.forEach((item) => {
        if (item.flag === featureFlagThatChanged) {
          item.callback({
            name: featureFlagThatChanged,
            isSet: this.featureFlags[featureFlagThatChanged]
          });
        }
      });
    }
    subscribe(featureFlag, callbackFn) {
      const newSubscription = {
        flag: featureFlag,
        callback: callbackFn
      };
      this.subscriptions.push(newSubscription);
      return (flag) => this.unsubscribe(flag);
    }
    unsubscribe(flag) {
      this.subscriptions = this.subscriptions.filter((sub) => sub.flag !== flag);
    }
    static build() {
      return new FeatureFlagServices();
    }
  }
  const _RouteServices = class {
    constructor({ target }) {
      __publicField(this, "currentTarget");
      __publicField(this, "_target");
      this._target = target;
      this.currentTarget = void 0;
    }
    getRoute() {
      var _a;
      return (_a = this.currentTarget) != null ? _a : this._target;
    }
    routeTo(_subTarget) {
      this.currentTarget = {
        ...this._target
      };
      if ((_subTarget == null ? void 0 : _subTarget.ref) && (_subTarget == null ? void 0 : _subTarget.elementRef)) {
        this.currentTarget = { ...this.currentTarget, subTarget: { ..._subTarget } };
        _RouteServices.annotationTarget = this.currentTarget;
      }
      this.notifySubscribers();
    }
    subscribeToRoute(listener, coursewareId) {
      const subscription = { coursewareId, listener };
      _RouteServices.subscribers.push(subscription);
      if (this.currentTarget) {
        listener(this.currentTarget);
      }
      if (_RouteServices.annotationTarget) {
        listener(_RouteServices.annotationTarget);
      }
      return {
        type: constants_1.ROUTE_SERVICE,
        unsubscribe: () => this.unsubscribeByCoursewareId(coursewareId)
      };
    }
    unsubscribeByCoursewareId(coursewareId) {
      _RouteServices.subscribers = _RouteServices.subscribers.filter(
        (element) => element.coursewareId !== coursewareId
      );
    }
    notifySubscribers() {
      _RouteServices.subscribers.forEach(
        (subscription) => subscription.listener(this.currentTarget)
      );
    }
    static build(args) {
      return new _RouteServices(args);
    }
  };
  let RouteServices = _RouteServices;
  __publicField(RouteServices, "subscribers", []);
  __publicField(RouteServices, "annotationTarget");
  const _AnnotationsServices = class {
    constructor({ target }) {
      __publicField(this, "target");
      this.target = target;
    }
    getAnnotationsByMotivation(motivation) {
      return this.initializeAnnotations(motivation);
    }
    getAnnotationById(motivation, annotationId) {
      this.validateMotivation(motivation);
      const annotations = window.annotations;
      return annotations && this.mapAnnotationObject(annotations[annotationId], annotationId);
    }
    subscribeToAnnotationMotivation(motivation, callback) {
      const annotations = this.initializeAnnotations(motivation);
      const subscriptionId = v4();
      if (annotations) {
        const motivationSubscription = __privateGet(_AnnotationsServices, _subscriptions3).get(motivation);
        if (motivationSubscription) {
          motivationSubscription[this.target.id].set(subscriptionId, callback);
        } else {
          const newSubscription = /* @__PURE__ */ new Map();
          newSubscription.set(subscriptionId, callback);
          __privateGet(_AnnotationsServices, _subscriptions3).set(motivation, { [this.target.id]: newSubscription });
        }
        callback(
          annotations == null ? void 0 : annotations.filter(
            (annotation) => {
              var _a;
              return annotation.target.id === this.target.id || ((_a = annotation.target.ancestry) == null ? void 0 : _a.some(
                (ancestor) => ancestor.elementId === this.target.id
              ));
            }
          )
        );
      }
      return () => {
        const motivationSubscription = __privateGet(_AnnotationsServices, _subscriptions3).get(motivation);
        if (motivationSubscription) {
          motivationSubscription[this.target.id].delete(subscriptionId);
        }
      };
    }
    setAnnotationBody(annotationId, body) {
      const targetedMotivation = MOTIVATIONS.MOTIVATION_IDENTIFYING;
      let annotations = this.initializeAnnotations(MOTIVATIONS.MOTIVATION_IDENTIFYING);
      annotations = annotations.map((annotation) => {
        if (annotation.id === annotationId) {
          return { ...annotation, body };
        } else {
          return annotation;
        }
      });
      const subscriptionsByMotivation = __privateGet(_AnnotationsServices, _subscriptions3).get(targetedMotivation);
      subscriptionsByMotivation && annotations && subscriptionsByMotivation[this.target.id].forEach((callback) => {
        callback(
          annotations == null ? void 0 : annotations.filter(
            (annotation) => {
              var _a;
              return annotation.target.id === this.target.id || ((_a = annotation.target.ancestry) == null ? void 0 : _a.some((ancestor) => ancestor.elementId === this.target.id));
            }
          )
        );
      });
    }
    initializeAnnotations(motivation) {
      this.validateMotivation(motivation);
      const annotations = window.annotations;
      return annotations && Object.keys(annotations).map((annotationId) => {
        return this.mapAnnotationObject(annotations[annotationId], annotationId);
      });
    }
    mapAnnotationObject(annotation, annotationId) {
      return {
        id: annotationId,
        target: {
          id: annotation.tid,
          subTarget: {
            elementRef: annotation.rid
          }
        },
        body: [
          {
            purpose: MOTIVATIONS.MOTIVATION_IDENTIFYING,
            value: "dummy"
          }
        ]
      };
    }
    validateMotivation(motivation) {
      if (!Object.values(MOTIVATIONS).includes(motivation)) {
        throw new Error(
          `Invalid motivation (${motivation}), must be one of ${Object.values(MOTIVATIONS).join(
            ", "
          )}`
        );
      }
    }
    static build(args) {
      return new _AnnotationsServices(args);
    }
  };
  let AnnotationsServices = _AnnotationsServices;
  _subscriptions3 = new WeakMap();
  __privateAdd(AnnotationsServices, _subscriptions3, /* @__PURE__ */ new Map());
  function init(coursewareId, initialState, element, entryPoint, ambrosiaJson, offlinePackagePath, cohortId, deploymentId, featureFlagData, successCallback, getContent) {
    Globals$1.isForcedOffline = true;
    Globals$1.ambrosiaJson = createAmbrosiaCoursewareItem(ambrosiaJson);
    Globals$1.offlinePackagePath = offlinePackagePath;
    Globals$1.cohortId = cohortId;
    Globals$1.deploymentId = deploymentId;
    Globals$1.featureFlagData = featureFlagData;
    Globals$1.getContent = getContent;
    const { services, ApiDriver: ApiDriver2 } = getDefault();
    registerServices(services);
    const iFrame = getRootIframe();
    element == null ? void 0 : element.appendChild(iFrame);
    CoursewareItemServices.setState(coursewareId, {
      pathToMathJax: `${getPackagePath()}/lib/MathJax2.7.7/MathJax.js?config=TeX-MML-AM_SVG`,
      ...initialState
    });
    ApiDriver2.listenForConnectionsInLearnspace(
      coursewareId,
      iFrame,
      "LEARNER",
      "ACTIVITY",
      (Subscriptions2) => {
        subscriptionsCallback(Subscriptions2, successCallback);
      }
    );
    iFrame.src = entryPoint + "#parent";
    return {
      services
    };
  }
  let isInitialized = false;
  const subscriptionsCallback = (allSubscriptions, successCallback) => {
    if (isInitialized) {
      return;
    }
    const subscriptions = Object.values(allSubscriptions || {});
    if (subscriptions.length) {
      const isRouteSubscribed = subscriptions.find(
        (subscription) => subscription.type === constants_1.ROUTE_SERVICE
      );
      const isThemeSubscribed = subscriptions.find(
        (subscription) => subscription.type === constants_1.THEME_SERVICE
      );
      if (isRouteSubscribed && isThemeSubscribed) {
        isInitialized = true;
        successCallback();
      }
    }
  };
  const registerServices = (services) => {
    const {
      ASSET_SERVICE: ASSET_SERVICE2,
      COURSEWARE_ITEM_SERVICE: COURSEWARE_ITEM_SERVICE2,
      COURSEWARE_TARGET_SERVICE: COURSEWARE_TARGET_SERVICE2,
      DEPRECATED_RESOURCE_SERVICE: DEPRECATED_RESOURCE_SERVICE2,
      EDITOR_SERVICE: EDITOR_SERVICE2,
      EVENT_SERVICE: EVENT_SERVICE2,
      FEATURE_FLAG_SERVICE: FEATURE_FLAG_SERVICE2,
      LIFECYCLE_SERVICE: LIFECYCLE_SERVICE2,
      PLUGIN_SERVICE: PLUGIN_SERVICE2,
      THEME_SERVICE: THEME_SERVICE2,
      USER_SERVICE: USER_SERVICE2,
      QUERY_SERVICE: QUERY_SERVICE2,
      ROUTE_SERVICE: ROUTE_SERVICE2,
      ANNOTATIONS_SERVICE: ANNOTATIONS_SERVICE2
    } = constants_1;
    services.add(COURSEWARE_TARGET_SERVICE2, CoursewareTargetServices).add(COURSEWARE_ITEM_SERVICE2, CoursewareItemServices).add(FEATURE_FLAG_SERVICE2, FeatureFlagServices).add(EVENT_SERVICE2, EventServices).add(EDITOR_SERVICE2, FakeService).add(THEME_SERVICE2, ThemeServices).add(USER_SERVICE2, FakeService).add(ASSET_SERVICE2, FakeService).add(PLUGIN_SERVICE2, PluginServices).add(QUERY_SERVICE2, FakeService).add(DEPRECATED_RESOURCE_SERVICE2, DeprecatedServices).add(LIFECYCLE_SERVICE2, LifecycleServices).add(ROUTE_SERVICE2, RouteServices).add(ANNOTATIONS_SERVICE2, AnnotationsServices).add(ASSET_SERVICE2, AssetService);
  };
  const getRootIframe = () => {
    const iframe = document.createElement("iframe");
    iframe.style.background = "none";
    iframe.style.border = "none";
    iframe.style.width = "100%";
    iframe.style.height = "100%";
    iframe.style.maxWidth = "100%";
    iframe.setAttribute("allow", "fullscreen");
    iframe.setAttribute("allowfullscreen", "");
    return iframe;
  };
  class OfflineRenderer {
    constructor(viewerConfig) {
      __publicField(this, "viewerConfig");
      __publicField(this, "loadAmbrosia", (initOfflineServices) => {
        const ambrosia = `${this.viewerConfig.offlinePackagePath}/ambrosia.js`;
        loadScript(ambrosia, () => this.loadManifest(initOfflineServices));
      });
      __publicField(this, "loadManifest", (initOfflineServices) => {
        var _a, _b;
        const manifest = `${this.viewerConfig.offlinePackagePath}/plugins/${(_b = (_a = window.ambrosia.pluginPayload) == null ? void 0 : _a.summary) == null ? void 0 : _b.pluginId}/manifest.js`;
        loadScript(manifest, () => this.loadFeatureFlags(initOfflineServices));
      });
      __publicField(this, "loadFeatureFlags", (initOfflineServices) => {
        const featureFlag = `${this.viewerConfig.offlinePackagePath}/featureFlag.js`;
        loadScript(featureFlag, () => initOfflineServices());
      });
      __publicField(this, "loadAnnotations", () => {
        loadScript(`${this.viewerConfig.offlinePackagePath}/annotations.js`, () => {
        });
      });
      this.viewerConfig = viewerConfig;
    }
    async init(successCallback, _errorCallback) {
      console.log("***** Offline renderer init ******");
      const initOfflineServices = () => {
        const pluginId = window.ambrosia.pluginPayload.summary.pluginId;
        const { entryPoint, publicDir } = window.manifest.views.LEARNER;
        const srcFile = `${this.viewerConfig.offlinePackagePath}/plugins/${pluginId.trim()}/${publicDir}/${entryPoint}`;
        const { services } = init(
          window.ambrosia.$id,
          window.ambrosia.config,
          this.viewerConfig.domElement,
          srcFile,
          window.ambrosia,
          this.viewerConfig.offlinePackagePath,
          this.viewerConfig.cohortId,
          this.viewerConfig.deploymentId,
          window.featureFlag,
          () => {
            successCallback({ cdpServices: services }, window.ambrosia["$id"]);
          },
          this.viewerConfig.getContent ? this.viewerConfig.getContent : (filename) => {
            return fetch(this.viewerConfig.offlinePackagePath + "/" + filename).then(
              (response) => response.json()
            );
          }
        );
      };
      this.loadAmbrosia(initOfflineServices);
      this.loadAnnotations();
    }
  }
  class Viewer {
    constructor(viewerConfig, graphqlEndpoint, webSocketUrl) {
      __publicField(this, "viewerConfig");
      __publicField(this, "coursewareItemId");
      __publicField(this, "graphqlEndpoint");
      __publicField(this, "webSocketUrl");
      __publicField(this, "services");
      __publicField(this, "init", async () => {
        let _renderer;
        console.log("********* Initializing Renderer", this.viewerConfig.renderer);
        switch (this.viewerConfig.renderer || RendererTypes.WEB) {
          case RendererTypes.MOBILE: {
            console.log("********* Initializing Mobile Renderer");
            _renderer = new OfflineRenderer(this.viewerConfig);
            break;
          }
          case RendererTypes.WEB: {
            console.log("********** Initializing Web Renderer");
            _renderer = {};
            _renderer.init = () => null;
            break;
          }
        }
        _renderer.init(this.successCallback, this.errorCallback);
      });
      __publicField(this, "successCallback", (services, coursewareItemId) => {
        if (!services) {
          console.error("Unable to register services");
        }
        this.services = services;
        this.coursewareItemId = coursewareItemId;
        this.registerEvents();
      });
      __publicField(this, "errorCallback", (error) => console.error("Error registering services", { error }));
      this.viewerConfig = viewerConfig;
      this.graphqlEndpoint = graphqlEndpoint;
      this.webSocketUrl = webSocketUrl;
      this.init();
    }
    registerEvents() {
      var _a, _b, _c;
      ((_a = this.viewerConfig.events) == null ? void 0 : _a.onReady) && this.viewerConfig.events.onReady();
      if ((_b = this.viewerConfig.events) == null ? void 0 : _b.onRouteChange) {
        const routeService = this.services.cdpServices.get("ROUTE_SERVICE").build({
          target: { id: null }
        });
        routeService.subscribeToRoute(this.viewerConfig.events.onRouteChange);
      }
      if ((_c = this.viewerConfig.events) == null ? void 0 : _c.onImageClick) {
        const eventService = this.services.cdpServices.get("EVENT_SERVICE").build();
        eventService.subscribe("img.click.event", this.viewerConfig.events.onImageClick);
      }
    }
  }
  var Viewer$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
    __proto__: null,
    Viewer
  }, Symbol.toStringTag, { value: "Module" }));
});

</script>
  <style type="text/css">
.menu {
  display: flex;
  flex-direction: column;
  border: 1px solid #aaa;
  background: #f5f5f5;
  width: 90px;
  height: 100%;
}
.menu hr {
  background-color: #bbb;
  height: 1px;
  border: 0;
}
.menu .menu-items {
  flex: 1;
}
.menu .menu-item {
  display: block;
  width: 100%;
  height: 70px;
  border: none;
  cursor: pointer;
  background-position: center center;
  background-repeat: no-repeat;
}
.menu .menu-item.home {
  background-image: url("./home.a1ea45b9.svg");
}
.menu .menu-item.toc {
  background-image: url("./list.b2287252.svg");
}
.menu .menu-item.navigation {
  background-image: url("./navigation.cdd25599.svg");
}
.menu .menu-item.search {
  background-image: url("./search.22bfa047.svg");
}
.menu .menu-item.notebook {
  background-image: url("./notebook.94e6ec08.svg");
}
.menu .menu-item.study {
  background-image: url("./flashcards.e68ff4bf.svg");
}
.menu .menu-item.settings {
  background-image: url("./font.b08d56f7.svg");
}
.menu .menu-item.close {
  background-image: url("./close.6ff0f10d.svg");
}
.menu .menu-item:hover:not(:active) {
  background-color: #e1e1e1;
}.toc-drawer .tabs {
  display: flex;
  padding: 15px;
}
.toc-drawer .tabs .tab-item {
  flex-grow: 1;
  padding: 0 5px;
  min-height: 40px;
  font-weight: 700;
  text-align: center;
  cursor: pointer;
}
.toc-drawer .toc {
  overflow: auto;
  padding: 0 0 20px 0;
}
.toc-drawer .toc > ul {
  margin-left: -15px;
}
.toc-drawer .toc ul {
  list-style-type: none;
}
.toc-drawer .toc ul li {
  cursor: pointer;
  padding: 0 0 0 15px;
}
.toc-drawer .toc ul li.active > button {
  background-color: lightgray;
}
.toc-drawer .toc ul li button {
  width: 100%;
  color: #000;
  text-decoration: none;
  padding: 15px;
  border: 0;
  border-bottom: 1px solid #ccc;
  cursor: pointer;
  font-size: 16px;
  text-align: left;
}
.toc-drawer .toc ul li button:hover {
  text-decoration: underline;
}
.toc-drawer .close-icon {
  width: 24px;
  max-width: 100%;
  height: 24px;
  float: left;
  margin-left: 8px;
  background: url("./close.6ff0f10d.svg") no-repeat;
}.settings-drawer .theme-button-row-label {
  padding: 10px;
}
.settings-drawer .theme-button-row {
  display: flex;
}
.settings-drawer .theme-button-row .range-slider {
  flex: 1;
  padding: 10px;
}
.settings-drawer .theme-button-row .range-slider input {
  width: 100%;
}
.settings-drawer .theme-button-row .action-button {
  flex-grow: 1;
  padding: 10px;
  margin: 10px;
  border-radius: 5px;
  cursor: pointer;
  color: rgb(51, 51, 51);
  background-color: rgb(247, 249, 253);
}
.settings-drawer .theme-button-row .action-button.dark {
  background-color: rgb(16, 16, 16);
  color: rgb(254, 254, 254);
  border: 1px solid rgb(174, 144, 255);
}
.settings-drawer .theme-button-row .action-button.sepia {
  color: rgb(51, 51, 51);
  border: 1px solid rgb(233, 227, 189);
  background-color: rgb(244, 242, 228);
}
.settings-drawer .close-icon {
  width: 24px;
  max-width: 100%;
  height: 24px;
  float: left;
  margin-left: 8px;
  background: url("./close.6ff0f10d.svg") no-repeat;
}
.settings-drawer .theme-font-option {
  margin: 10px 0 10px 10px;
  display: block;
}.drawer {
  width: 400px;
  padding: 0;
  border-right: 1px solid #aaa;
  background-color: #eee;
  display: flex;
  flex-direction: column;
}
.drawer h3 {
  background-color: #aaa;
  padding: 15px;
}
.drawer .header {
  display: flex;
  justify-content: space-between;
  flex-direction: row;
}
.drawer .header .title {
  flex: 1;
}
.drawer .header .close-button {
  width: 40px;
  border: 0;
}.env-toggle-button {
  position: absolute;
  top: 16px;
  right: 15px;
  background: none;
  border: 0;
  cursor: pointer;
  font-size: 16px;
  font-weight: bold;
  color: rgb(0, 100, 200);
}

.environment-form form {
  padding: 10px 15px;
}
.environment-form form > div {
  margin-bottom: 10px;
}
.environment-form form > div label {
  margin-right: 20px;
  width: 250px;
  display: inline-block;
}
.environment-form form > div input[type=text],
.environment-form form > div select {
  width: 400px;
  font-size: 16px;
}
.environment-form form > div button {
  width: 70px;
  padding: 5px;
  margin-left: 270px;
}
.environment-form form > div .example-url {
  margin: 10px 0 10px 270px;
  color: #808080;
  font-size: 14px;
}
.environment-form form > div .example-url.black {
  color: #000;
}* {
  padding: 0;
  margin: 0;
}

html,
body {
  width: 100%;
  height: 100%;
  font-family: Arial, Helvetica, sans-serif;
}

#root {
  display: flex;
  flex-direction: column;
  height: 100%;
}
#root .app-title {
  background-color: rgba(170, 170, 170, 0.119);
  padding: 15px;
  margin-bottom: 10px;
}
#root .app-shell {
  height: calc(100% - 62px);
}
#root .app-shell .content-wrapper {
  display: flex;
  flex: 1;
  height: 100%;
}
#root .app-shell .content-wrapper .content {
  flex: 1;
  display: flex;
  flex-direction: column;
}
#root .app-shell .content-wrapper .content h3 {
  background-color: rgba(170, 170, 170, 0.119);
  padding: 15px;
}
#root .app-shell .content-wrapper .content .message {
  padding: 15px;
  font-weight: bold;
  text-align: center;
  color: green;
  border-bottom: 1px solid #aaa;
  background-color: rgba(170, 170, 170, 0.119);
}
#root .app-shell .content-wrapper .content .content-frame-container {
  display: flex;
  flex: 1;
  position: relative;
}
#root .app-shell .content-wrapper .content .content-frame-container .content-frame {
  flex: 1;
}
#root .app-shell .content-wrapper .content .content-frame-container .content-frame iframe {
  border: 0;
}
#root .app-shell .content-wrapper .content .content-frame-container .navigation-button {
  background-color: #f7f9fe;
  border: none;
  border-radius: 40px;
  height: 40px;
  min-width: 40px;
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  cursor: pointer;
  z-index: 1;
  padding-left: 10px;
  padding-right: 10px;
  position: absolute;
  bottom: 30px;
}
#root .app-shell .content-wrapper .content .content-frame-container .navigation-button span {
  display: none;
}
#root .app-shell .content-wrapper .content .content-frame-container .navigation-button:hover span {
  display: inline;
}
#root .app-shell .content-wrapper .content .content-frame-container .previous-button {
  left: 30px;
}
#root .app-shell .content-wrapper .content .content-frame-container .next-button {
  right: 30px;
}

.modal-backdrop {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 999;
  background: rgba(0, 0, 0, 0.5);
}
.modal-backdrop + .modal-content {
  position: absolute;
  top: 40px;
  right: 40px;
  bottom: 40px;
  left: 40px;
  z-index: 1000;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 40px;
  background: #fff;
}
.modal-backdrop + .modal-content .zoomable-image {
  max-width: 100%;
  max-height: 100%;
}
</style>
</head>

<body>
  <input type="hidden" id="pi_user_id" />
  <div id="root"></div>
  
</body>

</html>
